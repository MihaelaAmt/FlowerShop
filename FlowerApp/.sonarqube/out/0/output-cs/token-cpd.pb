à
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\ApplicationUser.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser# /
{ 
public		 
DateTime		 
	Birthdate		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} „
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\FlowerShopClaimTypes.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class  
FlowerShopClaimTypes %
{ 
public		 
static		 
List		 
<		 
string		 !
>		! "

ClaimsList		# -
{		. /
get		0 3
;		3 4
set		5 8
;		8 9
}		: ;
=		< =
new		> A
List		B F
<		F G
string		G M
>		M N
{		O P
$str		Q `
,		` a
$str		b n
,		n o
$str			p Ç
}
		É Ñ
;
		Ñ Ö
}

 
} ˚
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\AdminMenuItem.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
	AdminMenu 
: 
ViewComponent *
{ 
public		  
IViewComponentResult		 #
Invoke		$ *
(		* +
)		+ ,
{

 	
var 
	menuItems 
= 
new 
List  $
<$ %
AdminMenuItem% 2
>2 3
{4 5
new6 9
AdminMenuItem: G
(G H
)H I
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem "
(" #
)# $
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem #
(# $
)$ %
{ 
DisplayValue  
=! "
$str# 6
,6 7
ActionValue 
=  !
$str" 4
}   
,   
}!! 
;!! 
return$$ 
View$$ 
($$ 
	menuItems$$ !
)$$! "
;$$" #
}%% 	
}&& 
public)) 

class)) 
AdminMenuItem)) 
{** 
public,, 
string,, 
DisplayValue,, "
{,,# $
get,,% (
;,,( )
set,,* -
;,,- .
},,/ 0
public// 
string// 
ActionValue// !
{//" #
get//$ '
;//' (
set//) ,
;//, -
}//. /
}00 
}11 ‹	
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\CategoryMenu.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
CategoryMenu 
: 
ViewComponent  -
{		 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
CategoryMenu 
( 
ICategoryRepository /
categoryRepository0 B
)B C
{ 	
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 

categories 
= 
_categoryRepository 0
.0 1

Categories1 ;
.; <
OrderBy< C
(C D
cD E
=>F H
cI J
.J K
CategoryNameK W
)W X
;X Y
return 
View 
( 

categories "
)" #
;# $
} 	
} 
} €
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\ShoppingCartSummary.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
ShoppingCartSummary $
:% &
ViewComponent' 4
{		 
private

 
readonly

 
ShoppingCart

 %
_shoppingCart

& 3
;

3 4
public 
ShoppingCartSummary "
(" #
ShoppingCart# /
shoppingCart0 <
)< =
{ 	
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var 
shoppingViewModel !
=" #
new$ '!
ShoppingCartViewModel( =
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return   
View   
(   
shoppingViewModel   )
)  ) *
;  * +
}!! 	
}"" 
}## Ó1
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AccountController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
,I J
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[ 	
AllowAnonymous	 
] 
public 
IActionResult 
Login "
(" #
string# )
	returnUrl* 3
)3 4
{ 	
return   
View   
(   
new   
LoginViewModel   *
{!! 
	ReturnUrl"" 
="" 
	returnUrl"" %
}## 
)## 
;## 
}$$ 	
['' 	
HttpPost''	 
]'' 
[** 	
AllowAnonymous**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
Login++) .
(++. /
LoginViewModel++/ =
loginViewModel++> L
)++L M
{,, 	
if-- 
(-- 
!-- 

ModelState-- 
.-- 
IsValid-- #
)--# $
return.. 
View.. 
(.. 
loginViewModel.. *
)..* +
;..+ ,
var00 
user00 
=00 
await00 
_userManager00 )
.00) *
FindByNameAsync00* 9
(009 :
loginViewModel00: H
.00H I
UserName00I Q
)00Q R
;00R S
if22 
(22 
user22 
!=22 
null22 
)22 
{33 
var55 
result55 
=55 
await55 "
_signInManager55# 1
.551 2
PasswordSignInAsync552 E
(55E F
user55F J
,55J K
loginViewModel55L Z
.55Z [
Password55[ c
,55c d
false55e j
,55j k
false55l q
)55q r
;55r s
if88 
(88 
result88 
.88 
	Succeeded88 $
)88$ %
{99 
if;; 
(;; 
string;; 
.;; 
IsNullOrEmpty;; ,
(;;, -
loginViewModel;;- ;
.;;; <
	ReturnUrl;;< E
);;E F
);;F G
return<< 
RedirectToAction<< /
(<</ 0
$str<<0 7
,<<7 8
$str<<9 ?
)<<? @
;<<@ A
return>> 
Redirect>> #
(>># $
loginViewModel>>$ 2
.>>2 3
	ReturnUrl>>3 <
)>>< =
;>>= >
}?? 
}@@ 

ModelStateBB 
.BB 
AddModelErrorBB $
(BB$ %
$strBB% '
,BB' (
$strBB) F
)BBF G
;BBG H
returnDD 
ViewDD 
(DD 
loginViewModelDD &
)DD& '
;DD' (
}EE 	
[HH 	
AllowAnonymousHH	 
]HH 
publicII 
IActionResultII 
RegisterII %
(II% &
)II& '
{JJ 	
returnKK 
ViewKK 
(KK 
)KK 
;KK 
}LL 	
[OO 	
HttpPostOO	 
]OO 
[PP 	$
ValidateAntiForgeryTokenPP	 !
]PP! "
[QQ 	
AllowAnonymousQQ	 
]QQ 
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' (
RegisterRR) 1
(RR1 2
LoginViewModelRR2 @
loginViewModelRRA O
)RRO P
{SS 	
ifTT 
(TT 

ModelStateTT 
.TT 
IsValidTT "
)TT" #
{UU 
varWW 
userWW 
=WW 
newWW 
ApplicationUserWW .
(WW. /
)WW/ 0
{WW1 2
UserNameWW3 ;
=WW< =
loginViewModelWW> L
.WWL M
UserNameWWM U
}WWV W
;WWW X
varXX 
resultXX 
=XX 
awaitXX "
_userManagerXX# /
.XX/ 0
CreateAsyncXX0 ;
(XX; <
userXX< @
,XX@ A
loginViewModelXXB P
.XXP Q
PasswordXXQ Y
)XXY Z
;XXZ [
if[[ 
([[ 
result[[ 
.[[ 
	Succeeded[[ $
)[[$ %
{\\ 
return]] 
RedirectToAction]] +
(]]+ ,
$str]], 3
,]]3 4
$str]]5 ;
)]]; <
;]]< =
}^^ 
}__ 

ModelStatebb 
.bb 
AddModelErrorbb $
(bb$ %
$strbb% '
,bb' (
$strbb) G
)bbG H
;bbH I
returncc 
Viewcc 
(cc 
loginViewModelcc &
)cc& '
;cc' (
}dd 	
[hh 	
HttpPosthh	 
]hh 
publicjj 
asyncjj 
Taskjj 
<jj 
IActionResultjj '
>jj' (
Logoutjj) /
(jj/ 0
)jj0 1
{kk 	
awaitll 
_signInManagerll  
.ll  !
SignOutAsyncll! -
(ll- .
)ll. /
;ll/ 0
returnnn 
RedirectToActionnn #
(nn# $
$strnn$ +
,nn+ ,
$strnn- 3
)nn3 4
;nn4 5
}oo 	
}pp 
}qq ¡µ
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AdminController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class 
AdminController  
:! "

Controller# -
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
AdminController 
( 
UserManager *
<* +
ApplicationUser+ :
>: ;
userManager< G
,G H
RoleManager 
< 
IdentityRole $
>$ %
roleManager& 1
,1 2
IFlowerRepository 
flowerRepository .
,. /
ICategoryRepository 
categoryRepository  2
)2 3
{ 	
_userManager 
= 
userManager &
;& '
_roleManager 
= 
roleManager &
;& '
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public"" 
IActionResult"" 
Index"" "
(""" #
)""# $
{## 	
return$$ 
View$$ 
($$ 
)$$ 
;$$ 
}%% 	
public'' 
IActionResult'' 
UserManagement'' +
(''+ ,
)'', -
{(( 	
var)) 
users)) 
=)) 
_userManager)) $
.))$ %
Users))% *
;))* +
return++ 
View++ 
(++ 
users++ 
)++ 
;++ 
},, 	
public.. 
IActionResult.. 
AddUser.. $
(..$ %
)..% &
{// 	
return00 
View00 
(00 
)00 
;00 
}11 	
[33 	
HttpPost33	 
]33 
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
AddUser44) 0
(440 1
AddUserViewModel441 A
addUserViewModel44B R
)44R S
{55 	
if66 
(66 
!66 

ModelState66 
.66 
IsValid66 #
)66# $
return77 
View77 
(77 
addUserViewModel77 ,
)77, -
;77- .
var99 
user99 
=99 
new99 
ApplicationUser99 *
(99* +
)99+ ,
{:: 
UserName;; 
=;; 
addUserViewModel;; +
.;;+ ,
UserName;;, 4
,;;4 5
Email<< 
=<< 
addUserViewModel<< (
.<<( )
Email<<) .
,<<. /
	Birthdate== 
=== 
addUserViewModel== ,
.==, -
	Birthdate==- 6
,==6 7
City>> 
=>> 
addUserViewModel>> '
.>>' (
City>>( ,
,>>, -
Country?? 
=?? 
addUserViewModel?? *
.??* +
Country??+ 2
}@@ 
;@@ 
IdentityResultBB 
resultBB !
=BB" #
awaitBB$ )
_userManagerBB* 6
.BB6 7
CreateAsyncBB7 B
(BBB C
userBBC G
,BBG H
addUserViewModelBBI Y
.BBY Z
PasswordBBZ b
)BBb c
;BBc d
ifDD 
(DD 
resultDD 
.DD 
	SucceededDD  
)DD  !
{EE 
returnFF 
RedirectToActionFF '
(FF' (
$strFF( 8
,FF8 9
_userManagerFF: F
.FFF G
UsersFFG L
)FFL M
;FFM N
}GG 
foreachII 
(II 
IdentityErrorII "
errorII# (
inII) +
resultII, 2
.II2 3
ErrorsII3 9
)II9 :
{JJ 

ModelStateKK 
.KK 
AddModelErrorKK (
(KK( )
$strKK) +
,KK+ ,
errorKK- 2
.KK2 3
DescriptionKK3 >
)KK> ?
;KK? @
}LL 
returnMM 
ViewMM 
(MM 
addUserViewModelMM (
)MM( )
;MM) *
}NN 	
publicPP 
asyncPP 
TaskPP 
<PP 
IActionResultPP '
>PP' (
EditUserPP) 1
(PP1 2
stringPP2 8
idPP9 ;
)PP; <
{QQ 	
varRR 
userRR 
=RR 
awaitRR 
_userManagerRR )
.RR) *
FindByIdAsyncRR* 7
(RR7 8
idRR8 :
)RR: ;
;RR; <
ifTT 
(TT 
userTT 
==TT 
nullTT 
)TT 
returnUU 
RedirectToActionUU '
(UU' (
$strUU( 8
,UU8 9
_userManagerUU: F
.UUF G
UsersUUG L
)UUL M
;UUM N
varVV 
claimsVV 
=VV 
awaitVV 
_userManagerVV +
.VV+ ,
GetClaimsAsyncVV, :
(VV: ;
userVV; ?
)VV? @
;VV@ A
varWW 
vmWW 
=WW 
newWW 
EditUserViewModelWW *
(WW* +
)WW+ ,
{XX 
IdYY 
=YY 
userYY 
.YY 
IdYY 
,YY 
EmailZZ 
=ZZ 
userZZ 
.ZZ 
EmailZZ "
,ZZ" #
UserName[[ 
=[[ 
user[[ 
.[[  
UserName[[  (
,[[( )

UserClaims\\ 
=\\ 
claims\\ #
.\\# $
Select\\$ *
(\\* +
c\\+ ,
=>\\- /
c\\0 1
.\\1 2
Value\\2 7
)\\7 8
.\\8 9
ToList\\9 ?
(\\? @
)\\@ A
}]] 
;]] 
return__ 
View__ 
(__ 
vm__ 
)__ 
;__ 
}`` 	
[bb 	
HttpPostbb	 
]bb 
publiccc 
asynccc 
Taskcc 
<cc 
IActionResultcc '
>cc' (
EditUsercc) 1
(cc1 2
EditUserViewModelcc2 C
editUserViewModelccD U
)ccU V
{dd 	
varee 
useree 
=ee 
awaitee 
_userManageree )
.ee) *
FindByIdAsyncee* 7
(ee7 8
editUserViewModelee8 I
.eeI J
IdeeJ L
)eeL M
;eeM N
ifgg 
(gg 
usergg 
!=gg 
nullgg 
)gg 
{hh 
userii 
.ii 
Emailii 
=ii 
editUserViewModelii .
.ii. /
Emailii/ 4
;ii4 5
userjj 
.jj 
UserNamejj 
=jj 
editUserViewModeljj  1
.jj1 2
UserNamejj2 :
;jj: ;
userkk 
.kk 
	Birthdatekk 
=kk  
editUserViewModelkk! 2
.kk2 3
	Birthdatekk3 <
;kk< =
userll 
.ll 
Cityll 
=ll 
editUserViewModelll -
.ll- .
Cityll. 2
;ll2 3
usermm 
.mm 
Countrymm 
=mm 
editUserViewModelmm 0
.mm0 1
Countrymm1 8
;mm8 9
varoo 
resultoo 
=oo 
awaitoo "
_userManageroo# /
.oo/ 0
UpdateAsyncoo0 ;
(oo; <
useroo< @
)oo@ A
;ooA B
ifqq 
(qq 
resultqq 
.qq 
	Succeededqq $
)qq$ %
returnrr 
RedirectToActionrr +
(rr+ ,
$strrr, <
,rr< =
_userManagerrr> J
.rrJ K
UsersrrK P
)rrP Q
;rrQ R

ModelStatett 
.tt 
AddModelErrortt (
(tt( )
$strtt) +
,tt+ ,
$strtt- V
)ttV W
;ttW X
returnvv 
Viewvv 
(vv 
editUserViewModelvv -
)vv- .
;vv. /
}ww 
returnyy 
RedirectToActionyy #
(yy# $
$stryy$ 4
,yy4 5
_userManageryy6 B
.yyB C
UsersyyC H
)yyH I
;yyI J
}zz 	
[|| 	
HttpPost||	 
]|| 
public}} 
async}} 
Task}} 
<}} 
IActionResult}} '
>}}' (

DeleteUser}}) 3
(}}3 4
string}}4 :
userId}}; A
)}}A B
{~~ 	
var 
user 
= 
await 
_userManager )
.) *
FindByIdAsync* 7
(7 8
userId8 >
)> ?
;? @
if
ÅÅ 
(
ÅÅ 
user
ÅÅ 
!=
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
IdentityResult
ÉÉ 
result
ÉÉ %
=
ÉÉ& '
await
ÉÉ( -
_userManager
ÉÉ. :
.
ÉÉ: ;
DeleteAsync
ÉÉ; F
(
ÉÉF G
user
ÉÉG K
)
ÉÉK L
;
ÉÉL M
if
ÑÑ 
(
ÑÑ 
result
ÑÑ 
.
ÑÑ 
	Succeeded
ÑÑ $
)
ÑÑ$ %
return
ÖÖ 
RedirectToAction
ÖÖ +
(
ÖÖ+ ,
$str
ÖÖ, <
)
ÖÖ< =
;
ÖÖ= >
else
ÜÜ 

ModelState
áá 
.
áá 
AddModelError
áá ,
(
áá, -
$str
áá- /
,
áá/ 0
$str
áá1 a
)
ááa b
;
ááb c
}
àà 
else
ââ 
{
ää 

ModelState
ãã 
.
ãã 
AddModelError
ãã (
(
ãã( )
$str
ãã) +
,
ãã+ ,
$str
ãã- G
)
ããG H
;
ããH I
}
åå 
return
çç 
View
çç 
(
çç 
$str
çç (
,
çç( )
_userManager
çç* 6
.
çç6 7
Users
çç7 <
)
çç< =
;
çç= >
}
éé 	
public
ëë 
IActionResult
ëë 
RoleManagement
ëë +
(
ëë+ ,
)
ëë, -
{
íí 	
var
ìì 
roles
ìì 
=
ìì 
_roleManager
ìì $
.
ìì$ %
Roles
ìì% *
;
ìì* +
return
îî 
View
îî 
(
îî 
roles
îî 
)
îî 
;
îî 
}
ïï 	
public
óó 
IActionResult
óó 

AddNewRole
óó '
(
óó' (
)
óó( )
=>
óó* ,
View
óó- 1
(
óó1 2
)
óó2 3
;
óó3 4
[
ôô 	
HttpPost
ôô	 
]
ôô 
public
öö 
async
öö 
Task
öö 
<
öö 
IActionResult
öö '
>
öö' (

AddNewRole
öö) 3
(
öö3 4
AddRoleViewModel
öö4 D
addRoleViewModel
ööE U
)
ööU V
{
õõ 	
if
ùù 
(
ùù 
!
ùù 

ModelState
ùù 
.
ùù 
IsValid
ùù #
)
ùù# $
return
ûû 
View
ûû 
(
ûû 
addRoleViewModel
ûû ,
)
ûû, -
;
ûû- .
var
†† 
role
†† 
=
†† 
new
†† 
IdentityRole
†† '
{
°° 
Name
¢¢ 
=
¢¢ 
addRoleViewModel
¢¢ '
.
¢¢' (
RoleName
¢¢( 0
}
££ 
;
££ 
IdentityResult
•• 
result
•• !
=
••" #
await
••$ )
_roleManager
••* 6
.
••6 7
CreateAsync
••7 B
(
••B C
role
••C G
)
••G H
;
••H I
if
ßß 
(
ßß 
result
ßß 
.
ßß 
	Succeeded
ßß  
)
ßß  !
{
®® 
return
©© 
RedirectToAction
©© '
(
©©' (
$str
©©( 8
,
©©8 9
_roleManager
©©: F
.
©©F G
Roles
©©G L
)
©©L M
;
©©M N
}
™™ 
foreach
¨¨ 
(
¨¨ 
IdentityError
¨¨ "
error
¨¨# (
in
¨¨) +
result
¨¨, 2
.
¨¨2 3
Errors
¨¨3 9
)
¨¨9 :
{
≠≠ 

ModelState
ÆÆ 
.
ÆÆ 
AddModelError
ÆÆ (
(
ÆÆ( )
$str
ÆÆ) +
,
ÆÆ+ ,
error
ÆÆ- 2
.
ÆÆ2 3
Description
ÆÆ3 >
)
ÆÆ> ?
;
ÆÆ? @
}
ØØ 
return
∞∞ 
View
∞∞ 
(
∞∞ 
addRoleViewModel
∞∞ (
)
∞∞( )
;
∞∞) *
}
±± 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IActionResult
≥≥ '
>
≥≥' (
EditRole
≥≥) 1
(
≥≥1 2
string
≥≥2 8
id
≥≥9 ;
)
≥≥; <
{
¥¥ 	
var
µµ 
role
µµ 
=
µµ 
await
µµ 
_roleManager
µµ )
.
µµ) *
FindByIdAsync
µµ* 7
(
µµ7 8
id
µµ8 :
)
µµ: ;
;
µµ; <
if
∑∑ 
(
∑∑ 
role
∑∑ 
==
∑∑ 
null
∑∑ 
)
∑∑ 
return
∏∏ 
RedirectToAction
∏∏ '
(
∏∏' (
$str
∏∏( 8
,
∏∏8 9
_roleManager
∏∏: F
.
∏∏F G
Roles
∏∏G L
)
∏∏L M
;
∏∏M N
var
∫∫ 
editRoleViewModel
∫∫ !
=
∫∫" #
new
∫∫$ '
EditRoleViewModel
∫∫( 9
{
ªª 
Id
ºº 
=
ºº 
role
ºº 
.
ºº 
Id
ºº 
,
ºº 
RoleName
ΩΩ 
=
ΩΩ 
role
ΩΩ 
.
ΩΩ  
Name
ΩΩ  $
,
ΩΩ$ %
Users
ææ 
=
ææ 
new
ææ 
List
ææ  
<
ææ  !
string
ææ! '
>
ææ' (
(
ææ( )
)
ææ) *
}
øø 
;
øø 
foreach
¬¬ 
(
¬¬ 
var
¬¬ 
user
¬¬ 
in
¬¬  
_userManager
¬¬! -
.
¬¬- .
Users
¬¬. 3
)
¬¬3 4
{
√√ 
if
ƒƒ 
(
ƒƒ 
await
ƒƒ 
_userManager
ƒƒ &
.
ƒƒ& '
IsInRoleAsync
ƒƒ' 4
(
ƒƒ4 5
user
ƒƒ5 9
,
ƒƒ9 :
role
ƒƒ; ?
.
ƒƒ? @
Name
ƒƒ@ D
)
ƒƒD E
)
ƒƒE F
editRoleViewModel
≈≈ %
.
≈≈% &
Users
≈≈& +
.
≈≈+ ,
Add
≈≈, /
(
≈≈/ 0
user
≈≈0 4
.
≈≈4 5
UserName
≈≈5 =
)
≈≈= >
;
≈≈> ?
}
∆∆ 
return
»» 
View
»» 
(
»» 
editRoleViewModel
»» )
)
»») *
;
»»* +
}
…… 	
[
ÀÀ 	
HttpPost
ÀÀ	 
]
ÀÀ 
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
IActionResult
ÃÃ '
>
ÃÃ' (
EditRole
ÃÃ) 1
(
ÃÃ1 2
EditRoleViewModel
ÃÃ2 C
editRoleViewModel
ÃÃD U
)
ÃÃU V
{
ÕÕ 	
var
ŒŒ 
role
ŒŒ 
=
ŒŒ 
await
ŒŒ 
_roleManager
ŒŒ )
.
ŒŒ) *
FindByIdAsync
ŒŒ* 7
(
ŒŒ7 8
editRoleViewModel
ŒŒ8 I
.
ŒŒI J
Id
ŒŒJ L
)
ŒŒL M
;
ŒŒM N
if
–– 
(
–– 
role
–– 
!=
–– 
null
–– 
)
–– 
{
—— 
role
““ 
.
““ 
Name
““ 
=
““ 
editRoleViewModel
““ -
.
““- .
RoleName
““. 6
;
““6 7
var
‘‘ 
result
‘‘ 
=
‘‘ 
await
‘‘ "
_roleManager
‘‘# /
.
‘‘/ 0
UpdateAsync
‘‘0 ;
(
‘‘; <
role
‘‘< @
)
‘‘@ A
;
‘‘A B
if
÷÷ 
(
÷÷ 
result
÷÷ 
.
÷÷ 
	Succeeded
÷÷ $
)
÷÷$ %
return
◊◊ 
RedirectToAction
◊◊ +
(
◊◊+ ,
$str
◊◊, <
,
◊◊< =
_roleManager
◊◊> J
.
◊◊J K
Roles
◊◊K P
)
◊◊P Q
;
◊◊Q R

ModelState
ŸŸ 
.
ŸŸ 
AddModelError
ŸŸ (
(
ŸŸ( )
$str
ŸŸ) +
,
ŸŸ+ ,
$str
ŸŸ- V
)
ŸŸV W
;
ŸŸW X
return
€€ 
View
€€ 
(
€€ 
editRoleViewModel
€€ -
)
€€- .
;
€€. /
}
‹‹ 
return
ﬁﬁ 
RedirectToAction
ﬁﬁ #
(
ﬁﬁ# $
$str
ﬁﬁ$ 4
,
ﬁﬁ4 5
_roleManager
ﬁﬁ6 B
.
ﬁﬁB C
Roles
ﬁﬁC H
)
ﬁﬁH I
;
ﬁﬁI J
}
ﬂﬂ 	
[
·· 	
HttpPost
··	 
]
·· 
public
‚‚ 
async
‚‚ 
Task
‚‚ 
<
‚‚ 
IActionResult
‚‚ '
>
‚‚' (

DeleteRole
‚‚) 3
(
‚‚3 4
string
‚‚4 :
id
‚‚; =
)
‚‚= >
{
„„ 	
IdentityRole
‰‰ 
role
‰‰ 
=
‰‰ 
await
‰‰  %
_roleManager
‰‰& 2
.
‰‰2 3
FindByIdAsync
‰‰3 @
(
‰‰@ A
id
‰‰A C
)
‰‰C D
;
‰‰D E
if
ÂÂ 
(
ÂÂ 
role
ÂÂ 
!=
ÂÂ 
null
ÂÂ 
)
ÂÂ 
{
ÊÊ 
var
ÁÁ 
result
ÁÁ 
=
ÁÁ 
await
ÁÁ "
_roleManager
ÁÁ# /
.
ÁÁ/ 0
DeleteAsync
ÁÁ0 ;
(
ÁÁ; <
role
ÁÁ< @
)
ÁÁ@ A
;
ÁÁA B
if
ËË 
(
ËË 
result
ËË 
.
ËË 
	Succeeded
ËË $
)
ËË$ %
return
ÈÈ 
RedirectToAction
ÈÈ +
(
ÈÈ+ ,
$str
ÈÈ, <
,
ÈÈ< =
_roleManager
ÈÈ> J
.
ÈÈJ K
Roles
ÈÈK P
)
ÈÈP Q
;
ÈÈQ R

ModelState
ÍÍ 
.
ÍÍ 
AddModelError
ÍÍ (
(
ÍÍ( )
$str
ÍÍ) +
,
ÍÍ+ ,
$str
ÍÍ- ]
)
ÍÍ] ^
;
ÍÍ^ _
}
ÎÎ 
else
ÏÏ 
{
ÌÌ 

ModelState
ÓÓ 
.
ÓÓ 
AddModelError
ÓÓ (
(
ÓÓ( )
$str
ÓÓ) +
,
ÓÓ+ ,
$str
ÓÓ- H
)
ÓÓH I
;
ÓÓI J
}
ÔÔ 
return
 
View
 
(
 
$str
 (
,
( )
_roleManager
* 6
.
6 7
Roles
7 <
)
< =
;
= >
}
ÒÒ 	
public
ıı 
async
ıı 
Task
ıı 
<
ıı 
IActionResult
ıı '
>
ıı' (
AddUserToRole
ıı) 6
(
ıı6 7
string
ıı7 =
roleId
ıı> D
)
ııD E
{
ˆˆ 	
var
˜˜ 
role
˜˜ 
=
˜˜ 
await
˜˜ 
_roleManager
˜˜ )
.
˜˜) *
FindByIdAsync
˜˜* 7
(
˜˜7 8
roleId
˜˜8 >
)
˜˜> ?
;
˜˜? @
if
˘˘ 
(
˘˘ 
role
˘˘ 
==
˘˘ 
null
˘˘ 
)
˘˘ 
return
˙˙ 
RedirectToAction
˙˙ '
(
˙˙' (
$str
˙˙( 8
,
˙˙8 9
_roleManager
˙˙: F
.
˙˙F G
Roles
˙˙G L
)
˙˙L M
;
˙˙M N
var
¸¸ $
addUserToRoleViewModel
¸¸ &
=
¸¸' (
new
¸¸) ,
UserRoleViewModel
¸¸- >
{
¸¸? @
RoleId
¸¸A G
=
¸¸H I
role
¸¸J N
.
¸¸N O
Id
¸¸O Q
}
¸¸R S
;
¸¸S T
foreach
˛˛ 
(
˛˛ 
var
˛˛ 
user
˛˛ 
in
˛˛  
_userManager
˛˛! -
.
˛˛- .
Users
˛˛. 3
)
˛˛3 4
{
ˇˇ 
if
ÄÄ 
(
ÄÄ 
!
ÄÄ 
await
ÄÄ 
_userManager
ÄÄ '
.
ÄÄ' (
IsInRoleAsync
ÄÄ( 5
(
ÄÄ5 6
user
ÄÄ6 :
,
ÄÄ: ;
role
ÄÄ< @
.
ÄÄ@ A
Name
ÄÄA E
)
ÄÄE F
)
ÄÄF G
{
ÅÅ $
addUserToRoleViewModel
ÇÇ *
.
ÇÇ* +
Users
ÇÇ+ 0
.
ÇÇ0 1
Add
ÇÇ1 4
(
ÇÇ4 5
user
ÇÇ5 9
)
ÇÇ9 :
;
ÇÇ: ;
}
ÉÉ 
}
ÑÑ 
return
ÜÜ 
View
ÜÜ 
(
ÜÜ $
addUserToRoleViewModel
ÜÜ .
)
ÜÜ. /
;
ÜÜ/ 0
}
áá 	
[
ââ 	
HttpPost
ââ	 
]
ââ 
public
ää 
async
ää 
Task
ää 
<
ää 
IActionResult
ää '
>
ää' (
AddUserToRole
ää) 6
(
ää6 7
UserRoleViewModel
ää7 H
userRoleViewModel
ääI Z
)
ääZ [
{
ãã 	
var
åå 
user
åå 
=
åå 
await
åå 
_userManager
åå )
.
åå) *
FindByIdAsync
åå* 7
(
åå7 8
userRoleViewModel
åå8 I
.
ååI J
UserId
ååJ P
)
ååP Q
;
ååQ R
var
çç 
role
çç 
=
çç 
await
çç 
_roleManager
çç )
.
çç) *
FindByIdAsync
çç* 7
(
çç7 8
userRoleViewModel
çç8 I
.
ççI J
RoleId
ççJ P
)
ççP Q
;
ççQ R
var
èè 
result
èè 
=
èè 
await
èè 
_userManager
èè +
.
èè+ ,
AddToRoleAsync
èè, :
(
èè: ;
user
èè; ?
,
èè? @
role
èèA E
.
èèE F
Name
èèF J
)
èèJ K
;
èèK L
if
ëë 
(
ëë 
result
ëë 
.
ëë 
	Succeeded
ëë  
)
ëë  !
{
íí 
return
ìì 
RedirectToAction
ìì '
(
ìì' (
$str
ìì( 8
,
ìì8 9
_roleManager
ìì: F
.
ììF G
Roles
ììG L
)
ììL M
;
ììM N
}
îî 
foreach
ññ 
(
ññ 
IdentityError
ññ "
error
ññ# (
in
ññ) +
result
ññ, 2
.
ññ2 3
Errors
ññ3 9
)
ññ9 :
{
óó 

ModelState
òò 
.
òò 
AddModelError
òò (
(
òò( )
$str
òò) +
,
òò+ ,
error
òò- 2
.
òò2 3
Description
òò3 >
)
òò> ?
;
òò? @
}
ôô 
return
õõ 
View
õõ 
(
õõ 
userRoleViewModel
õõ )
)
õõ) *
;
õõ* +
}
úú 	
public
ûû 
async
ûû 
Task
ûû 
<
ûû 
IActionResult
ûû '
>
ûû' ( 
DeleteUserFromRole
ûû) ;
(
ûû; <
string
ûû< B
roleId
ûûC I
)
ûûI J
{
üü 	
var
†† 
role
†† 
=
†† 
await
†† 
_roleManager
†† )
.
††) *
FindByIdAsync
††* 7
(
††7 8
roleId
††8 >
)
††> ?
;
††? @
if
¢¢ 
(
¢¢ 
role
¢¢ 
==
¢¢ 
null
¢¢ 
)
¢¢ 
return
££ 
RedirectToAction
££ '
(
££' (
$str
££( 8
,
££8 9
_roleManager
££: F
.
££F G
Roles
££G L
)
££L M
;
££M N
var
•• $
addUserToRoleViewModel
•• &
=
••' (
new
••) ,
UserRoleViewModel
••- >
{
••? @
RoleId
••A G
=
••H I
role
••J N
.
••N O
Id
••O Q
}
••R S
;
••S T
foreach
ßß 
(
ßß 
var
ßß 
user
ßß 
in
ßß  
_userManager
ßß! -
.
ßß- .
Users
ßß. 3
)
ßß3 4
{
®® 
if
©© 
(
©© 
await
©© 
_userManager
©© &
.
©©& '
IsInRoleAsync
©©' 4
(
©©4 5
user
©©5 9
,
©©9 :
role
©©; ?
.
©©? @
Name
©©@ D
)
©©D E
)
©©E F
{
™™ $
addUserToRoleViewModel
´´ *
.
´´* +
Users
´´+ 0
.
´´0 1
Add
´´1 4
(
´´4 5
user
´´5 9
)
´´9 :
;
´´: ;
}
¨¨ 
}
≠≠ 
return
ØØ 
View
ØØ 
(
ØØ $
addUserToRoleViewModel
ØØ .
)
ØØ. /
;
ØØ/ 0
}
∞∞ 	
[
≤≤ 	
HttpPost
≤≤	 
]
≤≤ 
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IActionResult
≥≥ '
>
≥≥' ( 
DeleteUserFromRole
≥≥) ;
(
≥≥; <
UserRoleViewModel
≥≥< M
userRoleViewModel
≥≥N _
)
≥≥_ `
{
¥¥ 	
var
µµ 
user
µµ 
=
µµ 
await
µµ 
_userManager
µµ )
.
µµ) *
FindByIdAsync
µµ* 7
(
µµ7 8
userRoleViewModel
µµ8 I
.
µµI J
UserId
µµJ P
)
µµP Q
;
µµQ R
var
∂∂ 
role
∂∂ 
=
∂∂ 
await
∂∂ 
_roleManager
∂∂ )
.
∂∂) *
FindByIdAsync
∂∂* 7
(
∂∂7 8
userRoleViewModel
∂∂8 I
.
∂∂I J
RoleId
∂∂J P
)
∂∂P Q
;
∂∂Q R
var
∏∏ 
result
∏∏ 
=
∏∏ 
await
∏∏ 
_userManager
∏∏ +
.
∏∏+ ,!
RemoveFromRoleAsync
∏∏, ?
(
∏∏? @
user
∏∏@ D
,
∏∏D E
role
∏∏F J
.
∏∏J K
Name
∏∏K O
)
∏∏O P
;
∏∏P Q
if
∫∫ 
(
∫∫ 
result
∫∫ 
.
∫∫ 
	Succeeded
∫∫  
)
∫∫  !
{
ªª 
return
ºº 
RedirectToAction
ºº '
(
ºº' (
$str
ºº( 8
,
ºº8 9
_roleManager
ºº: F
.
ººF G
Roles
ººG L
)
ººL M
;
ººM N
}
ΩΩ 
foreach
øø 
(
øø 
IdentityError
øø "
error
øø# (
in
øø) +
result
øø, 2
.
øø2 3
Errors
øø3 9
)
øø9 :
{
¿¿ 

ModelState
¡¡ 
.
¡¡ 
AddModelError
¡¡ (
(
¡¡( )
$str
¡¡) +
,
¡¡+ ,
error
¡¡- 2
.
¡¡2 3
Description
¡¡3 >
)
¡¡> ?
;
¡¡? @
}
¬¬ 
return
ƒƒ 
View
ƒƒ 
(
ƒƒ 
userRoleViewModel
ƒƒ )
)
ƒƒ) *
;
ƒƒ* +
}
≈≈ 	
public
»» 
IActionResult
»» 
FlowerManagement
»» -
(
»»- .
)
»». /
{
…… 	
var
   
	dbFlowers
   
=
   
_flowerRepository
   -
.
  - .
Flowers
  . 5
;
  5 6
List
ÃÃ 
<
ÃÃ 
FlowerViewModel
ÃÃ  
>
ÃÃ  !
flowers
ÃÃ" )
=
ÃÃ* +
new
ÃÃ, /
List
ÃÃ0 4
<
ÃÃ4 5
FlowerViewModel
ÃÃ5 D
>
ÃÃD E
(
ÃÃE F
)
ÃÃF G
;
ÃÃG H
foreach
ŒŒ 
(
ŒŒ 
var
ŒŒ 
dbFlower
ŒŒ !
in
ŒŒ" $
	dbFlowers
ŒŒ% .
)
ŒŒ. /
{
œœ 
flowers
–– 
.
–– 
Add
–– 
(
–– *
MapDbFlowerToFlowerViewModel
–– 8
(
––8 9
dbFlower
––9 A
)
––A B
)
––B C
;
––C D
}
—— 
return
”” 
View
”” 
(
”” 
flowers
”” 
)
””  
;
””  !
}
‘‘ 	
public
÷÷ 
IActionResult
÷÷ 
	AddFlower
÷÷ &
(
÷÷& '
)
÷÷' (
{
◊◊ 	
ViewData
ÿÿ 
[
ÿÿ 
$str
ÿÿ !
]
ÿÿ! "
=
ÿÿ# $!
_categoryRepository
ÿÿ% 8
.
ÿÿ8 9

Categories
ÿÿ9 C
.
ÿÿC D
ToList
ÿÿD J
(
ÿÿJ K
)
ÿÿK L
;
ÿÿL M
return
⁄⁄ 
View
⁄⁄ 
(
⁄⁄ 
)
⁄⁄ 
;
⁄⁄ 
}
€€ 	
[
›› 	
HttpPost
››	 
]
›› 
public
ﬁﬁ 
IActionResult
ﬁﬁ 
	AddFlower
ﬁﬁ &
(
ﬁﬁ& ' 
AddFlowerViewModel
ﬁﬁ' 9 
addFlowerViewModel
ﬁﬁ: L
)
ﬁﬁL M
{
ﬂﬂ 	
if
‡‡ 
(
‡‡ 
!
‡‡ 

ModelState
‡‡ 
.
‡‡ 
IsValid
‡‡ #
)
‡‡# $
return
·· 
View
·· 
(
··  
addFlowerViewModel
·· .
)
··. /
;
··/ 0
var
„„ 
flower
„„ 
=
„„ 
new
„„ 
Flower
„„ #
(
„„# $
)
„„$ %
{
‰‰ 
Name
ÂÂ 
=
ÂÂ  
addFlowerViewModel
ÂÂ )
.
ÂÂ) *
Name
ÂÂ* .
,
ÂÂ. /
ShortDescription
ÊÊ  
=
ÊÊ! " 
addFlowerViewModel
ÊÊ# 5
.
ÊÊ5 6
ShortDescription
ÊÊ6 F
,
ÊÊF G
LongDescription
ÁÁ 
=
ÁÁ  ! 
addFlowerViewModel
ÁÁ" 4
.
ÁÁ4 5
LongDescription
ÁÁ5 D
,
ÁÁD E
Price
ËË 
=
ËË  
addFlowerViewModel
ËË *
.
ËË* +
Price
ËË+ 0
,
ËË0 1
ImageUrl
ÈÈ 
=
ÈÈ  
addFlowerViewModel
ÈÈ -
.
ÈÈ- .
ImageUrl
ÈÈ. 6
,
ÈÈ6 7
ImageThumbnailUrl
ÍÍ !
=
ÍÍ" # 
addFlowerViewModel
ÍÍ$ 6
.
ÍÍ6 7
ImageThumbnailUrl
ÍÍ7 H
,
ÍÍH I"
IsFlowerPresentation
ÎÎ $
=
ÎÎ% & 
addFlowerViewModel
ÎÎ' 9
.
ÎÎ9 :"
IsFlowerPresentation
ÎÎ: N
,
ÎÎN O
InStock
ÏÏ 
=
ÏÏ  
addFlowerViewModel
ÏÏ ,
.
ÏÏ, -
InStock
ÏÏ- 4
,
ÏÏ4 5

CategoryId
ÌÌ 
=
ÌÌ  
addFlowerViewModel
ÌÌ /
.
ÌÌ/ 0

CategoryId
ÌÌ0 :
,
ÌÌ: ;
}
ÔÔ 
;
ÔÔ 
_flowerRepository
ÒÒ 
.
ÒÒ 
	AddFlower
ÒÒ '
(
ÒÒ' (
flower
ÒÒ( .
)
ÒÒ. /
;
ÒÒ/ 0
return
ÛÛ 
RedirectToAction
ÛÛ #
(
ÛÛ# $
$str
ÛÛ$ 6
,
ÛÛ6 7
_flowerRepository
ÛÛ8 I
.
ÛÛI J
Flowers
ÛÛJ Q
)
ÛÛQ R
;
ÛÛR S
}
ÙÙ 	
[
ˆˆ 	
HttpPost
ˆˆ	 
]
ˆˆ 
public
˜˜ 
IActionResult
˜˜ 
DeleteFlower
˜˜ )
(
˜˜) *
int
˜˜* -
id
˜˜. 0
)
˜˜0 1
{
¯¯ 	
Flower
˘˘ 
flower
˘˘ 
=
˘˘ 
_flowerRepository
˘˘ -
.
˘˘- .
GetFlowerById
˘˘. ;
(
˘˘; <
id
˘˘< >
)
˘˘> ?
;
˘˘? @
if
˙˙ 
(
˙˙ 
flower
˙˙ 
!=
˙˙ 
null
˙˙ 
)
˙˙ 
{
˚˚ 
_flowerRepository
¸¸ !
.
¸¸! "
DeleteFlower
¸¸" .
(
¸¸. /
flower
¸¸/ 5
)
¸¸5 6
;
¸¸6 7
return
˛˛ 
View
˛˛ 
(
˛˛ 
$str
˛˛ .
,
˛˛. /
_flowerRepository
˛˛0 A
.
˛˛A B 
FlowersAsViewModel
˛˛B T
)
˛˛T U
;
˛˛U V
}
ˇˇ 
else
ÄÄ 
{
ÅÅ 

ModelState
ÇÇ 
.
ÇÇ 
AddModelError
ÇÇ (
(
ÇÇ( )
$str
ÇÇ) +
,
ÇÇ+ ,
$str
ÇÇ- J
)
ÇÇJ K
;
ÇÇK L
}
ÉÉ 
return
ÖÖ 
View
ÖÖ 
(
ÖÖ 
$str
ÖÖ *
,
ÖÖ* +
_flowerRepository
ÖÖ, =
.
ÖÖ= > 
FlowersAsViewModel
ÖÖ> P
)
ÖÖP Q
;
ÖÖQ R
}
ÜÜ 	
public
àà 
IActionResult
àà 

EditFlower
àà '
(
àà' (
int
àà( +
id
àà, .
)
àà. /
{
ââ 	
ViewData
ää 
[
ää 
$str
ää !
]
ää! "
=
ää# $!
_categoryRepository
ää% 8
.
ää8 9

Categories
ää9 C
.
ääC D
ToList
ääD J
(
ääJ K
)
ääK L
;
ääL M
var
åå 
flower
åå 
=
åå 
_flowerRepository
åå *
.
åå* +
GetFlowerById
åå+ 8
(
åå8 9
id
åå9 ;
)
åå; <
;
åå< =
if
éé 
(
éé 
flower
éé 
==
éé 
null
éé 
)
éé 
return
èè 
View
èè 
(
èè 
$str
èè .
,
èè. /
_flowerRepository
èè0 A
.
èèA B 
FlowersAsViewModel
èèB T
)
èèT U
;
èèU V
var
ëë !
editFlowerViewModel
ëë #
=
ëë$ %
new
ëë& )!
EditFlowerViewModel
ëë* =
{
íí 
Name
ìì 
=
ìì 
flower
ìì 
.
ìì 
Name
ìì "
,
ìì" #
ShortDescription
îî  
=
îî! "
flower
îî# )
.
îî) *
ShortDescription
îî* :
,
îî: ;
LongDescription
ïï 
=
ïï  !
flower
ïï" (
.
ïï( )
LongDescription
ïï) 8
,
ïï8 9
Price
ññ 
=
ññ 
flower
ññ 
.
ññ 
Price
ññ $
,
ññ$ %
ImageUrl
óó 
=
óó 
flower
óó !
.
óó! "
ImageUrl
óó" *
,
óó* +
ImageThumbnailUrl
òò !
=
òò" #
flower
òò$ *
.
òò* +
ImageThumbnailUrl
òò+ <
,
òò< ="
IsFlowerPresentation
ôô $
=
ôô% &
flower
ôô' -
.
ôô- ."
IsFlowerPresentation
ôô. B
,
ôôB C
InStock
öö 
=
öö 
flower
öö  
.
öö  !
InStock
öö! (
,
öö( )

CategoryId
õõ 
=
õõ 
flower
õõ #
.
õõ# $

CategoryId
õõ$ .
}
úú 
;
úú 
return
ûû 
View
ûû 
(
ûû !
editFlowerViewModel
ûû +
)
ûû+ ,
;
ûû, -
}
üü 	
[
°° 	
HttpPost
°°	 
]
°° 
public
¢¢ 
IActionResult
¢¢ 

EditFlower
¢¢ '
(
¢¢' (!
EditFlowerViewModel
¢¢( ;!
editFlowerViewModel
¢¢< O
)
¢¢O P
{
££ 	
ViewData
§§ 
[
§§ 
$str
§§ !
]
§§! "
=
§§# $!
_categoryRepository
§§% 8
.
§§8 9

Categories
§§9 C
.
§§C D
ToList
§§D J
(
§§J K
)
§§K L
;
§§L M
var
¶¶ 
flower
¶¶ 
=
¶¶ 
_flowerRepository
¶¶ *
.
¶¶* +
GetFlowerById
¶¶+ 8
(
¶¶8 9!
editFlowerViewModel
¶¶9 L
.
¶¶L M
Id
¶¶M O
)
¶¶O P
;
¶¶P Q
if
®® 
(
®® 
flower
®® 
!=
®® 
null
®® 
)
®® 
{
©© 
flower
™™ 
.
™™ 
Name
™™ 
=
™™ !
editFlowerViewModel
™™ 1
.
™™1 2
Name
™™2 6
;
™™6 7
flower
´´ 
.
´´ 
ShortDescription
´´ '
=
´´( )!
editFlowerViewModel
´´* =
.
´´= >
ShortDescription
´´> N
;
´´N O
flower
¨¨ 
.
¨¨ 
LongDescription
¨¨ &
=
¨¨' (!
editFlowerViewModel
¨¨) <
.
¨¨< =
LongDescription
¨¨= L
;
¨¨L M
flower
≠≠ 
.
≠≠ 
Price
≠≠ 
=
≠≠ !
editFlowerViewModel
≠≠ 2
.
≠≠2 3
Price
≠≠3 8
;
≠≠8 9
flower
ÆÆ 
.
ÆÆ 
ImageUrl
ÆÆ 
=
ÆÆ  !!
editFlowerViewModel
ÆÆ" 5
.
ÆÆ5 6
ImageUrl
ÆÆ6 >
;
ÆÆ> ?
flower
ØØ 
.
ØØ 
ImageThumbnailUrl
ØØ (
=
ØØ) *!
editFlowerViewModel
ØØ+ >
.
ØØ> ?
ImageThumbnailUrl
ØØ? P
;
ØØP Q
flower
∞∞ 
.
∞∞ "
IsFlowerPresentation
∞∞ +
=
∞∞, -!
editFlowerViewModel
∞∞. A
.
∞∞A B"
IsFlowerPresentation
∞∞B V
;
∞∞V W
flower
±± 
.
±± 
InStock
±± 
=
±±  !
editFlowerViewModel
±±! 4
.
±±4 5
InStock
±±5 <
;
±±< =
flower
≤≤ 
.
≤≤ 

CategoryId
≤≤ !
=
≤≤" #!
editFlowerViewModel
≤≤$ 7
.
≤≤7 8

CategoryId
≤≤8 B
;
≤≤B C
_flowerRepository
¥¥ !
.
¥¥! "
UpdateFlower
¥¥" .
(
¥¥. /
flower
¥¥/ 5
)
¥¥5 6
;
¥¥6 7
return
∂∂ 
RedirectToAction
∂∂ '
(
∂∂' (
$str
∂∂( :
,
∂∂: ;
_flowerRepository
∂∂< M
.
∂∂M N 
FlowersAsViewModel
∂∂N `
)
∂∂` a
;
∂∂a b
}
∑∑ 
return
ππ 
RedirectToAction
ππ #
(
ππ# $
$str
ππ$ 6
,
ππ6 7
_flowerRepository
ππ8 I
.
ππI J 
FlowersAsViewModel
ππJ \
)
ππ\ ]
;
ππ] ^
}
∫∫ 	
private
ºº 
FlowerViewModel
ºº *
MapDbFlowerToFlowerViewModel
ºº  <
(
ºº< =
Flower
ºº= C
dbFlower
ººD L
)
ººL M
{
ΩΩ 	
return
ææ 
new
ææ 
FlowerViewModel
ææ &
(
ææ& '
)
ææ' (
{
øø 
FlowerId
¿¿ 
=
¿¿ 
dbFlower
¿¿ #
.
¿¿# $
FlowerId
¿¿$ ,
,
¿¿, -
Name
¡¡ 
=
¡¡ 
dbFlower
¡¡ 
.
¡¡  
Name
¡¡  $
,
¡¡$ %
Price
¬¬ 
=
¬¬ 
dbFlower
¬¬  
.
¬¬  !
Price
¬¬! &
,
¬¬& '
ShortDescription
√√  
=
√√! "
dbFlower
√√# +
.
√√+ ,
ShortDescription
√√, <
,
√√< =
ImageThumbnailUrl
ƒƒ !
=
ƒƒ" #
dbFlower
ƒƒ$ ,
.
ƒƒ, -
ImageThumbnailUrl
ƒƒ- >
}
≈≈ 
;
≈≈ 
}
∆∆ 	
}
«« 
}»» ü
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ContactController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
ContactController "
:# $

Controller% /
{ 
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" $
,$ %
Location& .
=/ 0!
ResponseCacheLocation1 F
.F G
ClientG M
)M N
]N O
public

 
IActionResult

 
Index

 "
(

" #
)

# $
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ù
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FavoriteFlowerController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class $
FavoriteFlowerController )
:* +

Controller, 6
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public $
FavoriteFlowerController '
(' (
IFlowerRepository( 9
flowerRepository: J
,J K
ShoppingCartL X
shoppingCartY e
)e f
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
} 
} ´é
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
public 

class 
FlowerController !
:" #

Controller$ .
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
FlowerController 
(  
IFlowerRepository  1
flowerRepository2 B
,B C
ICategoryRepositoryD W
categoryRepositoryX j
)j k
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public 

ViewResult 
List 
( 
string %
category& .
,. /
decimal 
lowPrice 
= 
$num  
,  !
decimal 
	highPrice 
= 
$num  !
,! "
string 
sorting 
= 
$str 
,  
FlowerStock 
availability $
=% &
$num' (
)( )
{ 	
IEnumerable 
< 
Flower 
> 
flowers  '
;' (
string 
currentCategory "
=# $
string% +
.+ ,
Empty, 1
;1 2
if   
(   
string   
.   
IsNullOrEmpty   $
(  $ %
category  % -
)  - .
)  . /
{!! 
flowers"" 
="" 
_flowerRepository"" +
.""+ ,
Flowers"", 3
.""3 4
OrderBy""4 ;
(""; <
p""< =
=>""> @
p""A B
.""B C
FlowerId""C K
)""K L
;""L M
flowers## 
=## 
PriceFilter## %
(##% &
lowPrice##& .
,##. /
	highPrice##0 9
,##9 :
flowers##; B
)##B C
;##C D
currentCategory%% 
=%%  !
$str%%" /
;%%/ 0
}&& 
else'' 
{(( 
flowers)) 
=)) 
_flowerRepository)) +
.))+ ,
Flowers)), 3
.))3 4
Where))4 9
())9 :
p)): ;
=>))< >
p))? @
.))@ A
Category))A I
.))I J
CategoryName))J V
==))W Y
category))Z b
)))b c
.** 
OrderBy** 
(** 
p** 
=>**  
p**! "
.**" #
FlowerId**# +
)**+ ,
;**, -
flowers,, 
=,, 
PriceFilter,, %
(,,% &
lowPrice,,& .
,,,. /
	highPrice,,0 9
,,,9 :
flowers,,; B
),,B C
;,,C D
currentCategory.. 
=..  !
_categoryRepository.." 5
...5 6

Categories..6 @
...@ A
FirstOrDefault..A O
(..O P
c..P Q
=>..R T
c..U V
...V W
CategoryName..W c
==..d f
category..g o
)..o p
...p q
CategoryName..q }
;..} ~
}// 
if11 
(11 
!11 
string11 
.11 
IsNullOrEmpty11 %
(11% &
sorting11& -
)11- .
)11. /
{22 
if33 
(33 
sorting33 
.33 
Equals33 "
(33" #
$str33# .
,33. /
StringComparison330 @
.33@ A
OrdinalIgnoreCase33A R
)33R S
)33S T
flowers44 
=44 
flowers44 %
.44% &
OrderBy44& -
(44- .
p44. /
=>440 2
p443 4
.444 5
Price445 :
)44: ;
;44; <
else55 
if55 
(55 
sorting55  
.55  !
Equals55! '
(55' (
$str55( 4
,554 5
StringComparison556 F
.55F G
OrdinalIgnoreCase55G X
)55X Y
)55Y Z
flowers66 
=66 
flowers66 %
.66% &
OrderByDescending66& 7
(667 8
p668 9
=>66: <
p66= >
.66> ?
Price66? D
)66D E
;66E F
}77 
switch99 
(99 
availability99  
)99  !
{:: 
case;; 
FlowerStock;;  
.;;  !
InStock;;! (
:;;( )
flowers<< 
=<< 
flowers<< %
.<<% &
Where<<& +
(<<+ ,
x<<, -
=><<. 0
x<<1 2
.<<2 3
InStock<<3 :
==<<; =
true<<> B
)<<B C
;<<C D
break== 
;== 
case?? 
FlowerStock??  
.??  !

NotInStock??! +
:??+ ,
flowers@@ 
=@@ 
flowers@@ %
.@@% &
Where@@& +
(@@+ ,
x@@, -
=>@@. 0
x@@1 2
.@@2 3
InStock@@3 :
==@@; =
false@@> C
)@@C D
;@@D E
breakAA 
;AA 
caseCC 
FlowerStockCC  
.CC  !
AllCC! $
:CC$ %
breakDD 
;DD 
}EE 
returnGG 
ViewGG 
(GG 
newGG 
FlowerListViewModelGG /
{HH 
FlowersII 
=II 
flowersII !
,II! "
CurrentCategoryJJ 
=JJ  !
currentCategoryJJ" 1
}KK 
)KK 
;KK 
}LL 	
publicNN 

ViewResultNN 
FavoriteNN "
(NN" #
)NN# $
{OO 	
IEnumerablePP 
<PP 
FlowerPP 
>PP 
flowersPP  '
=PP( )
_flowerRepositoryPP* ;
.PP; <
FlowersPP< C
.QQ 
WhereQQ 
(QQ 
xQQ 
=>QQ 
xQQ 
.QQ 

IsFavoriteQQ (
)QQ( )
.RR 
OrderByRR 
(RR 
pRR 
=>RR 
pRR 
.RR  
FlowerIdRR  (
)RR( )
.SS 
ToListSS 
(SS 
)SS 
;SS 
returnUU 
ViewUU 
(UU 
newUU 
FlowerListViewModelUU /
{VV 
FlowersWW 
=WW 
flowersWW !
,WW! "
CurrentCategoryXX 
=XX  !
nullXX" &
}YY 
)YY 
;YY 
}ZZ 	
public\\ 
ActionResult\\ 
AddToFavorite\\ )
(\\) *
int\\* -
flowerId\\. 6
)\\6 7
{]] 	
var^^ 
flower^^ 
=^^ 
_flowerRepository^^ *
.^^* +
Flowers^^+ 2
.^^2 3
Where^^3 8
(^^8 9
x^^9 :
=>^^; =
x^^> ?
.^^? @
FlowerId^^@ H
==^^I K
flowerId^^L T
)^^T U
.^^U V
FirstOrDefault^^V d
(^^d e
)^^e f
;^^f g
if`` 
(`` 
flower`` 
!=`` 
null`` 
)`` 
{aa 
flowerbb 
.bb 

IsFavoritebb !
=bb" #
truebb$ (
;bb( )
_flowerRepositorycc !
.cc! "
UpdateFlowercc" .
(cc. /
flowercc/ 5
)cc5 6
;cc6 7
}dd 
returnff 
RedirectToActionff #
(ff# $
$strff$ .
,ff. /
$strff0 8
)ff8 9
;ff9 :
}gg 	
publicii 
ActionResultii 
RemoveFromFavoriteii .
(ii. /
intii/ 2
flowerIdii3 ;
)ii; <
{jj 	
varkk 
flowerkk 
=kk 
_flowerRepositorykk *
.kk* +
Flowerskk+ 2
.kk2 3
Wherekk3 8
(kk8 9
xkk9 :
=>kk; =
xkk> ?
.kk? @
FlowerIdkk@ H
==kkI K
flowerIdkkL T
)kkT U
.kkU V
FirstOrDefaultkkV d
(kkd e
)kke f
;kkf g
ifmm 
(mm 
flowermm 
!=mm 
nullmm 
)mm 
{nn 
floweroo 
.oo 

IsFavoriteoo !
=oo" #
falseoo$ )
;oo) *
_flowerRepositorypp !
.pp! "
UpdateFlowerpp" .
(pp. /
flowerpp/ 5
)pp5 6
;pp6 7
}qq 
returnss 
RedirectToActionss #
(ss# $
$strss$ *
,ss* +
$strss, 4
)ss4 5
;ss5 6
}tt 	
privatevv 
staticvv 
IEnumerablevv "
<vv" #
Flowervv# )
>vv) *
PriceFiltervv+ 6
(vv6 7
decimalvv7 >
lowPricevv? G
,vvG H
decimalvvI P
	highPricevvQ Z
,vvZ [
IEnumerablevv\ g
<vvg h
Flowervvh n
>vvn o
flowersvvp w
)vvw x
{ww 	
ifxx 
(xx 
lowPricexx 
!=xx 
$numxx 
)xx 
{yy 
ifzz 
(zz 
	highPricezz 
!=zz  
$numzz! "
)zz" #
return{{ 
flowers{{ "
.{{" #
Where{{# (
({{( )
x{{) *
=>{{+ -
x{{. /
.{{/ 0
Price{{0 5
>={{6 8
lowPrice{{9 A
&&{{B D
x{{E F
.{{F G
Price{{G L
<={{M O
	highPrice{{P Y
){{Y Z
.{{Z [
OrderBy{{[ b
({{b c
p{{c d
=>{{e g
p{{h i
.{{i j
FlowerId{{j r
){{r s
;{{s t
else|| 
return}} 
flowers}} "
.}}" #
Where}}# (
(}}( )
x}}) *
=>}}+ -
x}}. /
.}}/ 0
Price}}0 5
>=}}6 8
lowPrice}}9 A
)}}A B
.}}B C
OrderBy}}C J
(}}J K
p}}K L
=>}}M O
p}}P Q
.}}Q R
FlowerId}}R Z
)}}Z [
;}}[ \
}~~ 
else 
if 
( 
	highPrice 
!= !
$num" #
)# $
return
ÄÄ 
flowers
ÄÄ 
.
ÄÄ 
Where
ÄÄ $
(
ÄÄ$ %
x
ÄÄ% &
=>
ÄÄ' )
x
ÄÄ* +
.
ÄÄ+ ,
Price
ÄÄ, 1
<=
ÄÄ2 4
	highPrice
ÄÄ5 >
)
ÄÄ> ?
.
ÄÄ? @
OrderBy
ÄÄ@ G
(
ÄÄG H
p
ÄÄH I
=>
ÄÄJ L
p
ÄÄM N
.
ÄÄN O
FlowerId
ÄÄO W
)
ÄÄW X
;
ÄÄX Y
else
ÅÅ 
return
ÇÇ 
flowers
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
enum
ÖÖ 
FlowerStock
ÖÖ 
{
ÜÜ 	
All
áá 
=
áá 
$num
áá 
,
áá 
InStock
àà 
=
àà 
$num
àà 
,
àà 

NotInStock
ââ 
=
ââ 
$num
ââ 
}
ää 	
[
åå 	
HttpGet
åå	 
]
åå 
public
çç 

ViewResult
çç 
Search
çç  
(
çç  !
string
çç! '

flowerName
çç( 2
,
çç2 3
decimal
çç4 ;
lowPrice
çç< D
=
ççE F
$num
ççG H
,
ççH I
decimal
ççJ Q
	highPrice
ççR [
=
çç\ ]
$num
çç^ _
,
çç_ `
string
çça g
sorting
ççh o
=
ççp q
$str
ççr t
)
ççt u
{
éé 	
IEnumerable
èè 
<
èè 
Flower
èè 
>
èè 
flowers
èè  '
;
èè' (
string
êê 
currentCategory
êê "
=
êê# $
string
êê% +
.
êê+ ,
Empty
êê, 1
;
êê1 2
ViewBag
ëë 
.
ëë 

FlowerName
ëë 
=
ëë  

flowerName
ëë! +
;
ëë+ ,
flowers
îî 
=
îî 
_flowerRepository
îî '
.
îî' (
Flowers
îî( /
.
îî/ 0
Where
îî0 5
(
îî5 6
p
îî6 7
=>
îî8 :
p
îî; <
.
îî< =
Name
îî= A
.
îîA B
Contains
îîB J
(
îîJ K

flowerName
îîK U
)
îîU V
||
îîW Y
p
ïï 
.
ïï 
LongDescription
ïï !
.
ïï! "
Contains
ïï" *
(
ïï* +

flowerName
ïï+ 5
)
ïï5 6
||
ïï7 9
p
ññ 
.
ññ 
ShortDescription
ññ "
.
ññ" #
Contains
ññ# +
(
ññ+ ,

flowerName
ññ, 6
)
ññ6 7
)
ññ7 8
.
ññ8 9
OrderBy
ññ9 @
(
ññ@ A
p
ññA B
=>
ññC E
p
ññF G
.
ññG H
FlowerId
ññH P
)
ññP Q
;
ññQ R
flowers
òò 
=
òò 
PriceFilter
òò !
(
òò! "
lowPrice
òò" *
,
òò* +
	highPrice
òò, 5
,
òò5 6
flowers
òò7 >
)
òò> ?
;
òò? @
if
öö 
(
öö 
!
öö 
string
öö 
.
öö 
IsNullOrEmpty
öö %
(
öö% &
sorting
öö& -
)
öö- .
)
öö. /
{
õõ 
if
úú 
(
úú 
sorting
úú 
.
úú 
Equals
úú "
(
úú" #
$str
úú# .
,
úú. /
StringComparison
úú0 @
.
úú@ A
OrdinalIgnoreCase
úúA R
)
úúR S
)
úúS T
flowers
ùù 
=
ùù 
flowers
ùù %
.
ùù% &
OrderBy
ùù& -
(
ùù- .
p
ùù. /
=>
ùù0 2
p
ùù3 4
.
ùù4 5
Price
ùù5 :
)
ùù: ;
;
ùù; <
else
ûû 
if
ûû 
(
ûû 
sorting
ûû  
.
ûû  !
Equals
ûû! '
(
ûû' (
$str
ûû( 4
,
ûû4 5
StringComparison
ûû6 F
.
ûûF G
OrdinalIgnoreCase
ûûG X
)
ûûX Y
)
ûûY Z
flowers
üü 
=
üü 
flowers
üü %
.
üü% &
OrderByDescending
üü& 7
(
üü7 8
p
üü8 9
=>
üü: <
p
üü= >
.
üü> ?
Price
üü? D
)
üüD E
;
üüE F
}
†† 
return
££ 
View
££ 
(
££ 
new
££ !
FlowerListViewModel
££ /
{
§§ 
Flowers
•• 
=
•• 
flowers
•• !
,
••! "
CurrentCategory
¶¶ 
=
¶¶  !
currentCategory
¶¶" 1
}
ßß 
)
ßß 
;
ßß 
}
®® 	
[
™™ 	
HttpGet
™™	 
]
™™ 
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
ActionResult
´´ &
>
´´& ' 
AutocompleteSearch
´´( :
(
´´: ;
)
´´; <
{
¨¨ 	
try
≠≠ 
{
ÆÆ 
string
ØØ 
term
ØØ 
=
ØØ 
HttpContext
ØØ )
.
ØØ) *
Request
ØØ* 1
.
ØØ1 2
Query
ØØ2 7
[
ØØ7 8
$str
ØØ8 >
]
ØØ> ?
.
ØØ? @
ToString
ØØ@ H
(
ØØH I
)
ØØI J
;
ØØJ K
var
∞∞ 
names
∞∞ 
=
∞∞ 
_flowerRepository
∞∞ -
.
∞∞- .
Flowers
∞∞. 5
.
∞∞5 6
Where
∞∞6 ;
(
∞∞; <
p
∞∞< =
=>
∞∞> @
p
∞∞A B
.
∞∞B C
Name
∞∞C G
.
∞∞G H
Contains
∞∞H P
(
∞∞P Q
term
∞∞Q U
)
∞∞U V
)
∞∞V W
.
∞∞W X
Select
∞∞X ^
(
∞∞^ _
p
∞∞_ `
=>
∞∞a c
p
∞∞d e
.
∞∞e f
Name
∞∞f j
)
∞∞j k
.
∞∞k l
ToList
∞∞l r
(
∞∞r s
)
∞∞s t
;
∞∞t u
return
≤≤ 
Ok
≤≤ 
(
≤≤ 
names
≤≤ 
)
≤≤  
;
≤≤  !
}
≥≥ 
catch
¥¥ 
{
µµ 
return
∂∂ 

BadRequest
∂∂ !
(
∂∂! "
)
∂∂" #
;
∂∂# $
}
∑∑ 
}
∏∏ 	
[
∫∫ 	
HttpGet
∫∫	 
]
∫∫ 
public
ªª 
IEnumerable
ªª 
<
ªª 
string
ªª !
>
ªª! "
FlowersNames
ªª# /
(
ªª/ 0
)
ªª0 1
{
ºº 	
return
ΩΩ 
_flowerRepository
ΩΩ $
.
ΩΩ$ %
FlowersNames
ΩΩ% 1
;
ΩΩ1 2
}
ææ 	
public
¿¿ 
IActionResult
¿¿ 
Details
¿¿ $
(
¿¿$ %
int
¿¿% (
id
¿¿) +
)
¿¿+ ,
{
¡¡ 	
var
¬¬ 
flower
¬¬ 
=
¬¬ 
_flowerRepository
¬¬ *
.
¬¬* +
GetFlowerById
¬¬+ 8
(
¬¬8 9
id
¬¬9 ;
)
¬¬; <
;
¬¬< =
if
ƒƒ 
(
ƒƒ 
flower
ƒƒ 
==
ƒƒ 
null
ƒƒ 
)
ƒƒ 
return
≈≈ 
NotFound
≈≈ 
(
≈≈  
)
≈≈  !
;
≈≈! "
return
«« 
View
«« 
(
«« 
new
«« #
FlowerDetailViewModel
«« 1
{
»» 
Flower
…… 
=
…… 
flower
…… 
}
   
)
   
;
   
}
ÀÀ 	
}
ÃÃ 
}ÕÕ •
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerDataController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class  
FlowerDataController %
:& '

Controller( 2
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public  
FlowerDataController #
(# $
IFlowerRepository$ 5
flowerRepository6 F
)F G
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
FlowerViewModel *
>* +
LoadMoreFlowers, ;
(; <
)< =
{ 	
IEnumerable 
< 
Flower 
> 
	dbFlowers  )
=* +
null, 0
;0 1
	dbFlowers 
= 
_flowerRepository )
.) *
Flowers* 1
.1 2
OrderBy2 9
(9 :
p: ;
=>< >
p? @
.@ A
FlowerIdA I
)I J
.J K
TakeK O
(O P
$numP R
)R S
;S T
List 
< 
FlowerViewModel  
>  !
flowers" )
=* +
new, /
List0 4
<4 5
FlowerViewModel5 D
>D E
(E F
)F G
;G H
foreach   
(   
var   
dbFlower   !
in  " $
	dbFlowers  % .
)  . /
{!! 
flowers"" 
."" 
Add"" 
("" (
MapDbFlowerToFlowerViewModel"" 8
(""8 9
dbFlower""9 A
)""A B
)""B C
;""C D
}## 
return$$ 
flowers$$ 
;$$ 
}%% 	
private'' 
FlowerViewModel'' (
MapDbFlowerToFlowerViewModel''  <
(''< =
Flower''= C
dbFlower''D L
)''L M
{(( 	
return)) 
new)) 
FlowerViewModel)) &
())& '
)))' (
{** 
FlowerId++ 
=++ 
dbFlower++ #
.++# $
FlowerId++$ ,
,++, -
Name,, 
=,, 
dbFlower,, 
.,,  
Name,,  $
,,,$ %
Price-- 
=-- 
dbFlower--  
.--  !
Price--! &
,--& '
ShortDescription..  
=..! "
dbFlower..# +
...+ ,
ShortDescription.., <
,..< =
ImageThumbnailUrl// !
=//" #
dbFlower//$ ,
.//, -
ImageThumbnailUrl//- >
}00 
;00 
}11 	
}22 
}33 µ

HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\HomeController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public 
HomeController 
( 
IFlowerRepository /
flowerRepository0 @
)@ A
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
homeViewModel 
= 
new  #
HomeViewModel$ 1
{ 
FlowerPresentation "
=# $
_flowerRepository% 6
.6 7
FlowerPresentation7 I
,I J
FlowersName 
= 
_flowerRepository /
./ 0
FlowersNames0 <
} 
; 
return 
View 
( 
homeViewModel %
)% &
;& '
} 	
} 
} À
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
OrderController  
:! "

Controller# -
{		 
private

 
readonly

 
IOrderRepository

 )
_orderRepository

* :
;

: ;
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderController 
( 
IOrderRepository /
orderRepository0 ?
,? @
ShoppingCartA M
shoppingCartN Z
)Z [
{ 	
_orderRepository 
= 
orderRepository .
;. /
_shoppingCart 
= 
shoppingCart (
;( )
} 	
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
)& '
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
Order& +
order, 1
)1 2
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
if   
(   
_shoppingCart   
.   
ShoppingCartItems   /
.  / 0
Count  0 5
==  6 8
$num  9 :
)  : ;
{!! 

ModelState"" 
."" 
AddModelError"" (
(""( )
$str"") +
,""+ ,
$str""- Y
)""Y Z
;""Z [
}## 
if%% 
(%% 

ModelState%% 
.%% 
IsValid%% "
)%%" #
{&& 
order'' 
.'' 
Email'' 
='' 
User'' "
.''" #
Identity''# +
.''+ ,
Name'', 0
;''0 1
_orderRepository((  
.((  !
CreateOrder((! ,
(((, -
order((- 2
)((2 3
;((3 4
_shoppingCart)) 
.)) 
	ClearCart)) '
())' (
)))( )
;))) *
return** 
RedirectToAction** '
(**' (
$str**( :
)**: ;
;**; <
}++ 
return,, 
View,, 
(,, 
order,, 
),, 
;,, 
}-- 	
public// 
IActionResult// 
CheckoutComplete// -
(//- .
)//. /
{00 	
ViewBag11 
.11 #
CheckoutCompleteMessage11 +
=11, -
$str11. n
;11n o
return33 
View33 
(33 
)33 
;33 
}44 	
}55 
}66 «
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderHistoryController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
public

 

class

 "
OrderHistoryController

 '
:

( )

Controller

* 4
{ 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public "
OrderHistoryController %
(% &
IOrderRepository& 6
orderRepository7 F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
)t u
{ 	
_orderRepository 
= 
orderRepository .
;. /
_signInManager 
= 
signInManager *
;* +
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
IEnumerable 
< (
OrderHistoryDetailsViewModel 4
>4 5
orders6 <
== >
null? C
;C D
if 
( 
_signInManager 
. 

IsSignedIn )
() *
User* .
). /
&&0 2
User3 7
.7 8
IsInRole8 @
(@ A
$strA Q
)Q R
)R S
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
)? @
;@ A
} 
else 
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
User? C
.C D
IdentityD L
.L M
NameM Q
)Q R
;R S
} 
return!! 
View!! 
(!! 
new!! !
OrderHistoryViewModel!! 1
{"" 
Orders## 
=## 
orders## 
}$$ 
)$$ 
;$$ 
}%% 	
}&& 
}(( ¸'
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ShoppingCartController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public		 

class		 "
ShoppingCartController		 '
:		( )

Controller		* 4
{

 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public "
ShoppingCartController %
(% &
IFlowerRepository& 7
flowerRepository8 H
,H I
ShoppingCartJ V
shoppingCartW c
)c d
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var !
shoppingCartViewModel %
=& '
new( +!
ShoppingCartViewModel, A
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return 
View 
( !
shoppingCartViewModel -
)- .
;. /
}   	
public"" "
RedirectToActionResult"" %
AddToShoppingCart""& 7
(""7 8
int""8 ;
flowerId""< D
)""D E
{## 	
var$$ 
selectedFlower$$ 
=$$  
_flowerRepository$$! 2
.$$2 3
Flowers$$3 :
.$$: ;
FirstOrDefault$$; I
($$I J
p$$J K
=>$$L N
p$$O P
.$$P Q
FlowerId$$Q Y
==$$Z \
flowerId$$] e
)$$e f
;$$f g
if&& 
(&& 
selectedFlower&& 
!=&& !
null&&" &
)&&& '
{'' 
_shoppingCart(( 
.(( 
	AddToCart(( '
(((' (
selectedFlower((( 6
,((6 7
$num((8 9
)((9 :
;((: ;
})) 
return** 
RedirectToAction** #
(**# $
$str**$ +
)**+ ,
;**, -
}++ 	
public-- "
RedirectToActionResult-- %
UpdateShoppingCart--& 8
(--8 9
int--9 <
flowerId--= E
,--E F
bool--G K
isAdding--L T
)--T U
{.. 	
var// 
selectedFlower// 
=//  
_flowerRepository//! 2
.//2 3
Flowers//3 :
.//: ;
FirstOrDefault//; I
(//I J
p//J K
=>//L N
p//O P
.//P Q
FlowerId//Q Y
==//Z \
flowerId//] e
)//e f
;//f g
if11 
(11 
selectedFlower11 
!=11 !
null11" &
)11& '
{22 
if33 
(33 
isAdding33 
)33 
{44 
_shoppingCart55 !
.55! "
	AddToCart55" +
(55+ ,
selectedFlower55, :
,55: ;
$num55< =
)55= >
;55> ?
}66 
else77 
{88 
_shoppingCart99 !
.99! "
	AddToCart99" +
(99+ ,
selectedFlower99, :
,99: ;
-99< =
$num99= >
)99> ?
;99? @
}:: 
};; 
return<< 
RedirectToAction<< #
(<<# $
$str<<$ +
)<<+ ,
;<<, -
}== 	
public?? "
RedirectToActionResult?? %"
RemoveFromShoppingCart??& <
(??< =
int??= @
flowerId??A I
)??I J
{@@ 	
varAA 
selectedFlowerAA 
=AA  
_flowerRepositoryAA! 2
.AA2 3
FlowersAA3 :
.AA: ;
FirstOrDefaultAA; I
(AAI J
pAAJ K
=>AAL N
pAAO P
.AAP Q
FlowerIdAAQ Y
==AAZ \
flowerIdAA] e
)AAe f
;AAf g
ifCC 
(CC 
selectedFlowerCC 
!=CC !
nullCC" &
)CC& '
{DD 
_shoppingCartEE 
.EE 
RemoveFromCartEE ,
(EE, -
selectedFlowerEE- ;
)EE; <
;EE< =
}FF 
returnGG 
RedirectToActionGG #
(GG# $
$strGG$ +
)GG+ ,
;GG, -
}HH 	
}II 
}JJ Äœ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191208173628_Init.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Init 
: 
	Migration  )
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
	maxLength: C
:C D
$numE H
,H I
nullableJ R
:R S
trueT X
)X Y
,Y Z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
nullable< D
:D E
trueF J
)J K
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
UserName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
	maxLength4 =
:= >
$num? B
,B C
nullableD L
:L M
trueN R
)R S
,S T
NormalizedUserName &
=' (
table) .
.. /
Column/ 5
<5 6
string6 <
>< =
(= >
	maxLength> G
:G H
$numI L
,L M
nullableN V
:V W
trueX \
)\ ]
,] ^
Email   
=   
table   !
.  ! "
Column  " (
<  ( )
string  ) /
>  / 0
(  0 1
	maxLength  1 :
:  : ;
$num  < ?
,  ? @
nullable  A I
:  I J
true  K O
)  O P
,  P Q
NormalizedEmail!! #
=!!$ %
table!!& +
.!!+ ,
Column!!, 2
<!!2 3
string!!3 9
>!!9 :
(!!: ;
	maxLength!!; D
:!!D E
$num!!F I
,!!I J
nullable!!K S
:!!S T
true!!U Y
)!!Y Z
,!!Z [
EmailConfirmed"" "
=""# $
table""% *
.""* +
Column""+ 1
<""1 2
bool""2 6
>""6 7
(""7 8
nullable""8 @
:""@ A
false""B G
)""G H
,""H I
PasswordHash##  
=##! "
table### (
.##( )
Column##) /
<##/ 0
string##0 6
>##6 7
(##7 8
nullable##8 @
:##@ A
true##B F
)##F G
,##G H
SecurityStamp$$ !
=$$" #
table$$$ )
.$$) *
Column$$* 0
<$$0 1
string$$1 7
>$$7 8
($$8 9
nullable$$9 A
:$$A B
true$$C G
)$$G H
,$$H I
ConcurrencyStamp%% $
=%%% &
table%%' ,
.%%, -
Column%%- 3
<%%3 4
string%%4 :
>%%: ;
(%%; <
nullable%%< D
:%%D E
true%%F J
)%%J K
,%%K L
PhoneNumber&& 
=&&  !
table&&" '
.&&' (
Column&&( .
<&&. /
string&&/ 5
>&&5 6
(&&6 7
nullable&&7 ?
:&&? @
true&&A E
)&&E F
,&&F G 
PhoneNumberConfirmed'' (
='') *
table''+ 0
.''0 1
Column''1 7
<''7 8
bool''8 <
>''< =
(''= >
nullable''> F
:''F G
false''H M
)''M N
,''N O
TwoFactorEnabled(( $
=((% &
table((' ,
.((, -
Column((- 3
<((3 4
bool((4 8
>((8 9
(((9 :
nullable((: B
:((B C
false((D I
)((I J
,((J K

LockoutEnd)) 
=))  
table))! &
.))& '
Column))' -
<))- .
DateTimeOffset)). <
>))< =
())= >
nullable))> F
:))F G
true))H L
)))L M
,))M N
LockoutEnabled** "
=**# $
table**% *
.*** +
Column**+ 1
<**1 2
bool**2 6
>**6 7
(**7 8
nullable**8 @
:**@ A
false**B G
)**G H
,**H I
AccessFailedCount++ %
=++& '
table++( -
.++- .
Column++. 4
<++4 5
int++5 8
>++8 9
(++9 :
nullable++: B
:++B C
false++D I
)++I J
,++J K
	Birthdate,, 
=,, 
table,,  %
.,,% &
Column,,& ,
<,,, -
DateTime,,- 5
>,,5 6
(,,6 7
nullable,,7 ?
:,,? @
false,,A F
),,F G
,,,G H
City-- 
=-- 
table--  
.--  !
Column--! '
<--' (
string--( .
>--. /
(--/ 0
nullable--0 8
:--8 9
true--: >
)--> ?
,--? @
Country.. 
=.. 
table.. #
...# $
Column..$ *
<..* +
string..+ 1
>..1 2
(..2 3
nullable..3 ;
:..; <
true..= A
)..A B
}// 
,// 
constraints00 
:00 
table00 "
=>00# %
{11 
table22 
.22 

PrimaryKey22 $
(22$ %
$str22% 5
,225 6
x227 8
=>229 ;
x22< =
.22= >
Id22> @
)22@ A
;22A B
}33 
)33 
;33 
migrationBuilder55 
.55 
CreateTable55 (
(55( )
name66 
:66 
$str66 "
,66" #
columns77 
:77 
table77 
=>77 !
new77" %
{88 

CategoryId99 
=99  
table99! &
.99& '
Column99' -
<99- .
int99. 1
>991 2
(992 3
nullable993 ;
:99; <
false99= B
)99B C
.:: 

Annotation:: #
(::# $
$str::$ G
,::G H,
 SqlServerValueGenerationStrategy::I i
.::i j
IdentityColumn::j x
)::x y
,::y z
CategoryName;;  
=;;! "
table;;# (
.;;( )
Column;;) /
<;;/ 0
string;;0 6
>;;6 7
(;;7 8
nullable;;8 @
:;;@ A
true;;B F
);;F G
,;;G H
Description<< 
=<<  !
table<<" '
.<<' (
Column<<( .
<<<. /
string<</ 5
><<5 6
(<<6 7
nullable<<7 ?
:<<? @
true<<A E
)<<E F
}== 
,== 
constraints>> 
:>> 
table>> "
=>>># %
{?? 
table@@ 
.@@ 

PrimaryKey@@ $
(@@$ %
$str@@% 4
,@@4 5
x@@6 7
=>@@8 :
x@@; <
.@@< =

CategoryId@@= G
)@@G H
;@@H I
}AA 
)AA 
;AA 
migrationBuilderCC 
.CC 
CreateTableCC (
(CC( )
nameDD 
:DD 
$strDD 
,DD 
columnsEE 
:EE 
tableEE 
=>EE !
newEE" %
{FF 
OrderIdGG 
=GG 
tableGG #
.GG# $
ColumnGG$ *
<GG* +
intGG+ .
>GG. /
(GG/ 0
nullableGG0 8
:GG8 9
falseGG: ?
)GG? @
.HH 

AnnotationHH #
(HH# $
$strHH$ G
,HHG H,
 SqlServerValueGenerationStrategyHHI i
.HHi j
IdentityColumnHHj x
)HHx y
,HHy z
	FirstNameII 
=II 
tableII  %
.II% &
ColumnII& ,
<II, -
stringII- 3
>II3 4
(II4 5
	maxLengthII5 >
:II> ?
$numII@ B
,IIB C
nullableIID L
:IIL M
falseIIN S
)IIS T
,IIT U
LastNameJJ 
=JJ 
tableJJ $
.JJ$ %
ColumnJJ% +
<JJ+ ,
stringJJ, 2
>JJ2 3
(JJ3 4
	maxLengthJJ4 =
:JJ= >
$numJJ? A
,JJA B
nullableJJC K
:JJK L
falseJJM R
)JJR S
,JJS T
AddressLine1KK  
=KK! "
tableKK# (
.KK( )
ColumnKK) /
<KK/ 0
stringKK0 6
>KK6 7
(KK7 8
	maxLengthKK8 A
:KKA B
$numKKC F
,KKF G
nullableKKH P
:KKP Q
falseKKR W
)KKW X
,KKX Y
AddressLine2LL  
=LL! "
tableLL# (
.LL( )
ColumnLL) /
<LL/ 0
stringLL0 6
>LL6 7
(LL7 8
nullableLL8 @
:LL@ A
trueLLB F
)LLF G
,LLG H
ZipCodeMM 
=MM 
tableMM #
.MM# $
ColumnMM$ *
<MM* +
stringMM+ 1
>MM1 2
(MM2 3
	maxLengthMM3 <
:MM< =
$numMM> @
,MM@ A
nullableMMB J
:MMJ K
falseMML Q
)MMQ R
,MMR S
CityNN 
=NN 
tableNN  
.NN  !
ColumnNN! '
<NN' (
stringNN( .
>NN. /
(NN/ 0
	maxLengthNN0 9
:NN9 :
$numNN; =
,NN= >
nullableNN? G
:NNG H
falseNNI N
)NNN O
,NNO P
StateOO 
=OO 
tableOO !
.OO! "
ColumnOO" (
<OO( )
stringOO) /
>OO/ 0
(OO0 1
	maxLengthOO1 :
:OO: ;
$numOO< >
,OO> ?
nullableOO@ H
:OOH I
trueOOJ N
)OON O
,OOO P
CountryPP 
=PP 
tablePP #
.PP# $
ColumnPP$ *
<PP* +
stringPP+ 1
>PP1 2
(PP2 3
	maxLengthPP3 <
:PP< =
$numPP> @
,PP@ A
nullablePPB J
:PPJ K
falsePPL Q
)PPQ R
,PPR S
PhoneNumberQQ 
=QQ  !
tableQQ" '
.QQ' (
ColumnQQ( .
<QQ. /
stringQQ/ 5
>QQ5 6
(QQ6 7
	maxLengthQQ7 @
:QQ@ A
$numQQB D
,QQD E
nullableQQF N
:QQN O
falseQQP U
)QQU V
,QQV W
EmailRR 
=RR 
tableRR !
.RR! "
ColumnRR" (
<RR( )
stringRR) /
>RR/ 0
(RR0 1
	maxLengthRR1 :
:RR: ;
$numRR< >
,RR> ?
nullableRR@ H
:RRH I
falseRRJ O
)RRO P
,RRP Q

OrderTotalSS 
=SS  
tableSS! &
.SS& '
ColumnSS' -
<SS- .
decimalSS. 5
>SS5 6
(SS6 7
nullableSS7 ?
:SS? @
falseSSA F
)SSF G
,SSG H
OrderPlacedTT 
=TT  !
tableTT" '
.TT' (
ColumnTT( .
<TT. /
DateTimeTT/ 7
>TT7 8
(TT8 9
nullableTT9 A
:TTA B
falseTTC H
)TTH I
}UU 
,UU 
constraintsVV 
:VV 
tableVV "
=>VV# %
{WW 
tableXX 
.XX 

PrimaryKeyXX $
(XX$ %
$strXX% 0
,XX0 1
xXX2 3
=>XX4 6
xXX7 8
.XX8 9
OrderIdXX9 @
)XX@ A
;XXA B
}YY 
)YY 
;YY 
migrationBuilder[[ 
.[[ 
CreateTable[[ (
([[( )
name\\ 
:\\ 
$str\\ (
,\\( )
columns]] 
:]] 
table]] 
=>]] !
new]]" %
{^^ 
Id__ 
=__ 
table__ 
.__ 
Column__ %
<__% &
int__& )
>__) *
(__* +
nullable__+ 3
:__3 4
false__5 :
)__: ;
.`` 

Annotation`` #
(``# $
$str``$ G
,``G H,
 SqlServerValueGenerationStrategy``I i
.``i j
IdentityColumn``j x
)``x y
,``y z
RoleIdaa 
=aa 
tableaa "
.aa" #
Columnaa# )
<aa) *
stringaa* 0
>aa0 1
(aa1 2
nullableaa2 :
:aa: ;
falseaa< A
)aaA B
,aaB C
	ClaimTypebb 
=bb 
tablebb  %
.bb% &
Columnbb& ,
<bb, -
stringbb- 3
>bb3 4
(bb4 5
nullablebb5 =
:bb= >
truebb? C
)bbC D
,bbD E

ClaimValuecc 
=cc  
tablecc! &
.cc& '
Columncc' -
<cc- .
stringcc. 4
>cc4 5
(cc5 6
nullablecc6 >
:cc> ?
truecc@ D
)ccD E
}dd 
,dd 
constraintsee 
:ee 
tableee "
=>ee# %
{ff 
tablegg 
.gg 

PrimaryKeygg $
(gg$ %
$strgg% :
,gg: ;
xgg< =
=>gg> @
xggA B
.ggB C
IdggC E
)ggE F
;ggF G
tablehh 
.hh 

ForeignKeyhh $
(hh$ %
nameii 
:ii 
$strii F
,iiF G
columnjj 
:jj 
xjj  !
=>jj" $
xjj% &
.jj& '
RoleIdjj' -
,jj- .
principalTablekk &
:kk& '
$strkk( 5
,kk5 6
principalColumnll '
:ll' (
$strll) -
,ll- .
onDeletemm  
:mm  !
ReferentialActionmm" 3
.mm3 4
Cascademm4 ;
)mm; <
;mm< =
}nn 
)nn 
;nn 
migrationBuilderpp 
.pp 
CreateTablepp (
(pp( )
nameqq 
:qq 
$strqq (
,qq( )
columnsrr 
:rr 
tablerr 
=>rr !
newrr" %
{ss 
Idtt 
=tt 
tablett 
.tt 
Columntt %
<tt% &
inttt& )
>tt) *
(tt* +
nullablett+ 3
:tt3 4
falsett5 :
)tt: ;
.uu 

Annotationuu #
(uu# $
$struu$ G
,uuG H,
 SqlServerValueGenerationStrategyuuI i
.uui j
IdentityColumnuuj x
)uux y
,uuy z
UserIdvv 
=vv 
tablevv "
.vv" #
Columnvv# )
<vv) *
stringvv* 0
>vv0 1
(vv1 2
nullablevv2 :
:vv: ;
falsevv< A
)vvA B
,vvB C
	ClaimTypeww 
=ww 
tableww  %
.ww% &
Columnww& ,
<ww, -
stringww- 3
>ww3 4
(ww4 5
nullableww5 =
:ww= >
trueww? C
)wwC D
,wwD E

ClaimValuexx 
=xx  
tablexx! &
.xx& '
Columnxx' -
<xx- .
stringxx. 4
>xx4 5
(xx5 6
nullablexx6 >
:xx> ?
truexx@ D
)xxD E
}yy 
,yy 
constraintszz 
:zz 
tablezz "
=>zz# %
{{{ 
table|| 
.|| 

PrimaryKey|| $
(||$ %
$str||% :
,||: ;
x||< =
=>||> @
x||A B
.||B C
Id||C E
)||E F
;||F G
table}} 
.}} 

ForeignKey}} $
(}}$ %
name~~ 
:~~ 
$str~~ F
,~~F G
column 
: 
x  !
=>" $
x% &
.& '
UserId' -
,- .
principalTable
ÄÄ &
:
ÄÄ& '
$str
ÄÄ( 5
,
ÄÄ5 6
principalColumn
ÅÅ '
:
ÅÅ' (
$str
ÅÅ) -
,
ÅÅ- .
onDelete
ÇÇ  
:
ÇÇ  !
ReferentialAction
ÇÇ" 3
.
ÇÇ3 4
Cascade
ÇÇ4 ;
)
ÇÇ; <
;
ÇÇ< =
}
ÉÉ 
)
ÉÉ 
;
ÉÉ 
migrationBuilder
ÖÖ 
.
ÖÖ 
CreateTable
ÖÖ (
(
ÖÖ( )
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ (
,
ÜÜ( )
columns
áá 
:
áá 
table
áá 
=>
áá !
new
áá" %
{
àà 
LoginProvider
ââ !
=
ââ" #
table
ââ$ )
.
ââ) *
Column
ââ* 0
<
ââ0 1
string
ââ1 7
>
ââ7 8
(
ââ8 9
nullable
ââ9 A
:
ââA B
false
ââC H
)
ââH I
,
ââI J
ProviderKey
ää 
=
ää  !
table
ää" '
.
ää' (
Column
ää( .
<
ää. /
string
ää/ 5
>
ää5 6
(
ää6 7
nullable
ää7 ?
:
ää? @
false
ääA F
)
ääF G
,
ääG H!
ProviderDisplayName
ãã '
=
ãã( )
table
ãã* /
.
ãã/ 0
Column
ãã0 6
<
ãã6 7
string
ãã7 =
>
ãã= >
(
ãã> ?
nullable
ãã? G
:
ããG H
true
ããI M
)
ããM N
,
ããN O
UserId
åå 
=
åå 
table
åå "
.
åå" #
Column
åå# )
<
åå) *
string
åå* 0
>
åå0 1
(
åå1 2
nullable
åå2 :
:
åå: ;
false
åå< A
)
ååA B
}
çç 
,
çç 
constraints
éé 
:
éé 
table
éé "
=>
éé# %
{
èè 
table
êê 
.
êê 

PrimaryKey
êê $
(
êê$ %
$str
êê% :
,
êê: ;
x
êê< =
=>
êê> @
new
êêA D
{
êêE F
x
êêG H
.
êêH I
LoginProvider
êêI V
,
êêV W
x
êêX Y
.
êêY Z
ProviderKey
êêZ e
}
êêf g
)
êêg h
;
êêh i
table
ëë 
.
ëë 

ForeignKey
ëë $
(
ëë$ %
name
íí 
:
íí 
$str
íí F
,
ííF G
column
ìì 
:
ìì 
x
ìì  !
=>
ìì" $
x
ìì% &
.
ìì& '
UserId
ìì' -
,
ìì- .
principalTable
îî &
:
îî& '
$str
îî( 5
,
îî5 6
principalColumn
ïï '
:
ïï' (
$str
ïï) -
,
ïï- .
onDelete
ññ  
:
ññ  !
ReferentialAction
ññ" 3
.
ññ3 4
Cascade
ññ4 ;
)
ññ; <
;
ññ< =
}
óó 
)
óó 
;
óó 
migrationBuilder
ôô 
.
ôô 
CreateTable
ôô (
(
ôô( )
name
öö 
:
öö 
$str
öö '
,
öö' (
columns
õõ 
:
õõ 
table
õõ 
=>
õõ !
new
õõ" %
{
úú 
UserId
ùù 
=
ùù 
table
ùù "
.
ùù" #
Column
ùù# )
<
ùù) *
string
ùù* 0
>
ùù0 1
(
ùù1 2
nullable
ùù2 :
:
ùù: ;
false
ùù< A
)
ùùA B
,
ùùB C
RoleId
ûû 
=
ûû 
table
ûû "
.
ûû" #
Column
ûû# )
<
ûû) *
string
ûû* 0
>
ûû0 1
(
ûû1 2
nullable
ûû2 :
:
ûû: ;
false
ûû< A
)
ûûA B
}
üü 
,
üü 
constraints
†† 
:
†† 
table
†† "
=>
††# %
{
°° 
table
¢¢ 
.
¢¢ 

PrimaryKey
¢¢ $
(
¢¢$ %
$str
¢¢% 9
,
¢¢9 :
x
¢¢; <
=>
¢¢= ?
new
¢¢@ C
{
¢¢D E
x
¢¢F G
.
¢¢G H
UserId
¢¢H N
,
¢¢N O
x
¢¢P Q
.
¢¢Q R
RoleId
¢¢R X
}
¢¢Y Z
)
¢¢Z [
;
¢¢[ \
table
££ 
.
££ 

ForeignKey
££ $
(
££$ %
name
§§ 
:
§§ 
$str
§§ E
,
§§E F
column
•• 
:
•• 
x
••  !
=>
••" $
x
••% &
.
••& '
RoleId
••' -
,
••- .
principalTable
¶¶ &
:
¶¶& '
$str
¶¶( 5
,
¶¶5 6
principalColumn
ßß '
:
ßß' (
$str
ßß) -
,
ßß- .
onDelete
®®  
:
®®  !
ReferentialAction
®®" 3
.
®®3 4
Cascade
®®4 ;
)
®®; <
;
®®< =
table
©© 
.
©© 

ForeignKey
©© $
(
©©$ %
name
™™ 
:
™™ 
$str
™™ E
,
™™E F
column
´´ 
:
´´ 
x
´´  !
=>
´´" $
x
´´% &
.
´´& '
UserId
´´' -
,
´´- .
principalTable
¨¨ &
:
¨¨& '
$str
¨¨( 5
,
¨¨5 6
principalColumn
≠≠ '
:
≠≠' (
$str
≠≠) -
,
≠≠- .
onDelete
ÆÆ  
:
ÆÆ  !
ReferentialAction
ÆÆ" 3
.
ÆÆ3 4
Cascade
ÆÆ4 ;
)
ÆÆ; <
;
ÆÆ< =
}
ØØ 
)
ØØ 
;
ØØ 
migrationBuilder
±± 
.
±± 
CreateTable
±± (
(
±±( )
name
≤≤ 
:
≤≤ 
$str
≤≤ (
,
≤≤( )
columns
≥≥ 
:
≥≥ 
table
≥≥ 
=>
≥≥ !
new
≥≥" %
{
¥¥ 
UserId
µµ 
=
µµ 
table
µµ "
.
µµ" #
Column
µµ# )
<
µµ) *
string
µµ* 0
>
µµ0 1
(
µµ1 2
nullable
µµ2 :
:
µµ: ;
false
µµ< A
)
µµA B
,
µµB C
LoginProvider
∂∂ !
=
∂∂" #
table
∂∂$ )
.
∂∂) *
Column
∂∂* 0
<
∂∂0 1
string
∂∂1 7
>
∂∂7 8
(
∂∂8 9
nullable
∂∂9 A
:
∂∂A B
false
∂∂C H
)
∂∂H I
,
∂∂I J
Name
∑∑ 
=
∑∑ 
table
∑∑  
.
∑∑  !
Column
∑∑! '
<
∑∑' (
string
∑∑( .
>
∑∑. /
(
∑∑/ 0
nullable
∑∑0 8
:
∑∑8 9
false
∑∑: ?
)
∑∑? @
,
∑∑@ A
Value
∏∏ 
=
∏∏ 
table
∏∏ !
.
∏∏! "
Column
∏∏" (
<
∏∏( )
string
∏∏) /
>
∏∏/ 0
(
∏∏0 1
nullable
∏∏1 9
:
∏∏9 :
true
∏∏; ?
)
∏∏? @
}
ππ 
,
ππ 
constraints
∫∫ 
:
∫∫ 
table
∫∫ "
=>
∫∫# %
{
ªª 
table
ºº 
.
ºº 

PrimaryKey
ºº $
(
ºº$ %
$str
ºº% :
,
ºº: ;
x
ºº< =
=>
ºº> @
new
ººA D
{
ººE F
x
ººG H
.
ººH I
UserId
ººI O
,
ººO P
x
ººQ R
.
ººR S
LoginProvider
ººS `
,
ºº` a
x
ººb c
.
ººc d
Name
ººd h
}
ººi j
)
ººj k
;
ººk l
table
ΩΩ 
.
ΩΩ 

ForeignKey
ΩΩ $
(
ΩΩ$ %
name
ææ 
:
ææ 
$str
ææ F
,
ææF G
column
øø 
:
øø 
x
øø  !
=>
øø" $
x
øø% &
.
øø& '
UserId
øø' -
,
øø- .
principalTable
¿¿ &
:
¿¿& '
$str
¿¿( 5
,
¿¿5 6
principalColumn
¡¡ '
:
¡¡' (
$str
¡¡) -
,
¡¡- .
onDelete
¬¬  
:
¬¬  !
ReferentialAction
¬¬" 3
.
¬¬3 4
Cascade
¬¬4 ;
)
¬¬; <
;
¬¬< =
}
√√ 
)
√√ 
;
√√ 
migrationBuilder
≈≈ 
.
≈≈ 
CreateTable
≈≈ (
(
≈≈( )
name
∆∆ 
:
∆∆ 
$str
∆∆ 
,
∆∆  
columns
«« 
:
«« 
table
«« 
=>
«« !
new
««" %
{
»» 
FlowerId
…… 
=
…… 
table
…… $
.
……$ %
Column
……% +
<
……+ ,
int
……, /
>
……/ 0
(
……0 1
nullable
……1 9
:
……9 :
false
……; @
)
……@ A
.
   

Annotation
   #
(
  # $
$str
  $ G
,
  G H.
 SqlServerValueGenerationStrategy
  I i
.
  i j
IdentityColumn
  j x
)
  x y
,
  y z
Name
ÀÀ 
=
ÀÀ 
table
ÀÀ  
.
ÀÀ  !
Column
ÀÀ! '
<
ÀÀ' (
string
ÀÀ( .
>
ÀÀ. /
(
ÀÀ/ 0
nullable
ÀÀ0 8
:
ÀÀ8 9
true
ÀÀ: >
)
ÀÀ> ?
,
ÀÀ? @
ShortDescription
ÃÃ $
=
ÃÃ% &
table
ÃÃ' ,
.
ÃÃ, -
Column
ÃÃ- 3
<
ÃÃ3 4
string
ÃÃ4 :
>
ÃÃ: ;
(
ÃÃ; <
nullable
ÃÃ< D
:
ÃÃD E
true
ÃÃF J
)
ÃÃJ K
,
ÃÃK L
LongDescription
ÕÕ #
=
ÕÕ$ %
table
ÕÕ& +
.
ÕÕ+ ,
Column
ÕÕ, 2
<
ÕÕ2 3
string
ÕÕ3 9
>
ÕÕ9 :
(
ÕÕ: ;
nullable
ÕÕ; C
:
ÕÕC D
true
ÕÕE I
)
ÕÕI J
,
ÕÕJ K
Price
ŒŒ 
=
ŒŒ 
table
ŒŒ !
.
ŒŒ! "
Column
ŒŒ" (
<
ŒŒ( )
decimal
ŒŒ) 0
>
ŒŒ0 1
(
ŒŒ1 2
nullable
ŒŒ2 :
:
ŒŒ: ;
false
ŒŒ< A
)
ŒŒA B
,
ŒŒB C
ImageUrl
œœ 
=
œœ 
table
œœ $
.
œœ$ %
Column
œœ% +
<
œœ+ ,
string
œœ, 2
>
œœ2 3
(
œœ3 4
nullable
œœ4 <
:
œœ< =
true
œœ> B
)
œœB C
,
œœC D
ImageThumbnailUrl
–– %
=
––& '
table
––( -
.
––- .
Column
––. 4
<
––4 5
string
––5 ;
>
––; <
(
––< =
nullable
––= E
:
––E F
true
––G K
)
––K L
,
––L M
InStock
—— 
=
—— 
table
—— #
.
——# $
Column
——$ *
<
——* +
bool
——+ /
>
——/ 0
(
——0 1
nullable
——1 9
:
——9 :
false
——; @
)
——@ A
,
——A B

CategoryId
““ 
=
““  
table
““! &
.
““& '
Column
““' -
<
““- .
int
““. 1
>
““1 2
(
““2 3
nullable
““3 ;
:
““; <
false
““= B
)
““B C
,
““C D"
IsFlowerPresentation
”” (
=
””) *
table
””+ 0
.
””0 1
Column
””1 7
<
””7 8
bool
””8 <
>
””< =
(
””= >
nullable
””> F
:
””F G
false
””H M
)
””M N
}
‘‘ 
,
‘‘ 
constraints
’’ 
:
’’ 
table
’’ "
=>
’’# %
{
÷÷ 
table
◊◊ 
.
◊◊ 

PrimaryKey
◊◊ $
(
◊◊$ %
$str
◊◊% 1
,
◊◊1 2
x
◊◊3 4
=>
◊◊5 7
x
◊◊8 9
.
◊◊9 :
FlowerId
◊◊: B
)
◊◊B C
;
◊◊C D
table
ÿÿ 
.
ÿÿ 

ForeignKey
ÿÿ $
(
ÿÿ$ %
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ @
,
ŸŸ@ A
column
⁄⁄ 
:
⁄⁄ 
x
⁄⁄  !
=>
⁄⁄" $
x
⁄⁄% &
.
⁄⁄& '

CategoryId
⁄⁄' 1
,
⁄⁄1 2
principalTable
€€ &
:
€€& '
$str
€€( 4
,
€€4 5
principalColumn
‹‹ '
:
‹‹' (
$str
‹‹) 5
,
‹‹5 6
onDelete
››  
:
››  !
ReferentialAction
››" 3
.
››3 4
Cascade
››4 ;
)
››; <
;
››< =
}
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
migrationBuilder
‡‡ 
.
‡‡ 
CreateTable
‡‡ (
(
‡‡( )
name
·· 
:
·· 
$str
·· $
,
··$ %
columns
‚‚ 
:
‚‚ 
table
‚‚ 
=>
‚‚ !
new
‚‚" %
{
„„ 
OrderDetailId
‰‰ !
=
‰‰" #
table
‰‰$ )
.
‰‰) *
Column
‰‰* 0
<
‰‰0 1
int
‰‰1 4
>
‰‰4 5
(
‰‰5 6
nullable
‰‰6 >
:
‰‰> ?
false
‰‰@ E
)
‰‰E F
.
ÂÂ 

Annotation
ÂÂ #
(
ÂÂ# $
$str
ÂÂ$ G
,
ÂÂG H.
 SqlServerValueGenerationStrategy
ÂÂI i
.
ÂÂi j
IdentityColumn
ÂÂj x
)
ÂÂx y
,
ÂÂy z
OrderId
ÊÊ 
=
ÊÊ 
table
ÊÊ #
.
ÊÊ# $
Column
ÊÊ$ *
<
ÊÊ* +
int
ÊÊ+ .
>
ÊÊ. /
(
ÊÊ/ 0
nullable
ÊÊ0 8
:
ÊÊ8 9
false
ÊÊ: ?
)
ÊÊ? @
,
ÊÊ@ A
FlowerId
ÁÁ 
=
ÁÁ 
table
ÁÁ $
.
ÁÁ$ %
Column
ÁÁ% +
<
ÁÁ+ ,
int
ÁÁ, /
>
ÁÁ/ 0
(
ÁÁ0 1
nullable
ÁÁ1 9
:
ÁÁ9 :
false
ÁÁ; @
)
ÁÁ@ A
,
ÁÁA B
Amount
ËË 
=
ËË 
table
ËË "
.
ËË" #
Column
ËË# )
<
ËË) *
int
ËË* -
>
ËË- .
(
ËË. /
nullable
ËË/ 7
:
ËË7 8
false
ËË9 >
)
ËË> ?
,
ËË? @
Price
ÈÈ 
=
ÈÈ 
table
ÈÈ !
.
ÈÈ! "
Column
ÈÈ" (
<
ÈÈ( )
decimal
ÈÈ) 0
>
ÈÈ0 1
(
ÈÈ1 2
nullable
ÈÈ2 :
:
ÈÈ: ;
false
ÈÈ< A
)
ÈÈA B
}
ÍÍ 
,
ÍÍ 
constraints
ÎÎ 
:
ÎÎ 
table
ÎÎ "
=>
ÎÎ# %
{
ÏÏ 
table
ÌÌ 
.
ÌÌ 

PrimaryKey
ÌÌ $
(
ÌÌ$ %
$str
ÌÌ% 6
,
ÌÌ6 7
x
ÌÌ8 9
=>
ÌÌ: <
x
ÌÌ= >
.
ÌÌ> ?
OrderDetailId
ÌÌ? L
)
ÌÌL M
;
ÌÌM N
table
ÓÓ 
.
ÓÓ 

ForeignKey
ÓÓ $
(
ÓÓ$ %
name
ÔÔ 
:
ÔÔ 
$str
ÔÔ @
,
ÔÔ@ A
column
 
:
 
x
  !
=>
" $
x
% &
.
& '
FlowerId
' /
,
/ 0
principalTable
ÒÒ &
:
ÒÒ& '
$str
ÒÒ( 1
,
ÒÒ1 2
principalColumn
ÚÚ '
:
ÚÚ' (
$str
ÚÚ) 3
,
ÚÚ3 4
onDelete
ÛÛ  
:
ÛÛ  !
ReferentialAction
ÛÛ" 3
.
ÛÛ3 4
Cascade
ÛÛ4 ;
)
ÛÛ; <
;
ÛÛ< =
table
ÙÙ 
.
ÙÙ 

ForeignKey
ÙÙ $
(
ÙÙ$ %
name
ıı 
:
ıı 
$str
ıı >
,
ıı> ?
column
ˆˆ 
:
ˆˆ 
x
ˆˆ  !
=>
ˆˆ" $
x
ˆˆ% &
.
ˆˆ& '
OrderId
ˆˆ' .
,
ˆˆ. /
principalTable
˜˜ &
:
˜˜& '
$str
˜˜( 0
,
˜˜0 1
principalColumn
¯¯ '
:
¯¯' (
$str
¯¯) 2
,
¯¯2 3
onDelete
˘˘  
:
˘˘  !
ReferentialAction
˘˘" 3
.
˘˘3 4
Cascade
˘˘4 ;
)
˘˘; <
;
˘˘< =
}
˙˙ 
)
˙˙ 
;
˙˙ 
migrationBuilder
¸¸ 
.
¸¸ 
CreateTable
¸¸ (
(
¸¸( )
name
˝˝ 
:
˝˝ 
$str
˝˝ )
,
˝˝) *
columns
˛˛ 
:
˛˛ 
table
˛˛ 
=>
˛˛ !
new
˛˛" %
{
ˇˇ  
ShoppingCartItemId
ÄÄ &
=
ÄÄ' (
table
ÄÄ) .
.
ÄÄ. /
Column
ÄÄ/ 5
<
ÄÄ5 6
int
ÄÄ6 9
>
ÄÄ9 :
(
ÄÄ: ;
nullable
ÄÄ; C
:
ÄÄC D
false
ÄÄE J
)
ÄÄJ K
.
ÅÅ 

Annotation
ÅÅ #
(
ÅÅ# $
$str
ÅÅ$ G
,
ÅÅG H.
 SqlServerValueGenerationStrategy
ÅÅI i
.
ÅÅi j
IdentityColumn
ÅÅj x
)
ÅÅx y
,
ÅÅy z
FlowerId
ÇÇ 
=
ÇÇ 
table
ÇÇ $
.
ÇÇ$ %
Column
ÇÇ% +
<
ÇÇ+ ,
int
ÇÇ, /
>
ÇÇ/ 0
(
ÇÇ0 1
nullable
ÇÇ1 9
:
ÇÇ9 :
true
ÇÇ; ?
)
ÇÇ? @
,
ÇÇ@ A
Amount
ÉÉ 
=
ÉÉ 
table
ÉÉ "
.
ÉÉ" #
Column
ÉÉ# )
<
ÉÉ) *
int
ÉÉ* -
>
ÉÉ- .
(
ÉÉ. /
nullable
ÉÉ/ 7
:
ÉÉ7 8
false
ÉÉ9 >
)
ÉÉ> ?
,
ÉÉ? @
ShoppingCartId
ÑÑ "
=
ÑÑ# $
table
ÑÑ% *
.
ÑÑ* +
Column
ÑÑ+ 1
<
ÑÑ1 2
string
ÑÑ2 8
>
ÑÑ8 9
(
ÑÑ9 :
nullable
ÑÑ: B
:
ÑÑB C
true
ÑÑD H
)
ÑÑH I
}
ÖÖ 
,
ÖÖ 
constraints
ÜÜ 
:
ÜÜ 
table
ÜÜ "
=>
ÜÜ# %
{
áá 
table
àà 
.
àà 

PrimaryKey
àà $
(
àà$ %
$str
àà% ;
,
àà; <
x
àà= >
=>
àà? A
x
ààB C
.
ààC D 
ShoppingCartItemId
ààD V
)
ààV W
;
ààW X
table
ââ 
.
ââ 

ForeignKey
ââ $
(
ââ$ %
name
ää 
:
ää 
$str
ää E
,
ääE F
column
ãã 
:
ãã 
x
ãã  !
=>
ãã" $
x
ãã% &
.
ãã& '
FlowerId
ãã' /
,
ãã/ 0
principalTable
åå &
:
åå& '
$str
åå( 1
,
åå1 2
principalColumn
çç '
:
çç' (
$str
çç) 3
,
çç3 4
onDelete
éé  
:
éé  !
ReferentialAction
éé" 3
.
éé3 4
Restrict
éé4 <
)
éé< =
;
éé= >
}
èè 
)
èè 
;
èè 
migrationBuilder
ëë 
.
ëë 
CreateIndex
ëë (
(
ëë( )
name
íí 
:
íí 
$str
íí 2
,
íí2 3
table
ìì 
:
ìì 
$str
ìì )
,
ìì) *
column
îî 
:
îî 
$str
îî  
)
îî  !
;
îî! "
migrationBuilder
ññ 
.
ññ 
CreateIndex
ññ (
(
ññ( )
name
óó 
:
óó 
$str
óó %
,
óó% &
table
òò 
:
òò 
$str
òò $
,
òò$ %
column
ôô 
:
ôô 
$str
ôô (
,
ôô( )
unique
öö 
:
öö 
true
öö 
,
öö 
filter
õõ 
:
õõ 
$str
õõ 6
)
õõ6 7
;
õõ7 8
migrationBuilder
ùù 
.
ùù 
CreateIndex
ùù (
(
ùù( )
name
ûû 
:
ûû 
$str
ûû 2
,
ûû2 3
table
üü 
:
üü 
$str
üü )
,
üü) *
column
†† 
:
†† 
$str
††  
)
††  !
;
††! "
migrationBuilder
¢¢ 
.
¢¢ 
CreateIndex
¢¢ (
(
¢¢( )
name
££ 
:
££ 
$str
££ 2
,
££2 3
table
§§ 
:
§§ 
$str
§§ )
,
§§) *
column
•• 
:
•• 
$str
••  
)
••  !
;
••! "
migrationBuilder
ßß 
.
ßß 
CreateIndex
ßß (
(
ßß( )
name
®® 
:
®® 
$str
®® 1
,
®®1 2
table
©© 
:
©© 
$str
©© (
,
©©( )
column
™™ 
:
™™ 
$str
™™  
)
™™  !
;
™™! "
migrationBuilder
¨¨ 
.
¨¨ 
CreateIndex
¨¨ (
(
¨¨( )
name
≠≠ 
:
≠≠ 
$str
≠≠ "
,
≠≠" #
table
ÆÆ 
:
ÆÆ 
$str
ÆÆ $
,
ÆÆ$ %
column
ØØ 
:
ØØ 
$str
ØØ )
)
ØØ) *
;
ØØ* +
migrationBuilder
±± 
.
±± 
CreateIndex
±± (
(
±±( )
name
≤≤ 
:
≤≤ 
$str
≤≤ %
,
≤≤% &
table
≥≥ 
:
≥≥ 
$str
≥≥ $
,
≥≥$ %
column
¥¥ 
:
¥¥ 
$str
¥¥ ,
,
¥¥, -
unique
µµ 
:
µµ 
true
µµ 
,
µµ 
filter
∂∂ 
:
∂∂ 
$str
∂∂ :
)
∂∂: ;
;
∂∂; <
migrationBuilder
∏∏ 
.
∏∏ 
CreateIndex
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ -
,
ππ- .
table
∫∫ 
:
∫∫ 
$str
∫∫  
,
∫∫  !
column
ªª 
:
ªª 
$str
ªª $
)
ªª$ %
;
ªª% &
migrationBuilder
ΩΩ 
.
ΩΩ 
CreateIndex
ΩΩ (
(
ΩΩ( )
name
ææ 
:
ææ 
$str
ææ 0
,
ææ0 1
table
øø 
:
øø 
$str
øø %
,
øø% &
column
¿¿ 
:
¿¿ 
$str
¿¿ "
)
¿¿" #
;
¿¿# $
migrationBuilder
¬¬ 
.
¬¬ 
CreateIndex
¬¬ (
(
¬¬( )
name
√√ 
:
√√ 
$str
√√ /
,
√√/ 0
table
ƒƒ 
:
ƒƒ 
$str
ƒƒ %
,
ƒƒ% &
column
≈≈ 
:
≈≈ 
$str
≈≈ !
)
≈≈! "
;
≈≈" #
migrationBuilder
«« 
.
«« 
CreateIndex
«« (
(
««( )
name
»» 
:
»» 
$str
»» 5
,
»»5 6
table
…… 
:
…… 
$str
…… *
,
……* +
column
   
:
   
$str
   "
)
  " #
;
  # $
}
ÀÀ 	
	protected
ÕÕ 
override
ÕÕ 
void
ÕÕ 
Down
ÕÕ  $
(
ÕÕ$ %
MigrationBuilder
ÕÕ% 5
migrationBuilder
ÕÕ6 F
)
ÕÕF G
{
ŒŒ 	
migrationBuilder
œœ 
.
œœ 
	DropTable
œœ &
(
œœ& '
name
–– 
:
–– 
$str
–– (
)
––( )
;
––) *
migrationBuilder
““ 
.
““ 
	DropTable
““ &
(
““& '
name
”” 
:
”” 
$str
”” (
)
””( )
;
””) *
migrationBuilder
’’ 
.
’’ 
	DropTable
’’ &
(
’’& '
name
÷÷ 
:
÷÷ 
$str
÷÷ (
)
÷÷( )
;
÷÷) *
migrationBuilder
ÿÿ 
.
ÿÿ 
	DropTable
ÿÿ &
(
ÿÿ& '
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ '
)
ŸŸ' (
;
ŸŸ( )
migrationBuilder
€€ 
.
€€ 
	DropTable
€€ &
(
€€& '
name
‹‹ 
:
‹‹ 
$str
‹‹ (
)
‹‹( )
;
‹‹) *
migrationBuilder
ﬁﬁ 
.
ﬁﬁ 
	DropTable
ﬁﬁ &
(
ﬁﬁ& '
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ $
)
ﬂﬂ$ %
;
ﬂﬂ% &
migrationBuilder
·· 
.
·· 
	DropTable
·· &
(
··& '
name
‚‚ 
:
‚‚ 
$str
‚‚ )
)
‚‚) *
;
‚‚* +
migrationBuilder
‰‰ 
.
‰‰ 
	DropTable
‰‰ &
(
‰‰& '
name
ÂÂ 
:
ÂÂ 
$str
ÂÂ #
)
ÂÂ# $
;
ÂÂ$ %
migrationBuilder
ÁÁ 
.
ÁÁ 
	DropTable
ÁÁ &
(
ÁÁ& '
name
ËË 
:
ËË 
$str
ËË #
)
ËË# $
;
ËË$ %
migrationBuilder
ÍÍ 
.
ÍÍ 
	DropTable
ÍÍ &
(
ÍÍ& '
name
ÎÎ 
:
ÎÎ 
$str
ÎÎ 
)
ÎÎ 
;
ÎÎ  
migrationBuilder
ÌÌ 
.
ÌÌ 
	DropTable
ÌÌ &
(
ÌÌ& '
name
ÓÓ 
:
ÓÓ 
$str
ÓÓ 
)
ÓÓ  
;
ÓÓ  !
migrationBuilder
 
.
 
	DropTable
 &
(
& '
name
ÒÒ 
:
ÒÒ 
$str
ÒÒ "
)
ÒÒ" #
;
ÒÒ# $
}
ÚÚ 	
}
ÛÛ 
}ÙÙ ¸

SE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191209173625_AddFavorite.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
AddFavorite $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
bool		' +
>		+ ,
(		, -
name

 
:

 
$str

 "
,

" #
table 
: 
$str  
,  !
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str  
)  !
;! "
} 	
} 
} «
aE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182401_ShippingAndPaymentMethods.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class %
ShippingAndPaymentMethods 2
:3 4
	Migration5 >
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 "
,

" #
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str !
,! "
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str &
,& '
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder   
.   

DropColumn   '
(  ' (
name!! 
:!! 
$str!! "
,!!" #
table"" 
:"" 
$str"" 
)""  
;""  !
migrationBuilder$$ 
.$$ 

DropColumn$$ '
($$' (
name%% 
:%% 
$str%% !
,%%! "
table&& 
:&& 
$str&& 
)&&  
;&&  !
migrationBuilder(( 
.(( 

DropColumn(( '
(((' (
name)) 
:)) 
$str)) &
,))& '
table** 
:** 
$str** 
)**  
;**  !
}++ 	
},, 
}-- ˚$
bE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182629_ShippingAndPaymentMethods1.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class &
ShippingAndPaymentMethods1 3
:4 5
	Migration6 ?
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
AlterColumn		 (
<		( )
string		) /
>		/ 0
(		0 1
name

 
:

 
$str

 
,

  
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
,  
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str $
,$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num !
)! "
;" #
}   	
	protected"" 
override"" 
void"" 
Down""  $
(""$ %
MigrationBuilder""% 5
migrationBuilder""6 F
)""F G
{## 	
migrationBuilder$$ 
.$$ 
AlterColumn$$ (
<$$( )
string$$) /
>$$/ 0
($$0 1
name%% 
:%% 
$str%% 
,%%  
table&& 
:&& 
$str&& 
,&&  
	maxLength'' 
:'' 
$num'' 
,'' 
nullable(( 
:(( 
false(( 
,((  

oldClrType)) 
:)) 
typeof)) "
())" #
string))# )
)))) *
,))* +
oldMaxLength** 
:** 
$num**  
,**  !
oldNullable++ 
:++ 
true++ !
)++! "
;++" #
migrationBuilder-- 
.-- 
AlterColumn-- (
<--( )
string--) /
>--/ 0
(--0 1
name.. 
:.. 
$str.. 
,..  
table// 
:// 
$str// 
,//  
	maxLength00 
:00 
$num00 
,00 
nullable11 
:11 
false11 
,11  

oldClrType22 
:22 
typeof22 "
(22" #
string22# )
)22) *
,22* +
oldMaxLength33 
:33 
$num33  
,33  !
oldNullable44 
:44 
true44 !
)44! "
;44" #
migrationBuilder66 
.66 
AlterColumn66 (
<66( )
string66) /
>66/ 0
(660 1
name77 
:77 
$str77 $
,77$ %
table88 
:88 
$str88 
,88  
	maxLength99 
:99 
$num99 
,99 
nullable:: 
::: 
false:: 
,::  

oldClrType;; 
:;; 
typeof;; "
(;;" #
string;;# )
);;) *
,;;* +
oldMaxLength<< 
:<< 
$num<< !
,<<! "
oldNullable== 
:== 
true== !
)==! "
;==" #
}>> 	
}?? 
}@@ Ô

NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191212095803_Order2.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Order2 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 $
,

$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
)  
;  !
} 	
} 
} ∫
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\AppDbContext.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
AppDbContext 
: 
IdentityDbContext  1
<1 2
ApplicationUser2 A
>A B
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
DbSet 
< 
Category 
> 

Categories )
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
Flower 
> 
Flowers $
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
ShoppingCartItem %
>% &
ShoppingCartItems' 8
{ 	
get 
; 
set 
; 
} 	
public   
DbSet   
<   
Order   
>   
Orders   "
{!! 	
get"" 
;"" 
set## 
;## 
}$$ 	
public&& 
DbSet&& 
<&& 
OrderDetail&&  
>&&  !
OrderDetails&&" .
{'' 	
get(( 
;(( 
set)) 
;)) 
}** 	
}++ 
},, ®
=E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Category.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Category 
{ 
public 
int 

CategoryId 
{ 	
get		 
;		 
set

 
;

 
} 	
public 
string 
CategoryName "
{ 	
get 
; 
set 
; 
} 	
public 
string 
Description !
{ 	
get 
; 
set 
; 
} 	
public 
List 
< 
Flower 
> 
Flowers #
{ 	
get 
; 
set 
; 
} 	
} 
} ›f
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\DbInitializer.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

static 
class 
DbInitializer %
{		 
public

 
static

 
void

 
Seed

 
(

  
IApplicationBuilder

  3
applicationBuilder

4 F
)

F G
{ 	
using 
( 
var 
serviceScope #
=$ %
applicationBuilder& 8
.8 9
ApplicationServices9 L
.L M
CreateScopeM X
(X Y
)Y Z
)Z [
{ 
AppDbContext 
context $
=% &
serviceScope' 3
.3 4
ServiceProvider4 C
.C D

GetServiceD N
<N O
AppDbContextO [
>[ \
(\ ]
)] ^
;^ _
if 
( 
! 
context 
. 

Categories '
.' (
Any( +
(+ ,
), -
)- .
{ 
context 
. 

Categories &
.& '
AddRange' /
(/ 0

Categories0 :
.: ;
Select; A
(A B
cB C
=>D F
cG H
.H I
ValueI N
)N O
)O P
;P Q
} 
if 
( 
! 
context 
. 
Flowers $
.$ %
Any% (
(( )
)) *
)* +
{ 
context 
. 
AddRange $
( 
new 
Flower "
{ 
Name  
=! "
$str# )
,) *
Price !
=" #
$num$ *
,* +
ShortDescription ,
=- .
$str/ =
,= >
LongDescription +
=, -
$str". R
,""R S
Category## $
=##% &

Categories##' 1
[##1 2
$str##2 A
]##A B
,##B C
ImageUrl$$ $
=$$% &
$str	$$' É
,
$$É Ñ
InStock%% #
=%%$ %
true%%& *
,%%* +
ImageThumbnailUrl&& -
=&&. /
$str&&0 2
+&&3 4
$str'' x
,''x y 
IsFlowerPresentation(( 0
=((1 2
true((3 7
})) 
,)) 
new** 
Flower** "
{++ 
Name,,  
=,,! "
$str,,# )
,,,) *
Price-- !
=--" #
$num--$ *
,--* +
ShortDescription.. ,
=..- .
$str../ D
,..D E
LongDescription// +
=//, -
$str/1. p
,11p q
Category22 $
=22% &

Categories22' 1
[221 2
$str222 A
]22A B
,22B C
ImageUrl33 $
=33% &
$str33' v
,33v w
InStock44 #
=44$ %
true44& *
,44* +
ImageThumbnailUrl55 -
=55. /
$str550 
,	55 Ä 
IsFlowerPresentation66 0
=661 2
false663 8
}77 
,77 
new88 
Flower88 "
{99 
Name::  
=::! "
$str::# *
,::* +
Price;; !
=;;" #
$num;;$ *
,;;* +
ShortDescription<< ,
=<<- .
$str<</ C
,<<C D
LongDescription== +
===, -
$str	=>. Ç
,
>>Ç É
Category?? $
=??% &

Categories??' 1
[??1 2
$str??2 A
]??A B
,??B C
ImageUrl@@ $
=@@% &
$str@@' u
,@@u v
InStockAA #
=AA$ %
trueAA& *
,AA* +
ImageThumbnailUrlBB -
=BB. /
$strBB0 ~
,BB~  
IsFlowerPresentationCC 0
=CC1 2
falseCC3 8
}DD 
,DD 
newEE 
FlowerEE "
{FF 
NameGG  
=GG! "
$strGG# 5
,GG5 6
PriceHH !
=HH" #
$numHH$ *
,HH* +
ShortDescriptionII ,
=II- .
$strII/ :
,II: ;
LongDescriptionJJ +
=JJ, -
$str	JT. Å
,
TTÅ Ç
CategoryUU $
=UU% &

CategoriesUU' 1
[UU1 2
$strUU2 F
]UUF G
,UUG H
ImageUrlVV $
=VV% &
$strVV' j
,VVj k
InStockWW #
=WW$ %
trueWW& *
,WW* +
ImageThumbnailUrlXX -
=XX. /
$strXX0 s
,XXs t 
IsFlowerPresentationYY 0
=YY1 2
trueYY3 7
}ZZ 
,ZZ 
new\\ 
Flower\\ "
{]] 
Name^^  
=^^! "
$str^^# -
,^^- .
Price__ !
=__" #
$num__$ *
,__* +
ShortDescription`` ,
=``- .
$str``/ >
,``> ?
LongDescriptionaa +
=aa, -
$strag. d
,ggd e
Categoryhh $
=hh% &

Categorieshh' 1
[hh1 2
$strhh2 D
]hhD E
,hhE F
ImageUrlii $
=ii% &
$strii' c
,iic d
InStockjj #
=jj$ %
truejj& *
,jj* +
ImageThumbnailUrlkk -
=kk. /
$strkk0 l
,kkl m 
IsFlowerPresentationll 0
=ll1 2
falsell3 8
}mm 
,mm 
newoo 
Floweroo "
{pp 
Nameqq  
=qq! "
$strqq# *
,qq* +
Pricerr !
=rr" #
$numrr$ *
,rr* +
ShortDescriptionss ,
=ss- .
$strss/ >
,ss> ?
LongDescriptiontt +
=tt, -
$strt|. x
,||x y
Category}} $
=}}% &

Categories}}' 1
[}}1 2
$str}}2 D
]}}D E
,}}E F
ImageUrl~~ $
=~~% &
$str~~' N
,~~N O
InStock #
=$ %
true& *
,* +
ImageThumbnailUrl
ÄÄ -
=
ÄÄ. /
$str
ÄÄ0 W
,
ÄÄW X"
IsFlowerPresentation
ÅÅ 0
=
ÅÅ1 2
false
ÅÅ3 8
}
ÇÇ 
,
ÇÇ 
new
ÑÑ 
Flower
ÑÑ "
{
ÖÖ 
Name
ÜÜ  
=
ÜÜ! "
$str
ÜÜ# =
,
ÜÜ= >
Price
áá !
=
áá" #
$num
áá$ *
,
áá* +
ShortDescription
àà ,
=
àà- .
$str
àà/ >
,
àà> ?
LongDescription
ââ +
=
ââ, -
$strâã. É
,ããÉ Ñ
Category
åå $
=
åå% &

Categories
åå' 1
[
åå1 2
$str
åå2 F
]
ååF G
,
ååG H
ImageUrl
çç $
=
çç% &
$str
çç' g
,
ççg h
InStock
éé #
=
éé$ %
true
éé& *
,
éé* +
ImageThumbnailUrl
èè -
=
èè. /
$str
èè0 p
,
èèp q"
IsFlowerPresentation
êê 0
=
êê1 2
true
êê3 7
}
ëë 
,
ëë 
new
ìì 
Flower
ìì "
{
îî 
Name
ïï  
=
ïï! "
$str
ïï# *
,
ïï* +
Price
ññ !
=
ññ" #
$num
ññ$ *
,
ññ* +
ShortDescription
óó ,
=
óó- .
$str
óó/ E
,
óóE F
LongDescription
òò +
=
òò, -
$str
òú. a
,
úúa b
Category
ùù $
=
ùù% &

Categories
ùù' 1
[
ùù1 2
$str
ùù2 D
]
ùùD E
,
ùùE F
ImageUrl
ûû $
=
ûû% &
$strüü à
,üüà â
InStock
†† #
=
††$ %
true
††& *
,
††* +
ImageThumbnailUrl
°° -
=
°°. /
$str¢¢ à
,¢¢à â"
IsFlowerPresentation
££ 0
=
££1 2
true
££3 7
}
§§ 
,
§§ 
new
¶¶ 
Flower
¶¶ "
{
ßß 
Name
®®  
=
®®! "
$str
®®# 2
,
®®2 3
Price
©© !
=
©©" #
$num
©©$ *
,
©©* +
ShortDescription
™™ ,
=
™™- .
$str
™™/ J
,
™™J K
LongDescription
´´ +
=
´´, -
$str
´Ø. `
,
ØØ` a
Category
∞∞ $
=
∞∞% &

Categories
∞∞' 1
[
∞∞1 2
$str
∞∞2 F
]
∞∞F G
,
∞∞G H
ImageUrl
±± $
=
±±% &
$str≤≤ à
,≤≤à â
InStock
≥≥ #
=
≥≥$ %
true
≥≥& *
,
≥≥* +
ImageThumbnailUrl
¥¥ -
=
¥¥. /
$strµµ à
,µµà â"
IsFlowerPresentation
∂∂ 0
=
∂∂1 2
false
∂∂3 8
}
∑∑ 
,
∑∑ 
new
∏∏ 
Flower
∏∏ "
{
ππ 
Name
∫∫  
=
∫∫! "
$str
∫∫# 6
,
∫∫6 7
Price
ªª !
=
ªª" #
$num
ªª$ *
,
ªª* +
ShortDescription
ºº ,
=
ºº- .
$str
ºº/ >
,
ºº> ?
LongDescription
ΩΩ +
=
ΩΩ, -
$str
Ω¬. k
,
¬¬k l
Category
√√ $
=
√√% &

Categories
√√' 1
[
√√1 2
$str
√√2 F
]
√√F G
,
√√G H
ImageUrl
ƒƒ $
=
ƒƒ% &
$str
≈≈ D
+
≈≈E F
$str
∆∆ v
,
∆∆v w
InStock
«« #
=
««$ %
true
««& *
,
««* +
ImageThumbnailUrl
»» -
=
»». /
$str
…… D
+
……E F
$str
   v
,
  v w"
IsFlowerPresentation
ÀÀ 0
=
ÀÀ1 2
false
ÀÀ3 8
}
ÃÃ 
,
ÃÃ 
new
ŒŒ 
Flower
ŒŒ "
{
œœ 
Name
––  
=
––! "
$str
––# 2
,
––2 3
Price
—— !
=
——" #
$num
——$ *
,
——* +
ShortDescription
““ ,
=
““- .
$str
““/ G
,
““G H
LongDescription
”” +
=
””, -
$str
”›. `
,
››` a
Category
ﬁﬁ $
=
ﬁﬁ% &

Categories
ﬁﬁ' 1
[
ﬁﬁ1 2
$str
ﬁﬁ2 A
]
ﬁﬁA B
,
ﬁﬁB C
ImageUrl
ﬂﬂ $
=
ﬂﬂ% &
$str
ﬂﬂ' w
,
ﬂﬂw x
InStock
‡‡ #
=
‡‡$ %
true
‡‡& *
,
‡‡* +
ImageThumbnailUrl
·· -
=
··. /
$str··0 Ä
,··Ä Å"
IsFlowerPresentation
‚‚ 0
=
‚‚1 2
false
‚‚3 8
}
„„ 
)
‰‰ 
;
‰‰ 
}
ÂÂ 
context
ÁÁ 
.
ÁÁ 
SaveChanges
ÁÁ #
(
ÁÁ# $
)
ÁÁ$ %
;
ÁÁ% &
}
ËË 
}
ÈÈ 	
private
ÎÎ 
static
ÎÎ 

Dictionary
ÎÎ !
<
ÎÎ! "
string
ÎÎ" (
,
ÎÎ( )
Category
ÎÎ* 2
>
ÎÎ2 3

categories
ÎÎ4 >
;
ÎÎ> ?
public
ÏÏ 
static
ÏÏ 

Dictionary
ÏÏ  
<
ÏÏ  !
string
ÏÏ! '
,
ÏÏ' (
Category
ÏÏ) 1
>
ÏÏ1 2

Categories
ÏÏ3 =
{
ÌÌ 	
get
ÓÓ 
{
ÔÔ 
if
 
(
 

categories
 
==
 !
null
" &
)
& '
{
ÒÒ 
var
ÚÚ 

genresList
ÚÚ "
=
ÚÚ# $
new
ÚÚ% (
Category
ÚÚ) 1
[
ÚÚ1 2
]
ÚÚ2 3
{
ÛÛ 
new
ÙÙ 
Category
ÙÙ $
{
ÙÙ% &
CategoryName
ÙÙ' 3
=
ÙÙ4 5
$str
ÙÙ6 E
}
ÙÙF G
,
ÙÙG H
new
ıı 
Category
ıı $
{
ıı% &
CategoryName
ıı' 3
=
ıı4 5
$str
ıı6 J
}
ııK L
,
ııL M
new
ˆˆ 
Category
ˆˆ $
{
ˆˆ% &
CategoryName
ˆˆ' 3
=
ˆˆ4 5
$str
ˆˆ6 H
}
ˆˆI J
}
˜˜ 
;
˜˜ 

categories
˘˘ 
=
˘˘  
new
˘˘! $

Dictionary
˘˘% /
<
˘˘/ 0
string
˘˘0 6
,
˘˘6 7
Category
˘˘8 @
>
˘˘@ A
(
˘˘A B
)
˘˘B C
;
˘˘C D
foreach
˚˚ 
(
˚˚ 
Category
˚˚ %
genre
˚˚& +
in
˚˚, .

genresList
˚˚/ 9
)
˚˚9 :
{
¸¸ 

categories
˝˝ "
.
˝˝" #
Add
˝˝# &
(
˝˝& '
genre
˝˝' ,
.
˝˝, -
CategoryName
˝˝- 9
,
˝˝9 :
genre
˝˝; @
)
˝˝@ A
;
˝˝A B
}
˛˛ 
}
ˇˇ 
return
ÅÅ 

categories
ÅÅ !
;
ÅÅ! "
}
ÇÇ 
}
ÉÉ 	
}
ÑÑ 
}ÖÖ ˚
;E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Flower.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Flower 
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
virtual 
Category 
Category  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 

IsFavorite 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ö6
:E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Order.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Order 
{		 
[

 	
	BindNever

	 
]

 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
OrderDetail 
>  

OrderLines! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ?
)? @
]@ A
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
ShippingMethod $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
Display	 
( 
Name 
= 
$str (
)( )
]) *
public   
string   
AddressLine1   "
{  # $
get  % (
;  ( )
set  * -
;  - .
}  / 0
["" 	
Display""	 
("" 
Name"" 
="" 
$str"" (
)""( )
]"") *
public## 
string## 
AddressLine2## "
{### $
get##% (
;##( )
set##* -
;##- .
}##/ 0
[&& 	
Display&&	 
(&& 
Name&& 
=&& 
$str&& "
)&&" #
]&&# $
['' 	
StringLength''	 
('' 
$num'' 
,'' 
MinimumLength'' '
=''( )
$num''* +
)''+ ,
]'', -
public(( 
string(( 
ZipCode(( 
{(( 
get((  #
;((# $
set((% (
;((( )
}((* +
[** 	
Required**	 
(** 
ErrorMessage** 
=**  
$str**! 9
)**9 :
]**: ;
[++ 	
StringLength++	 
(++ 
$num++ 
)++ 
]++ 
public,, 
string,, 
City,, 
{,, 
get,,  
;,,  !
set,," %
;,,% &
},,' (
[.. 	
StringLength..	 
(.. 
$num.. 
).. 
].. 
public// 
string// 
State// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
[22 	
StringLength22	 
(22 
$num22 
)22 
]22 
public33 
string33 
Country33 
{33 
get33  #
;33# $
set33% (
;33( )
}33* +
[55 	
Required55	 
(55 
ErrorMessage55 
=55  
$str55! A
)55A B
]55B C
[66 	
StringLength66	 
(66 
$num66 
)66 
]66 
[77 	
DataType77	 
(77 
DataType77 
.77 
PhoneNumber77 &
)77& '
]77' (
[88 	
Display88	 
(88 
Name88 
=88 
$str88 &
)88& '
]88' (
public99 
string99 
PhoneNumber99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
[;; 	
Required;;	 
];; 
[<< 	
StringLength<<	 
(<< 
$num<< 
)<< 
]<< 
[== 	
DataType==	 
(== 
DataType== 
.== 
EmailAddress== '
)==' (
]==( )
[>> 	
RegularExpression>>	 
(>> 
$str>C ?
,CC? @
ErrorMessageDD 
=DD 
$strDD Q
)DDQ R
]DDR S
publicEE 
stringEE 
EmailEE 
{EE 
getEE !
;EE! "
setEE# &
;EE& '
}EE( )
[GG 	
	BindNeverGG	 
]GG 
[HH 	
ScaffoldColumnHH	 
(HH 
falseHH 
)HH 
]HH 
publicII 
decimalII 

OrderTotalII !
{II" #
getII$ '
;II' (
setII) ,
;II, -
}II. /
[KK 	
	BindNeverKK	 
]KK 
[LL 	
ScaffoldColumnLL	 
(LL 
falseLL 
)LL 
]LL 
publicMM 
DateTimeMM 
OrderPlacedMM #
{MM$ %
getMM& )
;MM) *
setMM+ .
;MM. /
}MM0 1
[OO 	
RequiredOO	 
]OO 
[PP 	
StringLengthPP	 
(PP 
$numPP 
)PP 
]PP 
publicQQ 
stringQQ 
	PayMethodQQ 
{QQ  !
getQQ" %
;QQ% &
setQQ' *
;QQ* +
}QQ, -
[SS 	
StringLengthSS	 
(SS 
$numSS 
)SS 
]SS 
publicTT 
stringTT 

CardNumberTT  
{TT! "
getTT# &
;TT& '
setTT( +
;TT+ ,
}TT- .
[VV 	
StringLengthVV	 
(VV 
$numVV 
)VV 
]VV 
publicWW 
stringWW 
SecurityCodeWW "
{WW# $
getWW% (
;WW( )
setWW* -
;WW- .
}WW/ 0
}XX 
}YY Â

@E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\OrderDetail.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
OrderDetail 
{ 
public 
int 
OrderDetailId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public		 
int		 
FlowerId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public 
int 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Flower 
Flower $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
virtual 
Order 
Order "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ˘E
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCart.cs
	namespace 	
	FlowerApp
 
. 
Models 
{		 
public

 

class

 
ShoppingCart

 
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
ShoppingCart 
( 
AppDbContext )
appDbContext* 6
)6 7
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
ShoppingCartItem $
>$ %
ShoppingCartItems& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
static 
ShoppingCart "
GetCart# *
(* +
IServiceProvider+ ;
services< D
)D E
{ 	
ISession 
session 
= 
services '
.' (
GetRequiredService( :
<: ; 
IHttpContextAccessor; O
>O P
(P Q
)Q R
?R S
. 
HttpContext 
. 
Session $
;$ %
var 
context 
= 
services "
." #

GetService# -
<- .
AppDbContext. :
>: ;
(; <
)< =
;= >
string 
cartId 
= 
session #
.# $
	GetString$ -
(- .
$str. 6
)6 7
??8 :
Guid; ?
.? @
NewGuid@ G
(G H
)H I
.I J
ToStringJ R
(R S
)S T
;T U
session 
. 
	SetString 
( 
$str &
,& '
cartId( .
). /
;/ 0
return   
new   
ShoppingCart   #
(  # $
context  $ +
)  + ,
{  - .
ShoppingCartId  / =
=  > ?
cartId  @ F
}  G H
;  H I
}!! 	
public## 
void## 
	AddToCart## 
(## 
Flower## $
flower##% +
,##+ ,
int##- 0
amount##1 7
)##7 8
{$$ 	
var%% 
shoppingCartItem%%  
=%%! "
_appDbContext&& !
.&&! "
ShoppingCartItems&&" 3
.&&3 4
SingleOrDefault&&4 C
(&&C D
s'' 
=>'' 
s'' 
.'' 
Flower'' %
.''% &
FlowerId''& .
==''/ 1
flower''2 8
.''8 9
FlowerId''9 A
&&''B D
s''E F
.''F G
ShoppingCartId''G U
==''V X
ShoppingCartId''Y g
)''g h
;''h i
if)) 
()) 
shoppingCartItem))  
==))! #
null))$ (
)))( )
{** 
shoppingCartItem++  
=++! "
new++# &
ShoppingCartItem++' 7
{,, 
ShoppingCartId-- "
=--# $
ShoppingCartId--% 3
,--3 4
Flower.. 
=.. 
flower.. #
,..# $
Amount// 
=// 
$num// 
}00 
;00 
_appDbContext22 
.22 
ShoppingCartItems22 /
.22/ 0
Add220 3
(223 4
shoppingCartItem224 D
)22D E
;22E F
}33 
else44 
{55 
if<< 
(<< 
shoppingCartItem<< $
.<<$ %
Amount<<% +
<<<, -
$num<<. /
)<</ 0
{== 
shoppingCartItem>> $
.>>$ %
Amount>>% +
=>>, -
amount>>. 4
+>>5 6
$num>>7 8
;>>8 9
}?? 
else@@ 
if@@ 
(@@ 
shoppingCartItem@@ )
.@@) *
Amount@@* 0
>@@1 2
$num@@3 4
)@@4 5
{AA 
shoppingCartItemBB $
.BB$ %
AmountBB% +
=BB, -
amountBB. 4
;BB4 5
}CC 
elseDD 
shoppingCartItemEE $
.EE$ %
AmountEE% +
+=EE, .
amountEE/ 5
;EE5 6
}FF 
_appDbContextGG 
.GG 
SaveChangesGG %
(GG% &
)GG& '
;GG' (
}HH 	
publicJJ 
intJJ 
RemoveFromCartJJ !
(JJ! "
FlowerJJ" (
flowerJJ) /
)JJ/ 0
{KK 	
varLL 
shoppingCartItemLL  
=LL! "
_appDbContextMM !
.MM! "
ShoppingCartItemsMM" 3
.MM3 4
SingleOrDefaultMM4 C
(MMC D
sNN 
=>NN 
sNN 
.NN 
FlowerNN %
.NN% &
FlowerIdNN& .
==NN/ 1
flowerNN2 8
.NN8 9
FlowerIdNN9 A
&&NNB D
sNNE F
.NNF G
ShoppingCartIdNNG U
==NNV X
ShoppingCartIdNNY g
)NNg h
;NNh i
varPP 
localAmountPP 
=PP 
$numPP 
;PP  
ifRR 
(RR 
shoppingCartItemRR  
!=RR! #
nullRR$ (
)RR( )
{SS 
ifTT 
(TT 
shoppingCartItemTT $
.TT$ %
AmountTT% +
>TT, -
$numTT. /
)TT/ 0
{UU 
shoppingCartItemVV $
.VV$ %
AmountVV% +
--VV+ -
;VV- .
localAmountWW 
=WW  !
shoppingCartItemWW" 2
.WW2 3
AmountWW3 9
;WW9 :
}XX 
elseYY 
{ZZ 
_appDbContext[[ !
.[[! "
ShoppingCartItems[[" 3
.[[3 4
Remove[[4 :
([[: ;
shoppingCartItem[[; K
)[[K L
;[[L M
}\\ 
}]] 
_appDbContext__ 
.__ 
SaveChanges__ %
(__% &
)__& '
;__' (
returnaa 
localAmountaa 
;aa 
}bb 	
publicdd 
Listdd 
<dd 
ShoppingCartItemdd $
>dd$ % 
GetShoppingCartItemsdd& :
(dd: ;
)dd; <
{ee 	
returnff 
ShoppingCartItemsff $
??ff% '
(gg 
ShoppingCartItemsgg %
=gg& '
_appDbContexthh $
.hh$ %
ShoppingCartItemshh% 6
.hh6 7
Wherehh7 <
(hh< =
chh= >
=>hh? A
chhB C
.hhC D
ShoppingCartIdhhD R
==hhS U
ShoppingCartIdhhV d
)hhd e
.ii 
Includeii #
(ii# $
sii$ %
=>ii& (
sii) *
.ii* +
Flowerii+ 1
)ii1 2
.jj 
ToListjj "
(jj" #
)jj# $
)jj$ %
;jj% &
}kk 	
publicmm 
voidmm 
	ClearCartmm 
(mm 
)mm 
{nn 	
varoo 
	cartItemsoo 
=oo 
_appDbContextoo )
.pp 
ShoppingCartItemspp "
.qq 
Whereqq 
(qq 
cartqq 
=>qq 
cartqq #
.qq# $
ShoppingCartIdqq$ 2
==qq3 5
ShoppingCartIdqq6 D
)qqD E
;qqE F
_appDbContextss 
.ss 
ShoppingCartItemsss +
.ss+ ,
RemoveRangess, 7
(ss7 8
	cartItemsss8 A
)ssA B
;ssB C
_appDbContextuu 
.uu 
SaveChangesuu %
(uu% &
)uu& '
;uu' (
}vv 	
publiczz 
decimalzz  
GetShoppingCartTotalzz +
(zz+ ,
)zz, -
{{{ 	
var|| 
total|| 
=|| 
_appDbContext|| %
.||% &
ShoppingCartItems||& 7
.||7 8
Where||8 =
(||= >
c||> ?
=>||@ B
c||C D
.||D E
ShoppingCartId||E S
==||T V
ShoppingCartId||W e
)||e f
.}} 
Select}} 
(}} 
c}} 
=>}} 
c}} 
.}} 
Flower}} %
.}}% &
Price}}& +
*}}, -
c}}. /
.}}/ 0
Amount}}0 6
)}}6 7
.}}7 8
Sum}}8 ;
(}}; <
)}}< =
;}}= >
return~~ 
total~~ 
;~~ 
} 	
}
ÄÄ 
}ÅÅ â
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCartItem.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
ShoppingCartItem !
{ 
public 
int 
ShoppingCartItemId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
Amount		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ¡
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Program.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} è
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\CategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class 
CategoryRepository #
:$ %
ICategoryRepository& 9
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public

 
CategoryRepository

 !
(

! "
AppDbContext

" .
appDbContext

/ ;
)

; <
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Category #
># $

Categories% /
=>0 2
_appDbContext3 @
.@ A

CategoriesA K
;K L
} 
} π3
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\FlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
FlowerRepository		 !
:		" #
IFlowerRepository		$ 5
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public 
FlowerRepository 
(  
AppDbContext  ,
appDbContext- 9
)9 :
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Include- 4
(4 5
c5 6
=>7 9
c: ;
.; <
Category< D
)D E
;E F
} 
} 	
public 
IEnumerable 
< 
string !
>! "
FlowersNames# /
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Select- 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Name; ?
)? @
.@ A
ToListA G
(G H
)H I
;I J
} 
}   	
public"" 
IEnumerable"" 
<"" 
Flower"" !
>""! "
FlowerPresentation""# 5
{## 	
get$$ 
{%% 
return&& 
_appDbContext&& $
.&&$ %
Flowers&&% ,
.&&, -
Include&&- 4
(&&4 5
c&&5 6
=>&&7 9
c&&: ;
.&&; <
Category&&< D
)&&D E
.&&E F
Where&&F K
(&&K L
p&&L M
=>&&N P
p&&Q R
.&&R S 
IsFlowerPresentation&&S g
)&&g h
;&&h i
}'' 
}(( 	
public** 
Flower** 
GetFlowerById** #
(**# $
int**$ '
flowerId**( 0
)**0 1
{++ 	
return,, 
_appDbContext,,  
.,,  !
Flowers,,! (
.,,( )
FirstOrDefault,,) 7
(,,7 8
f,,8 9
=>,,: <
f,,= >
.,,> ?
FlowerId,,? G
==,,H J
flowerId,,K S
),,S T
;,,T U
}-- 	
public// 
IEnumerable// 
<// 
FlowerViewModel// *
>//* +
FlowersAsViewModel//, >
{00 	
get11 
{22 
List33 
<33 
FlowerViewModel33 $
>33$ %
flowers33& -
=33. /
new330 3
List334 8
<338 9
FlowerViewModel339 H
>33H I
(33I J
)33J K
;33K L
foreach55 
(55 
var55 
dbFlower55 %
in55& (
Flowers55) 0
)550 1
{66 
flowers77 
.77 
Add77 
(77  (
MapDbFlowerToFlowerViewModel77  <
(77< =
dbFlower77= E
)77E F
)77F G
;77G H
}88 
return:: 
flowers:: 
;:: 
};; 
}<< 	
public>> 
bool>> 
	AddFlower>> 
(>> 
Flower>> $
flower>>% +
)>>+ ,
{?? 	
var@@ 
result@@ 
=@@ 
_appDbContext@@ &
.@@& '
Add@@' *
(@@* +
flower@@+ 1
)@@1 2
;@@2 3
_appDbContextBB 
.BB 
SaveChangesBB %
(BB% &
)BB& '
;BB' (
returnDD 
resultDD 
.DD 
StateDD 
==DD  "
EntityStateDD# .
.DD. /
AddedDD/ 4
||DD5 7
resultDD8 >
.DD> ?
StateDD? D
==DDE G
EntityStateDDH S
.DDS T
	UnchangedDDT ]
?DD^ _
trueDD` d
:DDe f
falseDDg l
;DDl m
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
varII 
resultII 
=II 
_appDbContextII &
.II& '
RemoveII' -
(II- .
flowerII. 4
)II4 5
;II5 6
_appDbContextKK 
.KK 
SaveChangesKK %
(KK% &
)KK& '
;KK' (
returnMM 
resultMM 
.MM 
StateMM 
==MM  "
EntityStateMM# .
.MM. /
DeletedMM/ 6
||MM7 9
resultMM: @
.MM@ A
StateMMA F
==MMG I
EntityStateMMJ U
.MMU V
	UnchangedMMV _
?MM` a
trueMMb f
:MMg h
falseMMi n
;MMn o
}NN 	
privatePP 
FlowerViewModelPP (
MapDbFlowerToFlowerViewModelPP  <
(PP< =
FlowerPP= C
dbFlowerPPD L
)PPL M
{QQ 	
returnRR 
newRR 
FlowerViewModelRR &
(RR& '
)RR' (
{SS 
FlowerIdTT 
=TT 
dbFlowerTT #
.TT# $
FlowerIdTT$ ,
,TT, -
NameUU 
=UU 
dbFlowerUU 
.UU  
NameUU  $
,UU$ %
PriceVV 
=VV 
dbFlowerVV  
.VV  !
PriceVV! &
,VV& '
ShortDescriptionWW  
=WW! "
dbFlowerWW# +
.WW+ ,
ShortDescriptionWW, <
,WW< =
ImageThumbnailUrlXX !
=XX" #
dbFlowerXX$ ,
.XX, -
ImageThumbnailUrlXX- >
}YY 
;YY 
}ZZ 	
public\\ 
bool\\ 
UpdateFlower\\  
(\\  !
Flower\\! '
flower\\( .
)\\. /
{]] 	
_appDbContext^^ 
.^^ 
Update^^  
(^^  !
flower^^! '
)^^' (
;^^( )
_appDbContext`` 
.`` 
SaveChanges`` %
(``% &
)``& '
;``' (
returnbb 
truebb 
;bb 
}cc 	
}dd 
}ee »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ICategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
ICategoryRepository (
{ 
IEnumerable 
< 
Category 
> 

Categories (
{) *
get+ .
;. /
}0 1
}		 
}

 ¿
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IFlowerRepository &
{ 
IEnumerable		 
<		 
Flower		 
>		 
Flowers		 #
{		$ %
get		& )
;		) *
}		+ ,
IEnumerable 
< 
Flower 
> 
FlowerPresentation .
{/ 0
get1 4
;4 5
}6 7
IEnumerable 
< 
FlowerViewModel #
># $
FlowersAsViewModel% 7
{ 	
get 
; 
} 	
IEnumerable 
< 
string 
> 
FlowersNames (
{ 	
get 
; 
} 	
Flower 
GetFlowerById 
( 
int  
flowerId! )
)) *
;* +
bool 
	AddFlower 
( 
Flower 
flower $
)$ %
;% &
bool 
DeleteFlower 
( 
Flower  
flower! '
)' (
;( )
bool 
UpdateFlower 
( 
Flower  
flower! '
)' (
;( )
} 
} ò
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IOrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IOrderRepository %
{ 
void		 
CreateOrder		 
(		 
Order		 
order		 $
)		$ %
;		% &
IEnumerable 
< (
OrderHistoryDetailsViewModel 0
>0 1 
GetOrdersAsViewModel2 F
(F G
stringG M
userNameN V
=W X
$strY [
)[ \
;\ ]
} 
} à
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelCategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class #
ModelCategoryRepository (
:) *
ICategoryRepository+ >
{ 
public 
IEnumerable 
< 
Category #
># $

Categories% /
{		 	
get

 
{ 
return 
new 
List 
<  
Category  (
>( )
{ 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 5
,5 6
Description #
=$ %
$str% 9
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& :
,: ;
Description #
=$ %
$str% 3
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 8
,8 9
Description #
=$ %
$str% M
} 
} 
; 
}   
}!! 	
}"" 
}## ô1
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 !
ModelFlowerRepository		 &
:		' (
IFlowerRepository		) :
{

 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
=A B
newC F#
ModelCategoryRepositoryG ^
(^ _
)_ `
;` a
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
new 
List 
<  
Flower  &
>& '
{ 
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name 
= 
$str %
,% &
Price 
= 
$num $
,$ %
ShortDescription (
=( )
$str) 7
,7 8
LongDescription '
=' (
$str( /
,/ 0
Category  
=! "
_categoryRepository# 6
.6 7

Categories7 A
.A B
ToListB H
(H I
)I J
[J K
$numK L
]L M
,M N
ImageUrl  
=! "
$str" g
,g h
InStocki p
=p q
trueq u
,u v
ImageThumbnailUrl )
=* +
$str+ p
}p q
,q r
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name   
=   
$str   &
,  & '
Price!! 
=!! 
$num!! $
,!!$ %
ShortDescription"" (
=""( )
$str"") 7
,""7 8
LongDescription## '
=##' (
$str##( 1
,##1 2
Category$$  
=$$! "
_categoryRepository$$# 6
.$$6 7

Categories$$7 A
.$$A B
ToList$$B H
($$H I
)$$I J
[$$J K
$num$$K L
]$$L M
,$$M N
ImageUrl%%  
=%%! "
$str	%%" Ä
,
%%Ä Å
InStock&& 
=&&  
true&&  $
,&&$ %
ImageThumbnailUrl'' )
=''* +
$str	''+ â
}
''â ä
,
''ä ã
new)) 
Flower)) 
{))  
FlowerId))  (
=))) *
$num))+ ,
,)), -
Name** 
=** 
$str** $
,**$ %
Price**& +
=**+ ,
$num**, 2
,**2 3
ShortDescription++ (
=++( )
$str++) 4
,++4 5
LongDescription,, '
=,,' (
$str,,( 3
,,,3 4
Category--  
=--! "
_categoryRepository--# 6
.--6 7

Categories--7 A
.--A B
ToList--B H
(--H I
)--I J
[--J K
$num--K L
]--L M
,--M N
ImageUrl..  
=..! "
$str.." s
,..s t
InStock..u |
=..| }
true	..} Å
,
..Å Ç
ImageThumbnailUrl// )
=//* +
$str//+ |
}//| }
,//} ~
new11 
Flower11 
{11  
FlowerId11  (
=11) *
$num11+ ,
,11, -
Name22 
=22 
$str22 %
,22% &
Price22' ,
=22, -
$num22- 3
,223 4
ShortDescription33 (
=33( )
$str33) 8
,338 9
LongDescription44 '
=44' (
$str44( 0
,440 1
Category55  
=55! "
_categoryRepository55# 6
.556 7

Categories557 A
.55A B
ToList55B H
(55H I
)55I J
[55J K
$num55K L
]55L M
,55M N
ImageUrl66  
=66! "
$str66" p
,66p q
InStock66r y
=66y z
true66z ~
,66~ 
ImageThumbnailUrl77 )
=77* +
$str77+ y
}77y z
}88 
;88 
}99 
}:: 	
public<< 
IEnumerable<< 
<<< 
Flower<< !
><<! "
FlowerPresentation<<# 5
{<<6 7
get<<8 ;
;<<; <
}<<= >
public>> 
IEnumerable>> 
<>> 
FlowerViewModel>> *
>>>* +
FlowersAsViewModel>>, >
=>>>? A
throw>>B G
new>>H K#
NotImplementedException>>L c
(>>c d
)>>d e
;>>e f
public@@ 
IEnumerable@@ 
<@@ 
string@@ !
>@@! "
FlowersNames@@# /
=>@@0 2
throw@@3 8
new@@9 <#
NotImplementedException@@= T
(@@T U
)@@U V
;@@V W
publicBB 
boolBB 
	AddFlowerBB 
(BB 
FlowerBB $
flowerBB% +
)BB+ ,
{CC 	
throwDD 
newDD #
NotImplementedExceptionDD -
(DD- .
)DD. /
;DD/ 0
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
throwII 
newII #
NotImplementedExceptionII -
(II- .
)II. /
;II/ 0
}JJ 	
publicLL 
FlowerLL 
GetFlowerByIdLL #
(LL# $
intLL$ '
flowerIdLL( 0
)LL0 1
{MM 	
throwNN 
newNN 
SystemNN 
.NN #
NotImplementedExceptionNN 4
(NN4 5
)NN5 6
;NN6 7
}OO 	
publicQQ 
boolQQ 
UpdateFlowerQQ  
(QQ  !
FlowerQQ! '
flowerQQ( .
)QQ. /
{RR 	
throwSS 
newSS #
NotImplementedExceptionSS -
(SS- .
)SS. /
;SS/ 0
}TT 	
}UU 
}VV ˝-
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\OrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
OrderRepository		  
:		! "
IOrderRepository		# 3
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderRepository 
( 
AppDbContext +
appDbContext, 8
,8 9
ShoppingCart: F
shoppingCartG S
)S T
{ 	
_appDbContext 
= 
appDbContext (
;( )
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8 
GetOrdersAsViewModel9 M
(M N
stringN T
userNameU ]
=^ _
$str` b
)b c
{ 	
List 
< 
Order 
> 
orders 
=  
null! %
;% &
if 
( 
string 
. 
IsNullOrEmpty $
($ %
userName% -
)- .
). /
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
ToList. 4
(4 5
)5 6
;6 7
} 
else 
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
Where. 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Email; @
==A C
userNameD L
)L M
.M N
ToListN T
(T U
)U V
;V W
} 
var   #
orderHistoryDetailsList   '
=  ( )
new  * -
List  . 2
<  2 3(
OrderHistoryDetailsViewModel  3 O
>  O P
(  P Q
)  Q R
;  R S
foreach!! 
(!! 
var!! 
order!! 
in!! !
orders!!" (
)!!( )
{"" #
orderHistoryDetailsList## '
.##' (
Add##( +
(##+ ,&
MapDbOrderToOrderViewModel##, F
(##F G
order##G L
)##L M
)##M N
;##N O
}$$ 
return&& #
orderHistoryDetailsList&& *
;&&* +
}'' 	
public)) 
void)) 
CreateOrder)) 
())  
Order))  %
order))& +
)))+ ,
{** 	
order++ 
.++ 
OrderPlaced++ 
=++ 
DateTime++  (
.++( )
Now++) ,
;++, -
_appDbContext-- 
.-- 
Orders--  
.--  !
Add--! $
(--$ %
order--% *
)--* +
;--+ ,
var// 
shoppingCartItems// !
=//" #
_shoppingCart//$ 1
.//1 2
ShoppingCartItems//2 C
;//C D
foreach11 
(11 
var11 
shoppingCartItem11 )
in11* ,
shoppingCartItems11- >
)11> ?
{22 
var33 
orderDetail33 
=33  !
new33" %
OrderDetail33& 1
(331 2
)332 3
{44 
Amount55 
=55 
shoppingCartItem55 -
.55- .
Amount55. 4
,554 5
FlowerId66 
=66 
shoppingCartItem66 /
.66/ 0
Flower660 6
.666 7
FlowerId667 ?
,66? @
OrderId77 
=77 
order77 #
.77# $
OrderId77$ +
,77+ ,
Price88 
=88 
shoppingCartItem88 ,
.88, -
Flower88- 3
.883 4
Price884 9
}99 
;99 
_appDbContext;; 
.;; 
OrderDetails;; *
.;;* +
Add;;+ .
(;;. /
orderDetail;;/ :
);;: ;
;;;; <
}<< 
_appDbContext>> 
.>> 
SaveChanges>> %
(>>% &
)>>& '
;>>' (
}?? 	
privateAA (
OrderHistoryDetailsViewModelAA ,&
MapDbOrderToOrderViewModelAA- G
(AAG H
OrderAAH M
dbOrderAAN U
)AAU V
{BB 	
returnCC 
newCC (
OrderHistoryDetailsViewModelCC 3
(CC3 4
)CC4 5
{DD 
OrderIdEE 
=EE 
dbOrderEE !
.EE! "
OrderIdEE" )
,EE) *
AddressFF 
=FF 
dbOrderFF !
.FF! "
AddressLine1FF" .
+FF/ 0
$strFF1 4
+FF5 6
dbOrderFF7 >
.FF> ?
AddressLine2FF? K
,FFK L
CityGG 
=GG 
dbOrderGG 
.GG 
CityGG #
,GG# $
	FirstNameHH 
=HH 
dbOrderHH #
.HH# $
	FirstNameHH$ -
,HH- .
LastNameII 
=II 
dbOrderII "
.II" #
LastNameII# +
,II+ ,
	PayMethodJJ 
=JJ 
dbOrderJJ #
.JJ# $
	PayMethodJJ$ -
,JJ- .
PhoneNumberKK 
=KK 
dbOrderKK %
.KK% &
PhoneNumberKK& 1
,KK1 2
ShippingMethodLL 
=LL  
dbOrderLL! (
.LL( )
ShippingMethodLL) 7
}MM 
;MM 
}NN 	
}OO 
}PP ’.
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Startup.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Startup 
{ 
private 
IConfigurationRoot "
_configurationRoot# 5
;5 6
public 
Startup 
( 
IHostingEnvironment *
hostingEnvironment+ =
)= >
{ 	
_configurationRoot 
=  
new! $ 
ConfigurationBuilder% 9
(9 :
): ;
. 
SetBasePath '
(' (
hostingEnvironment( :
.: ;
ContentRootPath; J
)J K
. 
AddJsonFile '
(' (
$str( :
): ;
. 
Build !
(! "
)" #
;# $
} 	
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddDbContext !
<! "
AppDbContext" .
>. /
(/ 0
options0 7
=>8 :
options, 3
.3 4
UseSqlServer4 @
(@ A
_configurationRootA S
.S T
GetConnectionStringT g
(g h
$strh {
){ |
)| }
)} ~
;~ 
services!! 
.!! 
AddIdentity!!  
<!!  !
ApplicationUser!!! 0
,!!0 1
IdentityRole!!2 >
>!!> ?
(!!? @
options!!@ G
=>!!H J
{"" 
options## 
.## 
Password##  
.##  !
RequireDigit##! -
=##. /
true##0 4
;##4 5
options$$ 
.$$ 
Password$$  
.$$  !
RequireLowercase$$! 1
=$$2 3
true$$4 8
;$$8 9
options%% 
.%% 
Password%%  
.%%  !
RequireUppercase%%! 1
=%%2 3
true%%4 8
;%%8 9
options&& 
.&& 
Password&&  
.&&  !"
RequireNonAlphanumeric&&! 7
=&&8 9
false&&: ?
;&&? @
options'' 
.'' 
User'' 
.'' 
RequireUniqueEmail'' /
=''0 1
false''2 7
;''7 8
}(( 
)(( 
.)) $
AddEntityFrameworkStores)) )
<))) *
AppDbContext))* 6
>))6 7
())7 8
)))8 9
;))9 :
services++ 
.++ 
AddTransient++ !
<++! "
ICategoryRepository++" 5
,++5 6
CategoryRepository++7 I
>++I J
(++J K
)++K L
;++L M
services,, 
.,, 
AddTransient,, !
<,,! "
IFlowerRepository,," 3
,,,3 4
FlowerRepository,,5 E
>,,E F
(,,F G
),,G H
;,,H I
services-- 
.-- 
AddSingleton-- !
<--! " 
IHttpContextAccessor--" 6
,--6 7
HttpContextAccessor--8 K
>--K L
(--L M
)--M N
;--N O
services.. 
... 
	AddScoped.. 
<.. 
ShoppingCart.. +
>..+ ,
(.., -
sp..- /
=>..0 2
ShoppingCart..3 ?
...? @
GetCart..@ G
(..G H
sp..H J
)..J K
)..K L
;..L M
services// 
.// 
AddTransient// !
<//! "
IOrderRepository//" 2
,//2 3
OrderRepository//4 C
>//C D
(//D E
)//E F
;//F G
services11 
.11 
AddMvc11 
(11 
)11 
;11 
services33 
.33 
AddMemoryCache33 #
(33# $
)33$ %
;33% &
services44 
.44 

AddSession44 
(44  
)44  !
;44! "
}55 	
public88 
void88 
	Configure88 
(88 
IApplicationBuilder88 1
app882 5
,885 6
IHostingEnvironment887 J
env88K N
,88N O
ILoggerFactory88P ^
loggerFactory88_ l
)88l m
{99 	
app:: 
.:: %
UseDeveloperExceptionPage:: )
(::) *
)::* +
;::+ ,
app;; 
.;; 
UseStatusCodePages;; "
(;;" #
);;# $
;;;$ %
app<< 
.<< 
UseStaticFiles<< 
(<< 
)<<  
;<<  !
app== 
.== 

UseSession== 
(== 
)== 
;== 
app>> 
.>> 
UseIdentity>> 
(>> 
)>> 
;>> 
appAA 
.AA 
UseMvcAA 
(AA 
routesAA 
=>AA  
{BB 
routesCC 
.CC 
MapRouteCC 
(CC  
nameDD 
:DD 
$strDD *
,DD* +
templateEE 
:EE 
$strEE ;
,EE; <
defaultsFF 
:FF 
newFF !
{FF" #

ControllerFF$ .
=FF/ 0
$strFF1 9
,FF9 :
actionFF; A
=FFB C
$strFFD J
}FFK L
)FFL M
;FFM N
routesHH 
.HH 
MapRouteHH 
(HH  
nameII 
:II 
$strII #
,II# $
templateJJ 
:JJ 
$strJJ F
)JJF G
;JJG H
}KK 
)KK 
;KK 
DbInitializerMM 
.MM 
SeedMM 
(MM 
appMM "
)MM" #
;MM# $
}NN 	
}OO 
}PP ‰

GE:\Projects\FlowerShop\FlowerApp\FlowerApp\TagHelpers\EmailTagHelper.cs
	namespace 	
	FlowerApp
 
. 

TagHelpers 
{ 
public 

class 
EmailTagHelper 
:  !
	TagHelper" +
{ 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
Content		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public 
override 
void 
Process $
($ %
TagHelperContext% 5
context6 =
,= >
TagHelperOutput? N
outputO U
)U V
{ 	
output 
. 
TagName 
= 
$str  
;  !
output 
. 

Attributes 
. 
SetAttribute *
(* +
$str+ 1
,1 2
$str3 <
+= >
Address? F
)F G
;G H
output 
. 
Content 
. 

SetContent %
(% &
Content& -
)- .
;. /
} 	
} 
} ≥
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddFlowerViewModel #
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
ShortDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
string		 
LongDescription		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ô
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddRoleViewModel !
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
RoleName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} ∂
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddUserViewModel !
{ 
[ 	
Required	 
] 
[		 	
Display			 
(		 
Name		 
=		 
$str		 #
)		# $
]		$ %
public

 
string

 
UserName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
[ 	
RegularExpression	 
( 
$str 6
,6 7
ErrorMessage 
= 
$str Q
)Q R
]R S
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public   
DateTime   
	Birthdate   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public"" 
string"" 
City"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
public$$ 
string$$ 
Country$$ 
{$$ 
get$$  #
;$$# $
set$$% (
;$$( )
}$$* +
}%% 
}&& ’
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\CategoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
CategoryViewModel "
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CategoryName 
{  !
get" %
;% &
set' *
;* +
}, -
} 
}		 ≥
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ClaimsManagementViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class %
ClaimsManagementViewModel *
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ClaimId 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
List		 
<		 
string		 
>		 
AllClaimsList		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditFlowerViewModel $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditRoleViewModel "
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! =
)

= >
]

> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
RoleName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< 
string 
> 
Users !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditUserViewModel "
{ 
public		 
string		 
Id		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
[ 	
Required	 
( 
ErrorMessage 
=  
$str! =
)= >
]> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
	Birthdate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ø
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerDetailViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
FlowerDetailViewModel &
{ 
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ñ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerListViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerListViewModel $
{ 
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public

 
string

 
CurrentCategory

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
} 
} ≠
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerViewModel  
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} »
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\HomeViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
HomeViewModel 
{ 
public 
IEnumerable 
< 
Flower !
>! "
FlowerPresentation# 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public

 
IEnumerable

 
<

 
string

 !
>

! "
FlowersName

# .
{

/ 0
get

1 4
;

4 5
set

6 9
;

9 :
}

; <
} 
} Â
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\LoginViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
LoginViewModel 
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
UserName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ï
UE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryDetailsViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class (
OrderHistoryDetailsViewModel -
{ 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
City		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public

 
string

 
ShippingMethod

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	PayMethod 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} å
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
OrderHistoryViewModel &
{ 
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8
Orders9 ?
{@ A
getB E
;E F
setG J
;J K
}L M
} 
}		 Ò
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ShoppingCartViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
ShoppingCartViewModel &
{ 
public 
ShoppingCart 
ShoppingCart (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public		 
decimal		 
ShoppingCartTotal		 (
{		) *
get		+ .
;		. /
set		0 3
;		3 4
}		5 6
}

 
} π
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\UserRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
UserRoleViewModel "
{ 
public 
UserRoleViewModel  
(  !
)! "
{		 	
Users

 
=

 
new

 
List

 
<

 
IdentityUser

 )
>

) *
(

* +
)

+ ,
;

, -
} 	
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RoleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
IdentityUser  
>  !
Users" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} 