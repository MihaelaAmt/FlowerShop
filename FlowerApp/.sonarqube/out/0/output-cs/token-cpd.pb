à
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\ApplicationUser.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser# /
{ 
public		 
DateTime		 
	Birthdate		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} „
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\FlowerShopClaimTypes.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class  
FlowerShopClaimTypes %
{ 
public		 
static		 
List		 
<		 
string		 !
>		! "

ClaimsList		# -
{		. /
get		0 3
;		3 4
set		5 8
;		8 9
}		: ;
=		< =
new		> A
List		B F
<		F G
string		G M
>		M N
{		O P
$str		Q `
,		` a
$str		b n
,		n o
$str			p Ç
}
		É Ñ
;
		Ñ Ö
}

 
} °
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\AdminMenuItem.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
	AdminMenu 
: 
ViewComponent *
{ 
public		  
IViewComponentResult		 #
Invoke		$ *
(		* +
)		+ ,
{

 	
var 
	menuItems 
= 
new 
List  $
<$ %
AdminMenuItem% 2
>2 3
{4 5
new6 9
AdminMenuItem: G
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem "
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem #
{ 
DisplayValue  
=! "
$str# 6
,6 7
ActionValue 
=  !
$str" 4
}   
,   
}!! 
;!! 
return$$ 
View$$ 
($$ 
	menuItems$$ !
)$$! "
;$$" #
}%% 	
}&& 
public)) 

class)) 
AdminMenuItem)) 
{** 
public,, 
string,, 
DisplayValue,, "
{,,# $
get,,% (
;,,( )
set,,* -
;,,- .
},,/ 0
public// 
string// 
ActionValue// !
{//" #
get//$ '
;//' (
set//) ,
;//, -
}//. /
}00 
}11 ‹	
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\CategoryMenu.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
CategoryMenu 
: 
ViewComponent  -
{		 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
CategoryMenu 
( 
ICategoryRepository /
categoryRepository0 B
)B C
{ 	
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 

categories 
= 
_categoryRepository 0
.0 1

Categories1 ;
.; <
OrderBy< C
(C D
cD E
=>F H
cI J
.J K
CategoryNameK W
)W X
;X Y
return 
View 
( 

categories "
)" #
;# $
} 	
} 
} €
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\ShoppingCartSummary.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
ShoppingCartSummary $
:% &
ViewComponent' 4
{		 
private

 
readonly

 
ShoppingCart

 %
_shoppingCart

& 3
;

3 4
public 
ShoppingCartSummary "
(" #
ShoppingCart# /
shoppingCart0 <
)< =
{ 	
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var 
shoppingViewModel !
=" #
new$ '!
ShoppingCartViewModel( =
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return!! 
View!! 
(!! 
shoppingViewModel!! )
)!!) *
;!!* +
}"" 	
}## 
}$$ å2
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AccountController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
,I J
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[ 	
AllowAnonymous	 
] 
public 
IActionResult 
Login "
(" #
string# )
	returnUrl* 3
)3 4
{ 	
return   
View   
(   
new   
LoginViewModel   *
{!! 
	ReturnUrl"" 
="" 
	returnUrl"" %
}## 
)## 
;## 
}$$ 	
['' 	
HttpPost''	 
]'' 
[** 	
AllowAnonymous**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
Login++) .
(++. /
LoginViewModel++/ =
loginViewModel++> L
)++L M
{,, 	
if-- 
(-- 
!-- 

ModelState-- 
.-- 
IsValid-- #
)--# $
{.. 
return// 
View// 
(// 
loginViewModel// *
)//* +
;//+ ,
}00 
var33 
user33 
=33 
await33 
_userManager33 )
.33) *
FindByNameAsync33* 9
(339 :
loginViewModel33: H
.33H I
UserName33I Q
)33Q R
;33R S
if55 
(55 
user55 
!=55 
null55 
)55 
{66 
var88 
result88 
=88 
await88 "
_signInManager88# 1
.881 2
PasswordSignInAsync882 E
(88E F
user88F J
,88J K
loginViewModel88L Z
.88Z [
Password88[ c
,88c d
false88e j
,88j k
false88l q
)88q r
;88r s
if;; 
(;; 
result;; 
.;; 
	Succeeded;; $
);;$ %
{<< 
if>> 
(>> 
string>> 
.>> 
IsNullOrEmpty>> ,
(>>, -
loginViewModel>>- ;
.>>; <
	ReturnUrl>>< E
)>>E F
)>>F G
{?? 
return@@ 
RedirectToAction@@ /
(@@/ 0
$str@@0 7
,@@7 8
$str@@9 ?
)@@? @
;@@@ A
}AA 
returnDD 
RedirectDD #
(DD# $
loginViewModelDD$ 2
.DD2 3
	ReturnUrlDD3 <
)DD< =
;DD= >
}EE 
}FF 

ModelStateHH 
.HH 
AddModelErrorHH $
(HH$ %
$strHH% '
,HH' (
$strHH) F
)HHF G
;HHG H
returnJJ 
ViewJJ 
(JJ 
loginViewModelJJ &
)JJ& '
;JJ' (
}KK 	
[NN 	
AllowAnonymousNN	 
]NN 
publicOO 
IActionResultOO 
RegisterOO %
(OO% &
)OO& '
{PP 	
returnQQ 
ViewQQ 
(QQ 
)QQ 
;QQ 
}RR 	
[UU 	
HttpPostUU	 
]UU 
[VV 	$
ValidateAntiForgeryTokenVV	 !
]VV! "
[WW 	
AllowAnonymousWW	 
]WW 
publicXX 
asyncXX 
TaskXX 
<XX 
IActionResultXX '
>XX' (
RegisterXX) 1
(XX1 2
LoginViewModelXX2 @
loginViewModelXXA O
)XXO P
{YY 	
ifZZ 
(ZZ 

ModelStateZZ 
.ZZ 
IsValidZZ "
)ZZ" #
{[[ 
var]] 
user]] 
=]] 
new]] 
ApplicationUser]] .
{]]/ 0
UserName]]1 9
=]]: ;
loginViewModel]]< J
.]]J K
UserName]]K S
}]]T U
;]]U V
var^^ 
result^^ 
=^^ 
await^^ "
_userManager^^# /
.^^/ 0
CreateAsync^^0 ;
(^^; <
user^^< @
,^^@ A
loginViewModel^^B P
.^^P Q
Password^^Q Y
)^^Y Z
;^^Z [
ifaa 
(aa 
resultaa 
.aa 
	Succeededaa $
)aa$ %
{bb 
returncc 
RedirectToActioncc +
(cc+ ,
$strcc, 3
,cc3 4
$strcc5 ;
)cc; <
;cc< =
}dd 
}ee 

ModelStatehh 
.hh 
AddModelErrorhh $
(hh$ %
$strhh% '
,hh' (
$strhh) G
)hhG H
;hhH I
returnii 
Viewii 
(ii 
loginViewModelii &
)ii& '
;ii' (
}jj 	
[nn 	
HttpPostnn	 
]nn 
publicpp 
asyncpp 
Taskpp 
<pp 
IActionResultpp '
>pp' (
Logoutpp) /
(pp/ 0
)pp0 1
{qq 	
awaitrr 
_signInManagerrr  
.rr  !
SignOutAsyncrr! -
(rr- .
)rr. /
;rr/ 0
returntt 
RedirectToActiontt #
(tt# $
$strtt$ +
,tt+ ,
$strtt- 3
)tt3 4
;tt4 5
}uu 	
}vv 
}ww Üø
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AdminController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class 
AdminController  
:! "

Controller# -
{ 
private 
const 
string 
UManagement (
=) *
$str+ ;
;; <
private 
const 
string 
RManagement (
=) *
$str+ ;
;; <
private 
const 
string 
FManagement (
=) *
$str+ =
;= >
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public"" 
AdminController"" 
("" 
UserManager"" *
<""* +
ApplicationUser""+ :
>"": ;
userManager""< G
,""G H
RoleManager## 
<## 
IdentityRole## $
>##$ %
roleManager##& 1
,##1 2
IFlowerRepository$$ 
flowerRepository$$ .
,$$. /
ICategoryRepository%% 
categoryRepository%%  2
)%%2 3
{&& 	
_userManager'' 
='' 
userManager'' &
;''& '
_roleManager(( 
=(( 
roleManager(( &
;((& '
_flowerRepository)) 
=)) 
flowerRepository))  0
;))0 1
_categoryRepository** 
=**  !
categoryRepository**" 4
;**4 5
}++ 	
public.. 
IActionResult.. 
Index.. "
(.." #
)..# $
{// 	
return00 
View00 
(00 
)00 
;00 
}11 	
public44 
IActionResult44 
UserManagement44 +
(44+ ,
)44, -
{55 	
var66 
users66 
=66 
_userManager66 $
.66$ %
Users66% *
;66* +
return88 
View88 
(88 
users88 
)88 
;88 
}99 	
public<< 
IActionResult<< 
AddUser<< $
(<<$ %
)<<% &
{== 	
return>> 
View>> 
(>> 
)>> 
;>> 
}?? 	
[BB 	
HttpPostBB	 
]BB 
publicCC 
asyncCC 
TaskCC 
<CC 
IActionResultCC '
>CC' (
AddUserCC) 0
(CC0 1
AddUserViewModelCC1 A
addUserViewModelCCB R
)CCR S
{DD 	
ifEE 
(EE 
!EE 

ModelStateEE 
.EE 
IsValidEE #
)EE# $
{FF 
returnGG 
ViewGG 
(GG 
addUserViewModelGG ,
)GG, -
;GG- .
}HH 
varJJ 
userJJ 
=JJ 
newJJ 
ApplicationUserJJ *
{KK 
UserNameMM 
=MM 
addUserViewModelMM +
.MM+ ,
UserNameMM, 4
,MM4 5
EmailOO 
=OO 
addUserViewModelOO (
.OO( )
EmailOO) .
,OO. /
	BirthdateQQ 
=QQ 
addUserViewModelQQ ,
.QQ, -
	BirthdateQQ- 6
,QQ6 7
CitySS 
=SS 
addUserViewModelSS '
.SS' (
CitySS( ,
,SS, -
CountryUU 
=UU 
addUserViewModelUU *
.UU* +
CountryUU+ 2
}VV 
;VV 
IdentityResultXX 
resultXX !
=XX" #
awaitXX$ )
_userManagerXX* 6
.XX6 7
CreateAsyncXX7 B
(XXB C
userXXC G
,XXG H
addUserViewModelXXI Y
.XXY Z
PasswordXXZ b
)XXb c
;XXc d
if\\ 
(\\ 
result\\ 
.\\ 
	Succeeded\\  
)\\  !
{]] 
return^^ 
RedirectToAction^^ '
(^^' (
UManagement^^( 3
,^^3 4
_userManager^^5 A
.^^A B
Users^^B G
)^^G H
;^^H I
}__ 
foreachbb 
(bb 
IdentityErrorbb "
errorbb# (
inbb) +
resultbb, 2
.bb2 3
Errorsbb3 9
)bb9 :
{cc 

ModelStatedd 
.dd 
AddModelErrordd (
(dd( )
$strdd) +
,dd+ ,
errordd- 2
.dd2 3
Descriptiondd3 >
)dd> ?
;dd? @
}ee 
returnff 
Viewff 
(ff 
addUserViewModelff (
)ff( )
;ff) *
}gg 	
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (
EditUserkk) 1
(kk1 2
stringkk2 8
idkk9 ;
)kk; <
{ll 	
varmm 
usermm 
=mm 
awaitmm 
_userManagermm )
.mm) *
FindByIdAsyncmm* 7
(mm7 8
idmm8 :
)mm: ;
;mm; <
ifoo 
(oo 
useroo 
==oo 
nulloo 
)oo 
{pp 
returnqq 
RedirectToActionqq '
(qq' (
UManagementqq( 3
,qq3 4
_userManagerqq5 A
.qqA B
UsersqqB G
)qqG H
;qqH I
}rr 
vartt 
claimstt 
=tt 
awaittt 
_userManagertt +
.tt+ ,
GetClaimsAsynctt, :
(tt: ;
usertt; ?
)tt? @
;tt@ A
varuu 
vmuu 
=uu 
newuu 
EditUserViewModeluu *
{vv 
Idyy 
=yy 
useryy 
.yy 
Idyy 
,yy 
Email{{ 
={{ 
user{{ 
.{{ 
Email{{ "
,{{" #
UserName}} 
=}} 
user}} 
.}}  
UserName}}  (
,}}( )

UserClaims 
= 
claims #
.# $
Select$ *
(* +
c+ ,
=>- /
c0 1
.1 2
Value2 7
)7 8
.8 9
ToList9 ?
(? @
)@ A
}
ÄÄ 
;
ÄÄ 
return
ÇÇ 
View
ÇÇ 
(
ÇÇ 
vm
ÇÇ 
)
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
[
ÜÜ 	
HttpPost
ÜÜ	 
]
ÜÜ 
public
áá 
async
áá 
Task
áá 
<
áá 
IActionResult
áá '
>
áá' (
EditUser
áá) 1
(
áá1 2
EditUserViewModel
áá2 C
editUserViewModel
ááD U
)
ááU V
{
àà 	
var
ää 
user
ää 
=
ää 
await
ää 
_userManager
ää )
.
ää) *
FindByIdAsync
ää* 7
(
ää7 8
editUserViewModel
ää8 I
.
ääI J
Id
ääJ L
)
ääL M
;
ääM N
if
åå 
(
åå 
user
åå 
!=
åå 
null
åå 
)
åå 
{
çç 
user
èè 
.
èè 
Email
èè 
=
èè 
editUserViewModel
èè .
.
èè. /
Email
èè/ 4
;
èè4 5
user
ëë 
.
ëë 
UserName
ëë 
=
ëë 
editUserViewModel
ëë  1
.
ëë1 2
UserName
ëë2 :
;
ëë: ;
user
ìì 
.
ìì 
	Birthdate
ìì 
=
ìì  
editUserViewModel
ìì! 2
.
ìì2 3
	Birthdate
ìì3 <
;
ìì< =
user
ïï 
.
ïï 
City
ïï 
=
ïï 
editUserViewModel
ïï -
.
ïï- .
City
ïï. 2
;
ïï2 3
user
óó 
.
óó 
Country
óó 
=
óó 
editUserViewModel
óó 0
.
óó0 1
Country
óó1 8
;
óó8 9
var
ôô 
result
ôô 
=
ôô 
await
ôô "
_userManager
ôô# /
.
ôô/ 0
UpdateAsync
ôô0 ;
(
ôô; <
user
ôô< @
)
ôô@ A
;
ôôA B
if
õõ 
(
õõ 
result
õõ 
.
õõ 
	Succeeded
õõ $
)
õõ$ %
{
úú 
return
ûû 
RedirectToAction
ûû +
(
ûû+ ,
UManagement
ûû, 7
,
ûû7 8
_userManager
ûû9 E
.
ûûE F
Users
ûûF K
)
ûûK L
;
ûûL M
}
üü 

ModelState
¢¢ 
.
¢¢ 
AddModelError
¢¢ (
(
¢¢( )
$str
¢¢) +
,
¢¢+ ,
$str
¢¢- V
)
¢¢V W
;
¢¢W X
return
££ 
View
££ 
(
££ 
editUserViewModel
££ -
)
££- .
;
££. /
}
§§ 
return
¶¶ 
RedirectToAction
¶¶ #
(
¶¶# $
UManagement
¶¶$ /
,
¶¶/ 0
_userManager
¶¶1 =
.
¶¶= >
Users
¶¶> C
)
¶¶C D
;
¶¶D E
}
ßß 	
[
©© 	
HttpPost
©©	 
]
©© 
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
IActionResult
´´ '
>
´´' (

DeleteUser
´´) 3
(
´´3 4
string
´´4 :
userId
´´; A
)
´´A B
{
¨¨ 	
var
ÆÆ 
user
ÆÆ 
=
ÆÆ 
await
ÆÆ 
_userManager
ÆÆ )
.
ÆÆ) *
FindByIdAsync
ÆÆ* 7
(
ÆÆ7 8
userId
ÆÆ8 >
)
ÆÆ> ?
;
ÆÆ? @
if
∞∞ 
(
∞∞ 
user
∞∞ 
!=
∞∞ 
null
∞∞ 
)
∞∞ 
{
±± 
IdentityResult
≥≥ 
result
≥≥ %
=
≥≥& '
await
≥≥( -
_userManager
≥≥. :
.
≥≥: ;
DeleteAsync
≥≥; F
(
≥≥F G
user
≥≥G K
)
≥≥K L
;
≥≥L M
if
µµ 
(
µµ 
result
µµ 
.
µµ 
	Succeeded
µµ $
)
µµ$ %
{
∂∂ 
return
∏∏ 
RedirectToAction
∏∏ +
(
∏∏+ ,
UManagement
∏∏, 7
)
∏∏7 8
;
∏∏8 9
}
ππ 
else
∫∫ 
{
ªª 

ModelState
ΩΩ 
.
ΩΩ 
AddModelError
ΩΩ ,
(
ΩΩ, -
$str
ΩΩ- /
,
ΩΩ/ 0
$str
ΩΩ1 a
)
ΩΩa b
;
ΩΩb c
}
ææ 
}
¿¿ 
else
¡¡ 
{
¬¬ 

ModelState
ƒƒ 
.
ƒƒ 
AddModelError
ƒƒ (
(
ƒƒ( )
$str
ƒƒ) +
,
ƒƒ+ ,
$str
ƒƒ- G
)
ƒƒG H
;
ƒƒH I
}
≈≈ 
return
…… 
View
…… 
(
…… 
UManagement
…… #
,
……# $
_userManager
……% 1
.
……1 2
Users
……2 7
)
……7 8
;
……8 9
}
   	
public
ÕÕ 
IActionResult
ÕÕ 
RoleManagement
ÕÕ +
(
ÕÕ+ ,
)
ÕÕ, -
{
ŒŒ 	
var
œœ 
roles
œœ 
=
œœ 
_roleManager
œœ $
.
œœ$ %
Roles
œœ% *
;
œœ* +
return
–– 
View
–– 
(
–– 
roles
–– 
)
–– 
;
–– 
}
—— 	
public
”” 
IActionResult
”” 

AddNewRole
”” '
(
””' (
)
””( )
=>
””* ,
View
””- 1
(
””1 2
)
””2 3
;
””3 4
[
÷÷ 	
HttpPost
÷÷	 
]
÷÷ 
public
ÿÿ 
async
ÿÿ 
Task
ÿÿ 
<
ÿÿ 
IActionResult
ÿÿ '
>
ÿÿ' (

AddNewRole
ÿÿ) 3
(
ÿÿ3 4
AddRoleViewModel
ÿÿ4 D
addRoleViewModel
ÿÿE U
)
ÿÿU V
{
ŸŸ 	
if
€€ 
(
€€ 
!
€€ 

ModelState
€€ 
.
€€ 
IsValid
€€ #
)
€€# $
{
‹‹ 
return
›› 
View
›› 
(
›› 
addRoleViewModel
›› ,
)
››, -
;
››- .
}
ﬁﬁ 
var
·· 
role
·· 
=
·· 
new
·· 
IdentityRole
·· '
{
‚‚ 
Name
„„ 
=
„„ 
addRoleViewModel
„„ '
.
„„' (
RoleName
„„( 0
}
‰‰ 
;
‰‰ 
IdentityResult
ÊÊ 
result
ÊÊ !
=
ÊÊ" #
await
ÊÊ$ )
_roleManager
ÊÊ* 6
.
ÊÊ6 7
CreateAsync
ÊÊ7 B
(
ÊÊB C
role
ÊÊC G
)
ÊÊG H
;
ÊÊH I
if
ËË 
(
ËË 
result
ËË 
.
ËË 
	Succeeded
ËË  
)
ËË  !
{
ÈÈ 
return
ÎÎ 
RedirectToAction
ÎÎ '
(
ÎÎ' (
RManagement
ÎÎ( 3
,
ÎÎ3 4
_roleManager
ÎÎ5 A
.
ÎÎA B
Roles
ÎÎB G
)
ÎÎG H
;
ÎÎH I
}
ÏÏ 
foreach
ÔÔ 
(
ÔÔ 
IdentityError
ÔÔ "
error
ÔÔ# (
in
ÔÔ) +
result
ÔÔ, 2
.
ÔÔ2 3
Errors
ÔÔ3 9
)
ÔÔ9 :
{
 

ModelState
ÚÚ 
.
ÚÚ 
AddModelError
ÚÚ (
(
ÚÚ( )
$str
ÚÚ) +
,
ÚÚ+ ,
error
ÚÚ- 2
.
ÚÚ2 3
Description
ÚÚ3 >
)
ÚÚ> ?
;
ÚÚ? @
}
ÛÛ 
return
ÙÙ 
View
ÙÙ 
(
ÙÙ 
addRoleViewModel
ÙÙ (
)
ÙÙ( )
;
ÙÙ) *
}
ıı 	
public
¯¯ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 
IActionResult
¯¯ '
>
¯¯' (
EditRole
¯¯) 1
(
¯¯1 2
string
¯¯2 8
id
¯¯9 ;
)
¯¯; <
{
˘˘ 	
var
˚˚ 
role
˚˚ 
=
˚˚ 
await
˚˚ 
_roleManager
˚˚ )
.
˚˚) *
FindByIdAsync
˚˚* 7
(
˚˚7 8
id
˚˚8 :
)
˚˚: ;
;
˚˚; <
if
˝˝ 
(
˝˝ 
role
˝˝ 
==
˝˝ 
null
˝˝ 
)
˝˝ 
{
˛˛ 
return
ˇˇ 
RedirectToAction
ˇˇ '
(
ˇˇ' (
RManagement
ˇˇ( 3
,
ˇˇ3 4
_roleManager
ˇˇ5 A
.
ˇˇA B
Roles
ˇˇB G
)
ˇˇG H
;
ˇˇH I
}
ÄÄ 
var
ÇÇ 
editRoleViewModel
ÇÇ !
=
ÇÇ" #
new
ÇÇ$ '
EditRoleViewModel
ÇÇ( 9
{
ÉÉ 
Id
ÜÜ 
=
ÜÜ 
role
ÜÜ 
.
ÜÜ 
Id
ÜÜ 
,
ÜÜ 
RoleName
àà 
=
àà 
role
àà 
.
àà  
Name
àà  $
,
àà$ %
Users
ää 
=
ää 
new
ää 
List
ää  
<
ää  !
string
ää! '
>
ää' (
(
ää( )
)
ää) *
}
ãã 
;
ãã 
foreach
éé 
(
éé 
var
éé 
user
éé 
in
éé  
_userManager
éé! -
.
éé- .
Users
éé. 3
)
éé3 4
{
èè 
if
êê 
(
êê 
await
êê 
_userManager
êê &
.
êê& '
IsInRoleAsync
êê' 4
(
êê4 5
user
êê5 9
,
êê9 :
role
êê; ?
.
êê? @
Name
êê@ D
)
êêD E
)
êêE F
{
ëë 
editRoleViewModel
íí %
.
íí% &
Users
íí& +
.
íí+ ,
Add
íí, /
(
íí/ 0
user
íí0 4
.
íí4 5
UserName
íí5 =
)
íí= >
;
íí> ?
}
ìì 
}
îî 
return
ññ 
View
ññ 
(
ññ 
editRoleViewModel
ññ )
)
ññ) *
;
ññ* +
}
óó 	
[
öö 	
HttpPost
öö	 
]
öö 
public
õõ 
async
õõ 
Task
õõ 
<
õõ 
IActionResult
õõ '
>
õõ' (
EditRole
õõ) 1
(
õõ1 2
EditRoleViewModel
õõ2 C
editRoleViewModel
õõD U
)
õõU V
{
úú 	
var
ùù 
role
ùù 
=
ùù 
await
ùù 
_roleManager
ùù )
.
ùù) *
FindByIdAsync
ùù* 7
(
ùù7 8
editRoleViewModel
ùù8 I
.
ùùI J
Id
ùùJ L
)
ùùL M
;
ùùM N
if
üü 
(
üü 
role
üü 
!=
üü 
null
üü 
)
üü 
{
†† 
role
°° 
.
°° 
Name
°° 
=
°° 
editRoleViewModel
°° -
.
°°- .
RoleName
°°. 6
;
°°6 7
var
££ 
result
££ 
=
££ 
await
££ "
_roleManager
££# /
.
££/ 0
UpdateAsync
££0 ;
(
££; <
role
££< @
)
££@ A
;
££A B
if
•• 
(
•• 
result
•• 
.
•• 
	Succeeded
•• $
)
••$ %
{
¶¶ 
return
ßß 
RedirectToAction
ßß +
(
ßß+ ,
RManagement
ßß, 7
,
ßß7 8
_roleManager
ßß9 E
.
ßßE F
Roles
ßßF K
)
ßßK L
;
ßßL M
}
®® 

ModelState
™™ 
.
™™ 
AddModelError
™™ (
(
™™( )
$str
™™) +
,
™™+ ,
$str
™™- V
)
™™V W
;
™™W X
return
¨¨ 
View
¨¨ 
(
¨¨ 
editRoleViewModel
¨¨ -
)
¨¨- .
;
¨¨. /
}
≠≠ 
return
ØØ 
RedirectToAction
ØØ #
(
ØØ# $
RManagement
ØØ$ /
,
ØØ/ 0
_roleManager
ØØ1 =
.
ØØ= >
Roles
ØØ> C
)
ØØC D
;
ØØD E
}
∞∞ 	
[
≥≥ 	
HttpPost
≥≥	 
]
≥≥ 
public
µµ 
async
µµ 
Task
µµ 
<
µµ 
IActionResult
µµ '
>
µµ' (

DeleteRole
µµ) 3
(
µµ3 4
string
µµ4 :
id
µµ; =
)
µµ= >
{
∂∂ 	
IdentityRole
∏∏ 
role
∏∏ 
=
∏∏ 
await
∏∏  %
_roleManager
∏∏& 2
.
∏∏2 3
FindByIdAsync
∏∏3 @
(
∏∏@ A
id
∏∏A C
)
∏∏C D
;
∏∏D E
if
ππ 
(
ππ 
role
ππ 
!=
ππ 
null
ππ 
)
ππ 
{
∫∫ 
var
ºº 
result
ºº 
=
ºº 
await
ºº "
_roleManager
ºº# /
.
ºº/ 0
DeleteAsync
ºº0 ;
(
ºº; <
role
ºº< @
)
ºº@ A
;
ººA B
if
ΩΩ 
(
ΩΩ 
result
ΩΩ 
.
ΩΩ 
	Succeeded
ΩΩ $
)
ΩΩ$ %
{
ææ 
return
øø 
RedirectToAction
øø +
(
øø+ ,
RManagement
øø, 7
,
øø7 8
_roleManager
øø9 E
.
øøE F
Roles
øøF K
)
øøK L
;
øøL M
}
¿¿ 

ModelState
√√ 
.
√√ 
AddModelError
√√ (
(
√√( )
$str
√√) +
,
√√+ ,
$str
√√- ]
)
√√] ^
;
√√^ _
}
ƒƒ 
else
≈≈ 
{
∆∆ 

ModelState
…… 
.
…… 
AddModelError
…… (
(
……( )
$str
……) +
,
……+ ,
$str
……- H
)
……H I
;
……I J
}
   
return
ÀÀ 
View
ÀÀ 
(
ÀÀ 
RManagement
ÀÀ #
,
ÀÀ# $
_roleManager
ÀÀ% 1
.
ÀÀ1 2
Roles
ÀÀ2 7
)
ÀÀ7 8
;
ÀÀ8 9
}
ÃÃ 	
public
–– 
async
–– 
Task
–– 
<
–– 
IActionResult
–– '
>
––' (
AddUserToRole
––) 6
(
––6 7
string
––7 =
roleId
––> D
)
––D E
{
—— 	
var
”” 
role
”” 
=
”” 
await
”” 
_roleManager
”” )
.
””) *
FindByIdAsync
””* 7
(
””7 8
roleId
””8 >
)
””> ?
;
””? @
if
’’ 
(
’’ 
role
’’ 
==
’’ 
null
’’ 
)
’’ 
{
÷÷ 
return
◊◊ 
RedirectToAction
◊◊ '
(
◊◊' (
RManagement
◊◊( 3
,
◊◊3 4
_roleManager
◊◊5 A
.
◊◊A B
Roles
◊◊B G
)
◊◊G H
;
◊◊H I
}
ÿÿ 
var
€€ $
addUserToRoleViewModel
€€ &
=
€€' (
new
€€) ,
UserRoleViewModel
€€- >
{
€€? @
RoleId
€€A G
=
€€H I
role
€€J N
.
€€N O
Id
€€O Q
}
€€R S
;
€€S T
foreach
›› 
(
›› 
var
›› 
user
›› 
in
››  
_userManager
››! -
.
››- .
Users
››. 3
)
››3 4
{
ﬁﬁ 
if
ﬂﬂ 
(
ﬂﬂ 
!
ﬂﬂ 
await
ﬂﬂ 
_userManager
ﬂﬂ '
.
ﬂﬂ' (
IsInRoleAsync
ﬂﬂ( 5
(
ﬂﬂ5 6
user
ﬂﬂ6 :
,
ﬂﬂ: ;
role
ﬂﬂ< @
.
ﬂﬂ@ A
Name
ﬂﬂA E
)
ﬂﬂE F
)
ﬂﬂF G
{
‡‡ $
addUserToRoleViewModel
·· *
.
··* +
Users
··+ 0
.
··0 1
Add
··1 4
(
··4 5
user
··5 9
)
··9 :
;
··: ;
}
‚‚ 
}
„„ 
return
ÂÂ 
View
ÂÂ 
(
ÂÂ $
addUserToRoleViewModel
ÂÂ .
)
ÂÂ. /
;
ÂÂ/ 0
}
ÊÊ 	
[
ËË 	
HttpPost
ËË	 
]
ËË 
public
ÈÈ 
async
ÈÈ 
Task
ÈÈ 
<
ÈÈ 
IActionResult
ÈÈ '
>
ÈÈ' (
AddUserToRole
ÈÈ) 6
(
ÈÈ6 7
UserRoleViewModel
ÈÈ7 H
userRoleViewModel
ÈÈI Z
)
ÈÈZ [
{
ÍÍ 	
var
ÏÏ 
user
ÏÏ 
=
ÏÏ 
await
ÏÏ 
_userManager
ÏÏ )
.
ÏÏ) *
FindByIdAsync
ÏÏ* 7
(
ÏÏ7 8
userRoleViewModel
ÏÏ8 I
.
ÏÏI J
UserId
ÏÏJ P
)
ÏÏP Q
;
ÏÏQ R
var
ÓÓ 
role
ÓÓ 
=
ÓÓ 
await
ÓÓ 
_roleManager
ÓÓ )
.
ÓÓ) *
FindByIdAsync
ÓÓ* 7
(
ÓÓ7 8
userRoleViewModel
ÓÓ8 I
.
ÓÓI J
RoleId
ÓÓJ P
)
ÓÓP Q
;
ÓÓQ R
var
 
result
 
=
 
await
 
_userManager
 +
.
+ ,
AddToRoleAsync
, :
(
: ;
user
; ?
,
? @
role
A E
.
E F
Name
F J
)
J K
;
K L
if
ÚÚ 
(
ÚÚ 
result
ÚÚ 
.
ÚÚ 
	Succeeded
ÚÚ  
)
ÚÚ  !
{
ÛÛ 
return
ÙÙ 
RedirectToAction
ÙÙ '
(
ÙÙ' (
RManagement
ÙÙ( 3
,
ÙÙ3 4
_roleManager
ÙÙ5 A
.
ÙÙA B
Roles
ÙÙB G
)
ÙÙG H
;
ÙÙH I
}
ıı 
foreach
¯¯ 
(
¯¯ 
IdentityError
¯¯ "
error
¯¯# (
in
¯¯) +
result
¯¯, 2
.
¯¯2 3
Errors
¯¯3 9
)
¯¯9 :
{
˘˘ 

ModelState
˙˙ 
.
˙˙ 
AddModelError
˙˙ (
(
˙˙( )
$str
˙˙) +
,
˙˙+ ,
error
˙˙- 2
.
˙˙2 3
Description
˙˙3 >
)
˙˙> ?
;
˙˙? @
}
˚˚ 
return
˝˝ 
View
˝˝ 
(
˝˝ 
userRoleViewModel
˝˝ )
)
˝˝) *
;
˝˝* +
}
˛˛ 	
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
IActionResult
ÅÅ '
>
ÅÅ' ( 
DeleteUserFromRole
ÅÅ) ;
(
ÅÅ; <
string
ÅÅ< B
roleId
ÅÅC I
)
ÅÅI J
{
ÇÇ 	
var
ÉÉ 
role
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_roleManager
ÉÉ )
.
ÉÉ) *
FindByIdAsync
ÉÉ* 7
(
ÉÉ7 8
roleId
ÉÉ8 >
)
ÉÉ> ?
;
ÉÉ? @
if
ÖÖ 
(
ÖÖ 
role
ÖÖ 
==
ÖÖ 
null
ÖÖ 
)
ÖÖ 
{
ÜÜ 
return
áá 
RedirectToAction
áá '
(
áá' (
RManagement
áá( 3
,
áá3 4
_roleManager
áá5 A
.
ááA B
Roles
ááB G
)
ááG H
;
ááH I
}
àà 
var
ââ $
addUserToRoleViewModel
ââ &
=
ââ' (
new
ââ) ,
UserRoleViewModel
ââ- >
{
ââ? @
RoleId
ââA G
=
ââH I
role
ââJ N
.
ââN O
Id
ââO Q
}
ââR S
;
ââS T
foreach
ãã 
(
ãã 
var
ãã 
user
ãã 
in
ãã  
_userManager
ãã! -
.
ãã- .
Users
ãã. 3
)
ãã3 4
{
åå 
if
çç 
(
çç 
await
çç 
_userManager
çç &
.
çç& '
IsInRoleAsync
çç' 4
(
çç4 5
user
çç5 9
,
çç9 :
role
çç; ?
.
çç? @
Name
çç@ D
)
ççD E
)
ççE F
{
éé $
addUserToRoleViewModel
èè *
.
èè* +
Users
èè+ 0
.
èè0 1
Add
èè1 4
(
èè4 5
user
èè5 9
)
èè9 :
;
èè: ;
}
êê 
}
ëë 
return
ìì 
View
ìì 
(
ìì $
addUserToRoleViewModel
ìì .
)
ìì. /
;
ìì/ 0
}
îî 	
[
óó 	
HttpPost
óó	 
]
óó 
public
òò 
async
òò 
Task
òò 
<
òò 
IActionResult
òò '
>
òò' ( 
DeleteUserFromRole
òò) ;
(
òò; <
UserRoleViewModel
òò< M
userRoleViewModel
òòN _
)
òò_ `
{
ôô 	
var
õõ 
user
õõ 
=
õõ 
await
õõ 
_userManager
õõ )
.
õõ) *
FindByIdAsync
õõ* 7
(
õõ7 8
userRoleViewModel
õõ8 I
.
õõI J
UserId
õõJ P
)
õõP Q
;
õõQ R
var
ùù 
role
ùù 
=
ùù 
await
ùù 
_roleManager
ùù )
.
ùù) *
FindByIdAsync
ùù* 7
(
ùù7 8
userRoleViewModel
ùù8 I
.
ùùI J
RoleId
ùùJ P
)
ùùP Q
;
ùùQ R
var
üü 
result
üü 
=
üü 
await
üü 
_userManager
üü +
.
üü+ ,!
RemoveFromRoleAsync
üü, ?
(
üü? @
user
üü@ D
,
üüD E
role
üüF J
.
üüJ K
Name
üüK O
)
üüO P
;
üüP Q
if
¢¢ 
(
¢¢ 
result
¢¢ 
.
¢¢ 
	Succeeded
¢¢  
)
¢¢  !
{
££ 
return
•• 
RedirectToAction
•• '
(
••' (
RManagement
••( 3
,
••3 4
_roleManager
••5 A
.
••A B
Roles
••B G
)
••G H
;
••H I
}
¶¶ 
foreach
®® 
(
®® 
IdentityError
®® "
error
®®# (
in
®®) +
result
®®, 2
.
®®2 3
Errors
®®3 9
)
®®9 :
{
©© 

ModelState
¨¨ 
.
¨¨ 
AddModelError
¨¨ (
(
¨¨( )
$str
¨¨) +
,
¨¨+ ,
error
¨¨- 2
.
¨¨2 3
Description
¨¨3 >
)
¨¨> ?
;
¨¨? @
}
≠≠ 
return
ØØ 
View
ØØ 
(
ØØ 
userRoleViewModel
ØØ )
)
ØØ) *
;
ØØ* +
}
∞∞ 	
public
≥≥ 
IActionResult
≥≥ 
FlowerManagement
≥≥ -
(
≥≥- .
)
≥≥. /
{
¥¥ 	
var
µµ 
	dbFlowers
µµ 
=
µµ 
_flowerRepository
µµ -
.
µµ- .
Flowers
µµ. 5
;
µµ5 6
List
∑∑ 
<
∑∑ 
FlowerViewModel
∑∑  
>
∑∑  !
flowers
∑∑" )
=
∑∑* +
new
∑∑, /
List
∑∑0 4
<
∑∑4 5
FlowerViewModel
∑∑5 D
>
∑∑D E
(
∑∑E F
)
∑∑F G
;
∑∑G H
foreach
ππ 
(
ππ 
var
ππ 
dbFlower
ππ !
in
ππ" $
	dbFlowers
ππ% .
)
ππ. /
{
∫∫ 
flowers
ªª 
.
ªª 
Add
ªª 
(
ªª *
MapDbFlowerToFlowerViewModel
ªª 8
(
ªª8 9
dbFlower
ªª9 A
)
ªªA B
)
ªªB C
;
ªªC D
}
ºº 
return
ææ 
View
ææ 
(
ææ 
flowers
ææ 
)
ææ  
;
ææ  !
}
øø 	
public
¡¡ 
IActionResult
¡¡ 
	AddFlower
¡¡ &
(
¡¡& '
)
¡¡' (
{
¬¬ 	
ViewData
√√ 
[
√√ 
$str
√√ !
]
√√! "
=
√√# $!
_categoryRepository
√√% 8
.
√√8 9

Categories
√√9 C
.
√√C D
ToList
√√D J
(
√√J K
)
√√K L
;
√√L M
return
≈≈ 
View
≈≈ 
(
≈≈ 
)
≈≈ 
;
≈≈ 
}
∆∆ 	
[
…… 	
HttpPost
……	 
]
…… 
public
ÀÀ 
IActionResult
ÀÀ 
	AddFlower
ÀÀ &
(
ÀÀ& ' 
AddFlowerViewModel
ÀÀ' 9 
addFlowerViewModel
ÀÀ: L
)
ÀÀL M
{
ÃÃ 	
if
ÕÕ 
(
ÕÕ 
!
ÕÕ 

ModelState
ÕÕ 
.
ÕÕ 
IsValid
ÕÕ #
)
ÕÕ# $
{
ŒŒ 
return
œœ 
View
œœ 
(
œœ  
addFlowerViewModel
œœ .
)
œœ. /
;
œœ/ 0
}
–– 
var
—— 
flower
—— 
=
—— 
new
—— 
Flower
—— #
{
““ 
Name
’’ 
=
’’  
addFlowerViewModel
’’ )
.
’’) *
Name
’’* .
,
’’. /
ShortDescription
◊◊  
=
◊◊! " 
addFlowerViewModel
◊◊# 5
.
◊◊5 6
ShortDescription
◊◊6 F
,
◊◊F G
LongDescription
ŸŸ 
=
ŸŸ  ! 
addFlowerViewModel
ŸŸ" 4
.
ŸŸ4 5
LongDescription
ŸŸ5 D
,
ŸŸD E
Price
€€ 
=
€€  
addFlowerViewModel
€€ *
.
€€* +
Price
€€+ 0
,
€€0 1
ImageUrl
›› 
=
››  
addFlowerViewModel
›› -
.
››- .
ImageUrl
››. 6
,
››6 7
ImageThumbnailUrl
ﬂﬂ !
=
ﬂﬂ" # 
addFlowerViewModel
ﬂﬂ$ 6
.
ﬂﬂ6 7
ImageThumbnailUrl
ﬂﬂ7 H
,
ﬂﬂH I"
IsFlowerPresentation
·· $
=
··% & 
addFlowerViewModel
··' 9
.
··9 :"
IsFlowerPresentation
··: N
,
··N O
InStock
„„ 
=
„„  
addFlowerViewModel
„„ ,
.
„„, -
InStock
„„- 4
,
„„4 5

CategoryId
ÂÂ 
=
ÂÂ  
addFlowerViewModel
ÂÂ /
.
ÂÂ/ 0

CategoryId
ÂÂ0 :
,
ÂÂ: ;
}
ÁÁ 
;
ÁÁ 
_flowerRepository
ÈÈ 
.
ÈÈ 
	AddFlower
ÈÈ '
(
ÈÈ' (
flower
ÈÈ( .
)
ÈÈ. /
;
ÈÈ/ 0
return
ÎÎ 
RedirectToAction
ÎÎ #
(
ÎÎ# $
FManagement
ÎÎ$ /
,
ÎÎ/ 0
_flowerRepository
ÎÎ1 B
.
ÎÎB C
Flowers
ÎÎC J
)
ÎÎJ K
;
ÎÎK L
}
ÏÏ 	
[
 	
HttpPost
	 
]
 
public
ÒÒ 
IActionResult
ÒÒ 
DeleteFlower
ÒÒ )
(
ÒÒ) *
int
ÒÒ* -
id
ÒÒ. 0
)
ÒÒ0 1
{
ÚÚ 	
Flower
ÛÛ 
flower
ÛÛ 
=
ÛÛ 
_flowerRepository
ÛÛ -
.
ÛÛ- .
GetFlowerById
ÛÛ. ;
(
ÛÛ; <
id
ÛÛ< >
)
ÛÛ> ?
;
ÛÛ? @
if
ÙÙ 
(
ÙÙ 
flower
ÙÙ 
!=
ÙÙ 
null
ÙÙ 
)
ÙÙ 
{
ıı 
_flowerRepository
ˆˆ !
.
ˆˆ! "
DeleteFlower
ˆˆ" .
(
ˆˆ. /
flower
ˆˆ/ 5
)
ˆˆ5 6
;
ˆˆ6 7
return
¯¯ 
View
¯¯ 
(
¯¯ 
FManagement
¯¯ '
,
¯¯' (
_flowerRepository
¯¯) :
.
¯¯: ; 
FlowersAsViewModel
¯¯; M
)
¯¯M N
;
¯¯N O
}
˘˘ 
else
˙˙ 
{
˚˚ 

ModelState
¸¸ 
.
¸¸ 
AddModelError
¸¸ (
(
¸¸( )
$str
¸¸) +
,
¸¸+ ,
$str
¸¸- J
)
¸¸J K
;
¸¸K L
}
˝˝ 
return
ˇˇ 
View
ˇˇ 
(
ˇˇ 
FManagement
ˇˇ #
,
ˇˇ# $
_flowerRepository
ˇˇ% 6
.
ˇˇ6 7 
FlowersAsViewModel
ˇˇ7 I
)
ˇˇI J
;
ˇˇJ K
}
ÄÄ 	
public
ÑÑ 
IActionResult
ÑÑ 

EditFlower
ÑÑ '
(
ÑÑ' (
int
ÑÑ( +
id
ÑÑ, .
)
ÑÑ. /
{
ÖÖ 	
ViewData
ÜÜ 
[
ÜÜ 
$str
ÜÜ !
]
ÜÜ! "
=
ÜÜ# $!
_categoryRepository
ÜÜ% 8
.
ÜÜ8 9

Categories
ÜÜ9 C
.
ÜÜC D
ToList
ÜÜD J
(
ÜÜJ K
)
ÜÜK L
;
ÜÜL M
var
àà 
flower
àà 
=
àà 
_flowerRepository
àà *
.
àà* +
GetFlowerById
àà+ 8
(
àà8 9
id
àà9 ;
)
àà; <
;
àà< =
if
ää 
(
ää 
flower
ää 
==
ää 
null
ää 
)
ää 
{
ãã 
return
åå 
View
åå 
(
åå 
FManagement
åå '
,
åå' (
_flowerRepository
åå) :
.
åå: ; 
FlowersAsViewModel
åå; M
)
ååM N
;
ååN O
}
çç 
var
èè !
editFlowerViewModel
èè #
=
èè$ %
new
èè& )!
EditFlowerViewModel
èè* =
{
êê 
Name
ìì 
=
ìì 
flower
ìì 
.
ìì 
Name
ìì "
,
ìì" #
ShortDescription
ïï  
=
ïï! "
flower
ïï# )
.
ïï) *
ShortDescription
ïï* :
,
ïï: ;
LongDescription
óó 
=
óó  !
flower
óó" (
.
óó( )
LongDescription
óó) 8
,
óó8 9
Price
ôô 
=
ôô 
flower
ôô 
.
ôô 
Price
ôô $
,
ôô$ %
ImageUrl
õõ 
=
õõ 
flower
õõ !
.
õõ! "
ImageUrl
õõ" *
,
õõ* +
ImageThumbnailUrl
ùù !
=
ùù" #
flower
ùù$ *
.
ùù* +
ImageThumbnailUrl
ùù+ <
,
ùù< ="
IsFlowerPresentation
üü $
=
üü% &
flower
üü' -
.
üü- ."
IsFlowerPresentation
üü. B
,
üüB C
InStock
°° 
=
°° 
flower
°°  
.
°°  !
InStock
°°! (
,
°°( )

CategoryId
££ 
=
££ 
flower
££ #
.
££# $

CategoryId
££$ .
}
§§ 
;
§§ 
return
¶¶ 
View
¶¶ 
(
¶¶ !
editFlowerViewModel
¶¶ +
)
¶¶+ ,
;
¶¶, -
}
ßß 	
[
´´ 	
HttpPost
´´	 
]
´´ 
public
¨¨ 
IActionResult
¨¨ 

EditFlower
¨¨ '
(
¨¨' (!
EditFlowerViewModel
¨¨( ;!
editFlowerViewModel
¨¨< O
)
¨¨O P
{
≠≠ 	
ViewData
ÆÆ 
[
ÆÆ 
$str
ÆÆ !
]
ÆÆ! "
=
ÆÆ# $!
_categoryRepository
ÆÆ% 8
.
ÆÆ8 9

Categories
ÆÆ9 C
.
ÆÆC D
ToList
ÆÆD J
(
ÆÆJ K
)
ÆÆK L
;
ÆÆL M
var
∞∞ 
flower
∞∞ 
=
∞∞ 
_flowerRepository
∞∞ *
.
∞∞* +
GetFlowerById
∞∞+ 8
(
∞∞8 9!
editFlowerViewModel
∞∞9 L
.
∞∞L M
Id
∞∞M O
)
∞∞O P
;
∞∞P Q
if
≤≤ 
(
≤≤ 
flower
≤≤ 
!=
≤≤ 
null
≤≤ 
)
≤≤ 
{
≥≥ 
flower
¥¥ 
.
¥¥ 
Name
¥¥ 
=
¥¥ !
editFlowerViewModel
¥¥ 1
.
¥¥1 2
Name
¥¥2 6
;
¥¥6 7
flower
µµ 
.
µµ 
ShortDescription
µµ '
=
µµ( )!
editFlowerViewModel
µµ* =
.
µµ= >
ShortDescription
µµ> N
;
µµN O
flower
∂∂ 
.
∂∂ 
LongDescription
∂∂ &
=
∂∂' (!
editFlowerViewModel
∂∂) <
.
∂∂< =
LongDescription
∂∂= L
;
∂∂L M
flower
∑∑ 
.
∑∑ 
Price
∑∑ 
=
∑∑ !
editFlowerViewModel
∑∑ 2
.
∑∑2 3
Price
∑∑3 8
;
∑∑8 9
flower
∏∏ 
.
∏∏ 
ImageUrl
∏∏ 
=
∏∏  !!
editFlowerViewModel
∏∏" 5
.
∏∏5 6
ImageUrl
∏∏6 >
;
∏∏> ?
flower
ππ 
.
ππ 
ImageThumbnailUrl
ππ (
=
ππ) *!
editFlowerViewModel
ππ+ >
.
ππ> ?
ImageThumbnailUrl
ππ? P
;
ππP Q
flower
∫∫ 
.
∫∫ "
IsFlowerPresentation
∫∫ +
=
∫∫, -!
editFlowerViewModel
∫∫. A
.
∫∫A B"
IsFlowerPresentation
∫∫B V
;
∫∫V W
flower
ªª 
.
ªª 
InStock
ªª 
=
ªª  !
editFlowerViewModel
ªª! 4
.
ªª4 5
InStock
ªª5 <
;
ªª< =
flower
ºº 
.
ºº 

CategoryId
ºº !
=
ºº" #!
editFlowerViewModel
ºº$ 7
.
ºº7 8

CategoryId
ºº8 B
;
ººB C
_flowerRepository
ææ !
.
ææ! "
UpdateFlower
ææ" .
(
ææ. /
flower
ææ/ 5
)
ææ5 6
;
ææ6 7
return
¿¿ 
RedirectToAction
¿¿ '
(
¿¿' (
FManagement
¿¿( 3
,
¿¿3 4
_flowerRepository
¿¿5 F
.
¿¿F G 
FlowersAsViewModel
¿¿G Y
)
¿¿Y Z
;
¿¿Z [
}
¡¡ 
return
√√ 
RedirectToAction
√√ #
(
√√# $
FManagement
√√$ /
,
√√/ 0
_flowerRepository
√√1 B
.
√√B C 
FlowersAsViewModel
√√C U
)
√√U V
;
√√V W
}
ƒƒ 	
private
∆∆ 
FlowerViewModel
∆∆ *
MapDbFlowerToFlowerViewModel
∆∆  <
(
∆∆< =
Flower
∆∆= C
dbFlower
∆∆D L
)
∆∆L M
{
«« 	
return
»» 
new
»» 
FlowerViewModel
»» &
{
…… 
FlowerId
   
=
   
dbFlower
   #
.
  # $
FlowerId
  $ ,
,
  , -
Name
ÀÀ 
=
ÀÀ 
dbFlower
ÀÀ 
.
ÀÀ  
Name
ÀÀ  $
,
ÀÀ$ %
Price
ÃÃ 
=
ÃÃ 
dbFlower
ÃÃ  
.
ÃÃ  !
Price
ÃÃ! &
,
ÃÃ& '
ShortDescription
ÕÕ  
=
ÕÕ! "
dbFlower
ÕÕ# +
.
ÕÕ+ ,
ShortDescription
ÕÕ, <
,
ÕÕ< =
ImageThumbnailUrl
ŒŒ !
=
ŒŒ" #
dbFlower
ŒŒ$ ,
.
ŒŒ, -
ImageThumbnailUrl
ŒŒ- >
}
œœ 
;
œœ 
}
–– 	
}
—— 
}““ ü
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ContactController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
ContactController "
:# $

Controller% /
{ 
[		 	
ResponseCache			 
(		 
Duration		 
=		  !
$num		" $
,		$ %
Location		& .
=		/ 0!
ResponseCacheLocation		1 F
.		F G
Client		G M
)		M N
]		N O
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ù
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FavoriteFlowerController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public

 

class

 $
FavoriteFlowerController

 )
:

* +

Controller

, 6
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public $
FavoriteFlowerController '
(' (
IFlowerRepository( 9
flowerRepository: J
,J K
ShoppingCartL X
shoppingCartY e
)e f
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
} 
} ãì
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
public 

class 
FlowerController !
:" #

Controller$ .
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
FlowerController 
(  
IFlowerRepository  1
flowerRepository2 B
,B C
ICategoryRepositoryD W
categoryRepositoryX j
)j k
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public 

ViewResult 
List 
( 
string %
category& .
,. /
decimal 
lowPrice 
= 
$num  
,  !
decimal 
	highPrice 
= 
$num  !
,! "
string   
sorting   
=   
$str   
,    
FlowerStock!! 
availability!! $
=!!% &
$num!!' (
)!!( )
{"" 	
IEnumerable$$ 
<$$ 
Flower$$ 
>$$ 
flowers$$  '
;$$' (
string%% 
currentCategory%% "
=%%# $
string%%% +
.%%+ ,
Empty%%, 1
;%%1 2
if'' 
('' 
string'' 
.'' 
IsNullOrEmpty'' $
(''$ %
category''% -
)''- .
)''. /
{(( 
flowers** 
=** 
_flowerRepository** +
.**+ ,
Flowers**, 3
.**3 4
OrderBy**4 ;
(**; <
p**< =
=>**> @
p**A B
.**B C
FlowerId**C K
)**K L
;**L M
flowers,, 
=,, 
PriceFilter,, %
(,,% &
lowPrice,,& .
,,,. /
	highPrice,,0 9
,,,9 :
flowers,,; B
),,B C
;,,C D
currentCategory// 
=//  !
$str//" /
;/// 0
}00 
else11 
{22 
flowers44 
=44 
_flowerRepository44 +
.44+ ,
Flowers44, 3
.443 4
Where444 9
(449 :
p44: ;
=>44< >
p44? @
.44@ A
Category44A I
.44I J
CategoryName44J V
==44W Y
category44Z b
)44b c
.55 
OrderBy55 
(55 
p55 
=>55  
p55! "
.55" #
FlowerId55# +
)55+ ,
;55, -
flowers77 
=77 
PriceFilter77 %
(77% &
lowPrice77& .
,77. /
	highPrice770 9
,779 :
flowers77; B
)77B C
;77C D
currentCategory99 
=99  !
_categoryRepository99" 5
.995 6

Categories996 @
.99@ A
FirstOrDefault99A O
(99O P
c99P Q
=>99R T
c99U V
.99V W
CategoryName99W c
==99d f
category99g o
)99o p
.99p q
CategoryName99q }
;99} ~
}:: 
if== 
(== 
!== 
string== 
.== 
IsNullOrEmpty== %
(==% &
sorting==& -
)==- .
)==. /
{>> 
if@@ 
(@@ 
sorting@@ 
.@@ 
Equals@@ "
(@@" #
$str@@# .
,@@. /
StringComparison@@0 @
.@@@ A
OrdinalIgnoreCase@@A R
)@@R S
)@@S T
{AA 
flowersBB 
=BB 
flowersBB %
.BB% &
OrderByBB& -
(BB- .
pBB. /
=>BB0 2
pBB3 4
.BB4 5
PriceBB5 :
)BB: ;
;BB; <
}CC 
elseEE 
ifEE 
(EE 
sortingEE  
.EE  !
EqualsEE! '
(EE' (
$strEE( 4
,EE4 5
StringComparisonEE6 F
.EEF G
OrdinalIgnoreCaseEEG X
)EEX Y
)EEY Z
{FF 
flowersGG 
=GG 
flowersGG %
.GG% &
OrderByDescendingGG& 7
(GG7 8
pGG8 9
=>GG: <
pGG= >
.GG> ?
PriceGG? D
)GGD E
;GGE F
}HH 
}II 
switchKK 
(KK 
availabilityKK  
)KK  !
{LL 
caseNN 
FlowerStockNN  
.NN  !
InStockNN! (
:NN( )
flowersOO 
=OO 
flowersOO %
.OO% &
WhereOO& +
(OO+ ,
xOO, -
=>OO. 0
xOO1 2
.OO2 3
InStockOO3 :
==OO; =
trueOO> B
)OOB C
;OOC D
breakPP 
;PP 
caseRR 
FlowerStockRR  
.RR  !

NotInStockRR! +
:RR+ ,
flowersSS 
=SS 
flowersSS %
.SS% &
WhereSS& +
(SS+ ,
xSS, -
=>SS. 0
xSS1 2
.SS2 3
InStockSS3 :
==SS; =
falseSS> C
)SSC D
;SSD E
breakTT 
;TT 
caseVV 
FlowerStockVV  
.VV  !
AllVV! $
:VV$ %
breakWW 
;WW 
}XX 
returnZZ 
ViewZZ 
(ZZ 
newZZ 
FlowerListViewModelZZ /
{[[ 
Flowers\\ 
=\\ 
flowers\\ !
,\\! "
CurrentCategory]] 
=]]  !
currentCategory]]" 1
}^^ 
)^^ 
;^^ 
}__ 	
publicbb 

ViewResultbb 
Favoritebb "
(bb" #
)bb# $
{cc 	
IEnumerabledd 
<dd 
Flowerdd 
>dd 
flowersdd  '
=dd( )
_flowerRepositorydd* ;
.dd; <
Flowersdd< C
.ee 
Whereee 
(ee 
xee 
=>ee 
xee 
.ee 

IsFavoriteee (
)ee( )
.ff 
OrderByff 
(ff 
pff 
=>ff 
pff 
.ff  
FlowerIdff  (
)ff( )
.gg 
ToListgg 
(gg 
)gg 
;gg 
returnii 
Viewii 
(ii 
newii 
FlowerListViewModelii /
{jj 
Flowerskk 
=kk 
flowerskk !
,kk! "
CurrentCategoryll 
=ll  !
nullll" &
}mm 
)mm 
;mm 
}nn 	
publicrr 
ActionResultrr 
AddToFavoriterr )
(rr) *
intrr* -
flowerIdrr. 6
)rr6 7
{ss 	
vartt 
flowertt 
=tt 
_flowerRepositorytt *
.tt* +
Flowerstt+ 2
.tt2 3
Wherett3 8
(tt8 9
xtt9 :
=>tt; =
xtt> ?
.tt? @
FlowerIdtt@ H
==ttI K
flowerIdttL T
)ttT U
.ttU V
FirstOrDefaultttV d
(ttd e
)tte f
;ttf g
ifvv 
(vv 
flowervv 
!=vv 
nullvv 
)vv 
{ww 
flowerxx 
.xx 

IsFavoritexx !
=xx" #
truexx$ (
;xx( )
_flowerRepositoryyy !
.yy! "
UpdateFloweryy" .
(yy. /
floweryy/ 5
)yy5 6
;yy6 7
}zz 
return|| 
RedirectToAction|| #
(||# $
$str||$ .
,||. /
$str||0 8
)||8 9
;||9 :
}}} 	
public
ÄÄ 
ActionResult
ÄÄ  
RemoveFromFavorite
ÄÄ .
(
ÄÄ. /
int
ÄÄ/ 2
flowerId
ÄÄ3 ;
)
ÄÄ; <
{
ÅÅ 	
var
ÇÇ 
flower
ÇÇ 
=
ÇÇ 
_flowerRepository
ÇÇ *
.
ÇÇ* +
Flowers
ÇÇ+ 2
.
ÇÇ2 3
Where
ÇÇ3 8
(
ÇÇ8 9
x
ÇÇ9 :
=>
ÇÇ; =
x
ÇÇ> ?
.
ÇÇ? @
FlowerId
ÇÇ@ H
==
ÇÇI K
flowerId
ÇÇL T
)
ÇÇT U
.
ÇÇU V
FirstOrDefault
ÇÇV d
(
ÇÇd e
)
ÇÇe f
;
ÇÇf g
if
ÑÑ 
(
ÑÑ 
flower
ÑÑ 
!=
ÑÑ 
null
ÑÑ 
)
ÑÑ 
{
ÖÖ 
flower
ÜÜ 
.
ÜÜ 

IsFavorite
ÜÜ !
=
ÜÜ" #
false
ÜÜ$ )
;
ÜÜ) *
_flowerRepository
áá !
.
áá! "
UpdateFlower
áá" .
(
áá. /
flower
áá/ 5
)
áá5 6
;
áá6 7
}
àà 
return
ää 
RedirectToAction
ää #
(
ää# $
$str
ää$ *
,
ää* +
$str
ää, 4
)
ää4 5
;
ää5 6
}
ãã 	
private
éé 
static
éé 
IEnumerable
éé "
<
éé" #
Flower
éé# )
>
éé) *
PriceFilter
éé+ 6
(
éé6 7
decimal
éé7 >
lowPrice
éé? G
,
ééG H
decimal
ééI P
	highPrice
ééQ Z
,
ééZ [
IEnumerable
éé\ g
<
éég h
Flower
ééh n
>
één o
flowers
éép w
)
ééw x
{
èè 	
if
ëë 
(
ëë 
lowPrice
ëë 
!=
ëë 
$num
ëë 
)
ëë 
{
íí 
if
îî 
(
îî 
	highPrice
îî 
!=
îî  
$num
îî! "
)
îî" #
{
ïï 
return
ôô 
flowers
ôô "
.
ôô" #
Where
ôô# (
(
ôô( )
x
ôô) *
=>
ôô+ -
x
ôô. /
.
ôô/ 0
Price
ôô0 5
>=
ôô6 8
lowPrice
ôô9 A
&&
ôôB D
x
ôôE F
.
ôôF G
Price
ôôG L
<=
ôôM O
	highPrice
ôôP Y
)
ôôY Z
.
ôôZ [
OrderBy
ôô[ b
(
ôôb c
p
ôôc d
=>
ôôe g
p
ôôh i
.
ôôi j
FlowerId
ôôj r
)
ôôr s
;
ôôs t
}
öö 
else
õõ 
{
úú 
return
ùù 
flowers
ùù "
.
ùù" #
Where
ùù# (
(
ùù( )
x
ùù) *
=>
ùù+ -
x
ùù. /
.
ùù/ 0
Price
ùù0 5
>=
ùù6 8
lowPrice
ùù9 A
)
ùùA B
.
ùùB C
OrderBy
ùùC J
(
ùùJ K
p
ùùK L
=>
ùùM O
p
ùùP Q
.
ùùQ R
FlowerId
ùùR Z
)
ùùZ [
;
ùù[ \
}
ûû 
}
üü 
else
†† 
if
†† 
(
†† 
	highPrice
†† 
!=
†† !
$num
††" #
)
††# $
{
°° 
return
¢¢ 
flowers
¢¢ 
.
¢¢ 
Where
¢¢ $
(
¢¢$ %
x
¢¢% &
=>
¢¢' )
x
¢¢* +
.
¢¢+ ,
Price
¢¢, 1
<=
¢¢2 4
	highPrice
¢¢5 >
)
¢¢> ?
.
¢¢? @
OrderBy
¢¢@ G
(
¢¢G H
p
¢¢H I
=>
¢¢J L
p
¢¢M N
.
¢¢N O
FlowerId
¢¢O W
)
¢¢W X
;
¢¢X Y
}
££ 
else
§§ 
{
•• 
return
¶¶ 
flowers
¶¶ 
;
¶¶ 
}
ßß 
}
®® 	
public
´´ 
enum
´´ 
FlowerStock
´´ 
{
¨¨ 	
All
ÆÆ 
=
ÆÆ 
$num
ÆÆ 
,
ÆÆ 
InStock
∞∞ 
=
∞∞ 
$num
∞∞ 
,
∞∞ 

NotInStock
≤≤ 
=
≤≤ 
$num
≤≤ 
}
≥≥ 	
[
∂∂ 	
HttpGet
∂∂	 
]
∂∂ 
public
∑∑ 

ViewResult
∑∑ 
Search
∑∑  
(
∑∑  !
string
∑∑! '

flowerName
∑∑( 2
,
∑∑2 3
decimal
∑∑4 ;
lowPrice
∑∑< D
=
∑∑E F
$num
∑∑G H
,
∑∑H I
decimal
∑∑J Q
	highPrice
∑∑R [
=
∑∑\ ]
$num
∑∑^ _
,
∑∑_ `
string
∑∑a g
sorting
∑∑h o
=
∑∑p q
$str
∑∑r t
)
∑∑t u
{
∏∏ 	
IEnumerable
∫∫ 
<
∫∫ 
Flower
∫∫ 
>
∫∫ 
flowers
∫∫  '
;
∫∫' (
string
ºº 
currentCategory
ºº "
=
ºº# $
string
ºº% +
.
ºº+ ,
Empty
ºº, 1
;
ºº1 2
ViewBag
ææ 
.
ææ 

FlowerName
ææ 
=
ææ  

flowerName
ææ! +
;
ææ+ ,
flowers
√√ 
=
√√ 
_flowerRepository
√√ '
.
√√' (
Flowers
√√( /
.
√√/ 0
Where
√√0 5
(
√√5 6
p
√√6 7
=>
√√8 :
p
√√; <
.
√√< =
Name
√√= A
.
√√A B
Contains
√√B J
(
√√J K

flowerName
√√K U
)
√√U V
||
√√W Y
p
ƒƒ 
.
ƒƒ 
LongDescription
ƒƒ !
.
ƒƒ! "
Contains
ƒƒ" *
(
ƒƒ* +

flowerName
ƒƒ+ 5
)
ƒƒ5 6
||
ƒƒ7 9
p
≈≈ 
.
≈≈ 
ShortDescription
≈≈ "
.
≈≈" #
Contains
≈≈# +
(
≈≈+ ,

flowerName
≈≈, 6
)
≈≈6 7
)
≈≈7 8
.
≈≈8 9
OrderBy
≈≈9 @
(
≈≈@ A
p
≈≈A B
=>
≈≈C E
p
≈≈F G
.
≈≈G H
FlowerId
≈≈H P
)
≈≈P Q
;
≈≈Q R
flowers
«« 
=
«« 
PriceFilter
«« !
(
««! "
lowPrice
««" *
,
««* +
	highPrice
««, 5
,
««5 6
flowers
««7 >
)
««> ?
;
««? @
if
…… 
(
…… 
!
…… 
string
…… 
.
…… 
IsNullOrEmpty
…… %
(
……% &
sorting
……& -
)
……- .
)
……. /
{
   
if
ÃÃ 
(
ÃÃ 
sorting
ÃÃ 
.
ÃÃ 
Equals
ÃÃ "
(
ÃÃ" #
$str
ÃÃ# .
,
ÃÃ. /
StringComparison
ÃÃ0 @
.
ÃÃ@ A
OrdinalIgnoreCase
ÃÃA R
)
ÃÃR S
)
ÃÃS T
{
ÕÕ 
flowers
œœ 
=
œœ 
flowers
œœ %
.
œœ% &
OrderBy
œœ& -
(
œœ- .
p
œœ. /
=>
œœ0 2
p
œœ3 4
.
œœ4 5
Price
œœ5 :
)
œœ: ;
;
œœ; <
}
–– 
else
”” 
if
”” 
(
”” 
sorting
””  
.
””  !
Equals
””! '
(
””' (
$str
””( 4
,
””4 5
StringComparison
””6 F
.
””F G
OrdinalIgnoreCase
””G X
)
””X Y
)
””Y Z
{
‘‘ 
flowers
÷÷ 
=
÷÷ 
flowers
÷÷ %
.
÷÷% &
OrderByDescending
÷÷& 7
(
÷÷7 8
p
÷÷8 9
=>
÷÷: <
p
÷÷= >
.
÷÷> ?
Price
÷÷? D
)
÷÷D E
;
÷÷E F
}
◊◊ 
}
ÿÿ 
return
‹‹ 
View
‹‹ 
(
‹‹ 
new
‹‹ !
FlowerListViewModel
‹‹ /
{
›› 
Flowers
ﬁﬁ 
=
ﬁﬁ 
flowers
ﬁﬁ !
,
ﬁﬁ! "
CurrentCategory
ﬂﬂ 
=
ﬂﬂ  !
currentCategory
ﬂﬂ" 1
}
‡‡ 
)
‡‡ 
;
‡‡ 
}
·· 	
[
‰‰ 	
HttpGet
‰‰	 
]
‰‰ 
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
ActionResult
ÊÊ &
>
ÊÊ& ' 
AutocompleteSearch
ÊÊ( :
(
ÊÊ: ;
)
ÊÊ; <
{
ÁÁ 	
try
ËË 
{
ÈÈ 
string
ÎÎ 
term
ÎÎ 
=
ÎÎ 
HttpContext
ÎÎ )
.
ÎÎ) *
Request
ÎÎ* 1
.
ÎÎ1 2
Query
ÎÎ2 7
[
ÎÎ7 8
$str
ÎÎ8 >
]
ÎÎ> ?
.
ÎÎ? @
ToString
ÎÎ@ H
(
ÎÎH I
)
ÎÎI J
;
ÎÎJ K
var
ÏÏ 
names
ÏÏ 
=
ÏÏ 
_flowerRepository
ÏÏ -
.
ÏÏ- .
Flowers
ÏÏ. 5
.
ÏÏ5 6
Where
ÏÏ6 ;
(
ÏÏ; <
p
ÏÏ< =
=>
ÏÏ> @
p
ÏÏA B
.
ÏÏB C
Name
ÏÏC G
.
ÏÏG H
Contains
ÏÏH P
(
ÏÏP Q
term
ÏÏQ U
)
ÏÏU V
)
ÏÏV W
.
ÏÏW X
Select
ÏÏX ^
(
ÏÏ^ _
p
ÏÏ_ `
=>
ÏÏa c
p
ÏÏd e
.
ÏÏe f
Name
ÏÏf j
)
ÏÏj k
.
ÏÏk l
ToList
ÏÏl r
(
ÏÏr s
)
ÏÏs t
;
ÏÏt u
return
ÓÓ 
Ok
ÓÓ 
(
ÓÓ 
names
ÓÓ 
)
ÓÓ  
;
ÓÓ  !
}
ÔÔ 
catch
 
{
ÒÒ 
return
ÚÚ 

BadRequest
ÚÚ !
(
ÚÚ! "
)
ÚÚ" #
;
ÚÚ# $
}
ÛÛ 
}
ÙÙ 	
[
ˆˆ 	
HttpGet
ˆˆ	 
]
ˆˆ 
public
˜˜ 
IEnumerable
˜˜ 
<
˜˜ 
string
˜˜ !
>
˜˜! "
FlowersNames
˜˜# /
(
˜˜/ 0
)
˜˜0 1
{
¯¯ 	
return
˘˘ 
_flowerRepository
˘˘ $
.
˘˘$ %
FlowersNames
˘˘% 1
;
˘˘1 2
}
˙˙ 	
public
¸¸ 
IActionResult
¸¸ 
Details
¸¸ $
(
¸¸$ %
int
¸¸% (
id
¸¸) +
)
¸¸+ ,
{
˝˝ 	
var
ˇˇ 
flower
ˇˇ 
=
ˇˇ 
_flowerRepository
ˇˇ *
.
ˇˇ* +
GetFlowerById
ˇˇ+ 8
(
ˇˇ8 9
id
ˇˇ9 ;
)
ˇˇ; <
;
ˇˇ< =
if
ÅÅ 
(
ÅÅ 
flower
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 
NotFound
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
;
ÉÉ! "
}
ÑÑ 
return
ÜÜ 
View
ÜÜ 
(
ÜÜ 
new
ÜÜ #
FlowerDetailViewModel
ÜÜ 1
{
áá 
Flower
àà 
=
àà 
flower
àà 
}
ââ 
)
ââ 
;
ââ 
}
ää 	
}
ãã 
}åå á
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerDataController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class  
FlowerDataController %
:& '

Controller( 2
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public  
FlowerDataController #
(# $
IFlowerRepository$ 5
flowerRepository6 F
)F G
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
FlowerViewModel *
>* +
LoadMoreFlowers, ;
(; <
)< =
{ 	
IEnumerable 
< 
Flower 
> 
	dbFlowers  )
=* +
null, 0
;0 1
	dbFlowers!! 
=!! 
_flowerRepository!! )
.!!) *
Flowers!!* 1
.!!1 2
OrderBy!!2 9
(!!9 :
p!!: ;
=>!!< >
p!!? @
.!!@ A
FlowerId!!A I
)!!I J
.!!J K
Take!!K O
(!!O P
$num!!P R
)!!R S
;!!S T
List## 
<## 
FlowerViewModel##  
>##  !
flowers##" )
=##* +
new##, /
List##0 4
<##4 5
FlowerViewModel##5 D
>##D E
(##E F
)##F G
;##G H
foreach%% 
(%% 
var%% 
dbFlower%% !
in%%" $
	dbFlowers%%% .
)%%. /
{&& 
flowers'' 
.'' 
Add'' 
('' (
MapDbFlowerToFlowerViewModel'' 8
(''8 9
dbFlower''9 A
)''A B
)''B C
;''C D
}(( 
return)) 
flowers)) 
;)) 
}** 	
private,, 
FlowerViewModel,, (
MapDbFlowerToFlowerViewModel,,  <
(,,< =
Flower,,= C
dbFlower,,D L
),,L M
{-- 	
return.. 
new.. 
FlowerViewModel.. &
{// 
FlowerId22 
=22 
dbFlower22 #
.22# $
FlowerId22$ ,
,22, -
Name44 
=44 
dbFlower44 
.44  
Name44  $
,44$ %
Price66 
=66 
dbFlower66  
.66  !
Price66! &
,66& '
ShortDescription88  
=88! "
dbFlower88# +
.88+ ,
ShortDescription88, <
,88< =
ImageThumbnailUrl:: !
=::" #
dbFlower::$ ,
.::, -
ImageThumbnailUrl::- >
};; 
;;; 
}<< 	
}== 
}>> µ

HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\HomeController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public		 

class		 
HomeController		 
:		  !

Controller		" ,
{

 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public 
HomeController 
( 
IFlowerRepository /
flowerRepository0 @
)@ A
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
homeViewModel 
= 
new  #
HomeViewModel$ 1
{ 
FlowerPresentation "
=# $
_flowerRepository% 6
.6 7
FlowerPresentation7 I
,I J
FlowersName 
= 
_flowerRepository /
./ 0
FlowersNames0 <
} 
; 
return 
View 
( 
homeViewModel %
)% &
;& '
}   	
}!! 
}"" À
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public

 

class

 
OrderController

  
:

! "

Controller

# -
{ 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderController 
( 
IOrderRepository /
orderRepository0 ?
,? @
ShoppingCartA M
shoppingCartN Z
)Z [
{ 	
_orderRepository 
= 
orderRepository .
;. /
_shoppingCart 
= 
shoppingCart (
;( )
} 	
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
)& '
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[   	
	Authorize  	 
]   
public"" 
IActionResult"" 
Checkout"" %
(""% &
Order""& +
order"", 1
)""1 2
{## 	
var$$ 
items$$ 
=$$ 
_shoppingCart$$ %
.$$% & 
GetShoppingCartItems$$& :
($$: ;
)$$; <
;$$< =
_shoppingCart%% 
.%% 
ShoppingCartItems%% +
=%%, -
items%%. 3
;%%3 4
if'' 
('' 
_shoppingCart'' 
.'' 
ShoppingCartItems'' /
.''/ 0
Count''0 5
==''6 8
$num''9 :
)'': ;
{(( 

ModelState** 
.** 
AddModelError** (
(**( )
$str**) +
,**+ ,
$str**- Y
)**Y Z
;**Z [
}++ 
if-- 
(-- 

ModelState-- 
.-- 
IsValid-- "
)--" #
{.. 
order// 
.// 
Email// 
=// 
User// "
.//" #
Identity//# +
.//+ ,
Name//, 0
;//0 1
_orderRepository00  
.00  !
CreateOrder00! ,
(00, -
order00- 2
)002 3
;003 4
_shoppingCart11 
.11 
	ClearCart11 '
(11' (
)11( )
;11) *
return33 
RedirectToAction33 '
(33' (
$str33( :
)33: ;
;33; <
}44 
return55 
View55 
(55 
order55 
)55 
;55 
}66 	
public99 
IActionResult99 
CheckoutComplete99 -
(99- .
)99. /
{:: 	
ViewBag== 
.== #
CheckoutCompleteMessage== +
===, -
$str==. n
;==n o
return?? 
View?? 
(?? 
)?? 
;?? 
}@@ 	
}AA 
}BB «
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderHistoryController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
public 

class "
OrderHistoryController '
:( )

Controller* 4
{ 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public "
OrderHistoryController %
(% &
IOrderRepository& 6
orderRepository7 F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
)t u
{ 	
_orderRepository 
= 
orderRepository .
;. /
_signInManager 
= 
signInManager *
;* +
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
IEnumerable 
< (
OrderHistoryDetailsViewModel 4
>4 5
orders6 <
== >
null? C
;C D
if!! 
(!! 
_signInManager!! 
.!! 

IsSignedIn!! )
(!!) *
User!!* .
)!!. /
&&!!0 2
User!!3 7
.!!7 8
IsInRole!!8 @
(!!@ A
$str!!A Q
)!!Q R
)!!R S
{"" 
orders## 
=## 
_orderRepository## )
.##) * 
GetOrdersAsViewModel##* >
(##> ?
)##? @
;##@ A
}$$ 
else%% 
{&& 
orders'' 
='' 
_orderRepository'' )
.'') * 
GetOrdersAsViewModel''* >
(''> ?
User''? C
.''C D
Identity''D L
.''L M
Name''M Q
)''Q R
;''R S
}(( 
return** 
View** 
(** 
new** !
OrderHistoryViewModel** 1
{++ 
Orders,, 
=,, 
orders,, 
}-- 
)-- 
;-- 
}.. 	
}// 
}11 ¸'
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ShoppingCartController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class "
ShoppingCartController '
:( )

Controller* 4
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public "
ShoppingCartController %
(% &
IFlowerRepository& 7
flowerRepository8 H
,H I
ShoppingCartJ V
shoppingCartW c
)c d
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var   !
shoppingCartViewModel   %
=  & '
new  ( +!
ShoppingCartViewModel  , A
{!! 
ShoppingCart$$ 
=$$ 
_shoppingCart$$ ,
,$$, -
ShoppingCartTotal%% !
=%%" #
_shoppingCart%%$ 1
.%%1 2 
GetShoppingCartTotal%%2 F
(%%F G
)%%G H
}&& 
;&& 
return(( 
View(( 
((( !
shoppingCartViewModel(( -
)((- .
;((. /
})) 	
public-- "
RedirectToActionResult-- %
AddToShoppingCart--& 7
(--7 8
int--8 ;
flowerId--< D
)--D E
{.. 	
var// 
selectedFlower// 
=//  
_flowerRepository//! 2
.//2 3
Flowers//3 :
.//: ;
FirstOrDefault//; I
(//I J
p//J K
=>//L N
p//O P
.//P Q
FlowerId//Q Y
==//Z \
flowerId//] e
)//e f
;//f g
if22 
(22 
selectedFlower22 
!=22 !
null22" &
)22& '
{33 
_shoppingCart44 
.44 
	AddToCart44 '
(44' (
selectedFlower44( 6
,446 7
$num448 9
)449 :
;44: ;
}55 
return77 
RedirectToAction77 #
(77# $
$str77$ +
)77+ ,
;77, -
}88 	
public<< "
RedirectToActionResult<< %
UpdateShoppingCart<<& 8
(<<8 9
int<<9 <
flowerId<<= E
,<<E F
bool<<G K
isAdding<<L T
)<<T U
{== 	
var>> 
selectedFlower>> 
=>>  
_flowerRepository>>! 2
.>>2 3
Flowers>>3 :
.>>: ;
FirstOrDefault>>; I
(>>I J
p>>J K
=>>>L N
p>>O P
.>>P Q
FlowerId>>Q Y
==>>Z \
flowerId>>] e
)>>e f
;>>f g
ifAA 
(AA 
selectedFlowerAA 
!=AA !
nullAA" &
)AA& '
{BB 
ifCC 
(CC 
isAddingCC 
)CC 
{DD 
_shoppingCartEE !
.EE! "
	AddToCartEE" +
(EE+ ,
selectedFlowerEE, :
,EE: ;
$numEE< =
)EE= >
;EE> ?
}FF 
elseGG 
{HH 
_shoppingCartII !
.II! "
	AddToCartII" +
(II+ ,
selectedFlowerII, :
,II: ;
-II< =
$numII= >
)II> ?
;II? @
}JJ 
}KK 
returnMM 
RedirectToActionMM #
(MM# $
$strMM$ +
)MM+ ,
;MM, -
}NN 	
publicQQ "
RedirectToActionResultQQ %"
RemoveFromShoppingCartQQ& <
(QQ< =
intQQ= @
flowerIdQQA I
)QQI J
{RR 	
varSS 
selectedFlowerSS 
=SS  
_flowerRepositorySS! 2
.SS2 3
FlowersSS3 :
.SS: ;
FirstOrDefaultSS; I
(SSI J
pSSJ K
=>SSL N
pSSO P
.SSP Q
FlowerIdSSQ Y
==SSZ \
flowerIdSS] e
)SSe f
;SSf g
ifUU 
(UU 
selectedFlowerUU 
!=UU !
nullUU" &
)UU& '
{VV 
_shoppingCartWW 
.WW 
RemoveFromCartWW ,
(WW, -
selectedFlowerWW- ;
)WW; <
;WW< =
}XX 
returnZZ 
RedirectToActionZZ #
(ZZ# $
$strZZ$ +
)ZZ+ ,
;ZZ, -
}[[ 	
}\\ 
}]] °ﬂ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191208173628_Init.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Init 
: 
	Migration  )
{		 
private 
const 
string 
AspNetRoles (
=) *
$str+ 8
;8 9
private 
const 
string 
AspNetUsers (
=) *
$str+ 8
;8 9
private 
const 
string #
ValueGenerationStrategy 4
=5 6
$str7 Z
;Z [
private 
const 
string 
Flowers $
=% &
$str' 0
;0 1
private 
const 
string 
OrderDetails )
=* +
$str, :
;: ;
private 
const 
string 
	Flower_Id &
=' (
$str) 3
;3 4
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
AspNetRoles !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id!! 
=!! 
table!! 
.!! 
Column!! %
<!!% &
string!!& ,
>!!, -
(!!- .
nullable!!. 6
:!!6 7
false!!8 =
)!!= >
,!!> ?
Name## 
=## 
table##  
.##  !
Column##! '
<##' (
string##( .
>##. /
(##/ 0
	maxLength##0 9
:##9 :
$num##; >
,##> ?
nullable##@ H
:##H I
true##J N
)##N O
,##O P
NormalizedName%% "
=%%# $
table%%% *
.%%* +
Column%%+ 1
<%%1 2
string%%2 8
>%%8 9
(%%9 :
	maxLength%%: C
:%%C D
$num%%E H
,%%H I
nullable%%J R
:%%R S
true%%T X
)%%X Y
,%%Y Z
ConcurrencyStamp'' $
=''% &
table''' ,
.'', -
Column''- 3
<''3 4
string''4 :
>'': ;
(''; <
nullable''< D
:''D E
true''F J
)''J K
}(( 
,(( 
constraints)) 
:)) 
table)) "
=>))# %
{** 
table-- 
.-- 

PrimaryKey-- $
(--$ %
$str--% 5
,--5 6
x--7 8
=>--9 ;
x--< =
.--= >
Id--> @
)--@ A
;--A B
}.. 
).. 
;.. 
migrationBuilder11 
.11 
CreateTable11 (
(11( )
name33 
:33 
AspNetRoles33 !
,33! "
columns55 
:55 
table55 
=>55 !
new55" %
{66 
Id88 
=88 
table88 
.88 
Column88 %
<88% &
string88& ,
>88, -
(88- .
nullable88. 6
:886 7
false888 =
)88= >
,88> ?
UserName:: 
=:: 
table:: $
.::$ %
Column::% +
<::+ ,
string::, 2
>::2 3
(::3 4
	maxLength::4 =
:::= >
$num::? B
,::B C
nullable::D L
:::L M
true::N R
)::R S
,::S T
NormalizedUserName<< &
=<<' (
table<<) .
.<<. /
Column<</ 5
<<<5 6
string<<6 <
><<< =
(<<= >
	maxLength<<> G
:<<G H
$num<<I L
,<<L M
nullable<<N V
:<<V W
true<<X \
)<<\ ]
,<<] ^
Email>> 
=>> 
table>> !
.>>! "
Column>>" (
<>>( )
string>>) /
>>>/ 0
(>>0 1
	maxLength>>1 :
:>>: ;
$num>>< ?
,>>? @
nullable>>A I
:>>I J
true>>K O
)>>O P
,>>P Q
NormalizedEmail@@ #
=@@$ %
table@@& +
.@@+ ,
Column@@, 2
<@@2 3
string@@3 9
>@@9 :
(@@: ;
	maxLength@@; D
:@@D E
$num@@F I
,@@I J
nullable@@K S
:@@S T
true@@U Y
)@@Y Z
,@@Z [
EmailConfirmedBB "
=BB# $
tableBB% *
.BB* +
ColumnBB+ 1
<BB1 2
boolBB2 6
>BB6 7
(BB7 8
nullableBB8 @
:BB@ A
falseBBB G
)BBG H
,BBH I
PasswordHashDD  
=DD! "
tableDD# (
.DD( )
ColumnDD) /
<DD/ 0
stringDD0 6
>DD6 7
(DD7 8
nullableDD8 @
:DD@ A
trueDDB F
)DDF G
,DDG H
SecurityStampFF !
=FF" #
tableFF$ )
.FF) *
ColumnFF* 0
<FF0 1
stringFF1 7
>FF7 8
(FF8 9
nullableFF9 A
:FFA B
trueFFC G
)FFG H
,FFH I
ConcurrencyStampHH $
=HH% &
tableHH' ,
.HH, -
ColumnHH- 3
<HH3 4
stringHH4 :
>HH: ;
(HH; <
nullableHH< D
:HHD E
trueHHF J
)HHJ K
,HHK L
PhoneNumberJJ 
=JJ  !
tableJJ" '
.JJ' (
ColumnJJ( .
<JJ. /
stringJJ/ 5
>JJ5 6
(JJ6 7
nullableJJ7 ?
:JJ? @
trueJJA E
)JJE F
,JJF G 
PhoneNumberConfirmedLL (
=LL) *
tableLL+ 0
.LL0 1
ColumnLL1 7
<LL7 8
boolLL8 <
>LL< =
(LL= >
nullableLL> F
:LLF G
falseLLH M
)LLM N
,LLN O
TwoFactorEnabledNN $
=NN% &
tableNN' ,
.NN, -
ColumnNN- 3
<NN3 4
boolNN4 8
>NN8 9
(NN9 :
nullableNN: B
:NNB C
falseNND I
)NNI J
,NNJ K

LockoutEndPP 
=PP  
tablePP! &
.PP& '
ColumnPP' -
<PP- .
DateTimeOffsetPP. <
>PP< =
(PP= >
nullablePP> F
:PPF G
truePPH L
)PPL M
,PPM N
LockoutEnabledRR "
=RR# $
tableRR% *
.RR* +
ColumnRR+ 1
<RR1 2
boolRR2 6
>RR6 7
(RR7 8
nullableRR8 @
:RR@ A
falseRRB G
)RRG H
,RRH I
AccessFailedCountTT %
=TT& '
tableTT( -
.TT- .
ColumnTT. 4
<TT4 5
intTT5 8
>TT8 9
(TT9 :
nullableTT: B
:TTB C
falseTTD I
)TTI J
,TTJ K
	BirthdateVV 
=VV 
tableVV  %
.VV% &
ColumnVV& ,
<VV, -
DateTimeVV- 5
>VV5 6
(VV6 7
nullableVV7 ?
:VV? @
falseVVA F
)VVF G
,VVG H
CityXX 
=XX 
tableXX  
.XX  !
ColumnXX! '
<XX' (
stringXX( .
>XX. /
(XX/ 0
nullableXX0 8
:XX8 9
trueXX: >
)XX> ?
,XX? @
CountryZZ 
=ZZ 
tableZZ #
.ZZ# $
ColumnZZ$ *
<ZZ* +
stringZZ+ 1
>ZZ1 2
(ZZ2 3
nullableZZ3 ;
:ZZ; <
trueZZ= A
)ZZA B
}[[ 
,[[ 
constraints\\ 
:\\ 
table\\ "
=>\\# %
{]] 
table`` 
.`` 

PrimaryKey`` $
(``$ %
$str``% 5
,``5 6
x``7 8
=>``9 ;
x``< =
.``= >
Id``> @
)``@ A
;``A B
}aa 
)aa 
;aa 
migrationBuilderdd 
.dd 
CreateTabledd (
(dd( )
nameff 
:ff 
$strff "
,ff" #
columnshh 
:hh 
tablehh 
=>hh !
newhh" %
{ii 

CategoryIdkk 
=kk  
tablekk! &
.kk& '
Columnkk' -
<kk- .
intkk. 1
>kk1 2
(kk2 3
nullablekk3 ;
:kk; <
falsekk= B
)kkB C
.ll 

Annotationll #
(ll# $#
ValueGenerationStrategyll$ ;
,ll; <,
 SqlServerValueGenerationStrategyll= ]
.ll] ^
IdentityColumnll^ l
)lll m
,llm n
CategoryNamenn  
=nn! "
tablenn# (
.nn( )
Columnnn) /
<nn/ 0
stringnn0 6
>nn6 7
(nn7 8
nullablenn8 @
:nn@ A
truennB F
)nnF G
,nnG H
Descriptionpp 
=pp  !
tablepp" '
.pp' (
Columnpp( .
<pp. /
stringpp/ 5
>pp5 6
(pp6 7
nullablepp7 ?
:pp? @
trueppA E
)ppE F
}qq 
,qq 
constraintsrr 
:rr 
tablerr "
=>rr# %
{ss 
tablevv 
.vv 

PrimaryKeyvv $
(vv$ %
$strvv% 4
,vv4 5
xvv6 7
=>vv8 :
xvv; <
.vv< =

CategoryIdvv= G
)vvG H
;vvH I
}ww 
)ww 
;ww 
migrationBuilderzz 
.zz 
CreateTablezz (
(zz( )
name|| 
:|| 
$str|| 
,|| 
columns~~ 
:~~ 
table~~ 
=>~~ !
new~~" %
{ 
OrderId
ÅÅ 
=
ÅÅ 
table
ÅÅ #
.
ÅÅ# $
Column
ÅÅ$ *
<
ÅÅ* +
int
ÅÅ+ .
>
ÅÅ. /
(
ÅÅ/ 0
nullable
ÅÅ0 8
:
ÅÅ8 9
false
ÅÅ: ?
)
ÅÅ? @
.
ÇÇ 

Annotation
ÇÇ #
(
ÇÇ# $%
ValueGenerationStrategy
ÇÇ$ ;
,
ÇÇ; <.
 SqlServerValueGenerationStrategy
ÇÇ= ]
.
ÇÇ] ^
IdentityColumn
ÇÇ^ l
)
ÇÇl m
,
ÇÇm n
	FirstName
ÑÑ 
=
ÑÑ 
table
ÑÑ  %
.
ÑÑ% &
Column
ÑÑ& ,
<
ÑÑ, -
string
ÑÑ- 3
>
ÑÑ3 4
(
ÑÑ4 5
	maxLength
ÑÑ5 >
:
ÑÑ> ?
$num
ÑÑ@ B
,
ÑÑB C
nullable
ÑÑD L
:
ÑÑL M
false
ÑÑN S
)
ÑÑS T
,
ÑÑT U
LastName
ÜÜ 
=
ÜÜ 
table
ÜÜ $
.
ÜÜ$ %
Column
ÜÜ% +
<
ÜÜ+ ,
string
ÜÜ, 2
>
ÜÜ2 3
(
ÜÜ3 4
	maxLength
ÜÜ4 =
:
ÜÜ= >
$num
ÜÜ? A
,
ÜÜA B
nullable
ÜÜC K
:
ÜÜK L
false
ÜÜM R
)
ÜÜR S
,
ÜÜS T
AddressLine1
àà  
=
àà! "
table
àà# (
.
àà( )
Column
àà) /
<
àà/ 0
string
àà0 6
>
àà6 7
(
àà7 8
	maxLength
àà8 A
:
ààA B
$num
ààC F
,
ààF G
nullable
ààH P
:
ààP Q
false
ààR W
)
ààW X
,
ààX Y
AddressLine2
ââ  
=
ââ! "
table
ââ# (
.
ââ( )
Column
ââ) /
<
ââ/ 0
string
ââ0 6
>
ââ6 7
(
ââ7 8
nullable
ââ8 @
:
ââ@ A
true
ââB F
)
ââF G
,
ââG H
ZipCode
ãã 
=
ãã 
table
ãã #
.
ãã# $
Column
ãã$ *
<
ãã* +
string
ãã+ 1
>
ãã1 2
(
ãã2 3
	maxLength
ãã3 <
:
ãã< =
$num
ãã> @
,
ãã@ A
nullable
ããB J
:
ããJ K
false
ããL Q
)
ããQ R
,
ããR S
City
çç 
=
çç 
table
çç  
.
çç  !
Column
çç! '
<
çç' (
string
çç( .
>
çç. /
(
çç/ 0
	maxLength
çç0 9
:
çç9 :
$num
çç; =
,
çç= >
nullable
çç? G
:
ççG H
false
ççI N
)
ççN O
,
ççO P
State
èè 
=
èè 
table
èè !
.
èè! "
Column
èè" (
<
èè( )
string
èè) /
>
èè/ 0
(
èè0 1
	maxLength
èè1 :
:
èè: ;
$num
èè< >
,
èè> ?
nullable
èè@ H
:
èèH I
true
èèJ N
)
èèN O
,
èèO P
Country
ëë 
=
ëë 
table
ëë #
.
ëë# $
Column
ëë$ *
<
ëë* +
string
ëë+ 1
>
ëë1 2
(
ëë2 3
	maxLength
ëë3 <
:
ëë< =
$num
ëë> @
,
ëë@ A
nullable
ëëB J
:
ëëJ K
false
ëëL Q
)
ëëQ R
,
ëëR S
PhoneNumber
ìì 
=
ìì  !
table
ìì" '
.
ìì' (
Column
ìì( .
<
ìì. /
string
ìì/ 5
>
ìì5 6
(
ìì6 7
	maxLength
ìì7 @
:
ìì@ A
$num
ììB D
,
ììD E
nullable
ììF N
:
ììN O
false
ììP U
)
ììU V
,
ììV W
Email
ïï 
=
ïï 
table
ïï !
.
ïï! "
Column
ïï" (
<
ïï( )
string
ïï) /
>
ïï/ 0
(
ïï0 1
	maxLength
ïï1 :
:
ïï: ;
$num
ïï< >
,
ïï> ?
nullable
ïï@ H
:
ïïH I
false
ïïJ O
)
ïïO P
,
ïïP Q

OrderTotal
óó 
=
óó  
table
óó! &
.
óó& '
Column
óó' -
<
óó- .
decimal
óó. 5
>
óó5 6
(
óó6 7
nullable
óó7 ?
:
óó? @
false
óóA F
)
óóF G
,
óóG H
OrderPlaced
ôô 
=
ôô  !
table
ôô" '
.
ôô' (
Column
ôô( .
<
ôô. /
DateTime
ôô/ 7
>
ôô7 8
(
ôô8 9
nullable
ôô9 A
:
ôôA B
false
ôôC H
)
ôôH I
}
öö 
,
öö 
constraints
õõ 
:
õõ 
table
õõ "
=>
õõ# %
{
úú 
table
üü 
.
üü 

PrimaryKey
üü $
(
üü$ %
$str
üü% 0
,
üü0 1
x
üü2 3
=>
üü4 6
x
üü7 8
.
üü8 9
OrderId
üü9 @
)
üü@ A
;
üüA B
}
†† 
)
†† 
;
†† 
migrationBuilder
££ 
.
££ 
CreateTable
££ (
(
££( )
name
•• 
:
•• 
$str
•• (
,
••( )
columns
ßß 
:
ßß 
table
ßß 
=>
ßß !
new
ßß" %
{
®® 
Id
™™ 
=
™™ 
table
™™ 
.
™™ 
Column
™™ %
<
™™% &
int
™™& )
>
™™) *
(
™™* +
nullable
™™+ 3
:
™™3 4
false
™™5 :
)
™™: ;
.
´´ 

Annotation
´´ #
(
´´# $%
ValueGenerationStrategy
´´$ ;
,
´´; <.
 SqlServerValueGenerationStrategy
´´= ]
.
´´] ^
IdentityColumn
´´^ l
)
´´l m
,
´´m n
RoleId
≠≠ 
=
≠≠ 
table
≠≠ "
.
≠≠" #
Column
≠≠# )
<
≠≠) *
string
≠≠* 0
>
≠≠0 1
(
≠≠1 2
nullable
≠≠2 :
:
≠≠: ;
false
≠≠< A
)
≠≠A B
,
≠≠B C
	ClaimType
ØØ 
=
ØØ 
table
ØØ  %
.
ØØ% &
Column
ØØ& ,
<
ØØ, -
string
ØØ- 3
>
ØØ3 4
(
ØØ4 5
nullable
ØØ5 =
:
ØØ= >
true
ØØ? C
)
ØØC D
,
ØØD E

ClaimValue
±± 
=
±±  
table
±±! &
.
±±& '
Column
±±' -
<
±±- .
string
±±. 4
>
±±4 5
(
±±5 6
nullable
±±6 >
:
±±> ?
true
±±@ D
)
±±D E
}
≤≤ 
,
≤≤ 
constraints
≥≥ 
:
≥≥ 
table
≥≥ "
=>
≥≥# %
{
¥¥ 
table
∑∑ 
.
∑∑ 

PrimaryKey
∑∑ $
(
∑∑$ %
$str
∑∑% :
,
∑∑: ;
x
∑∑< =
=>
∑∑> @
x
∑∑A B
.
∑∑B C
Id
∑∑C E
)
∑∑E F
;
∑∑F G
table
∫∫ 
.
∫∫ 

ForeignKey
∫∫ $
(
∫∫$ %
name
ªª 
:
ªª 
$str
ªª F
,
ªªF G
column
ºº 
:
ºº 
x
ºº  !
=>
ºº" $
x
ºº% &
.
ºº& '
RoleId
ºº' -
,
ºº- .
principalTable
ΩΩ &
:
ΩΩ& '
AspNetRoles
ΩΩ( 3
,
ΩΩ3 4
principalColumn
ææ '
:
ææ' (
$str
ææ) -
,
ææ- .
onDelete
øø  
:
øø  !
ReferentialAction
øø" 3
.
øø3 4
Cascade
øø4 ;
)
øø; <
;
øø< =
}
¿¿ 
)
¿¿ 
;
¿¿ 
migrationBuilder
¬¬ 
.
¬¬ 
CreateTable
¬¬ (
(
¬¬( )
name
ƒƒ 
:
ƒƒ 
$str
ƒƒ (
,
ƒƒ( )
columns
∆∆ 
:
∆∆ 
table
∆∆ 
=>
∆∆ !
new
∆∆" %
{
«« 
Id
…… 
=
…… 
table
…… 
.
…… 
Column
…… %
<
……% &
int
……& )
>
……) *
(
……* +
nullable
……+ 3
:
……3 4
false
……5 :
)
……: ;
.
   

Annotation
   #
(
  # $%
ValueGenerationStrategy
  $ ;
,
  ; <.
 SqlServerValueGenerationStrategy
  = ]
.
  ] ^
IdentityColumn
  ^ l
)
  l m
,
  m n
UserId
ÃÃ 
=
ÃÃ 
table
ÃÃ "
.
ÃÃ" #
Column
ÃÃ# )
<
ÃÃ) *
string
ÃÃ* 0
>
ÃÃ0 1
(
ÃÃ1 2
nullable
ÃÃ2 :
:
ÃÃ: ;
false
ÃÃ< A
)
ÃÃA B
,
ÃÃB C
	ClaimType
ŒŒ 
=
ŒŒ 
table
ŒŒ  %
.
ŒŒ% &
Column
ŒŒ& ,
<
ŒŒ, -
string
ŒŒ- 3
>
ŒŒ3 4
(
ŒŒ4 5
nullable
ŒŒ5 =
:
ŒŒ= >
true
ŒŒ? C
)
ŒŒC D
,
ŒŒD E

ClaimValue
–– 
=
––  
table
––! &
.
––& '
Column
––' -
<
––- .
string
––. 4
>
––4 5
(
––5 6
nullable
––6 >
:
––> ?
true
––@ D
)
––D E
}
—— 
,
—— 
constraints
““ 
:
““ 
table
““ "
=>
““# %
{
”” 
table
÷÷ 
.
÷÷ 

PrimaryKey
÷÷ $
(
÷÷$ %
$str
÷÷% :
,
÷÷: ;
x
÷÷< =
=>
÷÷> @
x
÷÷A B
.
÷÷B C
Id
÷÷C E
)
÷÷E F
;
÷÷F G
table
ÿÿ 
.
ÿÿ 

ForeignKey
ÿÿ $
(
ÿÿ$ %
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ F
,
ŸŸF G
column
⁄⁄ 
:
⁄⁄ 
x
⁄⁄  !
=>
⁄⁄" $
x
⁄⁄% &
.
⁄⁄& '
UserId
⁄⁄' -
,
⁄⁄- .
principalTable
€€ &
:
€€& '
AspNetUsers
€€( 3
,
€€3 4
principalColumn
‹‹ '
:
‹‹' (
$str
‹‹) -
,
‹‹- .
onDelete
››  
:
››  !
ReferentialAction
››" 3
.
››3 4
Cascade
››4 ;
)
››; <
;
››< =
}
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
migrationBuilder
·· 
.
·· 
CreateTable
·· (
(
··( )
name
„„ 
:
„„ 
$str
„„ (
,
„„( )
columns
ÂÂ 
:
ÂÂ 
table
ÂÂ 
=>
ÂÂ !
new
ÂÂ" %
{
ÊÊ 
LoginProvider
ËË !
=
ËË" #
table
ËË$ )
.
ËË) *
Column
ËË* 0
<
ËË0 1
string
ËË1 7
>
ËË7 8
(
ËË8 9
nullable
ËË9 A
:
ËËA B
false
ËËC H
)
ËËH I
,
ËËI J
ProviderKey
ÍÍ 
=
ÍÍ  !
table
ÍÍ" '
.
ÍÍ' (
Column
ÍÍ( .
<
ÍÍ. /
string
ÍÍ/ 5
>
ÍÍ5 6
(
ÍÍ6 7
nullable
ÍÍ7 ?
:
ÍÍ? @
false
ÍÍA F
)
ÍÍF G
,
ÍÍG H!
ProviderDisplayName
ÏÏ '
=
ÏÏ( )
table
ÏÏ* /
.
ÏÏ/ 0
Column
ÏÏ0 6
<
ÏÏ6 7
string
ÏÏ7 =
>
ÏÏ= >
(
ÏÏ> ?
nullable
ÏÏ? G
:
ÏÏG H
true
ÏÏI M
)
ÏÏM N
,
ÏÏN O
UserId
ÓÓ 
=
ÓÓ 
table
ÓÓ "
.
ÓÓ" #
Column
ÓÓ# )
<
ÓÓ) *
string
ÓÓ* 0
>
ÓÓ0 1
(
ÓÓ1 2
nullable
ÓÓ2 :
:
ÓÓ: ;
false
ÓÓ< A
)
ÓÓA B
}
ÔÔ 
,
ÔÔ 
constraints
 
:
 
table
 "
=>
# %
{
ÒÒ 
table
ÛÛ 
.
ÛÛ 

PrimaryKey
ÛÛ $
(
ÛÛ$ %
$str
ÛÛ% :
,
ÛÛ: ;
x
ÛÛ< =
=>
ÛÛ> @
new
ÛÛA D
{
ÛÛE F
x
ÛÛG H
.
ÛÛH I
LoginProvider
ÛÛI V
,
ÛÛV W
x
ÛÛX Y
.
ÛÛY Z
ProviderKey
ÛÛZ e
}
ÛÛf g
)
ÛÛg h
;
ÛÛh i
table
ıı 
.
ıı 

ForeignKey
ıı $
(
ıı$ %
name
ˆˆ 
:
ˆˆ 
$str
ˆˆ F
,
ˆˆF G
column
˜˜ 
:
˜˜ 
x
˜˜  !
=>
˜˜" $
x
˜˜% &
.
˜˜& '
UserId
˜˜' -
,
˜˜- .
principalTable
¯¯ &
:
¯¯& '
AspNetUsers
¯¯( 3
,
¯¯3 4
principalColumn
˘˘ '
:
˘˘' (
$str
˘˘) -
,
˘˘- .
onDelete
˙˙  
:
˙˙  !
ReferentialAction
˙˙" 3
.
˙˙3 4
Cascade
˙˙4 ;
)
˙˙; <
;
˙˙< =
}
˚˚ 
)
˚˚ 
;
˚˚ 
migrationBuilder
˝˝ 
.
˝˝ 
CreateTable
˝˝ (
(
˝˝( )
name
ˇˇ 
:
ˇˇ 
$str
ˇˇ '
,
ˇˇ' (
columns
ÅÅ 
:
ÅÅ 
table
ÅÅ 
=>
ÅÅ !
new
ÅÅ" %
{
ÇÇ 
UserId
ÑÑ 
=
ÑÑ 
table
ÑÑ "
.
ÑÑ" #
Column
ÑÑ# )
<
ÑÑ) *
string
ÑÑ* 0
>
ÑÑ0 1
(
ÑÑ1 2
nullable
ÑÑ2 :
:
ÑÑ: ;
false
ÑÑ< A
)
ÑÑA B
,
ÑÑB C
RoleId
ÜÜ 
=
ÜÜ 
table
ÜÜ "
.
ÜÜ" #
Column
ÜÜ# )
<
ÜÜ) *
string
ÜÜ* 0
>
ÜÜ0 1
(
ÜÜ1 2
nullable
ÜÜ2 :
:
ÜÜ: ;
false
ÜÜ< A
)
ÜÜA B
}
áá 
,
áá 
constraints
àà 
:
àà 
table
àà "
=>
àà# %
{
ââ 
table
ãã 
.
ãã 

PrimaryKey
ãã $
(
ãã$ %
$str
ãã% 9
,
ãã9 :
x
ãã; <
=>
ãã= ?
new
ãã@ C
{
ããD E
x
ããF G
.
ããG H
UserId
ããH N
,
ããN O
x
ããP Q
.
ããQ R
RoleId
ããR X
}
ããY Z
)
ããZ [
;
ãã[ \
table
çç 
.
çç 

ForeignKey
çç $
(
çç$ %
name
éé 
:
éé 
$str
éé E
,
ééE F
column
èè 
:
èè 
x
èè  !
=>
èè" $
x
èè% &
.
èè& '
RoleId
èè' -
,
èè- .
principalTable
êê &
:
êê& '
AspNetRoles
êê( 3
,
êê3 4
principalColumn
ëë '
:
ëë' (
$str
ëë) -
,
ëë- .
onDelete
íí  
:
íí  !
ReferentialAction
íí" 3
.
íí3 4
Cascade
íí4 ;
)
íí; <
;
íí< =
table
ìì 
.
ìì 

ForeignKey
ìì $
(
ìì$ %
name
îî 
:
îî 
$str
îî E
,
îîE F
column
ïï 
:
ïï 
x
ïï  !
=>
ïï" $
x
ïï% &
.
ïï& '
UserId
ïï' -
,
ïï- .
principalTable
ññ &
:
ññ& '
AspNetUsers
ññ( 3
,
ññ3 4
principalColumn
óó '
:
óó' (
$str
óó) -
,
óó- .
onDelete
òò  
:
òò  !
ReferentialAction
òò" 3
.
òò3 4
Cascade
òò4 ;
)
òò; <
;
òò< =
}
ôô 
)
ôô 
;
ôô 
migrationBuilder
õõ 
.
õõ 
CreateTable
õõ (
(
õõ( )
name
ùù 
:
ùù 
$str
ùù (
,
ùù( )
columns
üü 
:
üü 
table
üü 
=>
üü !
new
üü" %
{
†† 
UserId
¢¢ 
=
¢¢ 
table
¢¢ "
.
¢¢" #
Column
¢¢# )
<
¢¢) *
string
¢¢* 0
>
¢¢0 1
(
¢¢1 2
nullable
¢¢2 :
:
¢¢: ;
false
¢¢< A
)
¢¢A B
,
¢¢B C
LoginProvider
§§ !
=
§§" #
table
§§$ )
.
§§) *
Column
§§* 0
<
§§0 1
string
§§1 7
>
§§7 8
(
§§8 9
nullable
§§9 A
:
§§A B
false
§§C H
)
§§H I
,
§§I J
Name
¶¶ 
=
¶¶ 
table
¶¶  
.
¶¶  !
Column
¶¶! '
<
¶¶' (
string
¶¶( .
>
¶¶. /
(
¶¶/ 0
nullable
¶¶0 8
:
¶¶8 9
false
¶¶: ?
)
¶¶? @
,
¶¶@ A
Value
®® 
=
®® 
table
®® !
.
®®! "
Column
®®" (
<
®®( )
string
®®) /
>
®®/ 0
(
®®0 1
nullable
®®1 9
:
®®9 :
true
®®; ?
)
®®? @
}
©© 
,
©© 
constraints
™™ 
:
™™ 
table
™™ "
=>
™™# %
{
´´ 
table
≠≠ 
.
≠≠ 

PrimaryKey
≠≠ $
(
≠≠$ %
$str
≠≠% :
,
≠≠: ;
x
≠≠< =
=>
≠≠> @
new
≠≠A D
{
≠≠E F
x
≠≠G H
.
≠≠H I
UserId
≠≠I O
,
≠≠O P
x
≠≠Q R
.
≠≠R S
LoginProvider
≠≠S `
,
≠≠` a
x
≠≠b c
.
≠≠c d
Name
≠≠d h
}
≠≠i j
)
≠≠j k
;
≠≠k l
table
ØØ 
.
ØØ 

ForeignKey
ØØ $
(
ØØ$ %
name
∞∞ 
:
∞∞ 
$str
∞∞ F
,
∞∞F G
column
±± 
:
±± 
x
±±  !
=>
±±" $
x
±±% &
.
±±& '
UserId
±±' -
,
±±- .
principalTable
≤≤ &
:
≤≤& '
AspNetUsers
≤≤( 3
,
≤≤3 4
principalColumn
≥≥ '
:
≥≥' (
$str
≥≥) -
,
≥≥- .
onDelete
¥¥  
:
¥¥  !
ReferentialAction
¥¥" 3
.
¥¥3 4
Cascade
¥¥4 ;
)
¥¥; <
;
¥¥< =
}
µµ 
)
µµ 
;
µµ 
migrationBuilder
∑∑ 
.
∑∑ 
CreateTable
∑∑ (
(
∑∑( )
name
∏∏ 
:
∏∏ 
Flowers
∏∏ 
,
∏∏ 
columns
ππ 
:
ππ 
table
ππ 
=>
ππ !
new
ππ" %
{
∫∫ 
FlowerId
ªª 
=
ªª 
table
ªª $
.
ªª$ %
Column
ªª% +
<
ªª+ ,
int
ªª, /
>
ªª/ 0
(
ªª0 1
nullable
ªª1 9
:
ªª9 :
false
ªª; @
)
ªª@ A
.
ºº 

Annotation
ºº #
(
ºº# $%
ValueGenerationStrategy
ºº$ ;
,
ºº; <.
 SqlServerValueGenerationStrategy
ºº= ]
.
ºº] ^
IdentityColumn
ºº^ l
)
ººl m
,
ººm n
Name
ΩΩ 
=
ΩΩ 
table
ΩΩ  
.
ΩΩ  !
Column
ΩΩ! '
<
ΩΩ' (
string
ΩΩ( .
>
ΩΩ. /
(
ΩΩ/ 0
nullable
ΩΩ0 8
:
ΩΩ8 9
true
ΩΩ: >
)
ΩΩ> ?
,
ΩΩ? @
ShortDescription
ææ $
=
ææ% &
table
ææ' ,
.
ææ, -
Column
ææ- 3
<
ææ3 4
string
ææ4 :
>
ææ: ;
(
ææ; <
nullable
ææ< D
:
ææD E
true
ææF J
)
ææJ K
,
ææK L
LongDescription
øø #
=
øø$ %
table
øø& +
.
øø+ ,
Column
øø, 2
<
øø2 3
string
øø3 9
>
øø9 :
(
øø: ;
nullable
øø; C
:
øøC D
true
øøE I
)
øøI J
,
øøJ K
Price
¿¿ 
=
¿¿ 
table
¿¿ !
.
¿¿! "
Column
¿¿" (
<
¿¿( )
decimal
¿¿) 0
>
¿¿0 1
(
¿¿1 2
nullable
¿¿2 :
:
¿¿: ;
false
¿¿< A
)
¿¿A B
,
¿¿B C
ImageUrl
¡¡ 
=
¡¡ 
table
¡¡ $
.
¡¡$ %
Column
¡¡% +
<
¡¡+ ,
string
¡¡, 2
>
¡¡2 3
(
¡¡3 4
nullable
¡¡4 <
:
¡¡< =
true
¡¡> B
)
¡¡B C
,
¡¡C D
ImageThumbnailUrl
¬¬ %
=
¬¬& '
table
¬¬( -
.
¬¬- .
Column
¬¬. 4
<
¬¬4 5
string
¬¬5 ;
>
¬¬; <
(
¬¬< =
nullable
¬¬= E
:
¬¬E F
true
¬¬G K
)
¬¬K L
,
¬¬L M
InStock
√√ 
=
√√ 
table
√√ #
.
√√# $
Column
√√$ *
<
√√* +
bool
√√+ /
>
√√/ 0
(
√√0 1
nullable
√√1 9
:
√√9 :
false
√√; @
)
√√@ A
,
√√A B

CategoryId
ƒƒ 
=
ƒƒ  
table
ƒƒ! &
.
ƒƒ& '
Column
ƒƒ' -
<
ƒƒ- .
int
ƒƒ. 1
>
ƒƒ1 2
(
ƒƒ2 3
nullable
ƒƒ3 ;
:
ƒƒ; <
false
ƒƒ= B
)
ƒƒB C
,
ƒƒC D"
IsFlowerPresentation
≈≈ (
=
≈≈) *
table
≈≈+ 0
.
≈≈0 1
Column
≈≈1 7
<
≈≈7 8
bool
≈≈8 <
>
≈≈< =
(
≈≈= >
nullable
≈≈> F
:
≈≈F G
false
≈≈H M
)
≈≈M N
}
∆∆ 
,
∆∆ 
constraints
«« 
:
«« 
table
«« "
=>
««# %
{
»» 
table
…… 
.
…… 

PrimaryKey
…… $
(
……$ %
$str
……% 1
,
……1 2
x
……3 4
=>
……5 7
x
……8 9
.
……9 :
FlowerId
……: B
)
……B C
;
……C D
table
   
.
   

ForeignKey
   $
(
  $ %
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ @
,
ÀÀ@ A
column
ÃÃ 
:
ÃÃ 
x
ÃÃ  !
=>
ÃÃ" $
x
ÃÃ% &
.
ÃÃ& '

CategoryId
ÃÃ' 1
,
ÃÃ1 2
principalTable
ÕÕ &
:
ÕÕ& '
$str
ÕÕ( 4
,
ÕÕ4 5
principalColumn
ŒŒ '
:
ŒŒ' (
$str
ŒŒ) 5
,
ŒŒ5 6
onDelete
œœ  
:
œœ  !
ReferentialAction
œœ" 3
.
œœ3 4
Cascade
œœ4 ;
)
œœ; <
;
œœ< =
}
–– 
)
–– 
;
–– 
migrationBuilder
““ 
.
““ 
CreateTable
““ (
(
““( )
name
”” 
:
”” 
OrderDetails
”” "
,
””" #
columns
‘‘ 
:
‘‘ 
table
‘‘ 
=>
‘‘ !
new
‘‘" %
{
’’ 
OrderDetailId
÷÷ !
=
÷÷" #
table
÷÷$ )
.
÷÷) *
Column
÷÷* 0
<
÷÷0 1
int
÷÷1 4
>
÷÷4 5
(
÷÷5 6
nullable
÷÷6 >
:
÷÷> ?
false
÷÷@ E
)
÷÷E F
.
◊◊ 

Annotation
◊◊ #
(
◊◊# $%
ValueGenerationStrategy
◊◊$ ;
,
◊◊; <.
 SqlServerValueGenerationStrategy
◊◊= ]
.
◊◊] ^
IdentityColumn
◊◊^ l
)
◊◊l m
,
◊◊m n
OrderId
ÿÿ 
=
ÿÿ 
table
ÿÿ #
.
ÿÿ# $
Column
ÿÿ$ *
<
ÿÿ* +
int
ÿÿ+ .
>
ÿÿ. /
(
ÿÿ/ 0
nullable
ÿÿ0 8
:
ÿÿ8 9
false
ÿÿ: ?
)
ÿÿ? @
,
ÿÿ@ A
FlowerId
ŸŸ 
=
ŸŸ 
table
ŸŸ $
.
ŸŸ$ %
Column
ŸŸ% +
<
ŸŸ+ ,
int
ŸŸ, /
>
ŸŸ/ 0
(
ŸŸ0 1
nullable
ŸŸ1 9
:
ŸŸ9 :
false
ŸŸ; @
)
ŸŸ@ A
,
ŸŸA B
Amount
⁄⁄ 
=
⁄⁄ 
table
⁄⁄ "
.
⁄⁄" #
Column
⁄⁄# )
<
⁄⁄) *
int
⁄⁄* -
>
⁄⁄- .
(
⁄⁄. /
nullable
⁄⁄/ 7
:
⁄⁄7 8
false
⁄⁄9 >
)
⁄⁄> ?
,
⁄⁄? @
Price
€€ 
=
€€ 
table
€€ !
.
€€! "
Column
€€" (
<
€€( )
decimal
€€) 0
>
€€0 1
(
€€1 2
nullable
€€2 :
:
€€: ;
false
€€< A
)
€€A B
}
‹‹ 
,
‹‹ 
constraints
›› 
:
›› 
table
›› "
=>
››# %
{
ﬁﬁ 
table
ﬂﬂ 
.
ﬂﬂ 

PrimaryKey
ﬂﬂ $
(
ﬂﬂ$ %
$str
ﬂﬂ% 6
,
ﬂﬂ6 7
x
ﬂﬂ8 9
=>
ﬂﬂ: <
x
ﬂﬂ= >
.
ﬂﬂ> ?
OrderDetailId
ﬂﬂ? L
)
ﬂﬂL M
;
ﬂﬂM N
table
‡‡ 
.
‡‡ 

ForeignKey
‡‡ $
(
‡‡$ %
name
·· 
:
·· 
$str
·· @
,
··@ A
column
‚‚ 
:
‚‚ 
x
‚‚  !
=>
‚‚" $
x
‚‚% &
.
‚‚& '
FlowerId
‚‚' /
,
‚‚/ 0
principalTable
„„ &
:
„„& '
Flowers
„„( /
,
„„/ 0
principalColumn
‰‰ '
:
‰‰' (
$str
‰‰) 3
,
‰‰3 4
onDelete
ÂÂ  
:
ÂÂ  !
ReferentialAction
ÂÂ" 3
.
ÂÂ3 4
Cascade
ÂÂ4 ;
)
ÂÂ; <
;
ÂÂ< =
table
ÊÊ 
.
ÊÊ 

ForeignKey
ÊÊ $
(
ÊÊ$ %
name
ÁÁ 
:
ÁÁ 
$str
ÁÁ >
,
ÁÁ> ?
column
ËË 
:
ËË 
x
ËË  !
=>
ËË" $
x
ËË% &
.
ËË& '
OrderId
ËË' .
,
ËË. /
principalTable
ÈÈ &
:
ÈÈ& '
$str
ÈÈ( 0
,
ÈÈ0 1
principalColumn
ÍÍ '
:
ÍÍ' (
$str
ÍÍ) 2
,
ÍÍ2 3
onDelete
ÎÎ  
:
ÎÎ  !
ReferentialAction
ÎÎ" 3
.
ÎÎ3 4
Cascade
ÎÎ4 ;
)
ÎÎ; <
;
ÎÎ< =
}
ÏÏ 
)
ÏÏ 
;
ÏÏ 
migrationBuilder
ÓÓ 
.
ÓÓ 
CreateTable
ÓÓ (
(
ÓÓ( )
name
ÔÔ 
:
ÔÔ 
$str
ÔÔ )
,
ÔÔ) *
columns
 
:
 
table
 
=>
 !
new
" %
{
ÒÒ  
ShoppingCartItemId
ÚÚ &
=
ÚÚ' (
table
ÚÚ) .
.
ÚÚ. /
Column
ÚÚ/ 5
<
ÚÚ5 6
int
ÚÚ6 9
>
ÚÚ9 :
(
ÚÚ: ;
nullable
ÚÚ; C
:
ÚÚC D
false
ÚÚE J
)
ÚÚJ K
.
ÛÛ 

Annotation
ÛÛ #
(
ÛÛ# $%
ValueGenerationStrategy
ÛÛ$ ;
,
ÛÛ; <.
 SqlServerValueGenerationStrategy
ÛÛ= ]
.
ÛÛ] ^
IdentityColumn
ÛÛ^ l
)
ÛÛl m
,
ÛÛm n
FlowerId
ÙÙ 
=
ÙÙ 
table
ÙÙ $
.
ÙÙ$ %
Column
ÙÙ% +
<
ÙÙ+ ,
int
ÙÙ, /
>
ÙÙ/ 0
(
ÙÙ0 1
nullable
ÙÙ1 9
:
ÙÙ9 :
true
ÙÙ; ?
)
ÙÙ? @
,
ÙÙ@ A
Amount
ıı 
=
ıı 
table
ıı "
.
ıı" #
Column
ıı# )
<
ıı) *
int
ıı* -
>
ıı- .
(
ıı. /
nullable
ıı/ 7
:
ıı7 8
false
ıı9 >
)
ıı> ?
,
ıı? @
ShoppingCartId
ˆˆ "
=
ˆˆ# $
table
ˆˆ% *
.
ˆˆ* +
Column
ˆˆ+ 1
<
ˆˆ1 2
string
ˆˆ2 8
>
ˆˆ8 9
(
ˆˆ9 :
nullable
ˆˆ: B
:
ˆˆB C
true
ˆˆD H
)
ˆˆH I
}
˜˜ 
,
˜˜ 
constraints
¯¯ 
:
¯¯ 
table
¯¯ "
=>
¯¯# %
{
˘˘ 
table
˙˙ 
.
˙˙ 

PrimaryKey
˙˙ $
(
˙˙$ %
$str
˙˙% ;
,
˙˙; <
x
˙˙= >
=>
˙˙? A
x
˙˙B C
.
˙˙C D 
ShoppingCartItemId
˙˙D V
)
˙˙V W
;
˙˙W X
table
˚˚ 
.
˚˚ 

ForeignKey
˚˚ $
(
˚˚$ %
name
¸¸ 
:
¸¸ 
$str
¸¸ E
,
¸¸E F
column
˝˝ 
:
˝˝ 
x
˝˝  !
=>
˝˝" $
x
˝˝% &
.
˝˝& '
FlowerId
˝˝' /
,
˝˝/ 0
principalTable
˛˛ &
:
˛˛& '
Flowers
˛˛( /
,
˛˛/ 0
principalColumn
ˇˇ '
:
ˇˇ' (
	Flower_Id
ˇˇ) 2
,
ˇˇ2 3
onDelete
ÄÄ  
:
ÄÄ  !
ReferentialAction
ÄÄ" 3
.
ÄÄ3 4
Restrict
ÄÄ4 <
)
ÄÄ< =
;
ÄÄ= >
}
ÅÅ 
)
ÅÅ 
;
ÅÅ 
migrationBuilder
ÉÉ 
.
ÉÉ 
CreateIndex
ÉÉ (
(
ÉÉ( )
name
ÑÑ 
:
ÑÑ 
$str
ÑÑ 2
,
ÑÑ2 3
table
ÖÖ 
:
ÖÖ 
$str
ÖÖ )
,
ÖÖ) *
column
ÜÜ 
:
ÜÜ 
$str
ÜÜ  
)
ÜÜ  !
;
ÜÜ! "
migrationBuilder
àà 
.
àà 
CreateIndex
àà (
(
àà( )
name
ââ 
:
ââ 
$str
ââ %
,
ââ% &
table
ää 
:
ää 
AspNetRoles
ää "
,
ää" #
column
ãã 
:
ãã 
$str
ãã (
,
ãã( )
unique
åå 
:
åå 
true
åå 
,
åå 
filter
çç 
:
çç 
$str
çç 6
)
çç6 7
;
çç7 8
migrationBuilder
èè 
.
èè 
CreateIndex
èè (
(
èè( )
name
êê 
:
êê 
$str
êê 2
,
êê2 3
table
ëë 
:
ëë 
$str
ëë )
,
ëë) *
column
íí 
:
íí 
$str
íí  
)
íí  !
;
íí! "
migrationBuilder
îî 
.
îî 
CreateIndex
îî (
(
îî( )
name
ïï 
:
ïï 
$str
ïï 2
,
ïï2 3
table
ññ 
:
ññ 
$str
ññ )
,
ññ) *
column
óó 
:
óó 
$str
óó  
)
óó  !
;
óó! "
migrationBuilder
ôô 
.
ôô 
CreateIndex
ôô (
(
ôô( )
name
öö 
:
öö 
$str
öö 1
,
öö1 2
table
õõ 
:
õõ 
$str
õõ (
,
õõ( )
column
úú 
:
úú 
$str
úú  
)
úú  !
;
úú! "
migrationBuilder
ûû 
.
ûû 
CreateIndex
ûû (
(
ûû( )
name
üü 
:
üü 
$str
üü "
,
üü" #
table
†† 
:
†† 
AspNetUsers
†† "
,
††" #
column
°° 
:
°° 
$str
°° )
)
°°) *
;
°°* +
migrationBuilder
££ 
.
££ 
CreateIndex
££ (
(
££( )
name
§§ 
:
§§ 
$str
§§ %
,
§§% &
table
•• 
:
•• 
AspNetUsers
•• "
,
••" #
column
¶¶ 
:
¶¶ 
$str
¶¶ ,
,
¶¶, -
unique
ßß 
:
ßß 
true
ßß 
,
ßß 
filter
®® 
:
®® 
$str
®® :
)
®®: ;
;
®®; <
migrationBuilder
™™ 
.
™™ 
CreateIndex
™™ (
(
™™( )
name
´´ 
:
´´ 
$str
´´ -
,
´´- .
table
¨¨ 
:
¨¨ 
Flowers
¨¨ 
,
¨¨ 
column
≠≠ 
:
≠≠ 
$str
≠≠ $
)
≠≠$ %
;
≠≠% &
migrationBuilder
ØØ 
.
ØØ 
CreateIndex
ØØ (
(
ØØ( )
name
∞∞ 
:
∞∞ 
$str
∞∞ 0
,
∞∞0 1
table
±± 
:
±± 
OrderDetails
±± #
,
±±# $
column
≤≤ 
:
≤≤ 
	Flower_Id
≤≤ !
)
≤≤! "
;
≤≤" #
migrationBuilder
¥¥ 
.
¥¥ 
CreateIndex
¥¥ (
(
¥¥( )
name
µµ 
:
µµ 
$str
µµ /
,
µµ/ 0
table
∂∂ 
:
∂∂ 
OrderDetails
∂∂ #
,
∂∂# $
column
∑∑ 
:
∑∑ 
$str
∑∑ !
)
∑∑! "
;
∑∑" #
migrationBuilder
ππ 
.
ππ 
CreateIndex
ππ (
(
ππ( )
name
∫∫ 
:
∫∫ 
$str
∫∫ 5
,
∫∫5 6
table
ªª 
:
ªª 
$str
ªª *
,
ªª* +
column
ºº 
:
ºº 
	Flower_Id
ºº !
)
ºº! "
;
ºº" #
}
ΩΩ 	
	protected
øø 
override
øø 
void
øø 
Down
øø  $
(
øø$ %
MigrationBuilder
øø% 5
migrationBuilder
øø6 F
)
øøF G
{
¿¿ 	
migrationBuilder
¡¡ 
.
¡¡ 
	DropTable
¡¡ &
(
¡¡& '
name
¬¬ 
:
¬¬ 
$str
¬¬ (
)
¬¬( )
;
¬¬) *
migrationBuilder
ƒƒ 
.
ƒƒ 
	DropTable
ƒƒ &
(
ƒƒ& '
name
≈≈ 
:
≈≈ 
$str
≈≈ (
)
≈≈( )
;
≈≈) *
migrationBuilder
«« 
.
«« 
	DropTable
«« &
(
««& '
name
»» 
:
»» 
$str
»» (
)
»»( )
;
»») *
migrationBuilder
   
.
   
	DropTable
   &
(
  & '
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ '
)
ÀÀ' (
;
ÀÀ( )
migrationBuilder
ÕÕ 
.
ÕÕ 
	DropTable
ÕÕ &
(
ÕÕ& '
name
ŒŒ 
:
ŒŒ 
$str
ŒŒ (
)
ŒŒ( )
;
ŒŒ) *
migrationBuilder
–– 
.
–– 
	DropTable
–– &
(
––& '
name
—— 
:
—— 
OrderDetails
—— "
)
——" #
;
——# $
migrationBuilder
”” 
.
”” 
	DropTable
”” &
(
””& '
name
‘‘ 
:
‘‘ 
$str
‘‘ )
)
‘‘) *
;
‘‘* +
migrationBuilder
÷÷ 
.
÷÷ 
	DropTable
÷÷ &
(
÷÷& '
name
◊◊ 
:
◊◊ 
AspNetRoles
◊◊ !
)
◊◊! "
;
◊◊" #
migrationBuilder
ŸŸ 
.
ŸŸ 
	DropTable
ŸŸ &
(
ŸŸ& '
name
⁄⁄ 
:
⁄⁄ 
AspNetUsers
⁄⁄ !
)
⁄⁄! "
;
⁄⁄" #
migrationBuilder
‹‹ 
.
‹‹ 
	DropTable
‹‹ &
(
‹‹& '
name
›› 
:
›› 
$str
›› 
)
›› 
;
››  
migrationBuilder
ﬂﬂ 
.
ﬂﬂ 
	DropTable
ﬂﬂ &
(
ﬂﬂ& '
name
‡‡ 
:
‡‡ 
Flowers
‡‡ 
)
‡‡ 
;
‡‡ 
migrationBuilder
‚‚ 
.
‚‚ 
	DropTable
‚‚ &
(
‚‚& '
name
„„ 
:
„„ 
$str
„„ "
)
„„" #
;
„„# $
}
‰‰ 	
}
ÂÂ 
}ÊÊ ¸

SE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191209173625_AddFavorite.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
AddFavorite $
:% &
	Migration' 0
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
	AddColumn &
<& '
bool' +
>+ ,
(, -
name 
: 
$str "
," #
table 
: 
$str  
,  !
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str  
)  !
;! "
} 	
} 
} ”
aE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182401_ShippingAndPaymentMethods.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class %
ShippingAndPaymentMethods 2
:3 4
	Migration5 >
{ 
private		 
const		 
string		 
Orders		 #
=		$ %
$str		& .
;		. /
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str "
," #
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str !
,! "
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name   
:   
$str   &
,  & '
table!! 
:!! 
Orders!! 
,!! 
	maxLength"" 
:"" 
$num"" 
,"" 
nullable## 
:## 
false## 
,##  
defaultValue$$ 
:$$ 
$str$$  
)$$  !
;$$! "
}%% 	
	protected'' 
override'' 
void'' 
Down''  $
(''$ %
MigrationBuilder''% 5
migrationBuilder''6 F
)''F G
{(( 	
migrationBuilder)) 
.)) 

DropColumn)) '
())' (
name++ 
:++ 
$str++ "
,++" #
table,, 
:,, 
Orders,, 
),, 
;,, 
migrationBuilder.. 
... 

DropColumn.. '
(..' (
name00 
:00 
$str00 !
,00! "
table11 
:11 
Orders11 
)11 
;11 
migrationBuilder33 
.33 

DropColumn33 '
(33' (
name55 
:55 
$str55 &
,55& '
table66 
:66 
Orders66 
)66 
;66 
}77 	
}88 
}99 á&
bE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182629_ShippingAndPaymentMethods1.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class &
ShippingAndPaymentMethods1 3
:4 5
	Migration6 ?
{ 
private		 
const		 
string		 
Orders		 #
=		$ %
$str		& .
;		. /
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
,  
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
,  
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder!! 
.!! 
AlterColumn!! (
<!!( )
string!!) /
>!!/ 0
(!!0 1
name## 
:## 
$str## $
,##$ %
table%% 
:%% 
Orders%% 
,%% 
	maxLength&& 
:&& 
$num&& 
,&& 
nullable'' 
:'' 
true'' 
,'' 

oldClrType(( 
:(( 
typeof(( "
(((" #
string((# )
)(() *
,((* +
oldMaxLength)) 
:)) 
$num)) !
)))! "
;))" #
}** 	
	protected,, 
override,, 
void,, 
Down,,  $
(,,$ %
MigrationBuilder,,% 5
migrationBuilder,,6 F
),,F G
{-- 	
migrationBuilder// 
.// 
AlterColumn// (
<//( )
string//) /
>/// 0
(//0 1
name11 
:11 
$str11 
,11  
table33 
:33 
Orders33 
,33 
	maxLength44 
:44 
$num44 
,44 
nullable55 
:55 
false55 
,55  

oldClrType66 
:66 
typeof66 "
(66" #
string66# )
)66) *
,66* +
oldMaxLength77 
:77 
$num77  
,77  !
oldNullable88 
:88 
true88 !
)88! "
;88" #
migrationBuilder:: 
.:: 
AlterColumn:: (
<::( )
string::) /
>::/ 0
(::0 1
name<< 
:<< 
$str<< 
,<<  
table>> 
:>> 
Orders>> 
,>> 
	maxLength?? 
:?? 
$num?? 
,?? 
nullable@@ 
:@@ 
false@@ 
,@@  

oldClrTypeAA 
:AA 
typeofAA "
(AA" #
stringAA# )
)AA) *
,AA* +
oldMaxLengthBB 
:BB 
$numBB  
,BB  !
oldNullableCC 
:CC 
trueCC !
)CC! "
;CC" #
migrationBuilderEE 
.EE 
AlterColumnEE (
<EE( )
stringEE) /
>EE/ 0
(EE0 1
nameGG 
:GG 
$strGG $
,GG$ %
tableII 
:II 
OrdersII 
,II 
	maxLengthJJ 
:JJ 
$numJJ 
,JJ 
nullableKK 
:KK 
falseKK 
,KK  

oldClrTypeLL 
:LL 
typeofLL "
(LL" #
stringLL# )
)LL) *
,LL* +
oldMaxLengthMM 
:MM 
$numMM !
,MM! "
oldNullableNN 
:NN 
trueNN !
)NN! "
;NN" #
}OO 	
}PP 
}QQ Ô

NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191212095803_Order2.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Order2 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str $
,$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
)  
;  !
} 	
} 
} ∫
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\AppDbContext.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
AppDbContext 
: 
IdentityDbContext  1
<1 2
ApplicationUser2 A
>A B
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
DbSet 
< 
Category 
> 

Categories )
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
Flower 
> 
Flowers $
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
ShoppingCartItem %
>% &
ShoppingCartItems' 8
{ 	
get   
;   
set!! 
;!! 
}"" 	
public%% 
DbSet%% 
<%% 
Order%% 
>%% 
Orders%% "
{&& 	
get'' 
;'' 
set(( 
;(( 
})) 	
public,, 
DbSet,, 
<,, 
OrderDetail,,  
>,,  !
OrderDetails,," .
{-- 	
get.. 
;.. 
set// 
;// 
}00 	
}11 
}22 ®
=E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Category.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Category 
{		 
public 
int 

CategoryId 
{ 	
get 
; 
set 
; 
} 	
public 
string 
CategoryName "
{ 	
get 
; 
set 
; 
} 	
public 
string 
Description !
{ 	
get 
; 
set 
; 
} 	
public 
List 
< 
Flower 
> 
Flowers #
{ 	
get 
; 
set   
;   
}!! 	
}"" 
}## ∂l
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\DbInitializer.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

static 
class 
DbInitializer %
{		 
private 
const 
string 
SingleFlower )
=* +
$str, ;
;; <
private 
const 
string 
BouquetOfFlowers -
=. /
$str0 D
;D E
private 
const 
string 
SeasonalFlowers ,
=- .
$str/ A
;A B
public 
static 
void 
Seed 
(  
IApplicationBuilder  3
applicationBuilder4 F
)F G
{ 	
using 
( 
var 
serviceScope #
=$ %
applicationBuilder& 8
.8 9
ApplicationServices9 L
.L M
CreateScopeM X
(X Y
)Y Z
)Z [
{ 
AppDbContext 
context $
=% &
serviceScope' 3
.3 4
ServiceProvider4 C
.C D

GetServiceD N
<N O
AppDbContextO [
>[ \
(\ ]
)] ^
;^ _
if 
( 
! 
context 
. 

Categories '
.' (
Any( +
(+ ,
), -
)- .
{ 
context 
. 

Categories &
.& '
AddRange' /
(/ 0

Categories0 :
.: ;
Select; A
(A B
cB C
=>D F
cG H
.H I
ValueI N
)N O
)O P
;P Q
} 
if 
( 
! 
context 
. 
Flowers $
.$ %
Any% (
(( )
)) *
)* +
{ 
context 
. 
AddRange $
( 
new   
Flower   "
{!! 
Name##  
=##! "
$str### )
,##) *
Price%% !
=%%" #
$num%%$ *
,%%* +
ShortDescription'' ,
=''- .
$str''/ =
,''= >
LongDescription)) +
=)), -
$str)-. R
,--R S
Category// $
=//% &

Categories//' 1
[//1 2
SingleFlower//2 >
]//> ?
,//? @
ImageUrl11 $
=11% &
$str	11' É
,
11É Ñ
InStock33 #
=33$ %
true33& *
,33* +
ImageThumbnailUrl55 -
=55. /
$str550 2
+553 4
$str66 x
,66x y 
IsFlowerPresentation88 0
=881 2
true883 7
}99 
,99 
new;; 
Flower;; "
{<< 
Name>>  
=>>! "
$str>># )
,>>) *
Price@@ !
=@@" #
$num@@$ *
,@@* +
ShortDescriptionBB ,
=BB- .
$strBB/ D
,BBD E
LongDescriptionDD +
=DD, -
$strDF. p
,FFp q
CategoryHH $
=HH% &

CategoriesHH' 1
[HH1 2
SingleFlowerHH2 >
]HH> ?
,HH? @
ImageUrlJJ $
=JJ% &
$strJJ' v
,JJv w
InStockLL #
=LL$ %
trueLL& *
,LL* +
ImageThumbnailUrlNN -
=NN. /
$strNN0 
,	NN Ä 
IsFlowerPresentationPP 0
=PP1 2
falsePP3 8
}QQ 
,QQ 
newSS 
FlowerSS "
{TT 
NameVV  
=VV! "
$strVV# *
,VV* +
PriceXX !
=XX" #
$numXX$ *
,XX* +
ShortDescriptionZZ ,
=ZZ- .
$strZZ/ C
,ZZC D
LongDescription\\ +
=\\, -
$str	\]. Ç
,
]]Ç É
Category__ $
=__% &

Categories__' 1
[__1 2
SingleFlower__2 >
]__> ?
,__? @
ImageUrlaa $
=aa% &
$straa' u
,aau v
InStockcc #
=cc$ %
truecc& *
,cc* +
ImageThumbnailUrlee -
=ee. /
$stree0 ~
,ee~  
IsFlowerPresentationgg 0
=gg1 2
falsegg3 8
}hh 
,hh 
newjj 
Flowerjj "
{kk 
Namemm  
=mm! "
$strmm# 5
,mm5 6
Priceoo !
=oo" #
$numoo$ *
,oo* +
ShortDescriptionqq ,
=qq- .
$strqq/ :
,qq: ;
LongDescriptionss +
=ss, -
$str	s}. Å
,
}}Å Ç
Category $
=% &

Categories' 1
[1 2
BouquetOfFlowers2 B
]B C
,C D
ImageUrl
ÅÅ $
=
ÅÅ% &
$str
ÅÅ' j
,
ÅÅj k
InStock
ÉÉ #
=
ÉÉ$ %
true
ÉÉ& *
,
ÉÉ* +
ImageThumbnailUrl
ÖÖ -
=
ÖÖ. /
$str
ÖÖ0 s
,
ÖÖs t"
IsFlowerPresentation
áá 0
=
áá1 2
true
áá3 7
}
àà 
,
àà 
new
ää 
Flower
ää "
{
ãã 
Name
çç  
=
çç! "
$str
çç# -
,
çç- .
Price
èè !
=
èè" #
$num
èè$ *
,
èè* +
ShortDescription
ëë ,
=
ëë- .
$str
ëë/ >
,
ëë> ?
LongDescription
ìì +
=
ìì, -
$str
ìô. d
,
ôôd e
Category
õõ $
=
õõ% &

Categories
õõ' 1
[
õõ1 2
SeasonalFlowers
õõ2 A
]
õõA B
,
õõB C
ImageUrl
ùù $
=
ùù% &
$str
ùù' c
,
ùùc d
InStock
üü #
=
üü$ %
true
üü& *
,
üü* +
ImageThumbnailUrl
°° -
=
°°. /
$str
°°0 l
,
°°l m"
IsFlowerPresentation
££ 0
=
££1 2
false
££3 8
}
§§ 
,
§§ 
new
¶¶ 
Flower
¶¶ "
{
ßß 
Name
©©  
=
©©! "
$str
©©# *
,
©©* +
Price
´´ !
=
´´" #
$num
´´$ *
,
´´* +
ShortDescription
≠≠ ,
=
≠≠- .
$str
≠≠/ >
,
≠≠> ?
LongDescription
ØØ +
=
ØØ, -
$str
Ø∑. x
,
∑∑x y
Category
ππ $
=
ππ% &

Categories
ππ' 1
[
ππ1 2
SeasonalFlowers
ππ2 A
]
ππA B
,
ππB C
ImageUrl
ªª $
=
ªª% &
$str
ªª' N
,
ªªN O
InStock
ΩΩ #
=
ΩΩ$ %
true
ΩΩ& *
,
ΩΩ* +
ImageThumbnailUrl
øø -
=
øø. /
$str
øø0 W
,
øøW X"
IsFlowerPresentation
¡¡ 0
=
¡¡1 2
false
¡¡3 8
}
¬¬ 
,
¬¬ 
new
ƒƒ 
Flower
ƒƒ "
{
≈≈ 
Name
««  
=
««! "
$str
««# =
,
««= >
Price
…… !
=
……" #
$num
……$ *
,
……* +
ShortDescription
ÀÀ ,
=
ÀÀ- .
$str
ÀÀ/ >
,
ÀÀ> ?
LongDescription
ÕÕ +
=
ÕÕ, -
$strÕœ. É
,œœÉ Ñ
Category
—— $
=
——% &

Categories
——' 1
[
——1 2
$str
——2 F
]
——F G
,
——G H
ImageUrl
”” $
=
””% &
$str
””' g
,
””g h
InStock
’’ #
=
’’$ %
true
’’& *
,
’’* +
ImageThumbnailUrl
◊◊ -
=
◊◊. /
$str
◊◊0 p
,
◊◊p q"
IsFlowerPresentation
ŸŸ 0
=
ŸŸ1 2
true
ŸŸ3 7
}
⁄⁄ 
,
⁄⁄ 
new
‹‹ 
Flower
‹‹ "
{
›› 
Name
ﬂﬂ  
=
ﬂﬂ! "
$str
ﬂﬂ# *
,
ﬂﬂ* +
Price
·· !
=
··" #
$num
··$ *
,
··* +
ShortDescription
„„ ,
=
„„- .
$str
„„/ E
,
„„E F
LongDescription
ÂÂ +
=
ÂÂ, -
$str
ÂÈ. a
,
ÈÈa b
Category
ÎÎ $
=
ÎÎ% &

Categories
ÎÎ' 1
[
ÎÎ1 2
SeasonalFlowers
ÎÎ2 A
]
ÎÎA B
,
ÎÎB C
ImageUrl
ÌÌ $
=
ÌÌ% &
$strÓÓ à
,ÓÓà â
InStock
 #
=
$ %
true
& *
,
* +
ImageThumbnailUrl
ÚÚ -
=
ÚÚ. /
$strÛÛ à
,ÛÛà â"
IsFlowerPresentation
ıı 0
=
ıı1 2
true
ıı3 7
}
ˆˆ 
,
ˆˆ 
new
¯¯ 
Flower
¯¯ "
{
˘˘ 
Name
˚˚  
=
˚˚! "
$str
˚˚# 2
,
˚˚2 3
Price
˝˝ !
=
˝˝" #
$num
˝˝$ *
,
˝˝* +
ShortDescription
ˇˇ ,
=
ˇˇ- .
$str
ˇˇ/ J
,
ˇˇJ K
LongDescription
ÅÅ +
=
ÅÅ, -
$str
ÅÖ. `
,
ÖÖ` a
Category
áá $
=
áá% &

Categories
áá' 1
[
áá1 2
BouquetOfFlowers
áá2 B
]
ááB C
,
ááC D
ImageUrl
ââ $
=
ââ% &
$strää à
,ääà â
InStock
åå #
=
åå$ %
true
åå& *
,
åå* +
ImageThumbnailUrl
éé -
=
éé. /
$strèè à
,èèà â"
IsFlowerPresentation
ëë 0
=
ëë1 2
false
ëë3 8
}
íí 
,
íí 
new
îî 
Flower
îî "
{
ïï 
Name
óó  
=
óó! "
$str
óó# 6
,
óó6 7
Price
ôô !
=
ôô" #
$num
ôô$ *
,
ôô* +
ShortDescription
õõ ,
=
õõ- .
$str
õõ/ >
,
õõ> ?
LongDescription
ùù +
=
ùù, -
$str
ù¢. k
,
¢¢k l
Category
§§ $
=
§§% &

Categories
§§' 1
[
§§1 2
BouquetOfFlowers
§§2 B
]
§§B C
,
§§C D
ImageUrl
¶¶ $
=
¶¶% &
$str
ßß D
+
ßßE F
$str
®® v
,
®®v w
InStock
™™ #
=
™™$ %
true
™™& *
,
™™* +
ImageThumbnailUrl
¨¨ -
=
¨¨. /
$str
≠≠ D
+
≠≠E F
$str
ÆÆ v
,
ÆÆv w"
IsFlowerPresentation
∞∞ 0
=
∞∞1 2
false
∞∞3 8
}
±± 
,
±± 
new
≥≥ 
Flower
≥≥ "
{
¥¥ 
Name
∂∂  
=
∂∂! "
$str
∂∂# 2
,
∂∂2 3
Price
∏∏ !
=
∏∏" #
$num
∏∏$ *
,
∏∏* +
ShortDescription
∫∫ ,
=
∫∫- .
$str
∫∫/ G
,
∫∫G H
LongDescription
ºº +
=
ºº, -
$str
º∆. `
,
∆∆` a
Category
»» $
=
»»% &

Categories
»»' 1
[
»»1 2
SingleFlower
»»2 >
]
»»> ?
,
»»? @
ImageUrl
   $
=
  % &
$str
  ' w
,
  w x
InStock
ÃÃ #
=
ÃÃ$ %
true
ÃÃ& *
,
ÃÃ* +
ImageThumbnailUrl
ŒŒ -
=
ŒŒ. /
$strŒŒ0 Ä
,ŒŒÄ Å"
IsFlowerPresentation
–– 0
=
––1 2
false
––3 8
}
—— 
)
““ 
;
““ 
}
”” 
context
’’ 
.
’’ 
SaveChanges
’’ #
(
’’# $
)
’’$ %
;
’’% &
}
÷÷ 
}
◊◊ 	
private
ŸŸ 
static
ŸŸ 

Dictionary
ŸŸ !
<
ŸŸ! "
string
ŸŸ" (
,
ŸŸ( )
Category
ŸŸ* 2
>
ŸŸ2 3

categories
ŸŸ4 >
;
ŸŸ> ?
public
⁄⁄ 
static
⁄⁄ 

Dictionary
⁄⁄  
<
⁄⁄  !
string
⁄⁄! '
,
⁄⁄' (
Category
⁄⁄) 1
>
⁄⁄1 2

Categories
⁄⁄3 =
{
€€ 	
get
‹‹ 
{
›› 
if
ﬁﬁ 
(
ﬁﬁ 

categories
ﬁﬁ 
==
ﬁﬁ !
null
ﬁﬁ" &
)
ﬁﬁ& '
{
ﬂﬂ 
var
‡‡ 

genresList
‡‡ "
=
‡‡# $
new
‡‡% (
Category
‡‡) 1
[
‡‡1 2
]
‡‡2 3
{
·· 
new
„„ 
Category
„„ $
{
„„% &
CategoryName
„„' 3
=
„„4 5
SingleFlower
„„6 B
}
„„C D
,
„„D E
new
‰‰ 
Category
‰‰ $
{
‰‰% &
CategoryName
‰‰' 3
=
‰‰4 5
BouquetOfFlowers
‰‰6 F
}
‰‰G H
,
‰‰H I
new
ÂÂ 
Category
ÂÂ $
{
ÂÂ% &
CategoryName
ÂÂ' 3
=
ÂÂ4 5
SeasonalFlowers
ÂÂ6 E
}
ÂÂF G
}
ÊÊ 
;
ÊÊ 

categories
ËË 
=
ËË  
new
ËË! $

Dictionary
ËË% /
<
ËË/ 0
string
ËË0 6
,
ËË6 7
Category
ËË8 @
>
ËË@ A
(
ËËA B
)
ËËB C
;
ËËC D
foreach
ÍÍ 
(
ÍÍ 
Category
ÍÍ %
genre
ÍÍ& +
in
ÍÍ, .

genresList
ÍÍ/ 9
)
ÍÍ9 :
{
ÎÎ 

categories
ÏÏ "
.
ÏÏ" #
Add
ÏÏ# &
(
ÏÏ& '
genre
ÏÏ' ,
.
ÏÏ, -
CategoryName
ÏÏ- 9
,
ÏÏ9 :
genre
ÏÏ; @
)
ÏÏ@ A
;
ÏÏA B
}
ÌÌ 
}
ÓÓ 
return
 

categories
 !
;
! "
}
ÒÒ 
}
ÚÚ 	
}
ÛÛ 
}ÙÙ ˚
;E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Flower.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Flower 
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
Name		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public 
string 
ShortDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public!! 
virtual!! 
Category!! 
Category!!  (
{!!) *
get!!+ .
;!!. /
set!!0 3
;!!3 4
}!!5 6
public$$ 
bool$$  
IsFlowerPresentation$$ (
{$$) *
get$$+ .
;$$. /
set$$0 3
;$$3 4
}$$5 6
public'' 
bool'' 

IsFavorite'' 
{''  
get''! $
;''$ %
set''& )
;'') *
}''+ ,
}(( 
})) Ö6
:E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Order.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Order 
{		 
[

 	
	BindNever

	 
]

 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
OrderDetail 
>  

OrderLines! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ?
)? @
]@ A
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[!! 	
StringLength!!	 
(!! 
$num!! 
)!! 
]!! 
public"" 
string"" 
ShippingMethod"" $
{""% &
get""' *
;""* +
set"", /
;""/ 0
}""1 2
[&& 	
StringLength&&	 
(&& 
$num&& 
)&& 
]&& 
[(( 	
Display((	 
((( 
Name(( 
=(( 
$str(( (
)((( )
](() *
public)) 
string)) 
AddressLine1)) "
{))# $
get))% (
;))( )
set))* -
;))- .
}))/ 0
[,, 	
Display,,	 
(,, 
Name,, 
=,, 
$str,, (
),,( )
],,) *
public-- 
string-- 
AddressLine2-- "
{--# $
get--% (
;--( )
set--* -
;--- .
}--/ 0
[11 	
Display11	 
(11 
Name11 
=11 
$str11 "
)11" #
]11# $
[33 	
StringLength33	 
(33 
$num33 
,33 
MinimumLength33 '
=33( )
$num33* +
)33+ ,
]33, -
public44 
string44 
ZipCode44 
{44 
get44  #
;44# $
set44% (
;44( )
}44* +
[77 	
Required77	 
(77 
ErrorMessage77 
=77  
$str77! 9
)779 :
]77: ;
[99 	
StringLength99	 
(99 
$num99 
)99 
]99 
public:: 
string:: 
City:: 
{:: 
get::  
;::  !
set::" %
;::% &
}::' (
[== 	
StringLength==	 
(== 
$num== 
)== 
]== 
public>> 
string>> 
State>> 
{>> 
get>> !
;>>! "
set>># &
;>>& '
}>>( )
[BB 	
StringLengthBB	 
(BB 
$numBB 
)BB 
]BB 
publicCC 
stringCC 
CountryCC 
{CC 
getCC  #
;CC# $
setCC% (
;CC( )
}CC* +
[FF 	
RequiredFF	 
(FF 
ErrorMessageFF 
=FF  
$strFF! A
)FFA B
]FFB C
[HH 	
StringLengthHH	 
(HH 
$numHH 
)HH 
]HH 
[II 	
DataTypeII	 
(II 
DataTypeII 
.II 
PhoneNumberII &
)II& '
]II' (
[JJ 	
DisplayJJ	 
(JJ 
NameJJ 
=JJ 
$strJJ &
)JJ& '
]JJ' (
publicKK 
stringKK 
PhoneNumberKK !
{KK" #
getKK$ '
;KK' (
setKK) ,
;KK, -
}KK. /
[MM 	
RequiredMM	 
]MM 
[NN 	
StringLengthNN	 
(NN 
$numNN 
)NN 
]NN 
[OO 	
DataTypeOO	 
(OO 
DataTypeOO 
.OO 
EmailAddressOO '
)OO' (
]OO( )
[PP 	
RegularExpressionPP	 
(PP 
$strPU ?
,UU? @
ErrorMessageVV 
=VV 
$strVV Q
)VVQ R
]VVR S
publicWW 
stringWW 
EmailWW 
{WW 
getWW !
;WW! "
setWW# &
;WW& '
}WW( )
[YY 	
	BindNeverYY	 
]YY 
[ZZ 	
ScaffoldColumnZZ	 
(ZZ 
falseZZ 
)ZZ 
]ZZ 
public[[ 
decimal[[ 

OrderTotal[[ !
{[[" #
get[[$ '
;[[' (
set[[) ,
;[[, -
}[[. /
[]] 	
	BindNever]]	 
]]] 
[^^ 	
ScaffoldColumn^^	 
(^^ 
false^^ 
)^^ 
]^^ 
public__ 
DateTime__ 
OrderPlaced__ #
{__$ %
get__& )
;__) *
set__+ .
;__. /
}__0 1
[aa 	
Requiredaa	 
]aa 
[bb 	
StringLengthbb	 
(bb 
$numbb 
)bb 
]bb 
publiccc 
stringcc 
	PayMethodcc 
{cc  !
getcc" %
;cc% &
setcc' *
;cc* +
}cc, -
[ee 	
StringLengthee	 
(ee 
$numee 
)ee 
]ee 
publicff 
stringff 

CardNumberff  
{ff! "
getff# &
;ff& '
setff( +
;ff+ ,
}ff- .
[hh 	
StringLengthhh	 
(hh 
$numhh 
)hh 
]hh 
publicii 
stringii 
SecurityCodeii "
{ii# $
getii% (
;ii( )
setii* -
;ii- .
}ii/ 0
}jj 
}kk Â

@E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\OrderDetail.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
OrderDetail 
{ 
public 
int 
OrderDetailId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public		 
int		 
OrderId		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Flower 
Flower $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
virtual 
Order 
Order "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ≈G
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCart.cs
	namespace 	
	FlowerApp
 
. 
Models 
{		 
public 

class 
ShoppingCart 
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
ShoppingCart 
( 
AppDbContext )
appDbContext* 6
)6 7
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
ShoppingCartItem $
>$ %
ShoppingCartItems& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
static 
ShoppingCart "
GetCart# *
(* +
IServiceProvider+ ;
services< D
)D E
{ 	
ISession 
session 
= 
services '
.' (
GetRequiredService( :
<: ; 
IHttpContextAccessor; O
>O P
(P Q
)Q R
?R S
. 
HttpContext 
. 
Session $
;$ %
var   
context   
=   
services   "
.  " #

GetService  # -
<  - .
AppDbContext  . :
>  : ;
(  ; <
)  < =
;  = >
string!! 
cartId!! 
=!! 
session!! #
.!!# $
	GetString!!$ -
(!!- .
$str!!. 6
)!!6 7
??!!8 :
Guid!!; ?
.!!? @
NewGuid!!@ G
(!!G H
)!!H I
.!!I J
ToString!!J R
(!!R S
)!!S T
;!!T U
session## 
.## 
	SetString## 
(## 
$str## &
,##& '
cartId##( .
)##. /
;##/ 0
return%% 
new%% 
ShoppingCart%% #
(%%# $
context%%$ +
)%%+ ,
{%%- .
ShoppingCartId%%/ =
=%%> ?
cartId%%@ F
}%%G H
;%%H I
}&& 	
public** 
void** 
	AddToCart** 
(** 
Flower** $
flower**% +
,**+ ,
int**- 0
amount**1 7
)**7 8
{++ 	
var-- 
shoppingCartItem--  
=--! "
_appDbContext.. !
...! "
ShoppingCartItems.." 3
...3 4
SingleOrDefault..4 C
(..C D
s// 
=>// 
s// 
.// 
Flower// %
.//% &
FlowerId//& .
==/// 1
flower//2 8
.//8 9
FlowerId//9 A
&&//B D
s//E F
.//F G
ShoppingCartId//G U
==//V X
ShoppingCartId//Y g
)//g h
;//h i
if11 
(11 
shoppingCartItem11  
==11! #
null11$ (
)11( )
{22 
shoppingCartItem77  
=77! "
new77# &
ShoppingCartItem77' 7
{88 
ShoppingCartId99 "
=99# $
ShoppingCartId99% 3
,993 4
Flower:: 
=:: 
flower:: #
,::# $
Amount;; 
=;; 
$num;; 
}<< 
;<< 
_appDbContext>> 
.>> 
ShoppingCartItems>> /
.>>/ 0
Add>>0 3
(>>3 4
shoppingCartItem>>4 D
)>>D E
;>>E F
}?? 
elseAA 
{BB 
ifII 
(II 
shoppingCartItemII $
.II$ %
AmountII% +
<II, -
$numII. /
)II/ 0
{JJ 
shoppingCartItemKK $
.KK$ %
AmountKK% +
=KK, -
amountKK. 4
+KK5 6
$numKK7 8
;KK8 9
}LL 
elseMM 
ifMM 
(MM 
shoppingCartItemMM )
.MM) *
AmountMM* 0
>MM1 2
$numMM3 4
)MM4 5
{NN 
shoppingCartItemOO $
.OO$ %
AmountOO% +
=OO, -
amountOO. 4
;OO4 5
}PP 
elseQQ 
{RR 
shoppingCartItemSS $
.SS$ %
AmountSS% +
+=SS, .
amountSS/ 5
;SS5 6
}TT 
}UU 
_appDbContextWW 
.WW 
SaveChangesWW %
(WW% &
)WW& '
;WW' (
}XX 	
public[[ 
int[[ 
RemoveFromCart[[ !
([[! "
Flower[[" (
flower[[) /
)[[/ 0
{\\ 	
var]] 
shoppingCartItem]]  
=]]! "
_appDbContext^^ !
.^^! "
ShoppingCartItems^^" 3
.^^3 4
SingleOrDefault^^4 C
(^^C D
s__ 
=>__ 
s__ 
.__ 
Flower__ %
.__% &
FlowerId__& .
==__/ 1
flower__2 8
.__8 9
FlowerId__9 A
&&__B D
s__E F
.__F G
ShoppingCartId__G U
==__V X
ShoppingCartId__Y g
)__g h
;__h i
varaa 
localAmountaa 
=aa 
$numaa 
;aa  
ifdd 
(dd 
shoppingCartItemdd  
!=dd! #
nulldd$ (
)dd( )
{ee 
ifff 
(ff 
shoppingCartItemff $
.ff$ %
Amountff% +
>ff, -
$numff. /
)ff/ 0
{gg 
shoppingCartItemii $
.ii$ %
Amountii% +
--ii+ -
;ii- .
localAmountjj 
=jj  !
shoppingCartItemjj" 2
.jj2 3
Amountjj3 9
;jj9 :
}kk 
elsell 
{mm 
_appDbContextnn !
.nn! "
ShoppingCartItemsnn" 3
.nn3 4
Removenn4 :
(nn: ;
shoppingCartItemnn; K
)nnK L
;nnL M
}oo 
}pp 
_appDbContextrr 
.rr 
SaveChangesrr %
(rr% &
)rr& '
;rr' (
returntt 
localAmounttt 
;tt 
}uu 	
publicxx 
Listxx 
<xx 
ShoppingCartItemxx $
>xx$ % 
GetShoppingCartItemsxx& :
(xx: ;
)xx; <
{yy 	
returnzz 
ShoppingCartItemszz $
??zz% '
({{ 
ShoppingCartItems{{ %
={{& '
_appDbContext|| $
.||$ %
ShoppingCartItems||% 6
.||6 7
Where||7 <
(||< =
c||= >
=>||? A
c||B C
.||C D
ShoppingCartId||D R
==||S U
ShoppingCartId||V d
)||d e
.}} 
Include}} #
(}}# $
s}}$ %
=>}}& (
s}}) *
.}}* +
Flower}}+ 1
)}}1 2
.~~ 
ToList~~ "
(~~" #
)~~# $
)~~$ %
;~~% &
} 	
public
ÇÇ 
void
ÇÇ 
	ClearCart
ÇÇ 
(
ÇÇ 
)
ÇÇ 
{
ÉÉ 	
var
ÖÖ 
	cartItems
ÖÖ 
=
ÖÖ 
_appDbContext
ÖÖ )
.
ÜÜ 
ShoppingCartItems
ÜÜ "
.
áá 
Where
áá 
(
áá 
cart
áá 
=>
áá 
cart
áá #
.
áá# $
ShoppingCartId
áá$ 2
==
áá3 5
ShoppingCartId
áá6 D
)
ááD E
;
ááE F
_appDbContext
ââ 
.
ââ 
ShoppingCartItems
ââ +
.
ââ+ ,
RemoveRange
ââ, 7
(
ââ7 8
	cartItems
ââ8 A
)
ââA B
;
ââB C
_appDbContext
ãã 
.
ãã 
SaveChanges
ãã %
(
ãã% &
)
ãã& '
;
ãã' (
}
åå 	
public
êê 
decimal
êê "
GetShoppingCartTotal
êê +
(
êê+ ,
)
êê, -
{
ëë 	
var
íí 
total
íí 
=
íí 
_appDbContext
íí %
.
íí% &
ShoppingCartItems
íí& 7
.
íí7 8
Where
íí8 =
(
íí= >
c
íí> ?
=>
íí@ B
c
ííC D
.
ííD E
ShoppingCartId
ííE S
==
ííT V
ShoppingCartId
ííW e
)
ííe f
.
ìì 
Select
ìì 
(
ìì 
c
ìì 
=>
ìì 
c
ìì 
.
ìì 
Flower
ìì %
.
ìì% &
Price
ìì& +
*
ìì, -
c
ìì. /
.
ìì/ 0
Amount
ìì0 6
)
ìì6 7
.
ìì7 8
Sum
ìì8 ;
(
ìì; <
)
ìì< =
;
ìì= >
return
îî 
total
îî 
;
îî 
}
ïï 	
}
ññ 
}óó â
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCartItem.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
ShoppingCartItem !
{ 
public 
int 
ShoppingCartItemId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public		 
Flower		 
Flower		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public 
int 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ¡
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Program.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} è
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\CategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class 
CategoryRepository #
:$ %
ICategoryRepository& 9
{		 
private

 
readonly

 
AppDbContext

 %
_appDbContext

& 3
;

3 4
public 
CategoryRepository !
(! "
AppDbContext" .
appDbContext/ ;
); <
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Category #
># $

Categories% /
=>0 2
_appDbContext3 @
.@ A

CategoriesA K
;K L
} 
} õ3
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\FlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class 
FlowerRepository !
:" #
IFlowerRepository$ 5
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public 
FlowerRepository 
(  
AppDbContext  ,
appDbContext- 9
)9 :
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Include- 4
(4 5
c5 6
=>7 9
c: ;
.; <
Category< D
)D E
;E F
} 
} 	
public 
IEnumerable 
< 
string !
>! "
FlowersNames# /
{   	
get"" 
{## 
return$$ 
_appDbContext$$ $
.$$$ %
Flowers$$% ,
.$$, -
Select$$- 3
($$3 4
x$$4 5
=>$$6 8
x$$9 :
.$$: ;
Name$$; ?
)$$? @
.$$@ A
ToList$$A G
($$G H
)$$H I
;$$I J
}%% 
}&& 	
public)) 
IEnumerable)) 
<)) 
Flower)) !
>))! "
FlowerPresentation))# 5
{** 	
get++ 
{,, 
return-- 
_appDbContext-- $
.--$ %
Flowers--% ,
.--, -
Include--- 4
(--4 5
c--5 6
=>--7 9
c--: ;
.--; <
Category--< D
)--D E
.--E F
Where--F K
(--K L
p--L M
=>--N P
p--Q R
.--R S 
IsFlowerPresentation--S g
)--g h
;--h i
}.. 
}// 	
public22 
Flower22 
GetFlowerById22 #
(22# $
int22$ '
flowerId22( 0
)220 1
{33 	
return44 
_appDbContext44  
.44  !
Flowers44! (
.44( )
FirstOrDefault44) 7
(447 8
f448 9
=>44: <
f44= >
.44> ?
FlowerId44? G
==44H J
flowerId44K S
)44S T
;44T U
}55 	
public88 
IEnumerable88 
<88 
FlowerViewModel88 *
>88* +
FlowersAsViewModel88, >
{99 	
get:: 
{;; 
List<< 
<<< 
FlowerViewModel<< $
><<$ %
flowers<<& -
=<<. /
new<<0 3
List<<4 8
<<<8 9
FlowerViewModel<<9 H
><<H I
(<<I J
)<<J K
;<<K L
foreach>> 
(>> 
var>> 
dbFlower>> %
in>>& (
Flowers>>) 0
)>>0 1
{?? 
flowers@@ 
.@@ 
Add@@ 
(@@  (
MapDbFlowerToFlowerViewModel@@  <
(@@< =
dbFlower@@= E
)@@E F
)@@F G
;@@G H
}AA 
returnCC 
flowersCC 
;CC 
}DD 
}EE 	
publicHH 
boolHH 
	AddFlowerHH 
(HH 
FlowerHH $
flowerHH% +
)HH+ ,
{II 	
varJJ 
resultJJ 
=JJ 
_appDbContextJJ &
.JJ& '
AddJJ' *
(JJ* +
flowerJJ+ 1
)JJ1 2
;JJ2 3
_appDbContextLL 
.LL 
SaveChangesLL %
(LL% &
)LL& '
;LL' (
returnNN 
resultNN 
.NN 
StateNN 
==NN  "
EntityStateNN# .
.NN. /
AddedNN/ 4
||NN5 7
resultNN8 >
.NN> ?
StateNN? D
==NNE G
EntityStateNNH S
.NNS T
	UnchangedNNT ]
?NN^ _
trueNN` d
:NNe f
falseNNg l
;NNl m
}OO 	
publicRR 
boolRR 
DeleteFlowerRR  
(RR  !
FlowerRR! '
flowerRR( .
)RR. /
{SS 	
varTT 
resultTT 
=TT 
_appDbContextTT &
.TT& '
RemoveTT' -
(TT- .
flowerTT. 4
)TT4 5
;TT5 6
_appDbContextVV 
.VV 
SaveChangesVV %
(VV% &
)VV& '
;VV' (
returnXX 
resultXX 
.XX 
StateXX 
==XX  "
EntityStateXX# .
.XX. /
DeletedXX/ 6
||XX7 9
resultXX: @
.XX@ A
StateXXA F
==XXG I
EntityStateXXJ U
.XXU V
	UnchangedXXV _
?XX` a
trueXXb f
:XXg h
falseXXi n
;XXn o
}YY 	
private\\ 
FlowerViewModel\\ (
MapDbFlowerToFlowerViewModel\\  <
(\\< =
Flower\\= C
dbFlower\\D L
)\\L M
{]] 	
return^^ 
new^^ 
FlowerViewModel^^ &
{__ 
FlowerIdaa 
=aa 
dbFloweraa #
.aa# $
FlowerIdaa$ ,
,aa, -
Namecc 
=cc 
dbFlowercc 
.cc  
Namecc  $
,cc$ %
Priceee 
=ee 
dbFloweree  
.ee  !
Priceee! &
,ee& '
ShortDescriptiongg  
=gg! "
dbFlowergg# +
.gg+ ,
ShortDescriptiongg, <
,gg< =
ImageThumbnailUrlii !
=ii" #
dbFlowerii$ ,
.ii, -
ImageThumbnailUrlii- >
}jj 
;jj 
}kk 	
publicnn 
boolnn 
UpdateFlowernn  
(nn  !
Flowernn! '
flowernn( .
)nn. /
{oo 	
_appDbContextqq 
.qq 
Updateqq  
(qq  !
flowerqq! '
)qq' (
;qq( )
_appDbContextss 
.ss 
SaveChangesss %
(ss% &
)ss& '
;ss' (
returnuu 
trueuu 
;uu 
}vv 	
}ww 
}xx »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ICategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
ICategoryRepository (
{		 
IEnumerable 
< 
Category 
> 

Categories (
{) *
get+ .
;. /
}0 1
} 
} ¿
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IFlowerRepository &
{		 
IEnumerable 
< 
Flower 
> 
Flowers #
{$ %
get& )
;) *
}+ ,
IEnumerable 
< 
Flower 
> 
FlowerPresentation .
{/ 0
get1 4
;4 5
}6 7
IEnumerable 
< 
FlowerViewModel #
># $
FlowersAsViewModel% 7
{ 	
get 
; 
} 	
IEnumerable 
< 
string 
> 
FlowersNames (
{ 	
get 
; 
} 	
Flower 
GetFlowerById 
( 
int  
flowerId! )
)) *
;* +
bool 
	AddFlower 
( 
Flower 
flower $
)$ %
;% &
bool!! 
DeleteFlower!! 
(!! 
Flower!!  
flower!!! '
)!!' (
;!!( )
bool$$ 
UpdateFlower$$ 
($$ 
Flower$$  
flower$$! '
)$$' (
;$$( )
}%% 
}&& ò
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IOrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IOrderRepository %
{		 
void 
CreateOrder 
( 
Order 
order $
)$ %
;% &
IEnumerable 
< (
OrderHistoryDetailsViewModel 0
>0 1 
GetOrdersAsViewModel2 F
(F G
stringG M
userNameN V
=W X
$strY [
)[ \
;\ ]
} 
} à
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelCategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class #
ModelCategoryRepository (
:) *
ICategoryRepository+ >
{ 
public 
IEnumerable 
< 
Category #
># $

Categories% /
{		 	
get

 
{ 
return 
new 
List 
<  
Category  (
>( )
{ 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 5
,5 6
Description #
=$ %
$str% 9
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& :
,: ;
Description #
=$ %
$str% 3
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 8
,8 9
Description #
=$ %
$str% M
} 
} 
; 
}   
}!! 	
}"" 
}## ô1
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 !
ModelFlowerRepository		 &
:		' (
IFlowerRepository		) :
{

 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
=A B
newC F#
ModelCategoryRepositoryG ^
(^ _
)_ `
;` a
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
new 
List 
<  
Flower  &
>& '
{ 
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name 
= 
$str %
,% &
Price 
= 
$num $
,$ %
ShortDescription (
=( )
$str) 7
,7 8
LongDescription '
=' (
$str( /
,/ 0
Category  
=! "
_categoryRepository# 6
.6 7

Categories7 A
.A B
ToListB H
(H I
)I J
[J K
$numK L
]L M
,M N
ImageUrl  
=! "
$str" g
,g h
InStocki p
=p q
trueq u
,u v
ImageThumbnailUrl )
=* +
$str+ p
}p q
,q r
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name   
=   
$str   &
,  & '
Price!! 
=!! 
$num!! $
,!!$ %
ShortDescription"" (
=""( )
$str"") 7
,""7 8
LongDescription## '
=##' (
$str##( 1
,##1 2
Category$$  
=$$! "
_categoryRepository$$# 6
.$$6 7

Categories$$7 A
.$$A B
ToList$$B H
($$H I
)$$I J
[$$J K
$num$$K L
]$$L M
,$$M N
ImageUrl%%  
=%%! "
$str	%%" Ä
,
%%Ä Å
InStock&& 
=&&  
true&&  $
,&&$ %
ImageThumbnailUrl'' )
=''* +
$str	''+ â
}
''â ä
,
''ä ã
new)) 
Flower)) 
{))  
FlowerId))  (
=))) *
$num))+ ,
,)), -
Name** 
=** 
$str** $
,**$ %
Price**& +
=**+ ,
$num**, 2
,**2 3
ShortDescription++ (
=++( )
$str++) 4
,++4 5
LongDescription,, '
=,,' (
$str,,( 3
,,,3 4
Category--  
=--! "
_categoryRepository--# 6
.--6 7

Categories--7 A
.--A B
ToList--B H
(--H I
)--I J
[--J K
$num--K L
]--L M
,--M N
ImageUrl..  
=..! "
$str.." s
,..s t
InStock..u |
=..| }
true	..} Å
,
..Å Ç
ImageThumbnailUrl// )
=//* +
$str//+ |
}//| }
,//} ~
new11 
Flower11 
{11  
FlowerId11  (
=11) *
$num11+ ,
,11, -
Name22 
=22 
$str22 %
,22% &
Price22' ,
=22, -
$num22- 3
,223 4
ShortDescription33 (
=33( )
$str33) 8
,338 9
LongDescription44 '
=44' (
$str44( 0
,440 1
Category55  
=55! "
_categoryRepository55# 6
.556 7

Categories557 A
.55A B
ToList55B H
(55H I
)55I J
[55J K
$num55K L
]55L M
,55M N
ImageUrl66  
=66! "
$str66" p
,66p q
InStock66r y
=66y z
true66z ~
,66~ 
ImageThumbnailUrl77 )
=77* +
$str77+ y
}77y z
}88 
;88 
}99 
}:: 	
public<< 
IEnumerable<< 
<<< 
Flower<< !
><<! "
FlowerPresentation<<# 5
{<<6 7
get<<8 ;
;<<; <
}<<= >
public>> 
IEnumerable>> 
<>> 
FlowerViewModel>> *
>>>* +
FlowersAsViewModel>>, >
=>>>? A
throw>>B G
new>>H K#
NotImplementedException>>L c
(>>c d
)>>d e
;>>e f
public@@ 
IEnumerable@@ 
<@@ 
string@@ !
>@@! "
FlowersNames@@# /
=>@@0 2
throw@@3 8
new@@9 <#
NotImplementedException@@= T
(@@T U
)@@U V
;@@V W
publicBB 
boolBB 
	AddFlowerBB 
(BB 
FlowerBB $
flowerBB% +
)BB+ ,
{CC 	
throwDD 
newDD #
NotImplementedExceptionDD -
(DD- .
)DD. /
;DD/ 0
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
throwII 
newII #
NotImplementedExceptionII -
(II- .
)II. /
;II/ 0
}JJ 	
publicLL 
FlowerLL 
GetFlowerByIdLL #
(LL# $
intLL$ '
flowerIdLL( 0
)LL0 1
{MM 	
throwNN 
newNN 
SystemNN 
.NN #
NotImplementedExceptionNN 4
(NN4 5
)NN5 6
;NN6 7
}OO 	
publicQQ 
boolQQ 
UpdateFlowerQQ  
(QQ  !
FlowerQQ! '
flowerQQ( .
)QQ. /
{RR 	
throwSS 
newSS #
NotImplementedExceptionSS -
(SS- .
)SS. /
;SS/ 0
}TT 	
}UU 
}VV ¡-
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\OrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
OrderRepository		  
:		! "
IOrderRepository		# 3
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderRepository 
( 
AppDbContext +
appDbContext, 8
,8 9
ShoppingCart: F
shoppingCartG S
)S T
{ 	
_appDbContext 
= 
appDbContext (
;( )
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8 
GetOrdersAsViewModel9 M
(M N
stringN T
userNameU ]
=^ _
$str` b
)b c
{ 	
List 
< 
Order 
> 
orders 
=  
null! %
;% &
if 
( 
string 
. 
IsNullOrEmpty $
($ %
userName% -
)- .
). /
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
ToList. 4
(4 5
)5 6
;6 7
} 
else 
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
Where. 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Email; @
==A C
userNameD L
)L M
.M N
ToListN T
(T U
)U V
;V W
} 
var   #
orderHistoryDetailsList   '
=  ( )
new  * -
List  . 2
<  2 3(
OrderHistoryDetailsViewModel  3 O
>  O P
(  P Q
)  Q R
;  R S
foreach!! 
(!! 
var!! 
order!! 
in!! !
orders!!" (
)!!( )
{"" #
orderHistoryDetailsList## '
.##' (
Add##( +
(##+ ,&
MapDbOrderToOrderViewModel##, F
(##F G
order##G L
)##L M
)##M N
;##N O
}$$ 
return&& #
orderHistoryDetailsList&& *
;&&* +
}'' 	
public)) 
void)) 
CreateOrder)) 
())  
Order))  %
order))& +
)))+ ,
{** 	
order++ 
.++ 
OrderPlaced++ 
=++ 
DateTime++  (
.++( )
Now++) ,
;++, -
_appDbContext-- 
.-- 
Orders--  
.--  !
Add--! $
(--$ %
order--% *
)--* +
;--+ ,
var// 
shoppingCartItems// !
=//" #
_shoppingCart//$ 1
.//1 2
ShoppingCartItems//2 C
;//C D
foreach11 
(11 
var11 
shoppingCartItem11 )
in11* ,
shoppingCartItems11- >
)11> ?
{22 
var33 
orderDetail33 
=33  !
new33" %
OrderDetail33& 1
{44 
Amount55 
=55 
shoppingCartItem55 -
.55- .
Amount55. 4
,554 5
FlowerId66 
=66 
shoppingCartItem66 /
.66/ 0
Flower660 6
.666 7
FlowerId667 ?
,66? @
OrderId77 
=77 
order77 #
.77# $
OrderId77$ +
,77+ ,
Price88 
=88 
shoppingCartItem88 ,
.88, -
Flower88- 3
.883 4
Price884 9
}99 
;99 
_appDbContext;; 
.;; 
OrderDetails;; *
.;;* +
Add;;+ .
(;;. /
orderDetail;;/ :
);;: ;
;;;; <
}<< 
_appDbContext>> 
.>> 
SaveChanges>> %
(>>% &
)>>& '
;>>' (
}?? 	
privateAA (
OrderHistoryDetailsViewModelAA ,&
MapDbOrderToOrderViewModelAA- G
(AAG H
OrderAAH M
dbOrderAAN U
)AAU V
{BB 	
returnCC 
newCC (
OrderHistoryDetailsViewModelCC 3
{DD 
OrderIdEE 
=EE 
dbOrderEE !
.EE! "
OrderIdEE" )
,EE) *
AddressFF 
=FF 
dbOrderFF !
.FF! "
AddressLine1FF" .
+FF/ 0
$strFF1 4
+FF5 6
dbOrderFF7 >
.FF> ?
AddressLine2FF? K
,FFK L
CityGG 
=GG 
dbOrderGG 
.GG 
CityGG #
,GG# $
	FirstNameHH 
=HH 
dbOrderHH #
.HH# $
	FirstNameHH$ -
,HH- .
LastNameII 
=II 
dbOrderII "
.II" #
LastNameII# +
,II+ ,
	PayMethodJJ 
=JJ 
dbOrderJJ #
.JJ# $
	PayMethodJJ$ -
,JJ- .
PhoneNumberKK 
=KK 
dbOrderKK %
.KK% &
PhoneNumberKK& 1
,KK1 2
ShippingMethodLL 
=LL  
dbOrderLL! (
.LL( )
ShippingMethodLL) 7
}MM 
;MM 
}NN 	
}OO 
}PP ’.
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Startup.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Startup 
{ 
private 
IConfigurationRoot "
_configurationRoot# 5
;5 6
public 
Startup 
( 
IHostingEnvironment *
hostingEnvironment+ =
)= >
{ 	
_configurationRoot 
=  
new! $ 
ConfigurationBuilder% 9
(9 :
): ;
. 
SetBasePath '
(' (
hostingEnvironment( :
.: ;
ContentRootPath; J
)J K
. 
AddJsonFile '
(' (
$str( :
): ;
. 
Build !
(! "
)" #
;# $
} 	
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddDbContext !
<! "
AppDbContext" .
>. /
(/ 0
options0 7
=>8 :
options, 3
.3 4
UseSqlServer4 @
(@ A
_configurationRootA S
.S T
GetConnectionStringT g
(g h
$strh {
){ |
)| }
)} ~
;~ 
services!! 
.!! 
AddIdentity!!  
<!!  !
ApplicationUser!!! 0
,!!0 1
IdentityRole!!2 >
>!!> ?
(!!? @
options!!@ G
=>!!H J
{"" 
options## 
.## 
Password##  
.##  !
RequireDigit##! -
=##. /
true##0 4
;##4 5
options$$ 
.$$ 
Password$$  
.$$  !
RequireLowercase$$! 1
=$$2 3
true$$4 8
;$$8 9
options%% 
.%% 
Password%%  
.%%  !
RequireUppercase%%! 1
=%%2 3
true%%4 8
;%%8 9
options&& 
.&& 
Password&&  
.&&  !"
RequireNonAlphanumeric&&! 7
=&&8 9
false&&: ?
;&&? @
options'' 
.'' 
User'' 
.'' 
RequireUniqueEmail'' /
=''0 1
false''2 7
;''7 8
}(( 
)(( 
.)) $
AddEntityFrameworkStores)) )
<))) *
AppDbContext))* 6
>))6 7
())7 8
)))8 9
;))9 :
services++ 
.++ 
AddTransient++ !
<++! "
ICategoryRepository++" 5
,++5 6
CategoryRepository++7 I
>++I J
(++J K
)++K L
;++L M
services,, 
.,, 
AddTransient,, !
<,,! "
IFlowerRepository,," 3
,,,3 4
FlowerRepository,,5 E
>,,E F
(,,F G
),,G H
;,,H I
services-- 
.-- 
AddSingleton-- !
<--! " 
IHttpContextAccessor--" 6
,--6 7
HttpContextAccessor--8 K
>--K L
(--L M
)--M N
;--N O
services.. 
... 
	AddScoped.. 
<.. 
ShoppingCart.. +
>..+ ,
(.., -
sp..- /
=>..0 2
ShoppingCart..3 ?
...? @
GetCart..@ G
(..G H
sp..H J
)..J K
)..K L
;..L M
services// 
.// 
AddTransient// !
<//! "
IOrderRepository//" 2
,//2 3
OrderRepository//4 C
>//C D
(//D E
)//E F
;//F G
services11 
.11 
AddMvc11 
(11 
)11 
;11 
services33 
.33 
AddMemoryCache33 #
(33# $
)33$ %
;33% &
services44 
.44 

AddSession44 
(44  
)44  !
;44! "
}55 	
public88 
void88 
	Configure88 
(88 
IApplicationBuilder88 1
app882 5
,885 6
IHostingEnvironment887 J
env88K N
,88N O
ILoggerFactory88P ^
loggerFactory88_ l
)88l m
{99 	
app:: 
.:: %
UseDeveloperExceptionPage:: )
(::) *
)::* +
;::+ ,
app;; 
.;; 
UseStatusCodePages;; "
(;;" #
);;# $
;;;$ %
app<< 
.<< 
UseStaticFiles<< 
(<< 
)<<  
;<<  !
app== 
.== 

UseSession== 
(== 
)== 
;== 
app>> 
.>> 
UseIdentity>> 
(>> 
)>> 
;>> 
appAA 
.AA 
UseMvcAA 
(AA 
routesAA 
=>AA  
{BB 
routesCC 
.CC 
MapRouteCC 
(CC  
nameDD 
:DD 
$strDD *
,DD* +
templateEE 
:EE 
$strEE ;
,EE; <
defaultsFF 
:FF 
newFF !
{FF" #

ControllerFF$ .
=FF/ 0
$strFF1 9
,FF9 :
actionFF; A
=FFB C
$strFFD J
}FFK L
)FFL M
;FFM N
routesHH 
.HH 
MapRouteHH 
(HH  
nameII 
:II 
$strII #
,II# $
templateJJ 
:JJ 
$strJJ F
)JJF G
;JJG H
}KK 
)KK 
;KK 
DbInitializerMM 
.MM 
SeedMM 
(MM 
appMM "
)MM" #
;MM# $
}NN 	
}OO 
}PP ‰

GE:\Projects\FlowerShop\FlowerApp\FlowerApp\TagHelpers\EmailTagHelper.cs
	namespace 	
	FlowerApp
 
. 

TagHelpers 
{ 
public 

class 
EmailTagHelper 
:  !
	TagHelper" +
{ 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
Content		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public 
override 
void 
Process $
($ %
TagHelperContext% 5
context6 =
,= >
TagHelperOutput? N
outputO U
)U V
{ 	
output 
. 
TagName 
= 
$str  
;  !
output 
. 

Attributes 
. 
SetAttribute *
(* +
$str+ 1
,1 2
$str3 <
+= >
Address? F
)F G
;G H
output 
. 
Content 
. 

SetContent %
(% &
Content& -
)- .
;. /
} 	
} 
} ≥
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddFlowerViewModel #
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
ShortDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
string		 
LongDescription		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ô
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddRoleViewModel !
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
RoleName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} ∂
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddUserViewModel !
{ 
[ 	
Required	 
] 
[		 	
Display			 
(		 
Name		 
=		 
$str		 #
)		# $
]		$ %
public

 
string

 
UserName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
[ 	
RegularExpression	 
( 
$str 6
,6 7
ErrorMessage 
= 
$str Q
)Q R
]R S
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public   
DateTime   
	Birthdate   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public"" 
string"" 
City"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
public$$ 
string$$ 
Country$$ 
{$$ 
get$$  #
;$$# $
set$$% (
;$$( )
}$$* +
}%% 
}&& ’
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\CategoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
CategoryViewModel "
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CategoryName 
{  !
get" %
;% &
set' *
;* +
}, -
} 
}		 ≥
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ClaimsManagementViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class %
ClaimsManagementViewModel *
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ClaimId 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
List		 
<		 
string		 
>		 
AllClaimsList		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditFlowerViewModel $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditRoleViewModel "
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! =
)

= >
]

> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
RoleName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< 
string 
> 
Users !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditUserViewModel "
{ 
public		 
string		 
Id		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
[ 	
Required	 
( 
ErrorMessage 
=  
$str! =
)= >
]> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
	Birthdate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ø
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerDetailViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
FlowerDetailViewModel &
{ 
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ñ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerListViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerListViewModel $
{ 
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public

 
string

 
CurrentCategory

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
} 
} ≠
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerViewModel  
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} »
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\HomeViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
HomeViewModel 
{ 
public 
IEnumerable 
< 
Flower !
>! "
FlowerPresentation# 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public

 
IEnumerable

 
<

 
string

 !
>

! "
FlowersName

# .
{

/ 0
get

1 4
;

4 5
set

6 9
;

9 :
}

; <
} 
} Â
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\LoginViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
LoginViewModel 
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
UserName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ï
UE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryDetailsViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class (
OrderHistoryDetailsViewModel -
{ 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
City		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public

 
string

 
ShippingMethod

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	PayMethod 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} å
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
OrderHistoryViewModel &
{ 
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8
Orders9 ?
{@ A
getB E
;E F
setG J
;J K
}L M
} 
}		 Ò
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ShoppingCartViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
ShoppingCartViewModel &
{ 
public 
ShoppingCart 
ShoppingCart (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public		 
decimal		 
ShoppingCartTotal		 (
{		) *
get		+ .
;		. /
set		0 3
;		3 4
}		5 6
}

 
} π
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\UserRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
UserRoleViewModel "
{ 
public 
UserRoleViewModel  
(  !
)! "
{		 	
Users

 
=

 
new

 
List

 
<

 
IdentityUser

 )
>

) *
(

* +
)

+ ,
;

, -
} 	
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RoleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
IdentityUser  
>  !
Users" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} 