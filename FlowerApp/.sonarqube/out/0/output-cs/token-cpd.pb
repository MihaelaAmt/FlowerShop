à
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\ApplicationUser.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser# /
{ 
public		 
DateTime		 
	Birthdate		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} „
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\FlowerShopClaimTypes.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class  
FlowerShopClaimTypes %
{ 
public		 
static		 
List		 
<		 
string		 !
>		! "

ClaimsList		# -
{		. /
get		0 3
;		3 4
set		5 8
;		8 9
}		: ;
=		< =
new		> A
List		B F
<		F G
string		G M
>		M N
{		O P
$str		Q `
,		` a
$str		b n
,		n o
$str			p Ç
}
		É Ñ
;
		Ñ Ö
}

 
} °
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\AdminMenuItem.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
	AdminMenu 
: 
ViewComponent *
{ 
public		  
IViewComponentResult		 #
Invoke		$ *
(		* +
)		+ ,
{

 	
var 
	menuItems 
= 
new 
List  $
<$ %
AdminMenuItem% 2
>2 3
{4 5
new6 9
AdminMenuItem: G
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem "
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem #
{ 
DisplayValue  
=! "
$str# 6
,6 7
ActionValue 
=  !
$str" 4
}   
,   
}!! 
;!! 
return$$ 
View$$ 
($$ 
	menuItems$$ !
)$$! "
;$$" #
}%% 	
}&& 
public)) 

class)) 
AdminMenuItem)) 
{** 
public,, 
string,, 
DisplayValue,, "
{,,# $
get,,% (
;,,( )
set,,* -
;,,- .
},,/ 0
public// 
string// 
ActionValue// !
{//" #
get//$ '
;//' (
set//) ,
;//, -
}//. /
}00 
}11 ‹	
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\CategoryMenu.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
CategoryMenu 
: 
ViewComponent  -
{		 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
CategoryMenu 
( 
ICategoryRepository /
categoryRepository0 B
)B C
{ 	
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 

categories 
= 
_categoryRepository 0
.0 1

Categories1 ;
.; <
OrderBy< C
(C D
cD E
=>F H
cI J
.J K
CategoryNameK W
)W X
;X Y
return 
View 
( 

categories "
)" #
;# $
} 	
} 
} €
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\ShoppingCartSummary.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
ShoppingCartSummary $
:% &
ViewComponent' 4
{		 
private

 
readonly

 
ShoppingCart

 %
_shoppingCart

& 3
;

3 4
public 
ShoppingCartSummary "
(" #
ShoppingCart# /
shoppingCart0 <
)< =
{ 	
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var 
shoppingViewModel !
=" #
new$ '!
ShoppingCartViewModel( =
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return   
View   
(   
shoppingViewModel   )
)  ) *
;  * +
}!! 	
}"" 
}## å2
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AccountController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
,I J
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[ 	
AllowAnonymous	 
] 
public 
IActionResult 
Login "
(" #
string# )
	returnUrl* 3
)3 4
{ 	
return   
View   
(   
new   
LoginViewModel   *
{!! 
	ReturnUrl"" 
="" 
	returnUrl"" %
}## 
)## 
;## 
}$$ 	
['' 	
HttpPost''	 
]'' 
[** 	
AllowAnonymous**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
Login++) .
(++. /
LoginViewModel++/ =
loginViewModel++> L
)++L M
{,, 	
if-- 
(-- 
!-- 

ModelState-- 
.-- 
IsValid-- #
)--# $
{.. 
return// 
View// 
(// 
loginViewModel// *
)//* +
;//+ ,
}00 
var33 
user33 
=33 
await33 
_userManager33 )
.33) *
FindByNameAsync33* 9
(339 :
loginViewModel33: H
.33H I
UserName33I Q
)33Q R
;33R S
if55 
(55 
user55 
!=55 
null55 
)55 
{66 
var88 
result88 
=88 
await88 "
_signInManager88# 1
.881 2
PasswordSignInAsync882 E
(88E F
user88F J
,88J K
loginViewModel88L Z
.88Z [
Password88[ c
,88c d
false88e j
,88j k
false88l q
)88q r
;88r s
if;; 
(;; 
result;; 
.;; 
	Succeeded;; $
);;$ %
{<< 
if>> 
(>> 
string>> 
.>> 
IsNullOrEmpty>> ,
(>>, -
loginViewModel>>- ;
.>>; <
	ReturnUrl>>< E
)>>E F
)>>F G
{?? 
return@@ 
RedirectToAction@@ /
(@@/ 0
$str@@0 7
,@@7 8
$str@@9 ?
)@@? @
;@@@ A
}AA 
returnDD 
RedirectDD #
(DD# $
loginViewModelDD$ 2
.DD2 3
	ReturnUrlDD3 <
)DD< =
;DD= >
}EE 
}FF 

ModelStateHH 
.HH 
AddModelErrorHH $
(HH$ %
$strHH% '
,HH' (
$strHH) F
)HHF G
;HHG H
returnJJ 
ViewJJ 
(JJ 
loginViewModelJJ &
)JJ& '
;JJ' (
}KK 	
[NN 	
AllowAnonymousNN	 
]NN 
publicOO 
IActionResultOO 
RegisterOO %
(OO% &
)OO& '
{PP 	
returnQQ 
ViewQQ 
(QQ 
)QQ 
;QQ 
}RR 	
[UU 	
HttpPostUU	 
]UU 
[VV 	$
ValidateAntiForgeryTokenVV	 !
]VV! "
[WW 	
AllowAnonymousWW	 
]WW 
publicXX 
asyncXX 
TaskXX 
<XX 
IActionResultXX '
>XX' (
RegisterXX) 1
(XX1 2
LoginViewModelXX2 @
loginViewModelXXA O
)XXO P
{YY 	
ifZZ 
(ZZ 

ModelStateZZ 
.ZZ 
IsValidZZ "
)ZZ" #
{[[ 
var]] 
user]] 
=]] 
new]] 
ApplicationUser]] .
{]]/ 0
UserName]]1 9
=]]: ;
loginViewModel]]< J
.]]J K
UserName]]K S
}]]T U
;]]U V
var^^ 
result^^ 
=^^ 
await^^ "
_userManager^^# /
.^^/ 0
CreateAsync^^0 ;
(^^; <
user^^< @
,^^@ A
loginViewModel^^B P
.^^P Q
Password^^Q Y
)^^Y Z
;^^Z [
ifaa 
(aa 
resultaa 
.aa 
	Succeededaa $
)aa$ %
{bb 
returncc 
RedirectToActioncc +
(cc+ ,
$strcc, 3
,cc3 4
$strcc5 ;
)cc; <
;cc< =
}dd 
}ee 

ModelStatehh 
.hh 
AddModelErrorhh $
(hh$ %
$strhh% '
,hh' (
$strhh) G
)hhG H
;hhH I
returnii 
Viewii 
(ii 
loginViewModelii &
)ii& '
;ii' (
}jj 	
[nn 	
HttpPostnn	 
]nn 
publicpp 
asyncpp 
Taskpp 
<pp 
IActionResultpp '
>pp' (
Logoutpp) /
(pp/ 0
)pp0 1
{qq 	
awaitrr 
_signInManagerrr  
.rr  !
SignOutAsyncrr! -
(rr- .
)rr. /
;rr/ 0
returntt 
RedirectToActiontt #
(tt# $
$strtt$ +
,tt+ ,
$strtt- 3
)tt3 4
;tt4 5
}uu 	
}vv 
}ww íΩ
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AdminController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class 
AdminController  
:! "

Controller# -
{ 
private 
const 
string 
UManagement (
=) *
$str+ ;
;; <
private 
const 
string 
RManagement (
=) *
$str+ ;
;; <
private 
const 
string 
FManagement (
=) *
$str+ =
;= >
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
AdminController 
( 
UserManager *
<* +
ApplicationUser+ :
>: ;
userManager< G
,G H
RoleManager 
< 
IdentityRole $
>$ %
roleManager& 1
,1 2
IFlowerRepository 
flowerRepository .
,. /
ICategoryRepository 
categoryRepository  2
)2 3
{ 	
_userManager 
= 
userManager &
;& '
_roleManager 
= 
roleManager &
;& '
_flowerRepository   
=   
flowerRepository    0
;  0 1
_categoryRepository!! 
=!!  !
categoryRepository!!" 4
;!!4 5
}"" 	
public%% 
IActionResult%% 
Index%% "
(%%" #
)%%# $
{&& 	
return'' 
View'' 
('' 
)'' 
;'' 
}(( 	
public** 
IActionResult** 
UserManagement** +
(**+ ,
)**, -
{++ 	
var,, 
users,, 
=,, 
_userManager,, $
.,,$ %
Users,,% *
;,,* +
return.. 
View.. 
(.. 
users.. 
).. 
;.. 
}// 	
public11 
IActionResult11 
AddUser11 $
(11$ %
)11% &
{22 	
return33 
View33 
(33 
)33 
;33 
}44 	
[66 	
HttpPost66	 
]66 
public77 
async77 
Task77 
<77 
IActionResult77 '
>77' (
AddUser77) 0
(770 1
AddUserViewModel771 A
addUserViewModel77B R
)77R S
{88 	
if99 
(99 
!99 

ModelState99 
.99 
IsValid99 #
)99# $
{:: 
return;; 
View;; 
(;; 
addUserViewModel;; ,
);;, -
;;;- .
}<< 
var>> 
user>> 
=>> 
new>> 
ApplicationUser>> *
{?? 
UserName@@ 
=@@ 
addUserViewModel@@ +
.@@+ ,
UserName@@, 4
,@@4 5
EmailAA 
=AA 
addUserViewModelAA (
.AA( )
EmailAA) .
,AA. /
	BirthdateBB 
=BB 
addUserViewModelBB ,
.BB, -
	BirthdateBB- 6
,BB6 7
CityCC 
=CC 
addUserViewModelCC '
.CC' (
CityCC( ,
,CC, -
CountryDD 
=DD 
addUserViewModelDD *
.DD* +
CountryDD+ 2
}EE 
;EE 
IdentityResultGG 
resultGG !
=GG" #
awaitGG$ )
_userManagerGG* 6
.GG6 7
CreateAsyncGG7 B
(GGB C
userGGC G
,GGG H
addUserViewModelGGI Y
.GGY Z
PasswordGGZ b
)GGb c
;GGc d
ifII 
(II 
resultII 
.II 
	SucceededII  
)II  !
{JJ 
returnKK 
RedirectToActionKK '
(KK' (
UManagementKK( 3
,KK3 4
_userManagerKK5 A
.KKA B
UsersKKB G
)KKG H
;KKH I
}LL 
foreachNN 
(NN 
IdentityErrorNN "
errorNN# (
inNN) +
resultNN, 2
.NN2 3
ErrorsNN3 9
)NN9 :
{OO 

ModelStatePP 
.PP 
AddModelErrorPP (
(PP( )
$strPP) +
,PP+ ,
errorPP- 2
.PP2 3
DescriptionPP3 >
)PP> ?
;PP? @
}QQ 
returnRR 
ViewRR 
(RR 
addUserViewModelRR (
)RR( )
;RR) *
}SS 	
publicUU 
asyncUU 
TaskUU 
<UU 
IActionResultUU '
>UU' (
EditUserUU) 1
(UU1 2
stringUU2 8
idUU9 ;
)UU; <
{VV 	
varWW 
userWW 
=WW 
awaitWW 
_userManagerWW )
.WW) *
FindByIdAsyncWW* 7
(WW7 8
idWW8 :
)WW: ;
;WW; <
ifYY 
(YY 
userYY 
==YY 
nullYY 
)YY 
{ZZ 
return[[ 
RedirectToAction[[ '
([[' (
UManagement[[( 3
,[[3 4
_userManager[[5 A
.[[A B
Users[[B G
)[[G H
;[[H I
}\\ 
var^^ 
claims^^ 
=^^ 
await^^ 
_userManager^^ +
.^^+ ,
GetClaimsAsync^^, :
(^^: ;
user^^; ?
)^^? @
;^^@ A
var__ 
vm__ 
=__ 
new__ 
EditUserViewModel__ *
{`` 
Idaa 
=aa 
useraa 
.aa 
Idaa 
,aa 
Emailbb 
=bb 
userbb 
.bb 
Emailbb "
,bb" #
UserNamecc 
=cc 
usercc 
.cc  
UserNamecc  (
,cc( )

UserClaimsdd 
=dd 
claimsdd #
.dd# $
Selectdd$ *
(dd* +
cdd+ ,
=>dd- /
cdd0 1
.dd1 2
Valuedd2 7
)dd7 8
.dd8 9
ToListdd9 ?
(dd? @
)dd@ A
}ee 
;ee 
returngg 
Viewgg 
(gg 
vmgg 
)gg 
;gg 
}hh 	
[jj 	
HttpPostjj	 
]jj 
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (
EditUserkk) 1
(kk1 2
EditUserViewModelkk2 C
editUserViewModelkkD U
)kkU V
{ll 	
varmm 
usermm 
=mm 
awaitmm 
_userManagermm )
.mm) *
FindByIdAsyncmm* 7
(mm7 8
editUserViewModelmm8 I
.mmI J
IdmmJ L
)mmL M
;mmM N
ifoo 
(oo 
useroo 
!=oo 
nulloo 
)oo 
{pp 
userqq 
.qq 
Emailqq 
=qq 
editUserViewModelqq .
.qq. /
Emailqq/ 4
;qq4 5
userrr 
.rr 
UserNamerr 
=rr 
editUserViewModelrr  1
.rr1 2
UserNamerr2 :
;rr: ;
userss 
.ss 
	Birthdatess 
=ss  
editUserViewModelss! 2
.ss2 3
	Birthdatess3 <
;ss< =
usertt 
.tt 
Citytt 
=tt 
editUserViewModeltt -
.tt- .
Citytt. 2
;tt2 3
useruu 
.uu 
Countryuu 
=uu 
editUserViewModeluu 0
.uu0 1
Countryuu1 8
;uu8 9
varww 
resultww 
=ww 
awaitww "
_userManagerww# /
.ww/ 0
UpdateAsyncww0 ;
(ww; <
userww< @
)ww@ A
;wwA B
ifyy 
(yy 
resultyy 
.yy 
	Succeededyy $
)yy$ %
{zz 
return{{ 
RedirectToAction{{ +
({{+ ,
UManagement{{, 7
,{{7 8
_userManager{{9 E
.{{E F
Users{{F K
){{K L
;{{L M
}|| 

ModelState~~ 
.~~ 
AddModelError~~ (
(~~( )
$str~~) +
,~~+ ,
$str~~- V
)~~V W
;~~W X
return
ÄÄ 
View
ÄÄ 
(
ÄÄ 
editUserViewModel
ÄÄ -
)
ÄÄ- .
;
ÄÄ. /
}
ÅÅ 
return
ÉÉ 
RedirectToAction
ÉÉ #
(
ÉÉ# $
UManagement
ÉÉ$ /
,
ÉÉ/ 0
_userManager
ÉÉ1 =
.
ÉÉ= >
Users
ÉÉ> C
)
ÉÉC D
;
ÉÉD E
}
ÑÑ 	
[
ÜÜ 	
HttpPost
ÜÜ	 
]
ÜÜ 
public
áá 
async
áá 
Task
áá 
<
áá 
IActionResult
áá '
>
áá' (

DeleteUser
áá) 3
(
áá3 4
string
áá4 :
userId
áá; A
)
ááA B
{
àà 	
var
ââ 
user
ââ 
=
ââ 
await
ââ 
_userManager
ââ )
.
ââ) *
FindByIdAsync
ââ* 7
(
ââ7 8
userId
ââ8 >
)
ââ> ?
;
ââ? @
if
ãã 
(
ãã 
user
ãã 
!=
ãã 
null
ãã 
)
ãã 
{
åå 
IdentityResult
çç 
result
çç %
=
çç& '
await
çç( -
_userManager
çç. :
.
çç: ;
DeleteAsync
çç; F
(
ççF G
user
ççG K
)
ççK L
;
ççL M
if
éé 
(
éé 
result
éé 
.
éé 
	Succeeded
éé $
)
éé$ %
{
èè 
return
êê 
RedirectToAction
êê +
(
êê+ ,
UManagement
êê, 7
)
êê7 8
;
êê8 9
}
ëë 
else
íí 
{
ìì 

ModelState
îî 
.
îî 
AddModelError
îî ,
(
îî, -
$str
îî- /
,
îî/ 0
$str
îî1 a
)
îîa b
;
îîb c
}
ïï 
}
óó 
else
òò 
{
ôô 

ModelState
öö 
.
öö 
AddModelError
öö (
(
öö( )
$str
öö) +
,
öö+ ,
$str
öö- G
)
ööG H
;
ööH I
}
õõ 
return
úú 
View
úú 
(
úú 
UManagement
úú #
,
úú# $
_userManager
úú% 1
.
úú1 2
Users
úú2 7
)
úú7 8
;
úú8 9
}
ùù 	
public
†† 
IActionResult
†† 
RoleManagement
†† +
(
††+ ,
)
††, -
{
°° 	
var
¢¢ 
roles
¢¢ 
=
¢¢ 
_roleManager
¢¢ $
.
¢¢$ %
Roles
¢¢% *
;
¢¢* +
return
££ 
View
££ 
(
££ 
roles
££ 
)
££ 
;
££ 
}
§§ 	
public
¶¶ 
IActionResult
¶¶ 

AddNewRole
¶¶ '
(
¶¶' (
)
¶¶( )
=>
¶¶* ,
View
¶¶- 1
(
¶¶1 2
)
¶¶2 3
;
¶¶3 4
[
®® 	
HttpPost
®®	 
]
®® 
public
©© 
async
©© 
Task
©© 
<
©© 
IActionResult
©© '
>
©©' (

AddNewRole
©©) 3
(
©©3 4
AddRoleViewModel
©©4 D
addRoleViewModel
©©E U
)
©©U V
{
™™ 	
if
¨¨ 
(
¨¨ 
!
¨¨ 

ModelState
¨¨ 
.
¨¨ 
IsValid
¨¨ #
)
¨¨# $
{
≠≠ 
return
ÆÆ 
View
ÆÆ 
(
ÆÆ 
addRoleViewModel
ÆÆ ,
)
ÆÆ, -
;
ÆÆ- .
}
ØØ 
var
±± 
role
±± 
=
±± 
new
±± 
IdentityRole
±± '
{
≤≤ 
Name
≥≥ 
=
≥≥ 
addRoleViewModel
≥≥ '
.
≥≥' (
RoleName
≥≥( 0
}
¥¥ 
;
¥¥ 
IdentityResult
∂∂ 
result
∂∂ !
=
∂∂" #
await
∂∂$ )
_roleManager
∂∂* 6
.
∂∂6 7
CreateAsync
∂∂7 B
(
∂∂B C
role
∂∂C G
)
∂∂G H
;
∂∂H I
if
∏∏ 
(
∏∏ 
result
∏∏ 
.
∏∏ 
	Succeeded
∏∏  
)
∏∏  !
{
ππ 
return
∫∫ 
RedirectToAction
∫∫ '
(
∫∫' (
RManagement
∫∫( 3
,
∫∫3 4
_roleManager
∫∫5 A
.
∫∫A B
Roles
∫∫B G
)
∫∫G H
;
∫∫H I
}
ªª 
foreach
ΩΩ 
(
ΩΩ 
IdentityError
ΩΩ "
error
ΩΩ# (
in
ΩΩ) +
result
ΩΩ, 2
.
ΩΩ2 3
Errors
ΩΩ3 9
)
ΩΩ9 :
{
ææ 

ModelState
øø 
.
øø 
AddModelError
øø (
(
øø( )
$str
øø) +
,
øø+ ,
error
øø- 2
.
øø2 3
Description
øø3 >
)
øø> ?
;
øø? @
}
¿¿ 
return
¡¡ 
View
¡¡ 
(
¡¡ 
addRoleViewModel
¡¡ (
)
¡¡( )
;
¡¡) *
}
¬¬ 	
public
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 
IActionResult
ƒƒ '
>
ƒƒ' (
EditRole
ƒƒ) 1
(
ƒƒ1 2
string
ƒƒ2 8
id
ƒƒ9 ;
)
ƒƒ; <
{
≈≈ 	
var
∆∆ 
role
∆∆ 
=
∆∆ 
await
∆∆ 
_roleManager
∆∆ )
.
∆∆) *
FindByIdAsync
∆∆* 7
(
∆∆7 8
id
∆∆8 :
)
∆∆: ;
;
∆∆; <
if
»» 
(
»» 
role
»» 
==
»» 
null
»» 
)
»» 
{
…… 
return
   
RedirectToAction
   '
(
  ' (
RManagement
  ( 3
,
  3 4
_roleManager
  5 A
.
  A B
Roles
  B G
)
  G H
;
  H I
}
ÀÀ 
var
ÕÕ 
editRoleViewModel
ÕÕ !
=
ÕÕ" #
new
ÕÕ$ '
EditRoleViewModel
ÕÕ( 9
{
ŒŒ 
Id
œœ 
=
œœ 
role
œœ 
.
œœ 
Id
œœ 
,
œœ 
RoleName
–– 
=
–– 
role
–– 
.
––  
Name
––  $
,
––$ %
Users
—— 
=
—— 
new
—— 
List
——  
<
——  !
string
——! '
>
——' (
(
——( )
)
——) *
}
““ 
;
““ 
foreach
’’ 
(
’’ 
var
’’ 
user
’’ 
in
’’  
_userManager
’’! -
.
’’- .
Users
’’. 3
)
’’3 4
{
÷÷ 
if
◊◊ 
(
◊◊ 
await
◊◊ 
_userManager
◊◊ &
.
◊◊& '
IsInRoleAsync
◊◊' 4
(
◊◊4 5
user
◊◊5 9
,
◊◊9 :
role
◊◊; ?
.
◊◊? @
Name
◊◊@ D
)
◊◊D E
)
◊◊E F
{
ÿÿ 
editRoleViewModel
ŸŸ %
.
ŸŸ% &
Users
ŸŸ& +
.
ŸŸ+ ,
Add
ŸŸ, /
(
ŸŸ/ 0
user
ŸŸ0 4
.
ŸŸ4 5
UserName
ŸŸ5 =
)
ŸŸ= >
;
ŸŸ> ?
}
⁄⁄ 
}
€€ 
return
›› 
View
›› 
(
›› 
editRoleViewModel
›› )
)
››) *
;
››* +
}
ﬁﬁ 	
[
‡‡ 	
HttpPost
‡‡	 
]
‡‡ 
public
·· 
async
·· 
Task
·· 
<
·· 
IActionResult
·· '
>
··' (
EditRole
··) 1
(
··1 2
EditRoleViewModel
··2 C
editRoleViewModel
··D U
)
··U V
{
‚‚ 	
var
„„ 
role
„„ 
=
„„ 
await
„„ 
_roleManager
„„ )
.
„„) *
FindByIdAsync
„„* 7
(
„„7 8
editRoleViewModel
„„8 I
.
„„I J
Id
„„J L
)
„„L M
;
„„M N
if
ÂÂ 
(
ÂÂ 
role
ÂÂ 
!=
ÂÂ 
null
ÂÂ 
)
ÂÂ 
{
ÊÊ 
role
ÁÁ 
.
ÁÁ 
Name
ÁÁ 
=
ÁÁ 
editRoleViewModel
ÁÁ -
.
ÁÁ- .
RoleName
ÁÁ. 6
;
ÁÁ6 7
var
ÈÈ 
result
ÈÈ 
=
ÈÈ 
await
ÈÈ "
_roleManager
ÈÈ# /
.
ÈÈ/ 0
UpdateAsync
ÈÈ0 ;
(
ÈÈ; <
role
ÈÈ< @
)
ÈÈ@ A
;
ÈÈA B
if
ÎÎ 
(
ÎÎ 
result
ÎÎ 
.
ÎÎ 
	Succeeded
ÎÎ $
)
ÎÎ$ %
{
ÏÏ 
return
ÌÌ 
RedirectToAction
ÌÌ +
(
ÌÌ+ ,
RManagement
ÌÌ, 7
,
ÌÌ7 8
_roleManager
ÌÌ9 E
.
ÌÌE F
Roles
ÌÌF K
)
ÌÌK L
;
ÌÌL M
}
ÓÓ 

ModelState
 
.
 
AddModelError
 (
(
( )
$str
) +
,
+ ,
$str
- V
)
V W
;
W X
return
ÚÚ 
View
ÚÚ 
(
ÚÚ 
editRoleViewModel
ÚÚ -
)
ÚÚ- .
;
ÚÚ. /
}
ÛÛ 
return
ıı 
RedirectToAction
ıı #
(
ıı# $
RManagement
ıı$ /
,
ıı/ 0
_roleManager
ıı1 =
.
ıı= >
Roles
ıı> C
)
ııC D
;
ııD E
}
ˆˆ 	
[
¯¯ 	
HttpPost
¯¯	 
]
¯¯ 
public
˘˘ 
async
˘˘ 
Task
˘˘ 
<
˘˘ 
IActionResult
˘˘ '
>
˘˘' (

DeleteRole
˘˘) 3
(
˘˘3 4
string
˘˘4 :
id
˘˘; =
)
˘˘= >
{
˙˙ 	
IdentityRole
˚˚ 
role
˚˚ 
=
˚˚ 
await
˚˚  %
_roleManager
˚˚& 2
.
˚˚2 3
FindByIdAsync
˚˚3 @
(
˚˚@ A
id
˚˚A C
)
˚˚C D
;
˚˚D E
if
¸¸ 
(
¸¸ 
role
¸¸ 
!=
¸¸ 
null
¸¸ 
)
¸¸ 
{
˝˝ 
var
˛˛ 
result
˛˛ 
=
˛˛ 
await
˛˛ "
_roleManager
˛˛# /
.
˛˛/ 0
DeleteAsync
˛˛0 ;
(
˛˛; <
role
˛˛< @
)
˛˛@ A
;
˛˛A B
if
ˇˇ 
(
ˇˇ 
result
ˇˇ 
.
ˇˇ 
	Succeeded
ˇˇ $
)
ˇˇ$ %
{
ÄÄ 
return
ÅÅ 
RedirectToAction
ÅÅ +
(
ÅÅ+ ,
RManagement
ÅÅ, 7
,
ÅÅ7 8
_roleManager
ÅÅ9 E
.
ÅÅE F
Roles
ÅÅF K
)
ÅÅK L
;
ÅÅL M
}
ÇÇ 

ModelState
ÑÑ 
.
ÑÑ 
AddModelError
ÑÑ (
(
ÑÑ( )
$str
ÑÑ) +
,
ÑÑ+ ,
$str
ÑÑ- ]
)
ÑÑ] ^
;
ÑÑ^ _
}
ÖÖ 
else
ÜÜ 
{
áá 

ModelState
àà 
.
àà 
AddModelError
àà (
(
àà( )
$str
àà) +
,
àà+ ,
$str
àà- H
)
ààH I
;
ààI J
}
ââ 
return
ää 
View
ää 
(
ää 
RManagement
ää #
,
ää# $
_roleManager
ää% 1
.
ää1 2
Roles
ää2 7
)
ää7 8
;
ää8 9
}
ãã 	
public
èè 
async
èè 
Task
èè 
<
èè 
IActionResult
èè '
>
èè' (
AddUserToRole
èè) 6
(
èè6 7
string
èè7 =
roleId
èè> D
)
èèD E
{
êê 	
var
ëë 
role
ëë 
=
ëë 
await
ëë 
_roleManager
ëë )
.
ëë) *
FindByIdAsync
ëë* 7
(
ëë7 8
roleId
ëë8 >
)
ëë> ?
;
ëë? @
if
ìì 
(
ìì 
role
ìì 
==
ìì 
null
ìì 
)
ìì 
{
îî 
return
ïï 
RedirectToAction
ïï '
(
ïï' (
RManagement
ïï( 3
,
ïï3 4
_roleManager
ïï5 A
.
ïïA B
Roles
ïïB G
)
ïïG H
;
ïïH I
}
ññ 
var
ôô $
addUserToRoleViewModel
ôô &
=
ôô' (
new
ôô) ,
UserRoleViewModel
ôô- >
{
ôô? @
RoleId
ôôA G
=
ôôH I
role
ôôJ N
.
ôôN O
Id
ôôO Q
}
ôôR S
;
ôôS T
foreach
õõ 
(
õõ 
var
õõ 
user
õõ 
in
õõ  
_userManager
õõ! -
.
õõ- .
Users
õõ. 3
)
õõ3 4
{
úú 
if
ùù 
(
ùù 
!
ùù 
await
ùù 
_userManager
ùù '
.
ùù' (
IsInRoleAsync
ùù( 5
(
ùù5 6
user
ùù6 :
,
ùù: ;
role
ùù< @
.
ùù@ A
Name
ùùA E
)
ùùE F
)
ùùF G
{
ûû $
addUserToRoleViewModel
üü *
.
üü* +
Users
üü+ 0
.
üü0 1
Add
üü1 4
(
üü4 5
user
üü5 9
)
üü9 :
;
üü: ;
}
†† 
}
°° 
return
££ 
View
££ 
(
££ $
addUserToRoleViewModel
££ .
)
££. /
;
££/ 0
}
§§ 	
[
¶¶ 	
HttpPost
¶¶	 
]
¶¶ 
public
ßß 
async
ßß 
Task
ßß 
<
ßß 
IActionResult
ßß '
>
ßß' (
AddUserToRole
ßß) 6
(
ßß6 7
UserRoleViewModel
ßß7 H
userRoleViewModel
ßßI Z
)
ßßZ [
{
®® 	
var
©© 
user
©© 
=
©© 
await
©© 
_userManager
©© )
.
©©) *
FindByIdAsync
©©* 7
(
©©7 8
userRoleViewModel
©©8 I
.
©©I J
UserId
©©J P
)
©©P Q
;
©©Q R
var
™™ 
role
™™ 
=
™™ 
await
™™ 
_roleManager
™™ )
.
™™) *
FindByIdAsync
™™* 7
(
™™7 8
userRoleViewModel
™™8 I
.
™™I J
RoleId
™™J P
)
™™P Q
;
™™Q R
var
¨¨ 
result
¨¨ 
=
¨¨ 
await
¨¨ 
_userManager
¨¨ +
.
¨¨+ ,
AddToRoleAsync
¨¨, :
(
¨¨: ;
user
¨¨; ?
,
¨¨? @
role
¨¨A E
.
¨¨E F
Name
¨¨F J
)
¨¨J K
;
¨¨K L
if
ÆÆ 
(
ÆÆ 
result
ÆÆ 
.
ÆÆ 
	Succeeded
ÆÆ  
)
ÆÆ  !
{
ØØ 
return
∞∞ 
RedirectToAction
∞∞ '
(
∞∞' (
RManagement
∞∞( 3
,
∞∞3 4
_roleManager
∞∞5 A
.
∞∞A B
Roles
∞∞B G
)
∞∞G H
;
∞∞H I
}
±± 
foreach
≥≥ 
(
≥≥ 
IdentityError
≥≥ "
error
≥≥# (
in
≥≥) +
result
≥≥, 2
.
≥≥2 3
Errors
≥≥3 9
)
≥≥9 :
{
¥¥ 

ModelState
µµ 
.
µµ 
AddModelError
µµ (
(
µµ( )
$str
µµ) +
,
µµ+ ,
error
µµ- 2
.
µµ2 3
Description
µµ3 >
)
µµ> ?
;
µµ? @
}
∂∂ 
return
∏∏ 
View
∏∏ 
(
∏∏ 
userRoleViewModel
∏∏ )
)
∏∏) *
;
∏∏* +
}
ππ 	
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
IActionResult
ªª '
>
ªª' ( 
DeleteUserFromRole
ªª) ;
(
ªª; <
string
ªª< B
roleId
ªªC I
)
ªªI J
{
ºº 	
var
ΩΩ 
role
ΩΩ 
=
ΩΩ 
await
ΩΩ 
_roleManager
ΩΩ )
.
ΩΩ) *
FindByIdAsync
ΩΩ* 7
(
ΩΩ7 8
roleId
ΩΩ8 >
)
ΩΩ> ?
;
ΩΩ? @
if
øø 
(
øø 
role
øø 
==
øø 
null
øø 
)
øø 
{
¿¿ 
return
¡¡ 
RedirectToAction
¡¡ '
(
¡¡' (
RManagement
¡¡( 3
,
¡¡3 4
_roleManager
¡¡5 A
.
¡¡A B
Roles
¡¡B G
)
¡¡G H
;
¡¡H I
}
¬¬ 
var
√√ $
addUserToRoleViewModel
√√ &
=
√√' (
new
√√) ,
UserRoleViewModel
√√- >
{
√√? @
RoleId
√√A G
=
√√H I
role
√√J N
.
√√N O
Id
√√O Q
}
√√R S
;
√√S T
foreach
≈≈ 
(
≈≈ 
var
≈≈ 
user
≈≈ 
in
≈≈  
_userManager
≈≈! -
.
≈≈- .
Users
≈≈. 3
)
≈≈3 4
{
∆∆ 
if
«« 
(
«« 
await
«« 
_userManager
«« &
.
««& '
IsInRoleAsync
««' 4
(
««4 5
user
««5 9
,
««9 :
role
««; ?
.
««? @
Name
««@ D
)
««D E
)
««E F
{
»» $
addUserToRoleViewModel
…… *
.
……* +
Users
……+ 0
.
……0 1
Add
……1 4
(
……4 5
user
……5 9
)
……9 :
;
……: ;
}
   
}
ÀÀ 
return
ÕÕ 
View
ÕÕ 
(
ÕÕ $
addUserToRoleViewModel
ÕÕ .
)
ÕÕ. /
;
ÕÕ/ 0
}
ŒŒ 	
[
–– 	
HttpPost
––	 
]
–– 
public
—— 
async
—— 
Task
—— 
<
—— 
IActionResult
—— '
>
——' ( 
DeleteUserFromRole
——) ;
(
——; <
UserRoleViewModel
——< M
userRoleViewModel
——N _
)
——_ `
{
““ 	
var
”” 
user
”” 
=
”” 
await
”” 
_userManager
”” )
.
””) *
FindByIdAsync
””* 7
(
””7 8
userRoleViewModel
””8 I
.
””I J
UserId
””J P
)
””P Q
;
””Q R
var
‘‘ 
role
‘‘ 
=
‘‘ 
await
‘‘ 
_roleManager
‘‘ )
.
‘‘) *
FindByIdAsync
‘‘* 7
(
‘‘7 8
userRoleViewModel
‘‘8 I
.
‘‘I J
RoleId
‘‘J P
)
‘‘P Q
;
‘‘Q R
var
÷÷ 
result
÷÷ 
=
÷÷ 
await
÷÷ 
_userManager
÷÷ +
.
÷÷+ ,!
RemoveFromRoleAsync
÷÷, ?
(
÷÷? @
user
÷÷@ D
,
÷÷D E
role
÷÷F J
.
÷÷J K
Name
÷÷K O
)
÷÷O P
;
÷÷P Q
if
ÿÿ 
(
ÿÿ 
result
ÿÿ 
.
ÿÿ 
	Succeeded
ÿÿ  
)
ÿÿ  !
{
ŸŸ 
return
⁄⁄ 
RedirectToAction
⁄⁄ '
(
⁄⁄' (
RManagement
⁄⁄( 3
,
⁄⁄3 4
_roleManager
⁄⁄5 A
.
⁄⁄A B
Roles
⁄⁄B G
)
⁄⁄G H
;
⁄⁄H I
}
€€ 
foreach
›› 
(
›› 
IdentityError
›› "
error
››# (
in
››) +
result
››, 2
.
››2 3
Errors
››3 9
)
››9 :
{
ﬁﬁ 

ModelState
ﬂﬂ 
.
ﬂﬂ 
AddModelError
ﬂﬂ (
(
ﬂﬂ( )
$str
ﬂﬂ) +
,
ﬂﬂ+ ,
error
ﬂﬂ- 2
.
ﬂﬂ2 3
Description
ﬂﬂ3 >
)
ﬂﬂ> ?
;
ﬂﬂ? @
}
‡‡ 
return
‚‚ 
View
‚‚ 
(
‚‚ 
userRoleViewModel
‚‚ )
)
‚‚) *
;
‚‚* +
}
„„ 	
public
ÊÊ 
IActionResult
ÊÊ 
FlowerManagement
ÊÊ -
(
ÊÊ- .
)
ÊÊ. /
{
ÁÁ 	
var
ËË 
	dbFlowers
ËË 
=
ËË 
_flowerRepository
ËË -
.
ËË- .
Flowers
ËË. 5
;
ËË5 6
List
ÍÍ 
<
ÍÍ 
FlowerViewModel
ÍÍ  
>
ÍÍ  !
flowers
ÍÍ" )
=
ÍÍ* +
new
ÍÍ, /
List
ÍÍ0 4
<
ÍÍ4 5
FlowerViewModel
ÍÍ5 D
>
ÍÍD E
(
ÍÍE F
)
ÍÍF G
;
ÍÍG H
foreach
ÏÏ 
(
ÏÏ 
var
ÏÏ 
dbFlower
ÏÏ !
in
ÏÏ" $
	dbFlowers
ÏÏ% .
)
ÏÏ. /
{
ÌÌ 
flowers
ÓÓ 
.
ÓÓ 
Add
ÓÓ 
(
ÓÓ *
MapDbFlowerToFlowerViewModel
ÓÓ 8
(
ÓÓ8 9
dbFlower
ÓÓ9 A
)
ÓÓA B
)
ÓÓB C
;
ÓÓC D
}
ÔÔ 
return
ÒÒ 
View
ÒÒ 
(
ÒÒ 
flowers
ÒÒ 
)
ÒÒ  
;
ÒÒ  !
}
ÚÚ 	
public
ÙÙ 
IActionResult
ÙÙ 
	AddFlower
ÙÙ &
(
ÙÙ& '
)
ÙÙ' (
{
ıı 	
ViewData
ˆˆ 
[
ˆˆ 
$str
ˆˆ !
]
ˆˆ! "
=
ˆˆ# $!
_categoryRepository
ˆˆ% 8
.
ˆˆ8 9

Categories
ˆˆ9 C
.
ˆˆC D
ToList
ˆˆD J
(
ˆˆJ K
)
ˆˆK L
;
ˆˆL M
return
¯¯ 
View
¯¯ 
(
¯¯ 
)
¯¯ 
;
¯¯ 
}
˘˘ 	
[
˚˚ 	
HttpPost
˚˚	 
]
˚˚ 
public
¸¸ 
IActionResult
¸¸ 
	AddFlower
¸¸ &
(
¸¸& ' 
AddFlowerViewModel
¸¸' 9 
addFlowerViewModel
¸¸: L
)
¸¸L M
{
˝˝ 	
if
˛˛ 
(
˛˛ 
!
˛˛ 

ModelState
˛˛ 
.
˛˛ 
IsValid
˛˛ #
)
˛˛# $
{
ˇˇ 
return
ÄÄ 
View
ÄÄ 
(
ÄÄ  
addFlowerViewModel
ÄÄ .
)
ÄÄ. /
;
ÄÄ/ 0
}
ÅÅ 
var
ÇÇ 
flower
ÇÇ 
=
ÇÇ 
new
ÇÇ 
Flower
ÇÇ #
{
ÉÉ 
Name
ÑÑ 
=
ÑÑ  
addFlowerViewModel
ÑÑ )
.
ÑÑ) *
Name
ÑÑ* .
,
ÑÑ. /
ShortDescription
ÖÖ  
=
ÖÖ! " 
addFlowerViewModel
ÖÖ# 5
.
ÖÖ5 6
ShortDescription
ÖÖ6 F
,
ÖÖF G
LongDescription
ÜÜ 
=
ÜÜ  ! 
addFlowerViewModel
ÜÜ" 4
.
ÜÜ4 5
LongDescription
ÜÜ5 D
,
ÜÜD E
Price
áá 
=
áá  
addFlowerViewModel
áá *
.
áá* +
Price
áá+ 0
,
áá0 1
ImageUrl
àà 
=
àà  
addFlowerViewModel
àà -
.
àà- .
ImageUrl
àà. 6
,
àà6 7
ImageThumbnailUrl
ââ !
=
ââ" # 
addFlowerViewModel
ââ$ 6
.
ââ6 7
ImageThumbnailUrl
ââ7 H
,
ââH I"
IsFlowerPresentation
ää $
=
ää% & 
addFlowerViewModel
ää' 9
.
ää9 :"
IsFlowerPresentation
ää: N
,
ääN O
InStock
ãã 
=
ãã  
addFlowerViewModel
ãã ,
.
ãã, -
InStock
ãã- 4
,
ãã4 5

CategoryId
åå 
=
åå  
addFlowerViewModel
åå /
.
åå/ 0

CategoryId
åå0 :
,
åå: ;
}
éé 
;
éé 
_flowerRepository
êê 
.
êê 
	AddFlower
êê '
(
êê' (
flower
êê( .
)
êê. /
;
êê/ 0
return
íí 
RedirectToAction
íí #
(
íí# $
FManagement
íí$ /
,
íí/ 0
_flowerRepository
íí1 B
.
ííB C
Flowers
ííC J
)
ííJ K
;
ííK L
}
ìì 	
[
ïï 	
HttpPost
ïï	 
]
ïï 
public
ññ 
IActionResult
ññ 
DeleteFlower
ññ )
(
ññ) *
int
ññ* -
id
ññ. 0
)
ññ0 1
{
óó 	
Flower
òò 
flower
òò 
=
òò 
_flowerRepository
òò -
.
òò- .
GetFlowerById
òò. ;
(
òò; <
id
òò< >
)
òò> ?
;
òò? @
if
ôô 
(
ôô 
flower
ôô 
!=
ôô 
null
ôô 
)
ôô 
{
öö 
_flowerRepository
õõ !
.
õõ! "
DeleteFlower
õõ" .
(
õõ. /
flower
õõ/ 5
)
õõ5 6
;
õõ6 7
return
ùù 
View
ùù 
(
ùù 
FManagement
ùù '
,
ùù' (
_flowerRepository
ùù) :
.
ùù: ; 
FlowersAsViewModel
ùù; M
)
ùùM N
;
ùùN O
}
ûû 
else
üü 
{
†† 

ModelState
°° 
.
°° 
AddModelError
°° (
(
°°( )
$str
°°) +
,
°°+ ,
$str
°°- J
)
°°J K
;
°°K L
}
¢¢ 
return
§§ 
View
§§ 
(
§§ 
FManagement
§§ #
,
§§# $
_flowerRepository
§§% 6
.
§§6 7 
FlowersAsViewModel
§§7 I
)
§§I J
;
§§J K
}
•• 	
public
ßß 
IActionResult
ßß 

EditFlower
ßß '
(
ßß' (
int
ßß( +
id
ßß, .
)
ßß. /
{
®® 	
ViewData
©© 
[
©© 
$str
©© !
]
©©! "
=
©©# $!
_categoryRepository
©©% 8
.
©©8 9

Categories
©©9 C
.
©©C D
ToList
©©D J
(
©©J K
)
©©K L
;
©©L M
var
´´ 
flower
´´ 
=
´´ 
_flowerRepository
´´ *
.
´´* +
GetFlowerById
´´+ 8
(
´´8 9
id
´´9 ;
)
´´; <
;
´´< =
if
≠≠ 
(
≠≠ 
flower
≠≠ 
==
≠≠ 
null
≠≠ 
)
≠≠ 
{
ÆÆ 
return
ØØ 
View
ØØ 
(
ØØ 
FManagement
ØØ '
,
ØØ' (
_flowerRepository
ØØ) :
.
ØØ: ; 
FlowersAsViewModel
ØØ; M
)
ØØM N
;
ØØN O
}
∞∞ 
var
≤≤ !
editFlowerViewModel
≤≤ #
=
≤≤$ %
new
≤≤& )!
EditFlowerViewModel
≤≤* =
{
≥≥ 
Name
¥¥ 
=
¥¥ 
flower
¥¥ 
.
¥¥ 
Name
¥¥ "
,
¥¥" #
ShortDescription
µµ  
=
µµ! "
flower
µµ# )
.
µµ) *
ShortDescription
µµ* :
,
µµ: ;
LongDescription
∂∂ 
=
∂∂  !
flower
∂∂" (
.
∂∂( )
LongDescription
∂∂) 8
,
∂∂8 9
Price
∑∑ 
=
∑∑ 
flower
∑∑ 
.
∑∑ 
Price
∑∑ $
,
∑∑$ %
ImageUrl
∏∏ 
=
∏∏ 
flower
∏∏ !
.
∏∏! "
ImageUrl
∏∏" *
,
∏∏* +
ImageThumbnailUrl
ππ !
=
ππ" #
flower
ππ$ *
.
ππ* +
ImageThumbnailUrl
ππ+ <
,
ππ< ="
IsFlowerPresentation
∫∫ $
=
∫∫% &
flower
∫∫' -
.
∫∫- ."
IsFlowerPresentation
∫∫. B
,
∫∫B C
InStock
ªª 
=
ªª 
flower
ªª  
.
ªª  !
InStock
ªª! (
,
ªª( )

CategoryId
ºº 
=
ºº 
flower
ºº #
.
ºº# $

CategoryId
ºº$ .
}
ΩΩ 
;
ΩΩ 
return
øø 
View
øø 
(
øø !
editFlowerViewModel
øø +
)
øø+ ,
;
øø, -
}
¿¿ 	
[
¬¬ 	
HttpPost
¬¬	 
]
¬¬ 
public
√√ 
IActionResult
√√ 

EditFlower
√√ '
(
√√' (!
EditFlowerViewModel
√√( ;!
editFlowerViewModel
√√< O
)
√√O P
{
ƒƒ 	
ViewData
≈≈ 
[
≈≈ 
$str
≈≈ !
]
≈≈! "
=
≈≈# $!
_categoryRepository
≈≈% 8
.
≈≈8 9

Categories
≈≈9 C
.
≈≈C D
ToList
≈≈D J
(
≈≈J K
)
≈≈K L
;
≈≈L M
var
«« 
flower
«« 
=
«« 
_flowerRepository
«« *
.
««* +
GetFlowerById
««+ 8
(
««8 9!
editFlowerViewModel
««9 L
.
««L M
Id
««M O
)
««O P
;
««P Q
if
…… 
(
…… 
flower
…… 
!=
…… 
null
…… 
)
…… 
{
   
flower
ÀÀ 
.
ÀÀ 
Name
ÀÀ 
=
ÀÀ !
editFlowerViewModel
ÀÀ 1
.
ÀÀ1 2
Name
ÀÀ2 6
;
ÀÀ6 7
flower
ÃÃ 
.
ÃÃ 
ShortDescription
ÃÃ '
=
ÃÃ( )!
editFlowerViewModel
ÃÃ* =
.
ÃÃ= >
ShortDescription
ÃÃ> N
;
ÃÃN O
flower
ÕÕ 
.
ÕÕ 
LongDescription
ÕÕ &
=
ÕÕ' (!
editFlowerViewModel
ÕÕ) <
.
ÕÕ< =
LongDescription
ÕÕ= L
;
ÕÕL M
flower
ŒŒ 
.
ŒŒ 
Price
ŒŒ 
=
ŒŒ !
editFlowerViewModel
ŒŒ 2
.
ŒŒ2 3
Price
ŒŒ3 8
;
ŒŒ8 9
flower
œœ 
.
œœ 
ImageUrl
œœ 
=
œœ  !!
editFlowerViewModel
œœ" 5
.
œœ5 6
ImageUrl
œœ6 >
;
œœ> ?
flower
–– 
.
–– 
ImageThumbnailUrl
–– (
=
––) *!
editFlowerViewModel
––+ >
.
––> ?
ImageThumbnailUrl
––? P
;
––P Q
flower
—— 
.
—— "
IsFlowerPresentation
—— +
=
——, -!
editFlowerViewModel
——. A
.
——A B"
IsFlowerPresentation
——B V
;
——V W
flower
““ 
.
““ 
InStock
““ 
=
““  !
editFlowerViewModel
““! 4
.
““4 5
InStock
““5 <
;
““< =
flower
”” 
.
”” 

CategoryId
”” !
=
””" #!
editFlowerViewModel
””$ 7
.
””7 8

CategoryId
””8 B
;
””B C
_flowerRepository
’’ !
.
’’! "
UpdateFlower
’’" .
(
’’. /
flower
’’/ 5
)
’’5 6
;
’’6 7
return
◊◊ 
RedirectToAction
◊◊ '
(
◊◊' (
FManagement
◊◊( 3
,
◊◊3 4
_flowerRepository
◊◊5 F
.
◊◊F G 
FlowersAsViewModel
◊◊G Y
)
◊◊Y Z
;
◊◊Z [
}
ÿÿ 
return
⁄⁄ 
RedirectToAction
⁄⁄ #
(
⁄⁄# $
FManagement
⁄⁄$ /
,
⁄⁄/ 0
_flowerRepository
⁄⁄1 B
.
⁄⁄B C 
FlowersAsViewModel
⁄⁄C U
)
⁄⁄U V
;
⁄⁄V W
}
€€ 	
private
›› 
FlowerViewModel
›› *
MapDbFlowerToFlowerViewModel
››  <
(
››< =
Flower
››= C
dbFlower
››D L
)
››L M
{
ﬁﬁ 	
return
ﬂﬂ 
new
ﬂﬂ 
FlowerViewModel
ﬂﬂ &
{
‡‡ 
FlowerId
·· 
=
·· 
dbFlower
·· #
.
··# $
FlowerId
··$ ,
,
··, -
Name
‚‚ 
=
‚‚ 
dbFlower
‚‚ 
.
‚‚  
Name
‚‚  $
,
‚‚$ %
Price
„„ 
=
„„ 
dbFlower
„„  
.
„„  !
Price
„„! &
,
„„& '
ShortDescription
‰‰  
=
‰‰! "
dbFlower
‰‰# +
.
‰‰+ ,
ShortDescription
‰‰, <
,
‰‰< =
ImageThumbnailUrl
ÂÂ !
=
ÂÂ" #
dbFlower
ÂÂ$ ,
.
ÂÂ, -
ImageThumbnailUrl
ÂÂ- >
}
ÊÊ 
;
ÊÊ 
}
ÁÁ 	
}
ËË 
}ÈÈ ü
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ContactController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
ContactController "
:# $

Controller% /
{ 
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" $
,$ %
Location& .
=/ 0!
ResponseCacheLocation1 F
.F G
ClientG M
)M N
]N O
public

 
IActionResult

 
Index

 "
(

" #
)

# $
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ù
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FavoriteFlowerController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class $
FavoriteFlowerController )
:* +

Controller, 6
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public $
FavoriteFlowerController '
(' (
IFlowerRepository( 9
flowerRepository: J
,J K
ShoppingCartL X
shoppingCartY e
)e f
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
} 
} Õë
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
public 

class 
FlowerController !
:" #

Controller$ .
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
FlowerController 
(  
IFlowerRepository  1
flowerRepository2 B
,B C
ICategoryRepositoryD W
categoryRepositoryX j
)j k
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public 

ViewResult 
List 
( 
string %
category& .
,. /
decimal 
lowPrice 
= 
$num  
,  !
decimal 
	highPrice 
= 
$num  !
,! "
string 
sorting 
= 
$str 
,  
FlowerStock 
availability $
=% &
$num' (
)( )
{ 	
IEnumerable 
< 
Flower 
> 
flowers  '
;' (
string 
currentCategory "
=# $
string% +
.+ ,
Empty, 1
;1 2
if   
(   
string   
.   
IsNullOrEmpty   $
(  $ %
category  % -
)  - .
)  . /
{!! 
flowers"" 
="" 
_flowerRepository"" +
.""+ ,
Flowers"", 3
.""3 4
OrderBy""4 ;
(""; <
p""< =
=>""> @
p""A B
.""B C
FlowerId""C K
)""K L
;""L M
flowers## 
=## 
PriceFilter## %
(##% &
lowPrice##& .
,##. /
	highPrice##0 9
,##9 :
flowers##; B
)##B C
;##C D
currentCategory%% 
=%%  !
$str%%" /
;%%/ 0
}&& 
else'' 
{(( 
flowers)) 
=)) 
_flowerRepository)) +
.))+ ,
Flowers)), 3
.))3 4
Where))4 9
())9 :
p)): ;
=>))< >
p))? @
.))@ A
Category))A I
.))I J
CategoryName))J V
==))W Y
category))Z b
)))b c
.** 
OrderBy** 
(** 
p** 
=>**  
p**! "
.**" #
FlowerId**# +
)**+ ,
;**, -
flowers,, 
=,, 
PriceFilter,, %
(,,% &
lowPrice,,& .
,,,. /
	highPrice,,0 9
,,,9 :
flowers,,; B
),,B C
;,,C D
currentCategory.. 
=..  !
_categoryRepository.." 5
...5 6

Categories..6 @
...@ A
FirstOrDefault..A O
(..O P
c..P Q
=>..R T
c..U V
...V W
CategoryName..W c
==..d f
category..g o
)..o p
...p q
CategoryName..q }
;..} ~
}// 
if11 
(11 
!11 
string11 
.11 
IsNullOrEmpty11 %
(11% &
sorting11& -
)11- .
)11. /
{22 
if33 
(33 
sorting33 
.33 
Equals33 "
(33" #
$str33# .
,33. /
StringComparison330 @
.33@ A
OrdinalIgnoreCase33A R
)33R S
)33S T
{44 
flowers55 
=55 
flowers55 %
.55% &
OrderBy55& -
(55- .
p55. /
=>550 2
p553 4
.554 5
Price555 :
)55: ;
;55; <
}66 
else77 
if77 
(77 
sorting77  
.77  !
Equals77! '
(77' (
$str77( 4
,774 5
StringComparison776 F
.77F G
OrdinalIgnoreCase77G X
)77X Y
)77Y Z
{88 
flowers99 
=99 
flowers99 %
.99% &
OrderByDescending99& 7
(997 8
p998 9
=>99: <
p99= >
.99> ?
Price99? D
)99D E
;99E F
}:: 
};; 
switch== 
(== 
availability==  
)==  !
{>> 
case?? 
FlowerStock??  
.??  !
InStock??! (
:??( )
flowers@@ 
=@@ 
flowers@@ %
.@@% &
Where@@& +
(@@+ ,
x@@, -
=>@@. 0
x@@1 2
.@@2 3
InStock@@3 :
==@@; =
true@@> B
)@@B C
;@@C D
breakAA 
;AA 
caseCC 
FlowerStockCC  
.CC  !

NotInStockCC! +
:CC+ ,
flowersDD 
=DD 
flowersDD %
.DD% &
WhereDD& +
(DD+ ,
xDD, -
=>DD. 0
xDD1 2
.DD2 3
InStockDD3 :
==DD; =
falseDD> C
)DDC D
;DDD E
breakEE 
;EE 
caseGG 
FlowerStockGG  
.GG  !
AllGG! $
:GG$ %
breakHH 
;HH 
}II 
returnKK 
ViewKK 
(KK 
newKK 
FlowerListViewModelKK /
{LL 
FlowersMM 
=MM 
flowersMM !
,MM! "
CurrentCategoryNN 
=NN  !
currentCategoryNN" 1
}OO 
)OO 
;OO 
}PP 	
publicRR 

ViewResultRR 
FavoriteRR "
(RR" #
)RR# $
{SS 	
IEnumerableTT 
<TT 
FlowerTT 
>TT 
flowersTT  '
=TT( )
_flowerRepositoryTT* ;
.TT; <
FlowersTT< C
.UU 
WhereUU 
(UU 
xUU 
=>UU 
xUU 
.UU 

IsFavoriteUU (
)UU( )
.VV 
OrderByVV 
(VV 
pVV 
=>VV 
pVV 
.VV  
FlowerIdVV  (
)VV( )
.WW 
ToListWW 
(WW 
)WW 
;WW 
returnYY 
ViewYY 
(YY 
newYY 
FlowerListViewModelYY /
{ZZ 
Flowers[[ 
=[[ 
flowers[[ !
,[[! "
CurrentCategory\\ 
=\\  !
null\\" &
}]] 
)]] 
;]] 
}^^ 	
public`` 
ActionResult`` 
AddToFavorite`` )
(``) *
int``* -
flowerId``. 6
)``6 7
{aa 	
varbb 
flowerbb 
=bb 
_flowerRepositorybb *
.bb* +
Flowersbb+ 2
.bb2 3
Wherebb3 8
(bb8 9
xbb9 :
=>bb; =
xbb> ?
.bb? @
FlowerIdbb@ H
==bbI K
flowerIdbbL T
)bbT U
.bbU V
FirstOrDefaultbbV d
(bbd e
)bbe f
;bbf g
ifdd 
(dd 
flowerdd 
!=dd 
nulldd 
)dd 
{ee 
flowerff 
.ff 

IsFavoriteff !
=ff" #
trueff$ (
;ff( )
_flowerRepositorygg !
.gg! "
UpdateFlowergg" .
(gg. /
flowergg/ 5
)gg5 6
;gg6 7
}hh 
returnjj 
RedirectToActionjj #
(jj# $
$strjj$ .
,jj. /
$strjj0 8
)jj8 9
;jj9 :
}kk 	
publicmm 
ActionResultmm 
RemoveFromFavoritemm .
(mm. /
intmm/ 2
flowerIdmm3 ;
)mm; <
{nn 	
varoo 
floweroo 
=oo 
_flowerRepositoryoo *
.oo* +
Flowersoo+ 2
.oo2 3
Whereoo3 8
(oo8 9
xoo9 :
=>oo; =
xoo> ?
.oo? @
FlowerIdoo@ H
==ooI K
flowerIdooL T
)ooT U
.ooU V
FirstOrDefaultooV d
(ood e
)ooe f
;oof g
ifqq 
(qq 
flowerqq 
!=qq 
nullqq 
)qq 
{rr 
flowerss 
.ss 

IsFavoritess !
=ss" #
falsess$ )
;ss) *
_flowerRepositorytt !
.tt! "
UpdateFlowertt" .
(tt. /
flowertt/ 5
)tt5 6
;tt6 7
}uu 
returnww 
RedirectToActionww #
(ww# $
$strww$ *
,ww* +
$strww, 4
)ww4 5
;ww5 6
}xx 	
privatezz 
staticzz 
IEnumerablezz "
<zz" #
Flowerzz# )
>zz) *
PriceFilterzz+ 6
(zz6 7
decimalzz7 >
lowPricezz? G
,zzG H
decimalzzI P
	highPricezzQ Z
,zzZ [
IEnumerablezz\ g
<zzg h
Flowerzzh n
>zzn o
flowerszzp w
)zzw x
{{{ 	
if|| 
(|| 
lowPrice|| 
!=|| 
$num|| 
)|| 
{}} 
if~~ 
(~~ 
	highPrice~~ 
!=~~  
$num~~! "
)~~" #
{ 
return
ÄÄ 
flowers
ÄÄ "
.
ÄÄ" #
Where
ÄÄ# (
(
ÄÄ( )
x
ÄÄ) *
=>
ÄÄ+ -
x
ÄÄ. /
.
ÄÄ/ 0
Price
ÄÄ0 5
>=
ÄÄ6 8
lowPrice
ÄÄ9 A
&&
ÄÄB D
x
ÄÄE F
.
ÄÄF G
Price
ÄÄG L
<=
ÄÄM O
	highPrice
ÄÄP Y
)
ÄÄY Z
.
ÄÄZ [
OrderBy
ÄÄ[ b
(
ÄÄb c
p
ÄÄc d
=>
ÄÄe g
p
ÄÄh i
.
ÄÄi j
FlowerId
ÄÄj r
)
ÄÄr s
;
ÄÄs t
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
return
ÑÑ 
flowers
ÑÑ "
.
ÑÑ" #
Where
ÑÑ# (
(
ÑÑ( )
x
ÑÑ) *
=>
ÑÑ+ -
x
ÑÑ. /
.
ÑÑ/ 0
Price
ÑÑ0 5
>=
ÑÑ6 8
lowPrice
ÑÑ9 A
)
ÑÑA B
.
ÑÑB C
OrderBy
ÑÑC J
(
ÑÑJ K
p
ÑÑK L
=>
ÑÑM O
p
ÑÑP Q
.
ÑÑQ R
FlowerId
ÑÑR Z
)
ÑÑZ [
;
ÑÑ[ \
}
ÖÖ 
}
ÜÜ 
else
áá 
if
áá 
(
áá 
	highPrice
áá 
!=
áá !
$num
áá" #
)
áá# $
{
àà 
return
ââ 
flowers
ââ 
.
ââ 
Where
ââ $
(
ââ$ %
x
ââ% &
=>
ââ' )
x
ââ* +
.
ââ+ ,
Price
ââ, 1
<=
ââ2 4
	highPrice
ââ5 >
)
ââ> ?
.
ââ? @
OrderBy
ââ@ G
(
ââG H
p
ââH I
=>
ââJ L
p
ââM N
.
ââN O
FlowerId
ââO W
)
ââW X
;
ââX Y
}
ää 
else
ãã 
{
åå 
return
çç 
flowers
çç 
;
çç 
}
éé 
}
èè 	
public
ëë 
enum
ëë 
FlowerStock
ëë 
{
íí 	
All
ìì 
=
ìì 
$num
ìì 
,
ìì 
InStock
îî 
=
îî 
$num
îî 
,
îî 

NotInStock
ïï 
=
ïï 
$num
ïï 
}
ññ 	
[
òò 	
HttpGet
òò	 
]
òò 
public
ôô 

ViewResult
ôô 
Search
ôô  
(
ôô  !
string
ôô! '

flowerName
ôô( 2
,
ôô2 3
decimal
ôô4 ;
lowPrice
ôô< D
=
ôôE F
$num
ôôG H
,
ôôH I
decimal
ôôJ Q
	highPrice
ôôR [
=
ôô\ ]
$num
ôô^ _
,
ôô_ `
string
ôôa g
sorting
ôôh o
=
ôôp q
$str
ôôr t
)
ôôt u
{
öö 	
IEnumerable
õõ 
<
õõ 
Flower
õõ 
>
õõ 
flowers
õõ  '
;
õõ' (
string
úú 
currentCategory
úú "
=
úú# $
string
úú% +
.
úú+ ,
Empty
úú, 1
;
úú1 2
ViewBag
ùù 
.
ùù 

FlowerName
ùù 
=
ùù  

flowerName
ùù! +
;
ùù+ ,
flowers
†† 
=
†† 
_flowerRepository
†† '
.
††' (
Flowers
††( /
.
††/ 0
Where
††0 5
(
††5 6
p
††6 7
=>
††8 :
p
††; <
.
††< =
Name
††= A
.
††A B
Contains
††B J
(
††J K

flowerName
††K U
)
††U V
||
††W Y
p
°° 
.
°° 
LongDescription
°° !
.
°°! "
Contains
°°" *
(
°°* +

flowerName
°°+ 5
)
°°5 6
||
°°7 9
p
¢¢ 
.
¢¢ 
ShortDescription
¢¢ "
.
¢¢" #
Contains
¢¢# +
(
¢¢+ ,

flowerName
¢¢, 6
)
¢¢6 7
)
¢¢7 8
.
¢¢8 9
OrderBy
¢¢9 @
(
¢¢@ A
p
¢¢A B
=>
¢¢C E
p
¢¢F G
.
¢¢G H
FlowerId
¢¢H P
)
¢¢P Q
;
¢¢Q R
flowers
§§ 
=
§§ 
PriceFilter
§§ !
(
§§! "
lowPrice
§§" *
,
§§* +
	highPrice
§§, 5
,
§§5 6
flowers
§§7 >
)
§§> ?
;
§§? @
if
¶¶ 
(
¶¶ 
!
¶¶ 
string
¶¶ 
.
¶¶ 
IsNullOrEmpty
¶¶ %
(
¶¶% &
sorting
¶¶& -
)
¶¶- .
)
¶¶. /
{
ßß 
if
®® 
(
®® 
sorting
®® 
.
®® 
Equals
®® "
(
®®" #
$str
®®# .
,
®®. /
StringComparison
®®0 @
.
®®@ A
OrdinalIgnoreCase
®®A R
)
®®R S
)
®®S T
{
©© 
flowers
™™ 
=
™™ 
flowers
™™ %
.
™™% &
OrderBy
™™& -
(
™™- .
p
™™. /
=>
™™0 2
p
™™3 4
.
™™4 5
Price
™™5 :
)
™™: ;
;
™™; <
}
´´ 
else
¨¨ 
if
¨¨ 
(
¨¨ 
sorting
¨¨  
.
¨¨  !
Equals
¨¨! '
(
¨¨' (
$str
¨¨( 4
,
¨¨4 5
StringComparison
¨¨6 F
.
¨¨F G
OrdinalIgnoreCase
¨¨G X
)
¨¨X Y
)
¨¨Y Z
{
≠≠ 
flowers
ÆÆ 
=
ÆÆ 
flowers
ÆÆ %
.
ÆÆ% &
OrderByDescending
ÆÆ& 7
(
ÆÆ7 8
p
ÆÆ8 9
=>
ÆÆ: <
p
ÆÆ= >
.
ÆÆ> ?
Price
ÆÆ? D
)
ÆÆD E
;
ÆÆE F
}
ØØ 
}
∞∞ 
return
≥≥ 
View
≥≥ 
(
≥≥ 
new
≥≥ !
FlowerListViewModel
≥≥ /
{
¥¥ 
Flowers
µµ 
=
µµ 
flowers
µµ !
,
µµ! "
CurrentCategory
∂∂ 
=
∂∂  !
currentCategory
∂∂" 1
}
∑∑ 
)
∑∑ 
;
∑∑ 
}
∏∏ 	
[
∫∫ 	
HttpGet
∫∫	 
]
∫∫ 
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
ActionResult
ªª &
>
ªª& ' 
AutocompleteSearch
ªª( :
(
ªª: ;
)
ªª; <
{
ºº 	
try
ΩΩ 
{
ææ 
string
øø 
term
øø 
=
øø 
HttpContext
øø )
.
øø) *
Request
øø* 1
.
øø1 2
Query
øø2 7
[
øø7 8
$str
øø8 >
]
øø> ?
.
øø? @
ToString
øø@ H
(
øøH I
)
øøI J
;
øøJ K
var
¿¿ 
names
¿¿ 
=
¿¿ 
_flowerRepository
¿¿ -
.
¿¿- .
Flowers
¿¿. 5
.
¿¿5 6
Where
¿¿6 ;
(
¿¿; <
p
¿¿< =
=>
¿¿> @
p
¿¿A B
.
¿¿B C
Name
¿¿C G
.
¿¿G H
Contains
¿¿H P
(
¿¿P Q
term
¿¿Q U
)
¿¿U V
)
¿¿V W
.
¿¿W X
Select
¿¿X ^
(
¿¿^ _
p
¿¿_ `
=>
¿¿a c
p
¿¿d e
.
¿¿e f
Name
¿¿f j
)
¿¿j k
.
¿¿k l
ToList
¿¿l r
(
¿¿r s
)
¿¿s t
;
¿¿t u
return
¬¬ 
Ok
¬¬ 
(
¬¬ 
names
¬¬ 
)
¬¬  
;
¬¬  !
}
√√ 
catch
ƒƒ 
{
≈≈ 
return
∆∆ 

BadRequest
∆∆ !
(
∆∆! "
)
∆∆" #
;
∆∆# $
}
«« 
}
»» 	
[
   	
HttpGet
  	 
]
   
public
ÀÀ 
IEnumerable
ÀÀ 
<
ÀÀ 
string
ÀÀ !
>
ÀÀ! "
FlowersNames
ÀÀ# /
(
ÀÀ/ 0
)
ÀÀ0 1
{
ÃÃ 	
return
ÕÕ 
_flowerRepository
ÕÕ $
.
ÕÕ$ %
FlowersNames
ÕÕ% 1
;
ÕÕ1 2
}
ŒŒ 	
public
–– 
IActionResult
–– 
Details
–– $
(
––$ %
int
––% (
id
––) +
)
––+ ,
{
—— 	
var
““ 
flower
““ 
=
““ 
_flowerRepository
““ *
.
““* +
GetFlowerById
““+ 8
(
““8 9
id
““9 ;
)
““; <
;
““< =
if
‘‘ 
(
‘‘ 
flower
‘‘ 
==
‘‘ 
null
‘‘ 
)
‘‘ 
{
’’ 
return
÷÷ 
NotFound
÷÷ 
(
÷÷  
)
÷÷  !
;
÷÷! "
}
◊◊ 
return
ŸŸ 
View
ŸŸ 
(
ŸŸ 
new
ŸŸ #
FlowerDetailViewModel
ŸŸ 1
{
⁄⁄ 
Flower
€€ 
=
€€ 
flower
€€ 
}
‹‹ 
)
‹‹ 
;
‹‹ 
}
›› 	
}
ﬁﬁ 
}ﬂﬂ á
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerDataController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class  
FlowerDataController %
:& '

Controller( 2
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public  
FlowerDataController #
(# $
IFlowerRepository$ 5
flowerRepository6 F
)F G
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
FlowerViewModel *
>* +
LoadMoreFlowers, ;
(; <
)< =
{ 	
IEnumerable 
< 
Flower 
> 
	dbFlowers  )
=* +
null, 0
;0 1
	dbFlowers 
= 
_flowerRepository )
.) *
Flowers* 1
.1 2
OrderBy2 9
(9 :
p: ;
=>< >
p? @
.@ A
FlowerIdA I
)I J
.J K
TakeK O
(O P
$numP R
)R S
;S T
List 
< 
FlowerViewModel  
>  !
flowers" )
=* +
new, /
List0 4
<4 5
FlowerViewModel5 D
>D E
(E F
)F G
;G H
foreach   
(   
var   
dbFlower   !
in  " $
	dbFlowers  % .
)  . /
{!! 
flowers"" 
."" 
Add"" 
("" (
MapDbFlowerToFlowerViewModel"" 8
(""8 9
dbFlower""9 A
)""A B
)""B C
;""C D
}## 
return$$ 
flowers$$ 
;$$ 
}%% 	
private'' 
FlowerViewModel'' (
MapDbFlowerToFlowerViewModel''  <
(''< =
Flower''= C
dbFlower''D L
)''L M
{(( 	
return)) 
new)) 
FlowerViewModel)) &
{** 
FlowerId++ 
=++ 
dbFlower++ #
.++# $
FlowerId++$ ,
,++, -
Name,, 
=,, 
dbFlower,, 
.,,  
Name,,  $
,,,$ %
Price-- 
=-- 
dbFlower--  
.--  !
Price--! &
,--& '
ShortDescription..  
=..! "
dbFlower..# +
...+ ,
ShortDescription.., <
,..< =
ImageThumbnailUrl// !
=//" #
dbFlower//$ ,
.//, -
ImageThumbnailUrl//- >
}00 
;00 
}11 	
}22 
}33 µ

HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\HomeController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public 
HomeController 
( 
IFlowerRepository /
flowerRepository0 @
)@ A
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
homeViewModel 
= 
new  #
HomeViewModel$ 1
{ 
FlowerPresentation "
=# $
_flowerRepository% 6
.6 7
FlowerPresentation7 I
,I J
FlowersName 
= 
_flowerRepository /
./ 0
FlowersNames0 <
} 
; 
return 
View 
( 
homeViewModel %
)% &
;& '
} 	
} 
} À
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
OrderController  
:! "

Controller# -
{		 
private

 
readonly

 
IOrderRepository

 )
_orderRepository

* :
;

: ;
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderController 
( 
IOrderRepository /
orderRepository0 ?
,? @
ShoppingCartA M
shoppingCartN Z
)Z [
{ 	
_orderRepository 
= 
orderRepository .
;. /
_shoppingCart 
= 
shoppingCart (
;( )
} 	
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
)& '
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
Order& +
order, 1
)1 2
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
if   
(   
_shoppingCart   
.   
ShoppingCartItems   /
.  / 0
Count  0 5
==  6 8
$num  9 :
)  : ;
{!! 

ModelState"" 
."" 
AddModelError"" (
(""( )
$str"") +
,""+ ,
$str""- Y
)""Y Z
;""Z [
}## 
if%% 
(%% 

ModelState%% 
.%% 
IsValid%% "
)%%" #
{&& 
order'' 
.'' 
Email'' 
='' 
User'' "
.''" #
Identity''# +
.''+ ,
Name'', 0
;''0 1
_orderRepository((  
.((  !
CreateOrder((! ,
(((, -
order((- 2
)((2 3
;((3 4
_shoppingCart)) 
.)) 
	ClearCart)) '
())' (
)))( )
;))) *
return** 
RedirectToAction** '
(**' (
$str**( :
)**: ;
;**; <
}++ 
return,, 
View,, 
(,, 
order,, 
),, 
;,, 
}-- 	
public// 
IActionResult// 
CheckoutComplete// -
(//- .
)//. /
{00 	
ViewBag11 
.11 #
CheckoutCompleteMessage11 +
=11, -
$str11. n
;11n o
return33 
View33 
(33 
)33 
;33 
}44 	
}55 
}66 «
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderHistoryController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
public

 

class

 "
OrderHistoryController

 '
:

( )

Controller

* 4
{ 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public "
OrderHistoryController %
(% &
IOrderRepository& 6
orderRepository7 F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
)t u
{ 	
_orderRepository 
= 
orderRepository .
;. /
_signInManager 
= 
signInManager *
;* +
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
IEnumerable 
< (
OrderHistoryDetailsViewModel 4
>4 5
orders6 <
== >
null? C
;C D
if 
( 
_signInManager 
. 

IsSignedIn )
() *
User* .
). /
&&0 2
User3 7
.7 8
IsInRole8 @
(@ A
$strA Q
)Q R
)R S
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
)? @
;@ A
} 
else 
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
User? C
.C D
IdentityD L
.L M
NameM Q
)Q R
;R S
} 
return!! 
View!! 
(!! 
new!! !
OrderHistoryViewModel!! 1
{"" 
Orders## 
=## 
orders## 
}$$ 
)$$ 
;$$ 
}%% 	
}&& 
}(( ¸'
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ShoppingCartController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public		 

class		 "
ShoppingCartController		 '
:		( )

Controller		* 4
{

 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public "
ShoppingCartController %
(% &
IFlowerRepository& 7
flowerRepository8 H
,H I
ShoppingCartJ V
shoppingCartW c
)c d
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var !
shoppingCartViewModel %
=& '
new( +!
ShoppingCartViewModel, A
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return 
View 
( !
shoppingCartViewModel -
)- .
;. /
}   	
public"" "
RedirectToActionResult"" %
AddToShoppingCart""& 7
(""7 8
int""8 ;
flowerId""< D
)""D E
{## 	
var$$ 
selectedFlower$$ 
=$$  
_flowerRepository$$! 2
.$$2 3
Flowers$$3 :
.$$: ;
FirstOrDefault$$; I
($$I J
p$$J K
=>$$L N
p$$O P
.$$P Q
FlowerId$$Q Y
==$$Z \
flowerId$$] e
)$$e f
;$$f g
if&& 
(&& 
selectedFlower&& 
!=&& !
null&&" &
)&&& '
{'' 
_shoppingCart(( 
.(( 
	AddToCart(( '
(((' (
selectedFlower((( 6
,((6 7
$num((8 9
)((9 :
;((: ;
})) 
return** 
RedirectToAction** #
(**# $
$str**$ +
)**+ ,
;**, -
}++ 	
public-- "
RedirectToActionResult-- %
UpdateShoppingCart--& 8
(--8 9
int--9 <
flowerId--= E
,--E F
bool--G K
isAdding--L T
)--T U
{.. 	
var// 
selectedFlower// 
=//  
_flowerRepository//! 2
.//2 3
Flowers//3 :
.//: ;
FirstOrDefault//; I
(//I J
p//J K
=>//L N
p//O P
.//P Q
FlowerId//Q Y
==//Z \
flowerId//] e
)//e f
;//f g
if11 
(11 
selectedFlower11 
!=11 !
null11" &
)11& '
{22 
if33 
(33 
isAdding33 
)33 
{44 
_shoppingCart55 !
.55! "
	AddToCart55" +
(55+ ,
selectedFlower55, :
,55: ;
$num55< =
)55= >
;55> ?
}66 
else77 
{88 
_shoppingCart99 !
.99! "
	AddToCart99" +
(99+ ,
selectedFlower99, :
,99: ;
-99< =
$num99= >
)99> ?
;99? @
}:: 
};; 
return<< 
RedirectToAction<< #
(<<# $
$str<<$ +
)<<+ ,
;<<, -
}== 	
public?? "
RedirectToActionResult?? %"
RemoveFromShoppingCart??& <
(??< =
int??= @
flowerId??A I
)??I J
{@@ 	
varAA 
selectedFlowerAA 
=AA  
_flowerRepositoryAA! 2
.AA2 3
FlowersAA3 :
.AA: ;
FirstOrDefaultAA; I
(AAI J
pAAJ K
=>AAL N
pAAO P
.AAP Q
FlowerIdAAQ Y
==AAZ \
flowerIdAA] e
)AAe f
;AAf g
ifCC 
(CC 
selectedFlowerCC 
!=CC !
nullCC" &
)CC& '
{DD 
_shoppingCartEE 
.EE 
RemoveFromCartEE ,
(EE, -
selectedFlowerEE- ;
)EE; <
;EE< =
}FF 
returnGG 
RedirectToActionGG #
(GG# $
$strGG$ +
)GG+ ,
;GG, -
}HH 	
}II 
}JJ ãÿ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191208173628_Init.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Init 
: 
	Migration  )
{ 
private		 
const		 
string		 
AspNetRoles		 (
=		) *
$str		+ 8
;		8 9
private

 
const

 
string

 
AspNetUsers

 (
=

) *
$str

+ 8
;

8 9
private 
const 
string #
ValueGenerationStrategy 4
=5 6
$str7 Z
;Z [
private 
const 
string 
Flowers $
=% &
$str' 0
;0 1
private 
const 
string 
OrderDetails )
=* +
$str, :
;: ;
private 
const 
string 
	Flower_Id &
=' (
$str) 3
;3 4
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
AspNetRoles !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
	maxLength: C
:C D
$numE H
,H I
nullableJ R
:R S
trueT X
)X Y
,Y Z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
nullable< D
:D E
trueF J
)J K
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder   
.   
CreateTable   (
(  ( )
name!! 
:!! 
AspNetRoles!! !
,!!! "
columns"" 
:"" 
table"" 
=>"" !
new""" %
{## 
Id$$ 
=$$ 
table$$ 
.$$ 
Column$$ %
<$$% &
string$$& ,
>$$, -
($$- .
nullable$$. 6
:$$6 7
false$$8 =
)$$= >
,$$> ?
UserName%% 
=%% 
table%% $
.%%$ %
Column%%% +
<%%+ ,
string%%, 2
>%%2 3
(%%3 4
	maxLength%%4 =
:%%= >
$num%%? B
,%%B C
nullable%%D L
:%%L M
true%%N R
)%%R S
,%%S T
NormalizedUserName&& &
=&&' (
table&&) .
.&&. /
Column&&/ 5
<&&5 6
string&&6 <
>&&< =
(&&= >
	maxLength&&> G
:&&G H
$num&&I L
,&&L M
nullable&&N V
:&&V W
true&&X \
)&&\ ]
,&&] ^
Email'' 
='' 
table'' !
.''! "
Column''" (
<''( )
string'') /
>''/ 0
(''0 1
	maxLength''1 :
:'': ;
$num''< ?
,''? @
nullable''A I
:''I J
true''K O
)''O P
,''P Q
NormalizedEmail(( #
=(($ %
table((& +
.((+ ,
Column((, 2
<((2 3
string((3 9
>((9 :
(((: ;
	maxLength((; D
:((D E
$num((F I
,((I J
nullable((K S
:((S T
true((U Y
)((Y Z
,((Z [
EmailConfirmed)) "
=))# $
table))% *
.))* +
Column))+ 1
<))1 2
bool))2 6
>))6 7
())7 8
nullable))8 @
:))@ A
false))B G
)))G H
,))H I
PasswordHash**  
=**! "
table**# (
.**( )
Column**) /
<**/ 0
string**0 6
>**6 7
(**7 8
nullable**8 @
:**@ A
true**B F
)**F G
,**G H
SecurityStamp++ !
=++" #
table++$ )
.++) *
Column++* 0
<++0 1
string++1 7
>++7 8
(++8 9
nullable++9 A
:++A B
true++C G
)++G H
,++H I
ConcurrencyStamp,, $
=,,% &
table,,' ,
.,,, -
Column,,- 3
<,,3 4
string,,4 :
>,,: ;
(,,; <
nullable,,< D
:,,D E
true,,F J
),,J K
,,,K L
PhoneNumber-- 
=--  !
table--" '
.--' (
Column--( .
<--. /
string--/ 5
>--5 6
(--6 7
nullable--7 ?
:--? @
true--A E
)--E F
,--F G 
PhoneNumberConfirmed.. (
=..) *
table..+ 0
...0 1
Column..1 7
<..7 8
bool..8 <
>..< =
(..= >
nullable..> F
:..F G
false..H M
)..M N
,..N O
TwoFactorEnabled// $
=//% &
table//' ,
.//, -
Column//- 3
<//3 4
bool//4 8
>//8 9
(//9 :
nullable//: B
://B C
false//D I
)//I J
,//J K

LockoutEnd00 
=00  
table00! &
.00& '
Column00' -
<00- .
DateTimeOffset00. <
>00< =
(00= >
nullable00> F
:00F G
true00H L
)00L M
,00M N
LockoutEnabled11 "
=11# $
table11% *
.11* +
Column11+ 1
<111 2
bool112 6
>116 7
(117 8
nullable118 @
:11@ A
false11B G
)11G H
,11H I
AccessFailedCount22 %
=22& '
table22( -
.22- .
Column22. 4
<224 5
int225 8
>228 9
(229 :
nullable22: B
:22B C
false22D I
)22I J
,22J K
	Birthdate33 
=33 
table33  %
.33% &
Column33& ,
<33, -
DateTime33- 5
>335 6
(336 7
nullable337 ?
:33? @
false33A F
)33F G
,33G H
City44 
=44 
table44  
.44  !
Column44! '
<44' (
string44( .
>44. /
(44/ 0
nullable440 8
:448 9
true44: >
)44> ?
,44? @
Country55 
=55 
table55 #
.55# $
Column55$ *
<55* +
string55+ 1
>551 2
(552 3
nullable553 ;
:55; <
true55= A
)55A B
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% 5
,995 6
x997 8
=>999 ;
x99< =
.99= >
Id99> @
)99@ A
;99A B
}:: 
):: 
;:: 
migrationBuilder<< 
.<< 
CreateTable<< (
(<<( )
name== 
:== 
$str== "
,==" #
columns>> 
:>> 
table>> 
=>>> !
new>>" %
{?? 

CategoryId@@ 
=@@  
table@@! &
.@@& '
Column@@' -
<@@- .
int@@. 1
>@@1 2
(@@2 3
nullable@@3 ;
:@@; <
false@@= B
)@@B C
.AA 

AnnotationAA #
(AA# $#
ValueGenerationStrategyAA$ ;
,AA; <,
 SqlServerValueGenerationStrategyAA= ]
.AA] ^
IdentityColumnAA^ l
)AAl m
,AAm n
CategoryNameBB  
=BB! "
tableBB# (
.BB( )
ColumnBB) /
<BB/ 0
stringBB0 6
>BB6 7
(BB7 8
nullableBB8 @
:BB@ A
trueBBB F
)BBF G
,BBG H
DescriptionCC 
=CC  !
tableCC" '
.CC' (
ColumnCC( .
<CC. /
stringCC/ 5
>CC5 6
(CC6 7
nullableCC7 ?
:CC? @
trueCCA E
)CCE F
}DD 
,DD 
constraintsEE 
:EE 
tableEE "
=>EE# %
{FF 
tableGG 
.GG 

PrimaryKeyGG $
(GG$ %
$strGG% 4
,GG4 5
xGG6 7
=>GG8 :
xGG; <
.GG< =

CategoryIdGG= G
)GGG H
;GGH I
}HH 
)HH 
;HH 
migrationBuilderJJ 
.JJ 
CreateTableJJ (
(JJ( )
nameKK 
:KK 
$strKK 
,KK 
columnsLL 
:LL 
tableLL 
=>LL !
newLL" %
{MM 
OrderIdNN 
=NN 
tableNN #
.NN# $
ColumnNN$ *
<NN* +
intNN+ .
>NN. /
(NN/ 0
nullableNN0 8
:NN8 9
falseNN: ?
)NN? @
.OO 

AnnotationOO #
(OO# $#
ValueGenerationStrategyOO$ ;
,OO; <,
 SqlServerValueGenerationStrategyOO= ]
.OO] ^
IdentityColumnOO^ l
)OOl m
,OOm n
	FirstNamePP 
=PP 
tablePP  %
.PP% &
ColumnPP& ,
<PP, -
stringPP- 3
>PP3 4
(PP4 5
	maxLengthPP5 >
:PP> ?
$numPP@ B
,PPB C
nullablePPD L
:PPL M
falsePPN S
)PPS T
,PPT U
LastNameQQ 
=QQ 
tableQQ $
.QQ$ %
ColumnQQ% +
<QQ+ ,
stringQQ, 2
>QQ2 3
(QQ3 4
	maxLengthQQ4 =
:QQ= >
$numQQ? A
,QQA B
nullableQQC K
:QQK L
falseQQM R
)QQR S
,QQS T
AddressLine1RR  
=RR! "
tableRR# (
.RR( )
ColumnRR) /
<RR/ 0
stringRR0 6
>RR6 7
(RR7 8
	maxLengthRR8 A
:RRA B
$numRRC F
,RRF G
nullableRRH P
:RRP Q
falseRRR W
)RRW X
,RRX Y
AddressLine2SS  
=SS! "
tableSS# (
.SS( )
ColumnSS) /
<SS/ 0
stringSS0 6
>SS6 7
(SS7 8
nullableSS8 @
:SS@ A
trueSSB F
)SSF G
,SSG H
ZipCodeTT 
=TT 
tableTT #
.TT# $
ColumnTT$ *
<TT* +
stringTT+ 1
>TT1 2
(TT2 3
	maxLengthTT3 <
:TT< =
$numTT> @
,TT@ A
nullableTTB J
:TTJ K
falseTTL Q
)TTQ R
,TTR S
CityUU 
=UU 
tableUU  
.UU  !
ColumnUU! '
<UU' (
stringUU( .
>UU. /
(UU/ 0
	maxLengthUU0 9
:UU9 :
$numUU; =
,UU= >
nullableUU? G
:UUG H
falseUUI N
)UUN O
,UUO P
StateVV 
=VV 
tableVV !
.VV! "
ColumnVV" (
<VV( )
stringVV) /
>VV/ 0
(VV0 1
	maxLengthVV1 :
:VV: ;
$numVV< >
,VV> ?
nullableVV@ H
:VVH I
trueVVJ N
)VVN O
,VVO P
CountryWW 
=WW 
tableWW #
.WW# $
ColumnWW$ *
<WW* +
stringWW+ 1
>WW1 2
(WW2 3
	maxLengthWW3 <
:WW< =
$numWW> @
,WW@ A
nullableWWB J
:WWJ K
falseWWL Q
)WWQ R
,WWR S
PhoneNumberXX 
=XX  !
tableXX" '
.XX' (
ColumnXX( .
<XX. /
stringXX/ 5
>XX5 6
(XX6 7
	maxLengthXX7 @
:XX@ A
$numXXB D
,XXD E
nullableXXF N
:XXN O
falseXXP U
)XXU V
,XXV W
EmailYY 
=YY 
tableYY !
.YY! "
ColumnYY" (
<YY( )
stringYY) /
>YY/ 0
(YY0 1
	maxLengthYY1 :
:YY: ;
$numYY< >
,YY> ?
nullableYY@ H
:YYH I
falseYYJ O
)YYO P
,YYP Q

OrderTotalZZ 
=ZZ  
tableZZ! &
.ZZ& '
ColumnZZ' -
<ZZ- .
decimalZZ. 5
>ZZ5 6
(ZZ6 7
nullableZZ7 ?
:ZZ? @
falseZZA F
)ZZF G
,ZZG H
OrderPlaced[[ 
=[[  !
table[[" '
.[[' (
Column[[( .
<[[. /
DateTime[[/ 7
>[[7 8
([[8 9
nullable[[9 A
:[[A B
false[[C H
)[[H I
}\\ 
,\\ 
constraints]] 
:]] 
table]] "
=>]]# %
{^^ 
table__ 
.__ 

PrimaryKey__ $
(__$ %
$str__% 0
,__0 1
x__2 3
=>__4 6
x__7 8
.__8 9
OrderId__9 @
)__@ A
;__A B
}`` 
)`` 
;`` 
migrationBuilderbb 
.bb 
CreateTablebb (
(bb( )
namecc 
:cc 
$strcc (
,cc( )
columnsdd 
:dd 
tabledd 
=>dd !
newdd" %
{ee 
Idff 
=ff 
tableff 
.ff 
Columnff %
<ff% &
intff& )
>ff) *
(ff* +
nullableff+ 3
:ff3 4
falseff5 :
)ff: ;
.gg 

Annotationgg #
(gg# $#
ValueGenerationStrategygg$ ;
,gg; <,
 SqlServerValueGenerationStrategygg= ]
.gg] ^
IdentityColumngg^ l
)ggl m
,ggm n
RoleIdhh 
=hh 
tablehh "
.hh" #
Columnhh# )
<hh) *
stringhh* 0
>hh0 1
(hh1 2
nullablehh2 :
:hh: ;
falsehh< A
)hhA B
,hhB C
	ClaimTypeii 
=ii 
tableii  %
.ii% &
Columnii& ,
<ii, -
stringii- 3
>ii3 4
(ii4 5
nullableii5 =
:ii= >
trueii? C
)iiC D
,iiD E

ClaimValuejj 
=jj  
tablejj! &
.jj& '
Columnjj' -
<jj- .
stringjj. 4
>jj4 5
(jj5 6
nullablejj6 >
:jj> ?
truejj@ D
)jjD E
}kk 
,kk 
constraintsll 
:ll 
tablell "
=>ll# %
{mm 
tablenn 
.nn 

PrimaryKeynn $
(nn$ %
$strnn% :
,nn: ;
xnn< =
=>nn> @
xnnA B
.nnB C
IdnnC E
)nnE F
;nnF G
tableoo 
.oo 

ForeignKeyoo $
(oo$ %
namepp 
:pp 
$strpp F
,ppF G
columnqq 
:qq 
xqq  !
=>qq" $
xqq% &
.qq& '
RoleIdqq' -
,qq- .
principalTablerr &
:rr& '
AspNetRolesrr( 3
,rr3 4
principalColumnss '
:ss' (
$strss) -
,ss- .
onDeletett  
:tt  !
ReferentialActiontt" 3
.tt3 4
Cascadett4 ;
)tt; <
;tt< =
}uu 
)uu 
;uu 
migrationBuilderww 
.ww 
CreateTableww (
(ww( )
namexx 
:xx 
$strxx (
,xx( )
columnsyy 
:yy 
tableyy 
=>yy !
newyy" %
{zz 
Id{{ 
={{ 
table{{ 
.{{ 
Column{{ %
<{{% &
int{{& )
>{{) *
({{* +
nullable{{+ 3
:{{3 4
false{{5 :
){{: ;
.|| 

Annotation|| #
(||# $#
ValueGenerationStrategy||$ ;
,||; <,
 SqlServerValueGenerationStrategy||= ]
.||] ^
IdentityColumn||^ l
)||l m
,||m n
UserId}} 
=}} 
table}} "
.}}" #
Column}}# )
<}}) *
string}}* 0
>}}0 1
(}}1 2
nullable}}2 :
:}}: ;
false}}< A
)}}A B
,}}B C
	ClaimType~~ 
=~~ 
table~~  %
.~~% &
Column~~& ,
<~~, -
string~~- 3
>~~3 4
(~~4 5
nullable~~5 =
:~~= >
true~~? C
)~~C D
,~~D E

ClaimValue 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
nullable6 >
:> ?
true@ D
)D E
}
ÄÄ 
,
ÄÄ 
constraints
ÅÅ 
:
ÅÅ 
table
ÅÅ "
=>
ÅÅ# %
{
ÇÇ 
table
ÉÉ 
.
ÉÉ 

PrimaryKey
ÉÉ $
(
ÉÉ$ %
$str
ÉÉ% :
,
ÉÉ: ;
x
ÉÉ< =
=>
ÉÉ> @
x
ÉÉA B
.
ÉÉB C
Id
ÉÉC E
)
ÉÉE F
;
ÉÉF G
table
ÑÑ 
.
ÑÑ 

ForeignKey
ÑÑ $
(
ÑÑ$ %
name
ÖÖ 
:
ÖÖ 
$str
ÖÖ F
,
ÖÖF G
column
ÜÜ 
:
ÜÜ 
x
ÜÜ  !
=>
ÜÜ" $
x
ÜÜ% &
.
ÜÜ& '
UserId
ÜÜ' -
,
ÜÜ- .
principalTable
áá &
:
áá& '
AspNetUsers
áá( 3
,
áá3 4
principalColumn
àà '
:
àà' (
$str
àà) -
,
àà- .
onDelete
ââ  
:
ââ  !
ReferentialAction
ââ" 3
.
ââ3 4
Cascade
ââ4 ;
)
ââ; <
;
ââ< =
}
ää 
)
ää 
;
ää 
migrationBuilder
åå 
.
åå 
CreateTable
åå (
(
åå( )
name
çç 
:
çç 
$str
çç (
,
çç( )
columns
éé 
:
éé 
table
éé 
=>
éé !
new
éé" %
{
èè 
LoginProvider
êê !
=
êê" #
table
êê$ )
.
êê) *
Column
êê* 0
<
êê0 1
string
êê1 7
>
êê7 8
(
êê8 9
nullable
êê9 A
:
êêA B
false
êêC H
)
êêH I
,
êêI J
ProviderKey
ëë 
=
ëë  !
table
ëë" '
.
ëë' (
Column
ëë( .
<
ëë. /
string
ëë/ 5
>
ëë5 6
(
ëë6 7
nullable
ëë7 ?
:
ëë? @
false
ëëA F
)
ëëF G
,
ëëG H!
ProviderDisplayName
íí '
=
íí( )
table
íí* /
.
íí/ 0
Column
íí0 6
<
íí6 7
string
íí7 =
>
íí= >
(
íí> ?
nullable
íí? G
:
ííG H
true
ííI M
)
ííM N
,
ííN O
UserId
ìì 
=
ìì 
table
ìì "
.
ìì" #
Column
ìì# )
<
ìì) *
string
ìì* 0
>
ìì0 1
(
ìì1 2
nullable
ìì2 :
:
ìì: ;
false
ìì< A
)
ììA B
}
îî 
,
îî 
constraints
ïï 
:
ïï 
table
ïï "
=>
ïï# %
{
ññ 
table
óó 
.
óó 

PrimaryKey
óó $
(
óó$ %
$str
óó% :
,
óó: ;
x
óó< =
=>
óó> @
new
óóA D
{
óóE F
x
óóG H
.
óóH I
LoginProvider
óóI V
,
óóV W
x
óóX Y
.
óóY Z
ProviderKey
óóZ e
}
óóf g
)
óóg h
;
óóh i
table
òò 
.
òò 

ForeignKey
òò $
(
òò$ %
name
ôô 
:
ôô 
$str
ôô F
,
ôôF G
column
öö 
:
öö 
x
öö  !
=>
öö" $
x
öö% &
.
öö& '
UserId
öö' -
,
öö- .
principalTable
õõ &
:
õõ& '
AspNetUsers
õõ( 3
,
õõ3 4
principalColumn
úú '
:
úú' (
$str
úú) -
,
úú- .
onDelete
ùù  
:
ùù  !
ReferentialAction
ùù" 3
.
ùù3 4
Cascade
ùù4 ;
)
ùù; <
;
ùù< =
}
ûû 
)
ûû 
;
ûû 
migrationBuilder
†† 
.
†† 
CreateTable
†† (
(
††( )
name
°° 
:
°° 
$str
°° '
,
°°' (
columns
¢¢ 
:
¢¢ 
table
¢¢ 
=>
¢¢ !
new
¢¢" %
{
££ 
UserId
§§ 
=
§§ 
table
§§ "
.
§§" #
Column
§§# )
<
§§) *
string
§§* 0
>
§§0 1
(
§§1 2
nullable
§§2 :
:
§§: ;
false
§§< A
)
§§A B
,
§§B C
RoleId
•• 
=
•• 
table
•• "
.
••" #
Column
••# )
<
••) *
string
••* 0
>
••0 1
(
••1 2
nullable
••2 :
:
••: ;
false
••< A
)
••A B
}
¶¶ 
,
¶¶ 
constraints
ßß 
:
ßß 
table
ßß "
=>
ßß# %
{
®® 
table
©© 
.
©© 

PrimaryKey
©© $
(
©©$ %
$str
©©% 9
,
©©9 :
x
©©; <
=>
©©= ?
new
©©@ C
{
©©D E
x
©©F G
.
©©G H
UserId
©©H N
,
©©N O
x
©©P Q
.
©©Q R
RoleId
©©R X
}
©©Y Z
)
©©Z [
;
©©[ \
table
™™ 
.
™™ 

ForeignKey
™™ $
(
™™$ %
name
´´ 
:
´´ 
$str
´´ E
,
´´E F
column
¨¨ 
:
¨¨ 
x
¨¨  !
=>
¨¨" $
x
¨¨% &
.
¨¨& '
RoleId
¨¨' -
,
¨¨- .
principalTable
≠≠ &
:
≠≠& '
AspNetRoles
≠≠( 3
,
≠≠3 4
principalColumn
ÆÆ '
:
ÆÆ' (
$str
ÆÆ) -
,
ÆÆ- .
onDelete
ØØ  
:
ØØ  !
ReferentialAction
ØØ" 3
.
ØØ3 4
Cascade
ØØ4 ;
)
ØØ; <
;
ØØ< =
table
∞∞ 
.
∞∞ 

ForeignKey
∞∞ $
(
∞∞$ %
name
±± 
:
±± 
$str
±± E
,
±±E F
column
≤≤ 
:
≤≤ 
x
≤≤  !
=>
≤≤" $
x
≤≤% &
.
≤≤& '
UserId
≤≤' -
,
≤≤- .
principalTable
≥≥ &
:
≥≥& '
AspNetUsers
≥≥( 3
,
≥≥3 4
principalColumn
¥¥ '
:
¥¥' (
$str
¥¥) -
,
¥¥- .
onDelete
µµ  
:
µµ  !
ReferentialAction
µµ" 3
.
µµ3 4
Cascade
µµ4 ;
)
µµ; <
;
µµ< =
}
∂∂ 
)
∂∂ 
;
∂∂ 
migrationBuilder
∏∏ 
.
∏∏ 
CreateTable
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ (
,
ππ( )
columns
∫∫ 
:
∫∫ 
table
∫∫ 
=>
∫∫ !
new
∫∫" %
{
ªª 
UserId
ºº 
=
ºº 
table
ºº "
.
ºº" #
Column
ºº# )
<
ºº) *
string
ºº* 0
>
ºº0 1
(
ºº1 2
nullable
ºº2 :
:
ºº: ;
false
ºº< A
)
ººA B
,
ººB C
LoginProvider
ΩΩ !
=
ΩΩ" #
table
ΩΩ$ )
.
ΩΩ) *
Column
ΩΩ* 0
<
ΩΩ0 1
string
ΩΩ1 7
>
ΩΩ7 8
(
ΩΩ8 9
nullable
ΩΩ9 A
:
ΩΩA B
false
ΩΩC H
)
ΩΩH I
,
ΩΩI J
Name
ææ 
=
ææ 
table
ææ  
.
ææ  !
Column
ææ! '
<
ææ' (
string
ææ( .
>
ææ. /
(
ææ/ 0
nullable
ææ0 8
:
ææ8 9
false
ææ: ?
)
ææ? @
,
ææ@ A
Value
øø 
=
øø 
table
øø !
.
øø! "
Column
øø" (
<
øø( )
string
øø) /
>
øø/ 0
(
øø0 1
nullable
øø1 9
:
øø9 :
true
øø; ?
)
øø? @
}
¿¿ 
,
¿¿ 
constraints
¡¡ 
:
¡¡ 
table
¡¡ "
=>
¡¡# %
{
¬¬ 
table
√√ 
.
√√ 

PrimaryKey
√√ $
(
√√$ %
$str
√√% :
,
√√: ;
x
√√< =
=>
√√> @
new
√√A D
{
√√E F
x
√√G H
.
√√H I
UserId
√√I O
,
√√O P
x
√√Q R
.
√√R S
LoginProvider
√√S `
,
√√` a
x
√√b c
.
√√c d
Name
√√d h
}
√√i j
)
√√j k
;
√√k l
table
ƒƒ 
.
ƒƒ 

ForeignKey
ƒƒ $
(
ƒƒ$ %
name
≈≈ 
:
≈≈ 
$str
≈≈ F
,
≈≈F G
column
∆∆ 
:
∆∆ 
x
∆∆  !
=>
∆∆" $
x
∆∆% &
.
∆∆& '
UserId
∆∆' -
,
∆∆- .
principalTable
«« &
:
««& '
AspNetUsers
««( 3
,
««3 4
principalColumn
»» '
:
»»' (
$str
»») -
,
»»- .
onDelete
……  
:
……  !
ReferentialAction
……" 3
.
……3 4
Cascade
……4 ;
)
……; <
;
……< =
}
   
)
   
;
   
migrationBuilder
ÃÃ 
.
ÃÃ 
CreateTable
ÃÃ (
(
ÃÃ( )
name
ÕÕ 
:
ÕÕ 
Flowers
ÕÕ 
,
ÕÕ 
columns
ŒŒ 
:
ŒŒ 
table
ŒŒ 
=>
ŒŒ !
new
ŒŒ" %
{
œœ 
FlowerId
–– 
=
–– 
table
–– $
.
––$ %
Column
––% +
<
––+ ,
int
––, /
>
––/ 0
(
––0 1
nullable
––1 9
:
––9 :
false
––; @
)
––@ A
.
—— 

Annotation
—— #
(
——# $%
ValueGenerationStrategy
——$ ;
,
——; <.
 SqlServerValueGenerationStrategy
——= ]
.
——] ^
IdentityColumn
——^ l
)
——l m
,
——m n
Name
““ 
=
““ 
table
““  
.
““  !
Column
““! '
<
““' (
string
““( .
>
““. /
(
““/ 0
nullable
““0 8
:
““8 9
true
““: >
)
““> ?
,
““? @
ShortDescription
”” $
=
””% &
table
””' ,
.
””, -
Column
””- 3
<
””3 4
string
””4 :
>
””: ;
(
””; <
nullable
””< D
:
””D E
true
””F J
)
””J K
,
””K L
LongDescription
‘‘ #
=
‘‘$ %
table
‘‘& +
.
‘‘+ ,
Column
‘‘, 2
<
‘‘2 3
string
‘‘3 9
>
‘‘9 :
(
‘‘: ;
nullable
‘‘; C
:
‘‘C D
true
‘‘E I
)
‘‘I J
,
‘‘J K
Price
’’ 
=
’’ 
table
’’ !
.
’’! "
Column
’’" (
<
’’( )
decimal
’’) 0
>
’’0 1
(
’’1 2
nullable
’’2 :
:
’’: ;
false
’’< A
)
’’A B
,
’’B C
ImageUrl
÷÷ 
=
÷÷ 
table
÷÷ $
.
÷÷$ %
Column
÷÷% +
<
÷÷+ ,
string
÷÷, 2
>
÷÷2 3
(
÷÷3 4
nullable
÷÷4 <
:
÷÷< =
true
÷÷> B
)
÷÷B C
,
÷÷C D
ImageThumbnailUrl
◊◊ %
=
◊◊& '
table
◊◊( -
.
◊◊- .
Column
◊◊. 4
<
◊◊4 5
string
◊◊5 ;
>
◊◊; <
(
◊◊< =
nullable
◊◊= E
:
◊◊E F
true
◊◊G K
)
◊◊K L
,
◊◊L M
InStock
ÿÿ 
=
ÿÿ 
table
ÿÿ #
.
ÿÿ# $
Column
ÿÿ$ *
<
ÿÿ* +
bool
ÿÿ+ /
>
ÿÿ/ 0
(
ÿÿ0 1
nullable
ÿÿ1 9
:
ÿÿ9 :
false
ÿÿ; @
)
ÿÿ@ A
,
ÿÿA B

CategoryId
ŸŸ 
=
ŸŸ  
table
ŸŸ! &
.
ŸŸ& '
Column
ŸŸ' -
<
ŸŸ- .
int
ŸŸ. 1
>
ŸŸ1 2
(
ŸŸ2 3
nullable
ŸŸ3 ;
:
ŸŸ; <
false
ŸŸ= B
)
ŸŸB C
,
ŸŸC D"
IsFlowerPresentation
⁄⁄ (
=
⁄⁄) *
table
⁄⁄+ 0
.
⁄⁄0 1
Column
⁄⁄1 7
<
⁄⁄7 8
bool
⁄⁄8 <
>
⁄⁄< =
(
⁄⁄= >
nullable
⁄⁄> F
:
⁄⁄F G
false
⁄⁄H M
)
⁄⁄M N
}
€€ 
,
€€ 
constraints
‹‹ 
:
‹‹ 
table
‹‹ "
=>
‹‹# %
{
›› 
table
ﬁﬁ 
.
ﬁﬁ 

PrimaryKey
ﬁﬁ $
(
ﬁﬁ$ %
$str
ﬁﬁ% 1
,
ﬁﬁ1 2
x
ﬁﬁ3 4
=>
ﬁﬁ5 7
x
ﬁﬁ8 9
.
ﬁﬁ9 :
FlowerId
ﬁﬁ: B
)
ﬁﬁB C
;
ﬁﬁC D
table
ﬂﬂ 
.
ﬂﬂ 

ForeignKey
ﬂﬂ $
(
ﬂﬂ$ %
name
‡‡ 
:
‡‡ 
$str
‡‡ @
,
‡‡@ A
column
·· 
:
·· 
x
··  !
=>
··" $
x
··% &
.
··& '

CategoryId
··' 1
,
··1 2
principalTable
‚‚ &
:
‚‚& '
$str
‚‚( 4
,
‚‚4 5
principalColumn
„„ '
:
„„' (
$str
„„) 5
,
„„5 6
onDelete
‰‰  
:
‰‰  !
ReferentialAction
‰‰" 3
.
‰‰3 4
Cascade
‰‰4 ;
)
‰‰; <
;
‰‰< =
}
ÂÂ 
)
ÂÂ 
;
ÂÂ 
migrationBuilder
ÁÁ 
.
ÁÁ 
CreateTable
ÁÁ (
(
ÁÁ( )
name
ËË 
:
ËË 
OrderDetails
ËË "
,
ËË" #
columns
ÈÈ 
:
ÈÈ 
table
ÈÈ 
=>
ÈÈ !
new
ÈÈ" %
{
ÍÍ 
OrderDetailId
ÎÎ !
=
ÎÎ" #
table
ÎÎ$ )
.
ÎÎ) *
Column
ÎÎ* 0
<
ÎÎ0 1
int
ÎÎ1 4
>
ÎÎ4 5
(
ÎÎ5 6
nullable
ÎÎ6 >
:
ÎÎ> ?
false
ÎÎ@ E
)
ÎÎE F
.
ÏÏ 

Annotation
ÏÏ #
(
ÏÏ# $%
ValueGenerationStrategy
ÏÏ$ ;
,
ÏÏ; <.
 SqlServerValueGenerationStrategy
ÏÏ= ]
.
ÏÏ] ^
IdentityColumn
ÏÏ^ l
)
ÏÏl m
,
ÏÏm n
OrderId
ÌÌ 
=
ÌÌ 
table
ÌÌ #
.
ÌÌ# $
Column
ÌÌ$ *
<
ÌÌ* +
int
ÌÌ+ .
>
ÌÌ. /
(
ÌÌ/ 0
nullable
ÌÌ0 8
:
ÌÌ8 9
false
ÌÌ: ?
)
ÌÌ? @
,
ÌÌ@ A
FlowerId
ÓÓ 
=
ÓÓ 
table
ÓÓ $
.
ÓÓ$ %
Column
ÓÓ% +
<
ÓÓ+ ,
int
ÓÓ, /
>
ÓÓ/ 0
(
ÓÓ0 1
nullable
ÓÓ1 9
:
ÓÓ9 :
false
ÓÓ; @
)
ÓÓ@ A
,
ÓÓA B
Amount
ÔÔ 
=
ÔÔ 
table
ÔÔ "
.
ÔÔ" #
Column
ÔÔ# )
<
ÔÔ) *
int
ÔÔ* -
>
ÔÔ- .
(
ÔÔ. /
nullable
ÔÔ/ 7
:
ÔÔ7 8
false
ÔÔ9 >
)
ÔÔ> ?
,
ÔÔ? @
Price
 
=
 
table
 !
.
! "
Column
" (
<
( )
decimal
) 0
>
0 1
(
1 2
nullable
2 :
:
: ;
false
< A
)
A B
}
ÒÒ 
,
ÒÒ 
constraints
ÚÚ 
:
ÚÚ 
table
ÚÚ "
=>
ÚÚ# %
{
ÛÛ 
table
ÙÙ 
.
ÙÙ 

PrimaryKey
ÙÙ $
(
ÙÙ$ %
$str
ÙÙ% 6
,
ÙÙ6 7
x
ÙÙ8 9
=>
ÙÙ: <
x
ÙÙ= >
.
ÙÙ> ?
OrderDetailId
ÙÙ? L
)
ÙÙL M
;
ÙÙM N
table
ıı 
.
ıı 

ForeignKey
ıı $
(
ıı$ %
name
ˆˆ 
:
ˆˆ 
$str
ˆˆ @
,
ˆˆ@ A
column
˜˜ 
:
˜˜ 
x
˜˜  !
=>
˜˜" $
x
˜˜% &
.
˜˜& '
FlowerId
˜˜' /
,
˜˜/ 0
principalTable
¯¯ &
:
¯¯& '
Flowers
¯¯( /
,
¯¯/ 0
principalColumn
˘˘ '
:
˘˘' (
$str
˘˘) 3
,
˘˘3 4
onDelete
˙˙  
:
˙˙  !
ReferentialAction
˙˙" 3
.
˙˙3 4
Cascade
˙˙4 ;
)
˙˙; <
;
˙˙< =
table
˚˚ 
.
˚˚ 

ForeignKey
˚˚ $
(
˚˚$ %
name
¸¸ 
:
¸¸ 
$str
¸¸ >
,
¸¸> ?
column
˝˝ 
:
˝˝ 
x
˝˝  !
=>
˝˝" $
x
˝˝% &
.
˝˝& '
OrderId
˝˝' .
,
˝˝. /
principalTable
˛˛ &
:
˛˛& '
$str
˛˛( 0
,
˛˛0 1
principalColumn
ˇˇ '
:
ˇˇ' (
$str
ˇˇ) 2
,
ˇˇ2 3
onDelete
ÄÄ  
:
ÄÄ  !
ReferentialAction
ÄÄ" 3
.
ÄÄ3 4
Cascade
ÄÄ4 ;
)
ÄÄ; <
;
ÄÄ< =
}
ÅÅ 
)
ÅÅ 
;
ÅÅ 
migrationBuilder
ÉÉ 
.
ÉÉ 
CreateTable
ÉÉ (
(
ÉÉ( )
name
ÑÑ 
:
ÑÑ 
$str
ÑÑ )
,
ÑÑ) *
columns
ÖÖ 
:
ÖÖ 
table
ÖÖ 
=>
ÖÖ !
new
ÖÖ" %
{
ÜÜ  
ShoppingCartItemId
áá &
=
áá' (
table
áá) .
.
áá. /
Column
áá/ 5
<
áá5 6
int
áá6 9
>
áá9 :
(
áá: ;
nullable
áá; C
:
ááC D
false
ááE J
)
ááJ K
.
àà 

Annotation
àà #
(
àà# $%
ValueGenerationStrategy
àà$ ;
,
àà; <.
 SqlServerValueGenerationStrategy
àà= ]
.
àà] ^
IdentityColumn
àà^ l
)
ààl m
,
ààm n
FlowerId
ââ 
=
ââ 
table
ââ $
.
ââ$ %
Column
ââ% +
<
ââ+ ,
int
ââ, /
>
ââ/ 0
(
ââ0 1
nullable
ââ1 9
:
ââ9 :
true
ââ; ?
)
ââ? @
,
ââ@ A
Amount
ää 
=
ää 
table
ää "
.
ää" #
Column
ää# )
<
ää) *
int
ää* -
>
ää- .
(
ää. /
nullable
ää/ 7
:
ää7 8
false
ää9 >
)
ää> ?
,
ää? @
ShoppingCartId
ãã "
=
ãã# $
table
ãã% *
.
ãã* +
Column
ãã+ 1
<
ãã1 2
string
ãã2 8
>
ãã8 9
(
ãã9 :
nullable
ãã: B
:
ããB C
true
ããD H
)
ããH I
}
åå 
,
åå 
constraints
çç 
:
çç 
table
çç "
=>
çç# %
{
éé 
table
èè 
.
èè 

PrimaryKey
èè $
(
èè$ %
$str
èè% ;
,
èè; <
x
èè= >
=>
èè? A
x
èèB C
.
èèC D 
ShoppingCartItemId
èèD V
)
èèV W
;
èèW X
table
êê 
.
êê 

ForeignKey
êê $
(
êê$ %
name
ëë 
:
ëë 
$str
ëë E
,
ëëE F
column
íí 
:
íí 
x
íí  !
=>
íí" $
x
íí% &
.
íí& '
FlowerId
íí' /
,
íí/ 0
principalTable
ìì &
:
ìì& '
Flowers
ìì( /
,
ìì/ 0
principalColumn
îî '
:
îî' (
	Flower_Id
îî) 2
,
îî2 3
onDelete
ïï  
:
ïï  !
ReferentialAction
ïï" 3
.
ïï3 4
Restrict
ïï4 <
)
ïï< =
;
ïï= >
}
ññ 
)
ññ 
;
ññ 
migrationBuilder
òò 
.
òò 
CreateIndex
òò (
(
òò( )
name
ôô 
:
ôô 
$str
ôô 2
,
ôô2 3
table
öö 
:
öö 
$str
öö )
,
öö) *
column
õõ 
:
õõ 
$str
õõ  
)
õõ  !
;
õõ! "
migrationBuilder
ùù 
.
ùù 
CreateIndex
ùù (
(
ùù( )
name
ûû 
:
ûû 
$str
ûû %
,
ûû% &
table
üü 
:
üü 
AspNetRoles
üü "
,
üü" #
column
†† 
:
†† 
$str
†† (
,
††( )
unique
°° 
:
°° 
true
°° 
,
°° 
filter
¢¢ 
:
¢¢ 
$str
¢¢ 6
)
¢¢6 7
;
¢¢7 8
migrationBuilder
§§ 
.
§§ 
CreateIndex
§§ (
(
§§( )
name
•• 
:
•• 
$str
•• 2
,
••2 3
table
¶¶ 
:
¶¶ 
$str
¶¶ )
,
¶¶) *
column
ßß 
:
ßß 
$str
ßß  
)
ßß  !
;
ßß! "
migrationBuilder
©© 
.
©© 
CreateIndex
©© (
(
©©( )
name
™™ 
:
™™ 
$str
™™ 2
,
™™2 3
table
´´ 
:
´´ 
$str
´´ )
,
´´) *
column
¨¨ 
:
¨¨ 
$str
¨¨  
)
¨¨  !
;
¨¨! "
migrationBuilder
ÆÆ 
.
ÆÆ 
CreateIndex
ÆÆ (
(
ÆÆ( )
name
ØØ 
:
ØØ 
$str
ØØ 1
,
ØØ1 2
table
∞∞ 
:
∞∞ 
$str
∞∞ (
,
∞∞( )
column
±± 
:
±± 
$str
±±  
)
±±  !
;
±±! "
migrationBuilder
≥≥ 
.
≥≥ 
CreateIndex
≥≥ (
(
≥≥( )
name
¥¥ 
:
¥¥ 
$str
¥¥ "
,
¥¥" #
table
µµ 
:
µµ 
AspNetUsers
µµ "
,
µµ" #
column
∂∂ 
:
∂∂ 
$str
∂∂ )
)
∂∂) *
;
∂∂* +
migrationBuilder
∏∏ 
.
∏∏ 
CreateIndex
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ %
,
ππ% &
table
∫∫ 
:
∫∫ 
AspNetUsers
∫∫ "
,
∫∫" #
column
ªª 
:
ªª 
$str
ªª ,
,
ªª, -
unique
ºº 
:
ºº 
true
ºº 
,
ºº 
filter
ΩΩ 
:
ΩΩ 
$str
ΩΩ :
)
ΩΩ: ;
;
ΩΩ; <
migrationBuilder
øø 
.
øø 
CreateIndex
øø (
(
øø( )
name
¿¿ 
:
¿¿ 
$str
¿¿ -
,
¿¿- .
table
¡¡ 
:
¡¡ 
Flowers
¡¡ 
,
¡¡ 
column
¬¬ 
:
¬¬ 
$str
¬¬ $
)
¬¬$ %
;
¬¬% &
migrationBuilder
ƒƒ 
.
ƒƒ 
CreateIndex
ƒƒ (
(
ƒƒ( )
name
≈≈ 
:
≈≈ 
$str
≈≈ 0
,
≈≈0 1
table
∆∆ 
:
∆∆ 
OrderDetails
∆∆ #
,
∆∆# $
column
«« 
:
«« 
	Flower_Id
«« !
)
««! "
;
««" #
migrationBuilder
…… 
.
…… 
CreateIndex
…… (
(
……( )
name
   
:
   
$str
   /
,
  / 0
table
ÀÀ 
:
ÀÀ 
OrderDetails
ÀÀ #
,
ÀÀ# $
column
ÃÃ 
:
ÃÃ 
$str
ÃÃ !
)
ÃÃ! "
;
ÃÃ" #
migrationBuilder
ŒŒ 
.
ŒŒ 
CreateIndex
ŒŒ (
(
ŒŒ( )
name
œœ 
:
œœ 
$str
œœ 5
,
œœ5 6
table
–– 
:
–– 
$str
–– *
,
––* +
column
—— 
:
—— 
	Flower_Id
—— !
)
——! "
;
——" #
}
““ 	
	protected
‘‘ 
override
‘‘ 
void
‘‘ 
Down
‘‘  $
(
‘‘$ %
MigrationBuilder
‘‘% 5
migrationBuilder
‘‘6 F
)
‘‘F G
{
’’ 	
migrationBuilder
÷÷ 
.
÷÷ 
	DropTable
÷÷ &
(
÷÷& '
name
◊◊ 
:
◊◊ 
$str
◊◊ (
)
◊◊( )
;
◊◊) *
migrationBuilder
ŸŸ 
.
ŸŸ 
	DropTable
ŸŸ &
(
ŸŸ& '
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ (
)
⁄⁄( )
;
⁄⁄) *
migrationBuilder
‹‹ 
.
‹‹ 
	DropTable
‹‹ &
(
‹‹& '
name
›› 
:
›› 
$str
›› (
)
››( )
;
››) *
migrationBuilder
ﬂﬂ 
.
ﬂﬂ 
	DropTable
ﬂﬂ &
(
ﬂﬂ& '
name
‡‡ 
:
‡‡ 
$str
‡‡ '
)
‡‡' (
;
‡‡( )
migrationBuilder
‚‚ 
.
‚‚ 
	DropTable
‚‚ &
(
‚‚& '
name
„„ 
:
„„ 
$str
„„ (
)
„„( )
;
„„) *
migrationBuilder
ÂÂ 
.
ÂÂ 
	DropTable
ÂÂ &
(
ÂÂ& '
name
ÊÊ 
:
ÊÊ 
OrderDetails
ÊÊ "
)
ÊÊ" #
;
ÊÊ# $
migrationBuilder
ËË 
.
ËË 
	DropTable
ËË &
(
ËË& '
name
ÈÈ 
:
ÈÈ 
$str
ÈÈ )
)
ÈÈ) *
;
ÈÈ* +
migrationBuilder
ÎÎ 
.
ÎÎ 
	DropTable
ÎÎ &
(
ÎÎ& '
name
ÏÏ 
:
ÏÏ 
AspNetRoles
ÏÏ !
)
ÏÏ! "
;
ÏÏ" #
migrationBuilder
ÓÓ 
.
ÓÓ 
	DropTable
ÓÓ &
(
ÓÓ& '
name
ÔÔ 
:
ÔÔ 
AspNetUsers
ÔÔ !
)
ÔÔ! "
;
ÔÔ" #
migrationBuilder
ÒÒ 
.
ÒÒ 
	DropTable
ÒÒ &
(
ÒÒ& '
name
ÚÚ 
:
ÚÚ 
$str
ÚÚ 
)
ÚÚ 
;
ÚÚ  
migrationBuilder
ÙÙ 
.
ÙÙ 
	DropTable
ÙÙ &
(
ÙÙ& '
name
ıı 
:
ıı 
Flowers
ıı 
)
ıı 
;
ıı 
migrationBuilder
˜˜ 
.
˜˜ 
	DropTable
˜˜ &
(
˜˜& '
name
¯¯ 
:
¯¯ 
$str
¯¯ "
)
¯¯" #
;
¯¯# $
}
˘˘ 	
}
˙˙ 
}˚˚ ¸

SE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191209173625_AddFavorite.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
AddFavorite $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
bool		' +
>		+ ,
(		, -
name

 
:

 
$str

 "
,

" #
table 
: 
$str  
,  !
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str  
)  !
;! "
} 	
} 
} ”
aE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182401_ShippingAndPaymentMethods.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class %
ShippingAndPaymentMethods 2
:3 4
	Migration5 >
{ 
private 
const 
string 
Orders #
=$ %
$str& .
;. /
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
	AddColumn

 &
<

& '
string

' -
>

- .
(

. /
name 
: 
$str "
," #
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str !
,! "
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str &
,& '
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{   	
migrationBuilder!! 
.!! 

DropColumn!! '
(!!' (
name"" 
:"" 
$str"" "
,""" #
table## 
:## 
Orders## 
)## 
;## 
migrationBuilder%% 
.%% 

DropColumn%% '
(%%' (
name&& 
:&& 
$str&& !
,&&! "
table'' 
:'' 
Orders'' 
)'' 
;'' 
migrationBuilder)) 
.)) 

DropColumn)) '
())' (
name** 
:** 
$str** &
,**& '
table++ 
:++ 
Orders++ 
)++ 
;++ 
},, 	
}-- 
}.. á&
bE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182629_ShippingAndPaymentMethods1.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class &
ShippingAndPaymentMethods1 3
:4 5
	Migration6 ?
{ 
private 
const 
string 
Orders #
=$ %
$str& .
;. /
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
AlterColumn

 (
<

( )
string

) /
>

/ 0
(

0 1
name 
: 
$str 
,  
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
,  
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str $
,$ %
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength   
:   
$num   !
)  ! "
;  " #
}!! 	
	protected## 
override## 
void## 
Down##  $
(##$ %
MigrationBuilder##% 5
migrationBuilder##6 F
)##F G
{$$ 	
migrationBuilder%% 
.%% 
AlterColumn%% (
<%%( )
string%%) /
>%%/ 0
(%%0 1
name&& 
:&& 
$str&& 
,&&  
table'' 
:'' 
Orders'' 
,'' 
	maxLength(( 
:(( 
$num(( 
,(( 
nullable)) 
:)) 
false)) 
,))  

oldClrType** 
:** 
typeof** "
(**" #
string**# )
)**) *
,*** +
oldMaxLength++ 
:++ 
$num++  
,++  !
oldNullable,, 
:,, 
true,, !
),,! "
;,," #
migrationBuilder.. 
... 
AlterColumn.. (
<..( )
string..) /
>../ 0
(..0 1
name// 
:// 
$str// 
,//  
table00 
:00 
Orders00 
,00 
	maxLength11 
:11 
$num11 
,11 
nullable22 
:22 
false22 
,22  

oldClrType33 
:33 
typeof33 "
(33" #
string33# )
)33) *
,33* +
oldMaxLength44 
:44 
$num44  
,44  !
oldNullable55 
:55 
true55 !
)55! "
;55" #
migrationBuilder77 
.77 
AlterColumn77 (
<77( )
string77) /
>77/ 0
(770 1
name88 
:88 
$str88 $
,88$ %
table99 
:99 
Orders99 
,99 
	maxLength:: 
::: 
$num:: 
,:: 
nullable;; 
:;; 
false;; 
,;;  

oldClrType<< 
:<< 
typeof<< "
(<<" #
string<<# )
)<<) *
,<<* +
oldMaxLength== 
:== 
$num== !
,==! "
oldNullable>> 
:>> 
true>> !
)>>! "
;>>" #
}?? 	
}@@ 
}AA Ô

NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191212095803_Order2.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Order2 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 $
,

$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
)  
;  !
} 	
} 
} ∫
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\AppDbContext.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
AppDbContext 
: 
IdentityDbContext  1
<1 2
ApplicationUser2 A
>A B
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
DbSet 
< 
Category 
> 

Categories )
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
Flower 
> 
Flowers $
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
ShoppingCartItem %
>% &
ShoppingCartItems' 8
{ 	
get 
; 
set 
; 
} 	
public   
DbSet   
<   
Order   
>   
Orders   "
{!! 	
get"" 
;"" 
set## 
;## 
}$$ 	
public&& 
DbSet&& 
<&& 
OrderDetail&&  
>&&  !
OrderDetails&&" .
{'' 	
get(( 
;(( 
set)) 
;)) 
}** 	
}++ 
},, ®
=E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Category.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Category 
{ 
public 
int 

CategoryId 
{ 	
get		 
;		 
set

 
;

 
} 	
public 
string 
CategoryName "
{ 	
get 
; 
set 
; 
} 	
public 
string 
Description !
{ 	
get 
; 
set 
; 
} 	
public 
List 
< 
Flower 
> 
Flowers #
{ 	
get 
; 
set 
; 
} 	
} 
} òk
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\DbInitializer.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

static 
class 
DbInitializer %
{		 
private

 
const

 
string

 
SingleFlower

 )
=

* +
$str

, ;
;

; <
private 
const 
string 
BouquetOfFlowers -
=. /
$str0 D
;D E
private 
const 
string 
SeasonalFlowers ,
=- .
$str/ A
;A B
public 
static 
void 
Seed 
(  
IApplicationBuilder  3
applicationBuilder4 F
)F G
{ 	
using 
( 
var 
serviceScope #
=$ %
applicationBuilder& 8
.8 9
ApplicationServices9 L
.L M
CreateScopeM X
(X Y
)Y Z
)Z [
{ 
AppDbContext 
context $
=% &
serviceScope' 3
.3 4
ServiceProvider4 C
.C D

GetServiceD N
<N O
AppDbContextO [
>[ \
(\ ]
)] ^
;^ _
if 
( 
! 
context 
. 

Categories '
.' (
Any( +
(+ ,
), -
)- .
{ 
context 
. 

Categories &
.& '
AddRange' /
(/ 0

Categories0 :
.: ;
Select; A
(A B
cB C
=>D F
cG H
.H I
ValueI N
)N O
)O P
;P Q
} 
if 
( 
! 
context 
. 
Flowers $
.$ %
Any% (
(( )
)) *
)* +
{ 
context 
. 
AddRange $
( 
new 
Flower "
{ 
Name  
=! "
$str# )
,) *
Price !
=" #
$num$ *
,* +
ShortDescription   ,
=  - .
$str  / =
,  = >
LongDescription!! +
=!!, -
$str!%. R
,%%R S
Category&& $
=&&% &

Categories&&' 1
[&&1 2
SingleFlower&&2 >
]&&> ?
,&&? @
ImageUrl'' $
=''% &
$str	''' É
,
''É Ñ
InStock(( #
=(($ %
true((& *
,((* +
ImageThumbnailUrl)) -
=)). /
$str))0 2
+))3 4
$str** x
,**x y 
IsFlowerPresentation++ 0
=++1 2
true++3 7
},, 
,,, 
new-- 
Flower-- "
{.. 
Name//  
=//! "
$str//# )
,//) *
Price00 !
=00" #
$num00$ *
,00* +
ShortDescription11 ,
=11- .
$str11/ D
,11D E
LongDescription22 +
=22, -
$str24. p
,44p q
Category55 $
=55% &

Categories55' 1
[551 2
SingleFlower552 >
]55> ?
,55? @
ImageUrl66 $
=66% &
$str66' v
,66v w
InStock77 #
=77$ %
true77& *
,77* +
ImageThumbnailUrl88 -
=88. /
$str880 
,	88 Ä 
IsFlowerPresentation99 0
=991 2
false993 8
}:: 
,:: 
new;; 
Flower;; "
{<< 
Name==  
===! "
$str==# *
,==* +
Price>> !
=>>" #
$num>>$ *
,>>* +
ShortDescription?? ,
=??- .
$str??/ C
,??C D
LongDescription@@ +
=@@, -
$str	@A. Ç
,
AAÇ É
CategoryBB $
=BB% &

CategoriesBB' 1
[BB1 2
SingleFlowerBB2 >
]BB> ?
,BB? @
ImageUrlCC $
=CC% &
$strCC' u
,CCu v
InStockDD #
=DD$ %
trueDD& *
,DD* +
ImageThumbnailUrlEE -
=EE. /
$strEE0 ~
,EE~  
IsFlowerPresentationFF 0
=FF1 2
falseFF3 8
}GG 
,GG 
newHH 
FlowerHH "
{II 
NameJJ  
=JJ! "
$strJJ# 5
,JJ5 6
PriceKK !
=KK" #
$numKK$ *
,KK* +
ShortDescriptionLL ,
=LL- .
$strLL/ :
,LL: ;
LongDescriptionMM +
=MM, -
$str	MW. Å
,
WWÅ Ç
CategoryXX $
=XX% &

CategoriesXX' 1
[XX1 2
BouquetOfFlowersXX2 B
]XXB C
,XXC D
ImageUrlYY $
=YY% &
$strYY' j
,YYj k
InStockZZ #
=ZZ$ %
trueZZ& *
,ZZ* +
ImageThumbnailUrl[[ -
=[[. /
$str[[0 s
,[[s t 
IsFlowerPresentation\\ 0
=\\1 2
true\\3 7
}]] 
,]] 
new__ 
Flower__ "
{`` 
Nameaa  
=aa! "
$straa# -
,aa- .
Pricebb !
=bb" #
$numbb$ *
,bb* +
ShortDescriptioncc ,
=cc- .
$strcc/ >
,cc> ?
LongDescriptiondd +
=dd, -
$strdj. d
,jjd e
Categorykk $
=kk% &

Categorieskk' 1
[kk1 2
SeasonalFlowerskk2 A
]kkA B
,kkB C
ImageUrlll $
=ll% &
$strll' c
,llc d
InStockmm #
=mm$ %
truemm& *
,mm* +
ImageThumbnailUrlnn -
=nn. /
$strnn0 l
,nnl m 
IsFlowerPresentationoo 0
=oo1 2
falseoo3 8
}pp 
,pp 
newrr 
Flowerrr "
{ss 
Namett  
=tt! "
$strtt# *
,tt* +
Priceuu !
=uu" #
$numuu$ *
,uu* +
ShortDescriptionvv ,
=vv- .
$strvv/ >
,vv> ?
LongDescriptionww +
=ww, -
$strw. x
,x y
Category
ÄÄ $
=
ÄÄ% &

Categories
ÄÄ' 1
[
ÄÄ1 2
SeasonalFlowers
ÄÄ2 A
]
ÄÄA B
,
ÄÄB C
ImageUrl
ÅÅ $
=
ÅÅ% &
$str
ÅÅ' N
,
ÅÅN O
InStock
ÇÇ #
=
ÇÇ$ %
true
ÇÇ& *
,
ÇÇ* +
ImageThumbnailUrl
ÉÉ -
=
ÉÉ. /
$str
ÉÉ0 W
,
ÉÉW X"
IsFlowerPresentation
ÑÑ 0
=
ÑÑ1 2
false
ÑÑ3 8
}
ÖÖ 
,
ÖÖ 
new
áá 
Flower
áá "
{
àà 
Name
ââ  
=
ââ! "
$str
ââ# =
,
ââ= >
Price
ää !
=
ää" #
$num
ää$ *
,
ää* +
ShortDescription
ãã ,
=
ãã- .
$str
ãã/ >
,
ãã> ?
LongDescription
åå +
=
åå, -
$stråé. É
,ééÉ Ñ
Category
èè $
=
èè% &

Categories
èè' 1
[
èè1 2
$str
èè2 F
]
èèF G
,
èèG H
ImageUrl
êê $
=
êê% &
$str
êê' g
,
êêg h
InStock
ëë #
=
ëë$ %
true
ëë& *
,
ëë* +
ImageThumbnailUrl
íí -
=
íí. /
$str
íí0 p
,
ííp q"
IsFlowerPresentation
ìì 0
=
ìì1 2
true
ìì3 7
}
îî 
,
îî 
new
ññ 
Flower
ññ "
{
óó 
Name
òò  
=
òò! "
$str
òò# *
,
òò* +
Price
ôô !
=
ôô" #
$num
ôô$ *
,
ôô* +
ShortDescription
öö ,
=
öö- .
$str
öö/ E
,
ööE F
LongDescription
õõ +
=
õõ, -
$str
õü. a
,
üüa b
Category
†† $
=
††% &

Categories
††' 1
[
††1 2
SeasonalFlowers
††2 A
]
††A B
,
††B C
ImageUrl
°° $
=
°°% &
$str¢¢ à
,¢¢à â
InStock
££ #
=
££$ %
true
££& *
,
££* +
ImageThumbnailUrl
§§ -
=
§§. /
$str•• à
,••à â"
IsFlowerPresentation
¶¶ 0
=
¶¶1 2
true
¶¶3 7
}
ßß 
,
ßß 
new
©© 
Flower
©© "
{
™™ 
Name
´´  
=
´´! "
$str
´´# 2
,
´´2 3
Price
¨¨ !
=
¨¨" #
$num
¨¨$ *
,
¨¨* +
ShortDescription
≠≠ ,
=
≠≠- .
$str
≠≠/ J
,
≠≠J K
LongDescription
ÆÆ +
=
ÆÆ, -
$str
Æ≤. `
,
≤≤` a
Category
≥≥ $
=
≥≥% &

Categories
≥≥' 1
[
≥≥1 2
BouquetOfFlowers
≥≥2 B
]
≥≥B C
,
≥≥C D
ImageUrl
¥¥ $
=
¥¥% &
$strµµ à
,µµà â
InStock
∂∂ #
=
∂∂$ %
true
∂∂& *
,
∂∂* +
ImageThumbnailUrl
∑∑ -
=
∑∑. /
$str∏∏ à
,∏∏à â"
IsFlowerPresentation
ππ 0
=
ππ1 2
false
ππ3 8
}
∫∫ 
,
∫∫ 
new
ªª 
Flower
ªª "
{
ºº 
Name
ΩΩ  
=
ΩΩ! "
$str
ΩΩ# 6
,
ΩΩ6 7
Price
ææ !
=
ææ" #
$num
ææ$ *
,
ææ* +
ShortDescription
øø ,
=
øø- .
$str
øø/ >
,
øø> ?
LongDescription
¿¿ +
=
¿¿, -
$str
¿≈. k
,
≈≈k l
Category
∆∆ $
=
∆∆% &

Categories
∆∆' 1
[
∆∆1 2
BouquetOfFlowers
∆∆2 B
]
∆∆B C
,
∆∆C D
ImageUrl
«« $
=
««% &
$str
»» D
+
»»E F
$str
…… v
,
……v w
InStock
   #
=
  $ %
true
  & *
,
  * +
ImageThumbnailUrl
ÀÀ -
=
ÀÀ. /
$str
ÃÃ D
+
ÃÃE F
$str
ÕÕ v
,
ÕÕv w"
IsFlowerPresentation
ŒŒ 0
=
ŒŒ1 2
false
ŒŒ3 8
}
œœ 
,
œœ 
new
—— 
Flower
—— "
{
““ 
Name
””  
=
””! "
$str
””# 2
,
””2 3
Price
‘‘ !
=
‘‘" #
$num
‘‘$ *
,
‘‘* +
ShortDescription
’’ ,
=
’’- .
$str
’’/ G
,
’’G H
LongDescription
÷÷ +
=
÷÷, -
$str
÷‡. `
,
‡‡` a
Category
·· $
=
··% &

Categories
··' 1
[
··1 2
SingleFlower
··2 >
]
··> ?
,
··? @
ImageUrl
‚‚ $
=
‚‚% &
$str
‚‚' w
,
‚‚w x
InStock
„„ #
=
„„$ %
true
„„& *
,
„„* +
ImageThumbnailUrl
‰‰ -
=
‰‰. /
$str‰‰0 Ä
,‰‰Ä Å"
IsFlowerPresentation
ÂÂ 0
=
ÂÂ1 2
false
ÂÂ3 8
}
ÊÊ 
)
ÁÁ 
;
ÁÁ 
}
ËË 
context
ÍÍ 
.
ÍÍ 
SaveChanges
ÍÍ #
(
ÍÍ# $
)
ÍÍ$ %
;
ÍÍ% &
}
ÎÎ 
}
ÏÏ 	
private
ÓÓ 
static
ÓÓ 

Dictionary
ÓÓ !
<
ÓÓ! "
string
ÓÓ" (
,
ÓÓ( )
Category
ÓÓ* 2
>
ÓÓ2 3

categories
ÓÓ4 >
;
ÓÓ> ?
public
ÔÔ 
static
ÔÔ 

Dictionary
ÔÔ  
<
ÔÔ  !
string
ÔÔ! '
,
ÔÔ' (
Category
ÔÔ) 1
>
ÔÔ1 2

Categories
ÔÔ3 =
{
 	
get
ÒÒ 
{
ÚÚ 
if
ÛÛ 
(
ÛÛ 

categories
ÛÛ 
==
ÛÛ !
null
ÛÛ" &
)
ÛÛ& '
{
ÙÙ 
var
ıı 

genresList
ıı "
=
ıı# $
new
ıı% (
Category
ıı) 1
[
ıı1 2
]
ıı2 3
{
ˆˆ 
new
˜˜ 
Category
˜˜ $
{
˜˜% &
CategoryName
˜˜' 3
=
˜˜4 5
SingleFlower
˜˜6 B
}
˜˜C D
,
˜˜D E
new
¯¯ 
Category
¯¯ $
{
¯¯% &
CategoryName
¯¯' 3
=
¯¯4 5
BouquetOfFlowers
¯¯6 F
}
¯¯G H
,
¯¯H I
new
˘˘ 
Category
˘˘ $
{
˘˘% &
CategoryName
˘˘' 3
=
˘˘4 5
SeasonalFlowers
˘˘6 E
}
˘˘F G
}
˙˙ 
;
˙˙ 

categories
¸¸ 
=
¸¸  
new
¸¸! $

Dictionary
¸¸% /
<
¸¸/ 0
string
¸¸0 6
,
¸¸6 7
Category
¸¸8 @
>
¸¸@ A
(
¸¸A B
)
¸¸B C
;
¸¸C D
foreach
˛˛ 
(
˛˛ 
Category
˛˛ %
genre
˛˛& +
in
˛˛, .

genresList
˛˛/ 9
)
˛˛9 :
{
ˇˇ 

categories
ÄÄ "
.
ÄÄ" #
Add
ÄÄ# &
(
ÄÄ& '
genre
ÄÄ' ,
.
ÄÄ, -
CategoryName
ÄÄ- 9
,
ÄÄ9 :
genre
ÄÄ; @
)
ÄÄ@ A
;
ÄÄA B
}
ÅÅ 
}
ÇÇ 
return
ÑÑ 

categories
ÑÑ !
;
ÑÑ! "
}
ÖÖ 
}
ÜÜ 	
}
áá 
}àà ˚
;E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Flower.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Flower 
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
virtual 
Category 
Category  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 

IsFavorite 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ö6
:E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Order.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Order 
{		 
[

 	
	BindNever

	 
]

 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
OrderDetail 
>  

OrderLines! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ?
)? @
]@ A
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
ShippingMethod $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
Display	 
( 
Name 
= 
$str (
)( )
]) *
public   
string   
AddressLine1   "
{  # $
get  % (
;  ( )
set  * -
;  - .
}  / 0
["" 	
Display""	 
("" 
Name"" 
="" 
$str"" (
)""( )
]"") *
public## 
string## 
AddressLine2## "
{### $
get##% (
;##( )
set##* -
;##- .
}##/ 0
[&& 	
Display&&	 
(&& 
Name&& 
=&& 
$str&& "
)&&" #
]&&# $
['' 	
StringLength''	 
('' 
$num'' 
,'' 
MinimumLength'' '
=''( )
$num''* +
)''+ ,
]'', -
public(( 
string(( 
ZipCode(( 
{(( 
get((  #
;((# $
set((% (
;((( )
}((* +
[** 	
Required**	 
(** 
ErrorMessage** 
=**  
$str**! 9
)**9 :
]**: ;
[++ 	
StringLength++	 
(++ 
$num++ 
)++ 
]++ 
public,, 
string,, 
City,, 
{,, 
get,,  
;,,  !
set,," %
;,,% &
},,' (
[.. 	
StringLength..	 
(.. 
$num.. 
).. 
].. 
public// 
string// 
State// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
[22 	
StringLength22	 
(22 
$num22 
)22 
]22 
public33 
string33 
Country33 
{33 
get33  #
;33# $
set33% (
;33( )
}33* +
[55 	
Required55	 
(55 
ErrorMessage55 
=55  
$str55! A
)55A B
]55B C
[66 	
StringLength66	 
(66 
$num66 
)66 
]66 
[77 	
DataType77	 
(77 
DataType77 
.77 
PhoneNumber77 &
)77& '
]77' (
[88 	
Display88	 
(88 
Name88 
=88 
$str88 &
)88& '
]88' (
public99 
string99 
PhoneNumber99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
[;; 	
Required;;	 
];; 
[<< 	
StringLength<<	 
(<< 
$num<< 
)<< 
]<< 
[== 	
DataType==	 
(== 
DataType== 
.== 
EmailAddress== '
)==' (
]==( )
[>> 	
RegularExpression>>	 
(>> 
$str>C ?
,CC? @
ErrorMessageDD 
=DD 
$strDD Q
)DDQ R
]DDR S
publicEE 
stringEE 
EmailEE 
{EE 
getEE !
;EE! "
setEE# &
;EE& '
}EE( )
[GG 	
	BindNeverGG	 
]GG 
[HH 	
ScaffoldColumnHH	 
(HH 
falseHH 
)HH 
]HH 
publicII 
decimalII 

OrderTotalII !
{II" #
getII$ '
;II' (
setII) ,
;II, -
}II. /
[KK 	
	BindNeverKK	 
]KK 
[LL 	
ScaffoldColumnLL	 
(LL 
falseLL 
)LL 
]LL 
publicMM 
DateTimeMM 
OrderPlacedMM #
{MM$ %
getMM& )
;MM) *
setMM+ .
;MM. /
}MM0 1
[OO 	
RequiredOO	 
]OO 
[PP 	
StringLengthPP	 
(PP 
$numPP 
)PP 
]PP 
publicQQ 
stringQQ 
	PayMethodQQ 
{QQ  !
getQQ" %
;QQ% &
setQQ' *
;QQ* +
}QQ, -
[SS 	
StringLengthSS	 
(SS 
$numSS 
)SS 
]SS 
publicTT 
stringTT 

CardNumberTT  
{TT! "
getTT# &
;TT& '
setTT( +
;TT+ ,
}TT- .
[VV 	
StringLengthVV	 
(VV 
$numVV 
)VV 
]VV 
publicWW 
stringWW 
SecurityCodeWW "
{WW# $
getWW% (
;WW( )
setWW* -
;WW- .
}WW/ 0
}XX 
}YY Â

@E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\OrderDetail.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
OrderDetail 
{ 
public 
int 
OrderDetailId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public		 
int		 
FlowerId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public 
int 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Flower 
Flower $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
virtual 
Order 
Order "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} üF
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCart.cs
	namespace 	
	FlowerApp
 
. 
Models 
{		 
public

 

class

 
ShoppingCart

 
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
ShoppingCart 
( 
AppDbContext )
appDbContext* 6
)6 7
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
ShoppingCartItem $
>$ %
ShoppingCartItems& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
static 
ShoppingCart "
GetCart# *
(* +
IServiceProvider+ ;
services< D
)D E
{ 	
ISession 
session 
= 
services '
.' (
GetRequiredService( :
<: ; 
IHttpContextAccessor; O
>O P
(P Q
)Q R
?R S
. 
HttpContext 
. 
Session $
;$ %
var 
context 
= 
services "
." #

GetService# -
<- .
AppDbContext. :
>: ;
(; <
)< =
;= >
string 
cartId 
= 
session #
.# $
	GetString$ -
(- .
$str. 6
)6 7
??8 :
Guid; ?
.? @
NewGuid@ G
(G H
)H I
.I J
ToStringJ R
(R S
)S T
;T U
session 
. 
	SetString 
( 
$str &
,& '
cartId( .
). /
;/ 0
return   
new   
ShoppingCart   #
(  # $
context  $ +
)  + ,
{  - .
ShoppingCartId  / =
=  > ?
cartId  @ F
}  G H
;  H I
}!! 	
public## 
void## 
	AddToCart## 
(## 
Flower## $
flower##% +
,##+ ,
int##- 0
amount##1 7
)##7 8
{$$ 	
var%% 
shoppingCartItem%%  
=%%! "
_appDbContext&& !
.&&! "
ShoppingCartItems&&" 3
.&&3 4
SingleOrDefault&&4 C
(&&C D
s'' 
=>'' 
s'' 
.'' 
Flower'' %
.''% &
FlowerId''& .
==''/ 1
flower''2 8
.''8 9
FlowerId''9 A
&&''B D
s''E F
.''F G
ShoppingCartId''G U
==''V X
ShoppingCartId''Y g
)''g h
;''h i
if)) 
()) 
shoppingCartItem))  
==))! #
null))$ (
)))( )
{** 
shoppingCartItem++  
=++! "
new++# &
ShoppingCartItem++' 7
{,, 
ShoppingCartId-- "
=--# $
ShoppingCartId--% 3
,--3 4
Flower.. 
=.. 
flower.. #
,..# $
Amount// 
=// 
$num// 
}00 
;00 
_appDbContext22 
.22 
ShoppingCartItems22 /
.22/ 0
Add220 3
(223 4
shoppingCartItem224 D
)22D E
;22E F
}33 
else44 
{55 
if<< 
(<< 
shoppingCartItem<< $
.<<$ %
Amount<<% +
<<<, -
$num<<. /
)<</ 0
{== 
shoppingCartItem>> $
.>>$ %
Amount>>% +
=>>, -
amount>>. 4
+>>5 6
$num>>7 8
;>>8 9
}?? 
else@@ 
if@@ 
(@@ 
shoppingCartItem@@ )
.@@) *
Amount@@* 0
>@@1 2
$num@@3 4
)@@4 5
{AA 
shoppingCartItemBB $
.BB$ %
AmountBB% +
=BB, -
amountBB. 4
;BB4 5
}CC 
elseDD 
{EE 
shoppingCartItemFF $
.FF$ %
AmountFF% +
+=FF, .
amountFF/ 5
;FF5 6
}GG 
}HH 
_appDbContextII 
.II 
SaveChangesII %
(II% &
)II& '
;II' (
}JJ 	
publicLL 
intLL 
RemoveFromCartLL !
(LL! "
FlowerLL" (
flowerLL) /
)LL/ 0
{MM 	
varNN 
shoppingCartItemNN  
=NN! "
_appDbContextOO !
.OO! "
ShoppingCartItemsOO" 3
.OO3 4
SingleOrDefaultOO4 C
(OOC D
sPP 
=>PP 
sPP 
.PP 
FlowerPP %
.PP% &
FlowerIdPP& .
==PP/ 1
flowerPP2 8
.PP8 9
FlowerIdPP9 A
&&PPB D
sPPE F
.PPF G
ShoppingCartIdPPG U
==PPV X
ShoppingCartIdPPY g
)PPg h
;PPh i
varRR 
localAmountRR 
=RR 
$numRR 
;RR  
ifTT 
(TT 
shoppingCartItemTT  
!=TT! #
nullTT$ (
)TT( )
{UU 
ifVV 
(VV 
shoppingCartItemVV $
.VV$ %
AmountVV% +
>VV, -
$numVV. /
)VV/ 0
{WW 
shoppingCartItemXX $
.XX$ %
AmountXX% +
--XX+ -
;XX- .
localAmountYY 
=YY  !
shoppingCartItemYY" 2
.YY2 3
AmountYY3 9
;YY9 :
}ZZ 
else[[ 
{\\ 
_appDbContext]] !
.]]! "
ShoppingCartItems]]" 3
.]]3 4
Remove]]4 :
(]]: ;
shoppingCartItem]]; K
)]]K L
;]]L M
}^^ 
}__ 
_appDbContextaa 
.aa 
SaveChangesaa %
(aa% &
)aa& '
;aa' (
returncc 
localAmountcc 
;cc 
}dd 	
publicff 
Listff 
<ff 
ShoppingCartItemff $
>ff$ % 
GetShoppingCartItemsff& :
(ff: ;
)ff; <
{gg 	
returnhh 
ShoppingCartItemshh $
??hh% '
(ii 
ShoppingCartItemsii %
=ii& '
_appDbContextjj $
.jj$ %
ShoppingCartItemsjj% 6
.jj6 7
Wherejj7 <
(jj< =
cjj= >
=>jj? A
cjjB C
.jjC D
ShoppingCartIdjjD R
==jjS U
ShoppingCartIdjjV d
)jjd e
.kk 
Includekk #
(kk# $
skk$ %
=>kk& (
skk) *
.kk* +
Flowerkk+ 1
)kk1 2
.ll 
ToListll "
(ll" #
)ll# $
)ll$ %
;ll% &
}mm 	
publicoo 
voidoo 
	ClearCartoo 
(oo 
)oo 
{pp 	
varqq 
	cartItemsqq 
=qq 
_appDbContextqq )
.rr 
ShoppingCartItemsrr "
.ss 
Wheress 
(ss 
cartss 
=>ss 
cartss #
.ss# $
ShoppingCartIdss$ 2
==ss3 5
ShoppingCartIdss6 D
)ssD E
;ssE F
_appDbContextuu 
.uu 
ShoppingCartItemsuu +
.uu+ ,
RemoveRangeuu, 7
(uu7 8
	cartItemsuu8 A
)uuA B
;uuB C
_appDbContextww 
.ww 
SaveChangesww %
(ww% &
)ww& '
;ww' (
}xx 	
public|| 
decimal||  
GetShoppingCartTotal|| +
(||+ ,
)||, -
{}} 	
var~~ 
total~~ 
=~~ 
_appDbContext~~ %
.~~% &
ShoppingCartItems~~& 7
.~~7 8
Where~~8 =
(~~= >
c~~> ?
=>~~@ B
c~~C D
.~~D E
ShoppingCartId~~E S
==~~T V
ShoppingCartId~~W e
)~~e f
. 
Select 
( 
c 
=> 
c 
. 
Flower %
.% &
Price& +
*, -
c. /
./ 0
Amount0 6
)6 7
.7 8
Sum8 ;
(; <
)< =
;= >
return
ÄÄ 
total
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
}
ÇÇ 
}ÉÉ â
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCartItem.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
ShoppingCartItem !
{ 
public 
int 
ShoppingCartItemId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
Amount		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ¡
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Program.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} è
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\CategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class 
CategoryRepository #
:$ %
ICategoryRepository& 9
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public

 
CategoryRepository

 !
(

! "
AppDbContext

" .
appDbContext

/ ;
)

; <
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Category #
># $

Categories% /
=>0 2
_appDbContext3 @
.@ A

CategoriesA K
;K L
} 
} õ3
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\FlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
FlowerRepository		 !
:		" #
IFlowerRepository		$ 5
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public 
FlowerRepository 
(  
AppDbContext  ,
appDbContext- 9
)9 :
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Include- 4
(4 5
c5 6
=>7 9
c: ;
.; <
Category< D
)D E
;E F
} 
} 	
public 
IEnumerable 
< 
string !
>! "
FlowersNames# /
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Select- 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Name; ?
)? @
.@ A
ToListA G
(G H
)H I
;I J
} 
}   	
public"" 
IEnumerable"" 
<"" 
Flower"" !
>""! "
FlowerPresentation""# 5
{## 	
get$$ 
{%% 
return&& 
_appDbContext&& $
.&&$ %
Flowers&&% ,
.&&, -
Include&&- 4
(&&4 5
c&&5 6
=>&&7 9
c&&: ;
.&&; <
Category&&< D
)&&D E
.&&E F
Where&&F K
(&&K L
p&&L M
=>&&N P
p&&Q R
.&&R S 
IsFlowerPresentation&&S g
)&&g h
;&&h i
}'' 
}(( 	
public** 
Flower** 
GetFlowerById** #
(**# $
int**$ '
flowerId**( 0
)**0 1
{++ 	
return,, 
_appDbContext,,  
.,,  !
Flowers,,! (
.,,( )
FirstOrDefault,,) 7
(,,7 8
f,,8 9
=>,,: <
f,,= >
.,,> ?
FlowerId,,? G
==,,H J
flowerId,,K S
),,S T
;,,T U
}-- 	
public// 
IEnumerable// 
<// 
FlowerViewModel// *
>//* +
FlowersAsViewModel//, >
{00 	
get11 
{22 
List33 
<33 
FlowerViewModel33 $
>33$ %
flowers33& -
=33. /
new330 3
List334 8
<338 9
FlowerViewModel339 H
>33H I
(33I J
)33J K
;33K L
foreach55 
(55 
var55 
dbFlower55 %
in55& (
Flowers55) 0
)550 1
{66 
flowers77 
.77 
Add77 
(77  (
MapDbFlowerToFlowerViewModel77  <
(77< =
dbFlower77= E
)77E F
)77F G
;77G H
}88 
return:: 
flowers:: 
;:: 
};; 
}<< 	
public>> 
bool>> 
	AddFlower>> 
(>> 
Flower>> $
flower>>% +
)>>+ ,
{?? 	
var@@ 
result@@ 
=@@ 
_appDbContext@@ &
.@@& '
Add@@' *
(@@* +
flower@@+ 1
)@@1 2
;@@2 3
_appDbContextBB 
.BB 
SaveChangesBB %
(BB% &
)BB& '
;BB' (
returnDD 
resultDD 
.DD 
StateDD 
==DD  "
EntityStateDD# .
.DD. /
AddedDD/ 4
||DD5 7
resultDD8 >
.DD> ?
StateDD? D
==DDE G
EntityStateDDH S
.DDS T
	UnchangedDDT ]
?DD^ _
trueDD` d
:DDe f
falseDDg l
;DDl m
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
varII 
resultII 
=II 
_appDbContextII &
.II& '
RemoveII' -
(II- .
flowerII. 4
)II4 5
;II5 6
_appDbContextKK 
.KK 
SaveChangesKK %
(KK% &
)KK& '
;KK' (
returnMM 
resultMM 
.MM 
StateMM 
==MM  "
EntityStateMM# .
.MM. /
DeletedMM/ 6
||MM7 9
resultMM: @
.MM@ A
StateMMA F
==MMG I
EntityStateMMJ U
.MMU V
	UnchangedMMV _
?MM` a
trueMMb f
:MMg h
falseMMi n
;MMn o
}NN 	
privatePP 
FlowerViewModelPP (
MapDbFlowerToFlowerViewModelPP  <
(PP< =
FlowerPP= C
dbFlowerPPD L
)PPL M
{QQ 	
returnRR 
newRR 
FlowerViewModelRR &
{SS 
FlowerIdTT 
=TT 
dbFlowerTT #
.TT# $
FlowerIdTT$ ,
,TT, -
NameUU 
=UU 
dbFlowerUU 
.UU  
NameUU  $
,UU$ %
PriceVV 
=VV 
dbFlowerVV  
.VV  !
PriceVV! &
,VV& '
ShortDescriptionWW  
=WW! "
dbFlowerWW# +
.WW+ ,
ShortDescriptionWW, <
,WW< =
ImageThumbnailUrlXX !
=XX" #
dbFlowerXX$ ,
.XX, -
ImageThumbnailUrlXX- >
}YY 
;YY 
}ZZ 	
public\\ 
bool\\ 
UpdateFlower\\  
(\\  !
Flower\\! '
flower\\( .
)\\. /
{]] 	
_appDbContext^^ 
.^^ 
Update^^  
(^^  !
flower^^! '
)^^' (
;^^( )
_appDbContext`` 
.`` 
SaveChanges`` %
(``% &
)``& '
;``' (
returnbb 
truebb 
;bb 
}cc 	
}dd 
}ee »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ICategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
ICategoryRepository (
{ 
IEnumerable 
< 
Category 
> 

Categories (
{) *
get+ .
;. /
}0 1
}		 
}

 ¿
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IFlowerRepository &
{ 
IEnumerable		 
<		 
Flower		 
>		 
Flowers		 #
{		$ %
get		& )
;		) *
}		+ ,
IEnumerable 
< 
Flower 
> 
FlowerPresentation .
{/ 0
get1 4
;4 5
}6 7
IEnumerable 
< 
FlowerViewModel #
># $
FlowersAsViewModel% 7
{ 	
get 
; 
} 	
IEnumerable 
< 
string 
> 
FlowersNames (
{ 	
get 
; 
} 	
Flower 
GetFlowerById 
( 
int  
flowerId! )
)) *
;* +
bool 
	AddFlower 
( 
Flower 
flower $
)$ %
;% &
bool 
DeleteFlower 
( 
Flower  
flower! '
)' (
;( )
bool 
UpdateFlower 
( 
Flower  
flower! '
)' (
;( )
} 
} ò
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IOrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IOrderRepository %
{ 
void		 
CreateOrder		 
(		 
Order		 
order		 $
)		$ %
;		% &
IEnumerable 
< (
OrderHistoryDetailsViewModel 0
>0 1 
GetOrdersAsViewModel2 F
(F G
stringG M
userNameN V
=W X
$strY [
)[ \
;\ ]
} 
} à
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelCategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class #
ModelCategoryRepository (
:) *
ICategoryRepository+ >
{ 
public 
IEnumerable 
< 
Category #
># $

Categories% /
{		 	
get

 
{ 
return 
new 
List 
<  
Category  (
>( )
{ 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 5
,5 6
Description #
=$ %
$str% 9
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& :
,: ;
Description #
=$ %
$str% 3
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 8
,8 9
Description #
=$ %
$str% M
} 
} 
; 
}   
}!! 	
}"" 
}## ô1
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 !
ModelFlowerRepository		 &
:		' (
IFlowerRepository		) :
{

 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
=A B
newC F#
ModelCategoryRepositoryG ^
(^ _
)_ `
;` a
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
new 
List 
<  
Flower  &
>& '
{ 
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name 
= 
$str %
,% &
Price 
= 
$num $
,$ %
ShortDescription (
=( )
$str) 7
,7 8
LongDescription '
=' (
$str( /
,/ 0
Category  
=! "
_categoryRepository# 6
.6 7

Categories7 A
.A B
ToListB H
(H I
)I J
[J K
$numK L
]L M
,M N
ImageUrl  
=! "
$str" g
,g h
InStocki p
=p q
trueq u
,u v
ImageThumbnailUrl )
=* +
$str+ p
}p q
,q r
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name   
=   
$str   &
,  & '
Price!! 
=!! 
$num!! $
,!!$ %
ShortDescription"" (
=""( )
$str"") 7
,""7 8
LongDescription## '
=##' (
$str##( 1
,##1 2
Category$$  
=$$! "
_categoryRepository$$# 6
.$$6 7

Categories$$7 A
.$$A B
ToList$$B H
($$H I
)$$I J
[$$J K
$num$$K L
]$$L M
,$$M N
ImageUrl%%  
=%%! "
$str	%%" Ä
,
%%Ä Å
InStock&& 
=&&  
true&&  $
,&&$ %
ImageThumbnailUrl'' )
=''* +
$str	''+ â
}
''â ä
,
''ä ã
new)) 
Flower)) 
{))  
FlowerId))  (
=))) *
$num))+ ,
,)), -
Name** 
=** 
$str** $
,**$ %
Price**& +
=**+ ,
$num**, 2
,**2 3
ShortDescription++ (
=++( )
$str++) 4
,++4 5
LongDescription,, '
=,,' (
$str,,( 3
,,,3 4
Category--  
=--! "
_categoryRepository--# 6
.--6 7

Categories--7 A
.--A B
ToList--B H
(--H I
)--I J
[--J K
$num--K L
]--L M
,--M N
ImageUrl..  
=..! "
$str.." s
,..s t
InStock..u |
=..| }
true	..} Å
,
..Å Ç
ImageThumbnailUrl// )
=//* +
$str//+ |
}//| }
,//} ~
new11 
Flower11 
{11  
FlowerId11  (
=11) *
$num11+ ,
,11, -
Name22 
=22 
$str22 %
,22% &
Price22' ,
=22, -
$num22- 3
,223 4
ShortDescription33 (
=33( )
$str33) 8
,338 9
LongDescription44 '
=44' (
$str44( 0
,440 1
Category55  
=55! "
_categoryRepository55# 6
.556 7

Categories557 A
.55A B
ToList55B H
(55H I
)55I J
[55J K
$num55K L
]55L M
,55M N
ImageUrl66  
=66! "
$str66" p
,66p q
InStock66r y
=66y z
true66z ~
,66~ 
ImageThumbnailUrl77 )
=77* +
$str77+ y
}77y z
}88 
;88 
}99 
}:: 	
public<< 
IEnumerable<< 
<<< 
Flower<< !
><<! "
FlowerPresentation<<# 5
{<<6 7
get<<8 ;
;<<; <
}<<= >
public>> 
IEnumerable>> 
<>> 
FlowerViewModel>> *
>>>* +
FlowersAsViewModel>>, >
=>>>? A
throw>>B G
new>>H K#
NotImplementedException>>L c
(>>c d
)>>d e
;>>e f
public@@ 
IEnumerable@@ 
<@@ 
string@@ !
>@@! "
FlowersNames@@# /
=>@@0 2
throw@@3 8
new@@9 <#
NotImplementedException@@= T
(@@T U
)@@U V
;@@V W
publicBB 
boolBB 
	AddFlowerBB 
(BB 
FlowerBB $
flowerBB% +
)BB+ ,
{CC 	
throwDD 
newDD #
NotImplementedExceptionDD -
(DD- .
)DD. /
;DD/ 0
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
throwII 
newII #
NotImplementedExceptionII -
(II- .
)II. /
;II/ 0
}JJ 	
publicLL 
FlowerLL 
GetFlowerByIdLL #
(LL# $
intLL$ '
flowerIdLL( 0
)LL0 1
{MM 	
throwNN 
newNN 
SystemNN 
.NN #
NotImplementedExceptionNN 4
(NN4 5
)NN5 6
;NN6 7
}OO 	
publicQQ 
boolQQ 
UpdateFlowerQQ  
(QQ  !
FlowerQQ! '
flowerQQ( .
)QQ. /
{RR 	
throwSS 
newSS #
NotImplementedExceptionSS -
(SS- .
)SS. /
;SS/ 0
}TT 	
}UU 
}VV ¡-
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\OrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
OrderRepository		  
:		! "
IOrderRepository		# 3
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderRepository 
( 
AppDbContext +
appDbContext, 8
,8 9
ShoppingCart: F
shoppingCartG S
)S T
{ 	
_appDbContext 
= 
appDbContext (
;( )
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8 
GetOrdersAsViewModel9 M
(M N
stringN T
userNameU ]
=^ _
$str` b
)b c
{ 	
List 
< 
Order 
> 
orders 
=  
null! %
;% &
if 
( 
string 
. 
IsNullOrEmpty $
($ %
userName% -
)- .
). /
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
ToList. 4
(4 5
)5 6
;6 7
} 
else 
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
Where. 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Email; @
==A C
userNameD L
)L M
.M N
ToListN T
(T U
)U V
;V W
} 
var   #
orderHistoryDetailsList   '
=  ( )
new  * -
List  . 2
<  2 3(
OrderHistoryDetailsViewModel  3 O
>  O P
(  P Q
)  Q R
;  R S
foreach!! 
(!! 
var!! 
order!! 
in!! !
orders!!" (
)!!( )
{"" #
orderHistoryDetailsList## '
.##' (
Add##( +
(##+ ,&
MapDbOrderToOrderViewModel##, F
(##F G
order##G L
)##L M
)##M N
;##N O
}$$ 
return&& #
orderHistoryDetailsList&& *
;&&* +
}'' 	
public)) 
void)) 
CreateOrder)) 
())  
Order))  %
order))& +
)))+ ,
{** 	
order++ 
.++ 
OrderPlaced++ 
=++ 
DateTime++  (
.++( )
Now++) ,
;++, -
_appDbContext-- 
.-- 
Orders--  
.--  !
Add--! $
(--$ %
order--% *
)--* +
;--+ ,
var// 
shoppingCartItems// !
=//" #
_shoppingCart//$ 1
.//1 2
ShoppingCartItems//2 C
;//C D
foreach11 
(11 
var11 
shoppingCartItem11 )
in11* ,
shoppingCartItems11- >
)11> ?
{22 
var33 
orderDetail33 
=33  !
new33" %
OrderDetail33& 1
{44 
Amount55 
=55 
shoppingCartItem55 -
.55- .
Amount55. 4
,554 5
FlowerId66 
=66 
shoppingCartItem66 /
.66/ 0
Flower660 6
.666 7
FlowerId667 ?
,66? @
OrderId77 
=77 
order77 #
.77# $
OrderId77$ +
,77+ ,
Price88 
=88 
shoppingCartItem88 ,
.88, -
Flower88- 3
.883 4
Price884 9
}99 
;99 
_appDbContext;; 
.;; 
OrderDetails;; *
.;;* +
Add;;+ .
(;;. /
orderDetail;;/ :
);;: ;
;;;; <
}<< 
_appDbContext>> 
.>> 
SaveChanges>> %
(>>% &
)>>& '
;>>' (
}?? 	
privateAA (
OrderHistoryDetailsViewModelAA ,&
MapDbOrderToOrderViewModelAA- G
(AAG H
OrderAAH M
dbOrderAAN U
)AAU V
{BB 	
returnCC 
newCC (
OrderHistoryDetailsViewModelCC 3
{DD 
OrderIdEE 
=EE 
dbOrderEE !
.EE! "
OrderIdEE" )
,EE) *
AddressFF 
=FF 
dbOrderFF !
.FF! "
AddressLine1FF" .
+FF/ 0
$strFF1 4
+FF5 6
dbOrderFF7 >
.FF> ?
AddressLine2FF? K
,FFK L
CityGG 
=GG 
dbOrderGG 
.GG 
CityGG #
,GG# $
	FirstNameHH 
=HH 
dbOrderHH #
.HH# $
	FirstNameHH$ -
,HH- .
LastNameII 
=II 
dbOrderII "
.II" #
LastNameII# +
,II+ ,
	PayMethodJJ 
=JJ 
dbOrderJJ #
.JJ# $
	PayMethodJJ$ -
,JJ- .
PhoneNumberKK 
=KK 
dbOrderKK %
.KK% &
PhoneNumberKK& 1
,KK1 2
ShippingMethodLL 
=LL  
dbOrderLL! (
.LL( )
ShippingMethodLL) 7
}MM 
;MM 
}NN 	
}OO 
}PP ’.
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Startup.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Startup 
{ 
private 
IConfigurationRoot "
_configurationRoot# 5
;5 6
public 
Startup 
( 
IHostingEnvironment *
hostingEnvironment+ =
)= >
{ 	
_configurationRoot 
=  
new! $ 
ConfigurationBuilder% 9
(9 :
): ;
. 
SetBasePath '
(' (
hostingEnvironment( :
.: ;
ContentRootPath; J
)J K
. 
AddJsonFile '
(' (
$str( :
): ;
. 
Build !
(! "
)" #
;# $
} 	
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddDbContext !
<! "
AppDbContext" .
>. /
(/ 0
options0 7
=>8 :
options, 3
.3 4
UseSqlServer4 @
(@ A
_configurationRootA S
.S T
GetConnectionStringT g
(g h
$strh {
){ |
)| }
)} ~
;~ 
services!! 
.!! 
AddIdentity!!  
<!!  !
ApplicationUser!!! 0
,!!0 1
IdentityRole!!2 >
>!!> ?
(!!? @
options!!@ G
=>!!H J
{"" 
options## 
.## 
Password##  
.##  !
RequireDigit##! -
=##. /
true##0 4
;##4 5
options$$ 
.$$ 
Password$$  
.$$  !
RequireLowercase$$! 1
=$$2 3
true$$4 8
;$$8 9
options%% 
.%% 
Password%%  
.%%  !
RequireUppercase%%! 1
=%%2 3
true%%4 8
;%%8 9
options&& 
.&& 
Password&&  
.&&  !"
RequireNonAlphanumeric&&! 7
=&&8 9
false&&: ?
;&&? @
options'' 
.'' 
User'' 
.'' 
RequireUniqueEmail'' /
=''0 1
false''2 7
;''7 8
}(( 
)(( 
.)) $
AddEntityFrameworkStores)) )
<))) *
AppDbContext))* 6
>))6 7
())7 8
)))8 9
;))9 :
services++ 
.++ 
AddTransient++ !
<++! "
ICategoryRepository++" 5
,++5 6
CategoryRepository++7 I
>++I J
(++J K
)++K L
;++L M
services,, 
.,, 
AddTransient,, !
<,,! "
IFlowerRepository,," 3
,,,3 4
FlowerRepository,,5 E
>,,E F
(,,F G
),,G H
;,,H I
services-- 
.-- 
AddSingleton-- !
<--! " 
IHttpContextAccessor--" 6
,--6 7
HttpContextAccessor--8 K
>--K L
(--L M
)--M N
;--N O
services.. 
... 
	AddScoped.. 
<.. 
ShoppingCart.. +
>..+ ,
(.., -
sp..- /
=>..0 2
ShoppingCart..3 ?
...? @
GetCart..@ G
(..G H
sp..H J
)..J K
)..K L
;..L M
services// 
.// 
AddTransient// !
<//! "
IOrderRepository//" 2
,//2 3
OrderRepository//4 C
>//C D
(//D E
)//E F
;//F G
services11 
.11 
AddMvc11 
(11 
)11 
;11 
services33 
.33 
AddMemoryCache33 #
(33# $
)33$ %
;33% &
services44 
.44 

AddSession44 
(44  
)44  !
;44! "
}55 	
public88 
void88 
	Configure88 
(88 
IApplicationBuilder88 1
app882 5
,885 6
IHostingEnvironment887 J
env88K N
,88N O
ILoggerFactory88P ^
loggerFactory88_ l
)88l m
{99 	
app:: 
.:: %
UseDeveloperExceptionPage:: )
(::) *
)::* +
;::+ ,
app;; 
.;; 
UseStatusCodePages;; "
(;;" #
);;# $
;;;$ %
app<< 
.<< 
UseStaticFiles<< 
(<< 
)<<  
;<<  !
app== 
.== 

UseSession== 
(== 
)== 
;== 
app>> 
.>> 
UseIdentity>> 
(>> 
)>> 
;>> 
appAA 
.AA 
UseMvcAA 
(AA 
routesAA 
=>AA  
{BB 
routesCC 
.CC 
MapRouteCC 
(CC  
nameDD 
:DD 
$strDD *
,DD* +
templateEE 
:EE 
$strEE ;
,EE; <
defaultsFF 
:FF 
newFF !
{FF" #

ControllerFF$ .
=FF/ 0
$strFF1 9
,FF9 :
actionFF; A
=FFB C
$strFFD J
}FFK L
)FFL M
;FFM N
routesHH 
.HH 
MapRouteHH 
(HH  
nameII 
:II 
$strII #
,II# $
templateJJ 
:JJ 
$strJJ F
)JJF G
;JJG H
}KK 
)KK 
;KK 
DbInitializerMM 
.MM 
SeedMM 
(MM 
appMM "
)MM" #
;MM# $
}NN 	
}OO 
}PP ‰

GE:\Projects\FlowerShop\FlowerApp\FlowerApp\TagHelpers\EmailTagHelper.cs
	namespace 	
	FlowerApp
 
. 

TagHelpers 
{ 
public 

class 
EmailTagHelper 
:  !
	TagHelper" +
{ 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
Content		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public 
override 
void 
Process $
($ %
TagHelperContext% 5
context6 =
,= >
TagHelperOutput? N
outputO U
)U V
{ 	
output 
. 
TagName 
= 
$str  
;  !
output 
. 

Attributes 
. 
SetAttribute *
(* +
$str+ 1
,1 2
$str3 <
+= >
Address? F
)F G
;G H
output 
. 
Content 
. 

SetContent %
(% &
Content& -
)- .
;. /
} 	
} 
} ≥
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddFlowerViewModel #
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
ShortDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
string		 
LongDescription		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ô
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddRoleViewModel !
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
RoleName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} ∂
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddUserViewModel !
{ 
[ 	
Required	 
] 
[		 	
Display			 
(		 
Name		 
=		 
$str		 #
)		# $
]		$ %
public

 
string

 
UserName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
[ 	
RegularExpression	 
( 
$str 6
,6 7
ErrorMessage 
= 
$str Q
)Q R
]R S
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public   
DateTime   
	Birthdate   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public"" 
string"" 
City"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
public$$ 
string$$ 
Country$$ 
{$$ 
get$$  #
;$$# $
set$$% (
;$$( )
}$$* +
}%% 
}&& ’
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\CategoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
CategoryViewModel "
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CategoryName 
{  !
get" %
;% &
set' *
;* +
}, -
} 
}		 ≥
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ClaimsManagementViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class %
ClaimsManagementViewModel *
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ClaimId 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
List		 
<		 
string		 
>		 
AllClaimsList		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditFlowerViewModel $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditRoleViewModel "
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! =
)

= >
]

> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
RoleName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< 
string 
> 
Users !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditUserViewModel "
{ 
public		 
string		 
Id		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
[ 	
Required	 
( 
ErrorMessage 
=  
$str! =
)= >
]> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
	Birthdate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ø
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerDetailViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
FlowerDetailViewModel &
{ 
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ñ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerListViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerListViewModel $
{ 
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public

 
string

 
CurrentCategory

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
} 
} ≠
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerViewModel  
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} »
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\HomeViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
HomeViewModel 
{ 
public 
IEnumerable 
< 
Flower !
>! "
FlowerPresentation# 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public

 
IEnumerable

 
<

 
string

 !
>

! "
FlowersName

# .
{

/ 0
get

1 4
;

4 5
set

6 9
;

9 :
}

; <
} 
} Â
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\LoginViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
LoginViewModel 
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
UserName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ï
UE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryDetailsViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class (
OrderHistoryDetailsViewModel -
{ 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
City		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public

 
string

 
ShippingMethod

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	PayMethod 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} å
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
OrderHistoryViewModel &
{ 
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8
Orders9 ?
{@ A
getB E
;E F
setG J
;J K
}L M
} 
}		 Ò
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ShoppingCartViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
ShoppingCartViewModel &
{ 
public 
ShoppingCart 
ShoppingCart (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public		 
decimal		 
ShoppingCartTotal		 (
{		) *
get		+ .
;		. /
set		0 3
;		3 4
}		5 6
}

 
} π
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\UserRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
UserRoleViewModel "
{ 
public 
UserRoleViewModel  
(  !
)! "
{		 	
Users

 
=

 
new

 
List

 
<

 
IdentityUser

 )
>

) *
(

* +
)

+ ,
;

, -
} 	
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RoleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
IdentityUser  
>  !
Users" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} 