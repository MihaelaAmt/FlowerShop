à
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\ApplicationUser.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser# /
{ 
public		 
DateTime		 
	Birthdate		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} „
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\FlowerShopClaimTypes.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class  
FlowerShopClaimTypes %
{ 
public		 
static		 
List		 
<		 
string		 !
>		! "

ClaimsList		# -
{		. /
get		0 3
;		3 4
set		5 8
;		8 9
}		: ;
=		< =
new		> A
List		B F
<		F G
string		G M
>		M N
{		O P
$str		Q `
,		` a
$str		b n
,		n o
$str			p Ç
}
		É Ñ
;
		Ñ Ö
}

 
} ˚
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\AdminMenuItem.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
	AdminMenu 
: 
ViewComponent *
{ 
public		  
IViewComponentResult		 #
Invoke		$ *
(		* +
)		+ ,
{

 	
var 
	menuItems 
= 
new 
List  $
<$ %
AdminMenuItem% 2
>2 3
{4 5
new6 9
AdminMenuItem: G
(G H
)H I
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem "
(" #
)# $
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem #
(# $
)$ %
{ 
DisplayValue  
=! "
$str# 6
,6 7
ActionValue 
=  !
$str" 4
}   
,   
}!! 
;!! 
return$$ 
View$$ 
($$ 
	menuItems$$ !
)$$! "
;$$" #
}%% 	
}&& 
public)) 

class)) 
AdminMenuItem)) 
{** 
public,, 
string,, 
DisplayValue,, "
{,,# $
get,,% (
;,,( )
set,,* -
;,,- .
},,/ 0
public// 
string// 
ActionValue// !
{//" #
get//$ '
;//' (
set//) ,
;//, -
}//. /
}00 
}11 ‹	
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\CategoryMenu.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
CategoryMenu 
: 
ViewComponent  -
{		 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
CategoryMenu 
( 
ICategoryRepository /
categoryRepository0 B
)B C
{ 	
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 

categories 
= 
_categoryRepository 0
.0 1

Categories1 ;
.; <
OrderBy< C
(C D
cD E
=>F H
cI J
.J K
CategoryNameK W
)W X
;X Y
return 
View 
( 

categories "
)" #
;# $
} 	
} 
} €
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\ShoppingCartSummary.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
ShoppingCartSummary $
:% &
ViewComponent' 4
{		 
private

 
readonly

 
ShoppingCart

 %
_shoppingCart

& 3
;

3 4
public 
ShoppingCartSummary "
(" #
ShoppingCart# /
shoppingCart0 <
)< =
{ 	
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var 
shoppingViewModel !
=" #
new$ '!
ShoppingCartViewModel( =
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return   
View   
(   
shoppingViewModel   )
)  ) *
;  * +
}!! 	
}"" 
}## Ó1
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AccountController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
,I J
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[ 	
AllowAnonymous	 
] 
public 
IActionResult 
Login "
(" #
string# )
	returnUrl* 3
)3 4
{ 	
return   
View   
(   
new   
LoginViewModel   *
{!! 
	ReturnUrl"" 
="" 
	returnUrl"" %
}## 
)## 
;## 
}$$ 	
['' 	
HttpPost''	 
]'' 
[** 	
AllowAnonymous**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
Login++) .
(++. /
LoginViewModel++/ =
loginViewModel++> L
)++L M
{,, 	
if-- 
(-- 
!-- 

ModelState-- 
.-- 
IsValid-- #
)--# $
return.. 
View.. 
(.. 
loginViewModel.. *
)..* +
;..+ ,
var00 
user00 
=00 
await00 
_userManager00 )
.00) *
FindByNameAsync00* 9
(009 :
loginViewModel00: H
.00H I
UserName00I Q
)00Q R
;00R S
if22 
(22 
user22 
!=22 
null22 
)22 
{33 
var55 
result55 
=55 
await55 "
_signInManager55# 1
.551 2
PasswordSignInAsync552 E
(55E F
user55F J
,55J K
loginViewModel55L Z
.55Z [
Password55[ c
,55c d
false55e j
,55j k
false55l q
)55q r
;55r s
if88 
(88 
result88 
.88 
	Succeeded88 $
)88$ %
{99 
if;; 
(;; 
string;; 
.;; 
IsNullOrEmpty;; ,
(;;, -
loginViewModel;;- ;
.;;; <
	ReturnUrl;;< E
);;E F
);;F G
return<< 
RedirectToAction<< /
(<</ 0
$str<<0 7
,<<7 8
$str<<9 ?
)<<? @
;<<@ A
return>> 
Redirect>> #
(>># $
loginViewModel>>$ 2
.>>2 3
	ReturnUrl>>3 <
)>>< =
;>>= >
}?? 
}@@ 

ModelStateBB 
.BB 
AddModelErrorBB $
(BB$ %
$strBB% '
,BB' (
$strBB) F
)BBF G
;BBG H
returnDD 
ViewDD 
(DD 
loginViewModelDD &
)DD& '
;DD' (
}EE 	
[HH 	
AllowAnonymousHH	 
]HH 
publicII 
IActionResultII 
RegisterII %
(II% &
)II& '
{JJ 	
returnKK 
ViewKK 
(KK 
)KK 
;KK 
}LL 	
[OO 	
HttpPostOO	 
]OO 
[PP 	$
ValidateAntiForgeryTokenPP	 !
]PP! "
[QQ 	
AllowAnonymousQQ	 
]QQ 
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' (
RegisterRR) 1
(RR1 2
LoginViewModelRR2 @
loginViewModelRRA O
)RRO P
{SS 	
ifTT 
(TT 

ModelStateTT 
.TT 
IsValidTT "
)TT" #
{UU 
varWW 
userWW 
=WW 
newWW 
ApplicationUserWW .
(WW. /
)WW/ 0
{WW1 2
UserNameWW3 ;
=WW< =
loginViewModelWW> L
.WWL M
UserNameWWM U
}WWV W
;WWW X
varXX 
resultXX 
=XX 
awaitXX "
_userManagerXX# /
.XX/ 0
CreateAsyncXX0 ;
(XX; <
userXX< @
,XX@ A
loginViewModelXXB P
.XXP Q
PasswordXXQ Y
)XXY Z
;XXZ [
if[[ 
([[ 
result[[ 
.[[ 
	Succeeded[[ $
)[[$ %
{\\ 
return]] 
RedirectToAction]] +
(]]+ ,
$str]], 3
,]]3 4
$str]]5 ;
)]]; <
;]]< =
}^^ 
}__ 

ModelStatebb 
.bb 
AddModelErrorbb $
(bb$ %
$strbb% '
,bb' (
$strbb) G
)bbG H
;bbH I
returncc 
Viewcc 
(cc 
loginViewModelcc &
)cc& '
;cc' (
}dd 	
[hh 	
HttpPosthh	 
]hh 
publicjj 
asyncjj 
Taskjj 
<jj 
IActionResultjj '
>jj' (
Logoutjj) /
(jj/ 0
)jj0 1
{kk 	
awaitll 
_signInManagerll  
.ll  !
SignOutAsyncll! -
(ll- .
)ll. /
;ll/ 0
returnnn 
RedirectToActionnn #
(nn# $
$strnn$ +
,nn+ ,
$strnn- 3
)nn3 4
;nn4 5
}oo 	
}pp 
}qq ïµ
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AdminController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class 
AdminController  
:! "

Controller# -
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
AdminController 
( 
UserManager *
<* +
ApplicationUser+ :
>: ;
userManager< G
,G H
RoleManagerI T
<T U
IdentityRoleU a
>a b
roleManagerc n
,n o
IFlowerRepository	p Å
flowerRepository
Ç í
,
í ì!
ICategoryRepository
î ß 
categoryRepository
® ∫
)
∫ ª
{ 	
_userManager 
= 
userManager &
;& '
_roleManager 
= 
roleManager &
;& '
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public 
IActionResult 
Index "
(" #
)# $
{   	
return!! 
View!! 
(!! 
)!! 
;!! 
}"" 	
public$$ 
IActionResult$$ 
UserManagement$$ +
($$+ ,
)$$, -
{%% 	
var&& 
users&& 
=&& 
_userManager&& $
.&&$ %
Users&&% *
;&&* +
return(( 
View(( 
((( 
users(( 
)(( 
;(( 
})) 	
public++ 
IActionResult++ 
AddUser++ $
(++$ %
)++% &
{,, 	
return-- 
View-- 
(-- 
)-- 
;-- 
}.. 	
[00 	
HttpPost00	 
]00 
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (
AddUser11) 0
(110 1
AddUserViewModel111 A
addUserViewModel11B R
)11R S
{22 	
if33 
(33 
!33 

ModelState33 
.33 
IsValid33 #
)33# $
return44 
View44 
(44 
addUserViewModel44 ,
)44, -
;44- .
var66 
user66 
=66 
new66 
ApplicationUser66 *
(66* +
)66+ ,
{77 
UserName88 
=88 
addUserViewModel88 +
.88+ ,
UserName88, 4
,884 5
Email99 
=99 
addUserViewModel99 (
.99( )
Email99) .
,99. /
	Birthdate:: 
=:: 
addUserViewModel:: ,
.::, -
	Birthdate::- 6
,::6 7
City;; 
=;; 
addUserViewModel;; '
.;;' (
City;;( ,
,;;, -
Country<< 
=<< 
addUserViewModel<< *
.<<* +
Country<<+ 2
}== 
;== 
IdentityResult?? 
result?? !
=??" #
await??$ )
_userManager??* 6
.??6 7
CreateAsync??7 B
(??B C
user??C G
,??G H
addUserViewModel??I Y
.??Y Z
Password??Z b
)??b c
;??c d
ifAA 
(AA 
resultAA 
.AA 
	SucceededAA  
)AA  !
{BB 
returnCC 
RedirectToActionCC '
(CC' (
$strCC( 8
,CC8 9
_userManagerCC: F
.CCF G
UsersCCG L
)CCL M
;CCM N
}DD 
foreachFF 
(FF 
IdentityErrorFF "
errorFF# (
inFF) +
resultFF, 2
.FF2 3
ErrorsFF3 9
)FF9 :
{GG 

ModelStateHH 
.HH 
AddModelErrorHH (
(HH( )
$strHH) +
,HH+ ,
errorHH- 2
.HH2 3
DescriptionHH3 >
)HH> ?
;HH? @
}II 
returnJJ 
ViewJJ 
(JJ 
addUserViewModelJJ (
)JJ( )
;JJ) *
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
EditUserMM) 1
(MM1 2
stringMM2 8
idMM9 ;
)MM; <
{NN 	
varOO 
userOO 
=OO 
awaitOO 
_userManagerOO )
.OO) *
FindByIdAsyncOO* 7
(OO7 8
idOO8 :
)OO: ;
;OO; <
ifQQ 
(QQ 
userQQ 
==QQ 
nullQQ 
)QQ 
returnRR 
RedirectToActionRR '
(RR' (
$strRR( 8
,RR8 9
_userManagerRR: F
.RRF G
UsersRRG L
)RRL M
;RRM N
varSS 
claimsSS 
=SS 
awaitSS 
_userManagerSS +
.SS+ ,
GetClaimsAsyncSS, :
(SS: ;
userSS; ?
)SS? @
;SS@ A
varTT 
vmTT 
=TT 
newTT 
EditUserViewModelTT *
(TT* +
)TT+ ,
{TT- .
IdTT/ 1
=TT2 3
userTT4 8
.TT8 9
IdTT9 ;
,TT; <
EmailTT= B
=TTC D
userTTE I
.TTI J
EmailTTJ O
,TTO P
UserNameTTQ Y
=TTZ [
userTT\ `
.TT` a
UserNameTTa i
,TTi j

UserClaimsTTk u
=TTv w
claimsTTx ~
.TT~ 
Select	TT Ö
(
TTÖ Ü
c
TTÜ á
=>
TTà ä
c
TTã å
.
TTå ç
Value
TTç í
)
TTí ì
.
TTì î
ToList
TTî ö
(
TTö õ
)
TTõ ú
}
TTù û
;
TTû ü
returnVV 
ViewVV 
(VV 
vmVV 
)VV 
;VV 
}WW 	
[YY 	
HttpPostYY	 
]YY 
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (
EditUserZZ) 1
(ZZ1 2
EditUserViewModelZZ2 C
editUserViewModelZZD U
)ZZU V
{[[ 	
var\\ 
user\\ 
=\\ 
await\\ 
_userManager\\ )
.\\) *
FindByIdAsync\\* 7
(\\7 8
editUserViewModel\\8 I
.\\I J
Id\\J L
)\\L M
;\\M N
if^^ 
(^^ 
user^^ 
!=^^ 
null^^ 
)^^ 
{__ 
user`` 
.`` 
Email`` 
=`` 
editUserViewModel`` .
.``. /
Email``/ 4
;``4 5
useraa 
.aa 
UserNameaa 
=aa 
editUserViewModelaa  1
.aa1 2
UserNameaa2 :
;aa: ;
userbb 
.bb 
	Birthdatebb 
=bb  
editUserViewModelbb! 2
.bb2 3
	Birthdatebb3 <
;bb< =
usercc 
.cc 
Citycc 
=cc 
editUserViewModelcc -
.cc- .
Citycc. 2
;cc2 3
userdd 
.dd 
Countrydd 
=dd 
editUserViewModeldd 0
.dd0 1
Countrydd1 8
;dd8 9
varff 
resultff 
=ff 
awaitff "
_userManagerff# /
.ff/ 0
UpdateAsyncff0 ;
(ff; <
userff< @
)ff@ A
;ffA B
ifhh 
(hh 
resulthh 
.hh 
	Succeededhh $
)hh$ %
returnii 
RedirectToActionii +
(ii+ ,
$strii, <
,ii< =
_userManagerii> J
.iiJ K
UsersiiK P
)iiP Q
;iiQ R

ModelStatekk 
.kk 
AddModelErrorkk (
(kk( )
$strkk) +
,kk+ ,
$strkk- V
)kkV W
;kkW X
returnmm 
Viewmm 
(mm 
editUserViewModelmm -
)mm- .
;mm. /
}nn 
returnpp 
RedirectToActionpp #
(pp# $
$strpp$ 4
,pp4 5
_userManagerpp6 B
.ppB C
UsersppC H
)ppH I
;ppI J
}qq 	
[ss 	
HttpPostss	 
]ss 
publictt 
asynctt 
Tasktt 
<tt 
IActionResulttt '
>tt' (

DeleteUsertt) 3
(tt3 4
stringtt4 :
userIdtt; A
)ttA B
{uu 	
varvv 
uservv 
=vv 
awaitvv 
_userManagervv )
.vv) *
FindByIdAsyncvv* 7
(vv7 8
userIdvv8 >
)vv> ?
;vv? @
ifxx 
(xx 
userxx 
!=xx 
nullxx 
)xx 
{yy 
IdentityResultzz 
resultzz %
=zz& '
awaitzz( -
_userManagerzz. :
.zz: ;
DeleteAsynczz; F
(zzF G
userzzG K
)zzK L
;zzL M
if{{ 
({{ 
result{{ 
.{{ 
	Succeeded{{ $
){{$ %
return|| 
RedirectToAction|| +
(||+ ,
$str||, <
)||< =
;||= >
else}} 

ModelState~~ 
.~~ 
AddModelError~~ ,
(~~, -
$str~~- /
,~~/ 0
$str~~1 a
)~~a b
;~~b c
} 
else
ÄÄ 
{
ÅÅ 

ModelState
ÇÇ 
.
ÇÇ 
AddModelError
ÇÇ (
(
ÇÇ( )
$str
ÇÇ) +
,
ÇÇ+ ,
$str
ÇÇ- G
)
ÇÇG H
;
ÇÇH I
}
ÉÉ 
return
ÑÑ 
View
ÑÑ 
(
ÑÑ 
$str
ÑÑ (
,
ÑÑ( )
_userManager
ÑÑ* 6
.
ÑÑ6 7
Users
ÑÑ7 <
)
ÑÑ< =
;
ÑÑ= >
}
ÖÖ 	
public
àà 
IActionResult
àà 
RoleManagement
àà +
(
àà+ ,
)
àà, -
{
ââ 	
var
ää 
roles
ää 
=
ää 
_roleManager
ää $
.
ää$ %
Roles
ää% *
;
ää* +
return
ãã 
View
ãã 
(
ãã 
roles
ãã 
)
ãã 
;
ãã 
}
åå 	
public
éé 
IActionResult
éé 

AddNewRole
éé '
(
éé' (
)
éé( )
=>
éé* ,
View
éé- 1
(
éé1 2
)
éé2 3
;
éé3 4
[
êê 	
HttpPost
êê	 
]
êê 
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
IActionResult
ëë '
>
ëë' (

AddNewRole
ëë) 3
(
ëë3 4
AddRoleViewModel
ëë4 D
addRoleViewModel
ëëE U
)
ëëU V
{
íí 	
if
îî 
(
îî 
!
îî 

ModelState
îî 
.
îî 
IsValid
îî #
)
îî# $
return
ïï 
View
ïï 
(
ïï 
addRoleViewModel
ïï ,
)
ïï, -
;
ïï- .
var
óó 
role
óó 
=
óó 
new
óó 
IdentityRole
óó '
{
òò 
Name
ôô 
=
ôô 
addRoleViewModel
ôô '
.
ôô' (
RoleName
ôô( 0
}
öö 
;
öö 
IdentityResult
úú 
result
úú !
=
úú" #
await
úú$ )
_roleManager
úú* 6
.
úú6 7
CreateAsync
úú7 B
(
úúB C
role
úúC G
)
úúG H
;
úúH I
if
ûû 
(
ûû 
result
ûû 
.
ûû 
	Succeeded
ûû  
)
ûû  !
{
üü 
return
†† 
RedirectToAction
†† '
(
††' (
$str
††( 8
,
††8 9
_roleManager
††: F
.
††F G
Roles
††G L
)
††L M
;
††M N
}
°° 
foreach
££ 
(
££ 
IdentityError
££ "
error
££# (
in
££) +
result
££, 2
.
££2 3
Errors
££3 9
)
££9 :
{
§§ 

ModelState
•• 
.
•• 
AddModelError
•• (
(
••( )
$str
••) +
,
••+ ,
error
••- 2
.
••2 3
Description
••3 >
)
••> ?
;
••? @
}
¶¶ 
return
ßß 
View
ßß 
(
ßß 
addRoleViewModel
ßß (
)
ßß( )
;
ßß) *
}
®® 	
public
™™ 
async
™™ 
Task
™™ 
<
™™ 
IActionResult
™™ '
>
™™' (
EditRole
™™) 1
(
™™1 2
string
™™2 8
id
™™9 ;
)
™™; <
{
´´ 	
var
¨¨ 
role
¨¨ 
=
¨¨ 
await
¨¨ 
_roleManager
¨¨ )
.
¨¨) *
FindByIdAsync
¨¨* 7
(
¨¨7 8
id
¨¨8 :
)
¨¨: ;
;
¨¨; <
if
ÆÆ 
(
ÆÆ 
role
ÆÆ 
==
ÆÆ 
null
ÆÆ 
)
ÆÆ 
return
ØØ 
RedirectToAction
ØØ '
(
ØØ' (
$str
ØØ( 8
,
ØØ8 9
_roleManager
ØØ: F
.
ØØF G
Roles
ØØG L
)
ØØL M
;
ØØM N
var
±± 
editRoleViewModel
±± !
=
±±" #
new
±±$ '
EditRoleViewModel
±±( 9
{
≤≤ 
Id
≥≥ 
=
≥≥ 
role
≥≥ 
.
≥≥ 
Id
≥≥ 
,
≥≥ 
RoleName
¥¥ 
=
¥¥ 
role
¥¥ 
.
¥¥  
Name
¥¥  $
,
¥¥$ %
Users
µµ 
=
µµ 
new
µµ 
List
µµ  
<
µµ  !
string
µµ! '
>
µµ' (
(
µµ( )
)
µµ) *
}
∂∂ 
;
∂∂ 
foreach
ππ 
(
ππ 
var
ππ 
user
ππ 
in
ππ  
_userManager
ππ! -
.
ππ- .
Users
ππ. 3
)
ππ3 4
{
∫∫ 
if
ªª 
(
ªª 
await
ªª 
_userManager
ªª &
.
ªª& '
IsInRoleAsync
ªª' 4
(
ªª4 5
user
ªª5 9
,
ªª9 :
role
ªª; ?
.
ªª? @
Name
ªª@ D
)
ªªD E
)
ªªE F
editRoleViewModel
ºº %
.
ºº% &
Users
ºº& +
.
ºº+ ,
Add
ºº, /
(
ºº/ 0
user
ºº0 4
.
ºº4 5
UserName
ºº5 =
)
ºº= >
;
ºº> ?
}
ΩΩ 
return
øø 
View
øø 
(
øø 
editRoleViewModel
øø )
)
øø) *
;
øø* +
}
¿¿ 	
[
¬¬ 	
HttpPost
¬¬	 
]
¬¬ 
public
√√ 
async
√√ 
Task
√√ 
<
√√ 
IActionResult
√√ '
>
√√' (
EditRole
√√) 1
(
√√1 2
EditRoleViewModel
√√2 C
editRoleViewModel
√√D U
)
√√U V
{
ƒƒ 	
var
≈≈ 
role
≈≈ 
=
≈≈ 
await
≈≈ 
_roleManager
≈≈ )
.
≈≈) *
FindByIdAsync
≈≈* 7
(
≈≈7 8
editRoleViewModel
≈≈8 I
.
≈≈I J
Id
≈≈J L
)
≈≈L M
;
≈≈M N
if
«« 
(
«« 
role
«« 
!=
«« 
null
«« 
)
«« 
{
»» 
role
…… 
.
…… 
Name
…… 
=
…… 
editRoleViewModel
…… -
.
……- .
RoleName
……. 6
;
……6 7
var
ÀÀ 
result
ÀÀ 
=
ÀÀ 
await
ÀÀ "
_roleManager
ÀÀ# /
.
ÀÀ/ 0
UpdateAsync
ÀÀ0 ;
(
ÀÀ; <
role
ÀÀ< @
)
ÀÀ@ A
;
ÀÀA B
if
ÕÕ 
(
ÕÕ 
result
ÕÕ 
.
ÕÕ 
	Succeeded
ÕÕ $
)
ÕÕ$ %
return
ŒŒ 
RedirectToAction
ŒŒ +
(
ŒŒ+ ,
$str
ŒŒ, <
,
ŒŒ< =
_roleManager
ŒŒ> J
.
ŒŒJ K
Roles
ŒŒK P
)
ŒŒP Q
;
ŒŒQ R

ModelState
–– 
.
–– 
AddModelError
–– (
(
––( )
$str
––) +
,
––+ ,
$str
––- V
)
––V W
;
––W X
return
““ 
View
““ 
(
““ 
editRoleViewModel
““ -
)
““- .
;
““. /
}
”” 
return
’’ 
RedirectToAction
’’ #
(
’’# $
$str
’’$ 4
,
’’4 5
_roleManager
’’6 B
.
’’B C
Roles
’’C H
)
’’H I
;
’’I J
}
÷÷ 	
[
ÿÿ 	
HttpPost
ÿÿ	 
]
ÿÿ 
public
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
IActionResult
ŸŸ '
>
ŸŸ' (

DeleteRole
ŸŸ) 3
(
ŸŸ3 4
string
ŸŸ4 :
id
ŸŸ; =
)
ŸŸ= >
{
⁄⁄ 	
IdentityRole
€€ 
role
€€ 
=
€€ 
await
€€  %
_roleManager
€€& 2
.
€€2 3
FindByIdAsync
€€3 @
(
€€@ A
id
€€A C
)
€€C D
;
€€D E
if
‹‹ 
(
‹‹ 
role
‹‹ 
!=
‹‹ 
null
‹‹ 
)
‹‹ 
{
›› 
var
ﬁﬁ 
result
ﬁﬁ 
=
ﬁﬁ 
await
ﬁﬁ "
_roleManager
ﬁﬁ# /
.
ﬁﬁ/ 0
DeleteAsync
ﬁﬁ0 ;
(
ﬁﬁ; <
role
ﬁﬁ< @
)
ﬁﬁ@ A
;
ﬁﬁA B
if
ﬂﬂ 
(
ﬂﬂ 
result
ﬂﬂ 
.
ﬂﬂ 
	Succeeded
ﬂﬂ $
)
ﬂﬂ$ %
return
‡‡ 
RedirectToAction
‡‡ +
(
‡‡+ ,
$str
‡‡, <
,
‡‡< =
_roleManager
‡‡> J
.
‡‡J K
Roles
‡‡K P
)
‡‡P Q
;
‡‡Q R

ModelState
·· 
.
·· 
AddModelError
·· (
(
··( )
$str
··) +
,
··+ ,
$str
··- ]
)
··] ^
;
··^ _
}
‚‚ 
else
„„ 
{
‰‰ 

ModelState
ÂÂ 
.
ÂÂ 
AddModelError
ÂÂ (
(
ÂÂ( )
$str
ÂÂ) +
,
ÂÂ+ ,
$str
ÂÂ- H
)
ÂÂH I
;
ÂÂI J
}
ÊÊ 
return
ÁÁ 
View
ÁÁ 
(
ÁÁ 
$str
ÁÁ (
,
ÁÁ( )
_roleManager
ÁÁ* 6
.
ÁÁ6 7
Roles
ÁÁ7 <
)
ÁÁ< =
;
ÁÁ= >
}
ËË 	
public
ÏÏ 
async
ÏÏ 
Task
ÏÏ 
<
ÏÏ 
IActionResult
ÏÏ '
>
ÏÏ' (
AddUserToRole
ÏÏ) 6
(
ÏÏ6 7
string
ÏÏ7 =
roleId
ÏÏ> D
)
ÏÏD E
{
ÌÌ 	
var
ÓÓ 
role
ÓÓ 
=
ÓÓ 
await
ÓÓ 
_roleManager
ÓÓ )
.
ÓÓ) *
FindByIdAsync
ÓÓ* 7
(
ÓÓ7 8
roleId
ÓÓ8 >
)
ÓÓ> ?
;
ÓÓ? @
if
 
(
 
role
 
==
 
null
 
)
 
return
ÒÒ 
RedirectToAction
ÒÒ '
(
ÒÒ' (
$str
ÒÒ( 8
,
ÒÒ8 9
_roleManager
ÒÒ: F
.
ÒÒF G
Roles
ÒÒG L
)
ÒÒL M
;
ÒÒM N
var
ÛÛ $
addUserToRoleViewModel
ÛÛ &
=
ÛÛ' (
new
ÛÛ) ,
UserRoleViewModel
ÛÛ- >
{
ÛÛ? @
RoleId
ÛÛA G
=
ÛÛH I
role
ÛÛJ N
.
ÛÛN O
Id
ÛÛO Q
}
ÛÛR S
;
ÛÛS T
foreach
ıı 
(
ıı 
var
ıı 
user
ıı 
in
ıı  
_userManager
ıı! -
.
ıı- .
Users
ıı. 3
)
ıı3 4
{
ˆˆ 
if
˜˜ 
(
˜˜ 
!
˜˜ 
await
˜˜ 
_userManager
˜˜ '
.
˜˜' (
IsInRoleAsync
˜˜( 5
(
˜˜5 6
user
˜˜6 :
,
˜˜: ;
role
˜˜< @
.
˜˜@ A
Name
˜˜A E
)
˜˜E F
)
˜˜F G
{
¯¯ $
addUserToRoleViewModel
˘˘ *
.
˘˘* +
Users
˘˘+ 0
.
˘˘0 1
Add
˘˘1 4
(
˘˘4 5
user
˘˘5 9
)
˘˘9 :
;
˘˘: ;
}
˙˙ 
}
˚˚ 
return
˝˝ 
View
˝˝ 
(
˝˝ $
addUserToRoleViewModel
˝˝ .
)
˝˝. /
;
˝˝/ 0
}
˛˛ 	
[
ÄÄ 	
HttpPost
ÄÄ	 
]
ÄÄ 
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
IActionResult
ÅÅ '
>
ÅÅ' (
AddUserToRole
ÅÅ) 6
(
ÅÅ6 7
UserRoleViewModel
ÅÅ7 H
userRoleViewModel
ÅÅI Z
)
ÅÅZ [
{
ÇÇ 	
var
ÉÉ 
user
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_userManager
ÉÉ )
.
ÉÉ) *
FindByIdAsync
ÉÉ* 7
(
ÉÉ7 8
userRoleViewModel
ÉÉ8 I
.
ÉÉI J
UserId
ÉÉJ P
)
ÉÉP Q
;
ÉÉQ R
var
ÑÑ 
role
ÑÑ 
=
ÑÑ 
await
ÑÑ 
_roleManager
ÑÑ )
.
ÑÑ) *
FindByIdAsync
ÑÑ* 7
(
ÑÑ7 8
userRoleViewModel
ÑÑ8 I
.
ÑÑI J
RoleId
ÑÑJ P
)
ÑÑP Q
;
ÑÑQ R
var
ÜÜ 
result
ÜÜ 
=
ÜÜ 
await
ÜÜ 
_userManager
ÜÜ +
.
ÜÜ+ ,
AddToRoleAsync
ÜÜ, :
(
ÜÜ: ;
user
ÜÜ; ?
,
ÜÜ? @
role
ÜÜA E
.
ÜÜE F
Name
ÜÜF J
)
ÜÜJ K
;
ÜÜK L
if
àà 
(
àà 
result
àà 
.
àà 
	Succeeded
àà  
)
àà  !
{
ââ 
return
ää 
RedirectToAction
ää '
(
ää' (
$str
ää( 8
,
ää8 9
_roleManager
ää: F
.
ääF G
Roles
ääG L
)
ääL M
;
ääM N
}
ãã 
foreach
çç 
(
çç 
IdentityError
çç "
error
çç# (
in
çç) +
result
çç, 2
.
çç2 3
Errors
çç3 9
)
çç9 :
{
éé 

ModelState
èè 
.
èè 
AddModelError
èè (
(
èè( )
$str
èè) +
,
èè+ ,
error
èè- 2
.
èè2 3
Description
èè3 >
)
èè> ?
;
èè? @
}
êê 
return
íí 
View
íí 
(
íí 
userRoleViewModel
íí )
)
íí) *
;
íí* +
}
ìì 	
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
IActionResult
ïï '
>
ïï' ( 
DeleteUserFromRole
ïï) ;
(
ïï; <
string
ïï< B
roleId
ïïC I
)
ïïI J
{
ññ 	
var
óó 
role
óó 
=
óó 
await
óó 
_roleManager
óó )
.
óó) *
FindByIdAsync
óó* 7
(
óó7 8
roleId
óó8 >
)
óó> ?
;
óó? @
if
ôô 
(
ôô 
role
ôô 
==
ôô 
null
ôô 
)
ôô 
return
öö 
RedirectToAction
öö '
(
öö' (
$str
öö( 8
,
öö8 9
_roleManager
öö: F
.
ööF G
Roles
ööG L
)
ööL M
;
ööM N
var
úú $
addUserToRoleViewModel
úú &
=
úú' (
new
úú) ,
UserRoleViewModel
úú- >
{
úú? @
RoleId
úúA G
=
úúH I
role
úúJ N
.
úúN O
Id
úúO Q
}
úúR S
;
úúS T
foreach
ûû 
(
ûû 
var
ûû 
user
ûû 
in
ûû  
_userManager
ûû! -
.
ûû- .
Users
ûû. 3
)
ûû3 4
{
üü 
if
†† 
(
†† 
await
†† 
_userManager
†† &
.
††& '
IsInRoleAsync
††' 4
(
††4 5
user
††5 9
,
††9 :
role
††; ?
.
††? @
Name
††@ D
)
††D E
)
††E F
{
°° $
addUserToRoleViewModel
¢¢ *
.
¢¢* +
Users
¢¢+ 0
.
¢¢0 1
Add
¢¢1 4
(
¢¢4 5
user
¢¢5 9
)
¢¢9 :
;
¢¢: ;
}
££ 
}
§§ 
return
¶¶ 
View
¶¶ 
(
¶¶ $
addUserToRoleViewModel
¶¶ .
)
¶¶. /
;
¶¶/ 0
}
ßß 	
[
©© 	
HttpPost
©©	 
]
©© 
public
™™ 
async
™™ 
Task
™™ 
<
™™ 
IActionResult
™™ '
>
™™' ( 
DeleteUserFromRole
™™) ;
(
™™; <
UserRoleViewModel
™™< M
userRoleViewModel
™™N _
)
™™_ `
{
´´ 	
var
¨¨ 
user
¨¨ 
=
¨¨ 
await
¨¨ 
_userManager
¨¨ )
.
¨¨) *
FindByIdAsync
¨¨* 7
(
¨¨7 8
userRoleViewModel
¨¨8 I
.
¨¨I J
UserId
¨¨J P
)
¨¨P Q
;
¨¨Q R
var
≠≠ 
role
≠≠ 
=
≠≠ 
await
≠≠ 
_roleManager
≠≠ )
.
≠≠) *
FindByIdAsync
≠≠* 7
(
≠≠7 8
userRoleViewModel
≠≠8 I
.
≠≠I J
RoleId
≠≠J P
)
≠≠P Q
;
≠≠Q R
var
ØØ 
result
ØØ 
=
ØØ 
await
ØØ 
_userManager
ØØ +
.
ØØ+ ,!
RemoveFromRoleAsync
ØØ, ?
(
ØØ? @
user
ØØ@ D
,
ØØD E
role
ØØF J
.
ØØJ K
Name
ØØK O
)
ØØO P
;
ØØP Q
if
±± 
(
±± 
result
±± 
.
±± 
	Succeeded
±±  
)
±±  !
{
≤≤ 
return
≥≥ 
RedirectToAction
≥≥ '
(
≥≥' (
$str
≥≥( 8
,
≥≥8 9
_roleManager
≥≥: F
.
≥≥F G
Roles
≥≥G L
)
≥≥L M
;
≥≥M N
}
¥¥ 
foreach
∂∂ 
(
∂∂ 
IdentityError
∂∂ "
error
∂∂# (
in
∂∂) +
result
∂∂, 2
.
∂∂2 3
Errors
∂∂3 9
)
∂∂9 :
{
∑∑ 

ModelState
∏∏ 
.
∏∏ 
AddModelError
∏∏ (
(
∏∏( )
$str
∏∏) +
,
∏∏+ ,
error
∏∏- 2
.
∏∏2 3
Description
∏∏3 >
)
∏∏> ?
;
∏∏? @
}
ππ 
return
ªª 
View
ªª 
(
ªª 
userRoleViewModel
ªª )
)
ªª) *
;
ªª* +
}
ºº 	
public
øø 
IActionResult
øø 
FlowerManagement
øø -
(
øø- .
)
øø. /
{
¿¿ 	
var
¡¡ 
	dbFlowers
¡¡ 
=
¡¡ 
_flowerRepository
¡¡ -
.
¡¡- .
Flowers
¡¡. 5
;
¡¡5 6
List
√√ 
<
√√ 
FlowerViewModel
√√  
>
√√  !
flowers
√√" )
=
√√* +
new
√√, /
List
√√0 4
<
√√4 5
FlowerViewModel
√√5 D
>
√√D E
(
√√E F
)
√√F G
;
√√G H
foreach
≈≈ 
(
≈≈ 
var
≈≈ 
dbFlower
≈≈ !
in
≈≈" $
	dbFlowers
≈≈% .
)
≈≈. /
{
∆∆ 
flowers
«« 
.
«« 
Add
«« 
(
«« *
MapDbFlowerToFlowerViewModel
«« 8
(
««8 9
dbFlower
««9 A
)
««A B
)
««B C
;
««C D
}
»» 
return
   
View
   
(
   
flowers
   
)
    
;
    !
}
ÀÀ 	
public
ÕÕ 
IActionResult
ÕÕ 
	AddFlower
ÕÕ &
(
ÕÕ& '
)
ÕÕ' (
{
ŒŒ 	
ViewData
œœ 
[
œœ 
$str
œœ !
]
œœ! "
=
œœ# $!
_categoryRepository
œœ% 8
.
œœ8 9

Categories
œœ9 C
.
œœC D
ToList
œœD J
(
œœJ K
)
œœK L
;
œœL M
return
—— 
View
—— 
(
—— 
)
—— 
;
—— 
}
““ 	
[
‘‘ 	
HttpPost
‘‘	 
]
‘‘ 
public
’’ 
IActionResult
’’ 
	AddFlower
’’ &
(
’’& ' 
AddFlowerViewModel
’’' 9 
addFlowerViewModel
’’: L
)
’’L M
{
÷÷ 	
if
◊◊ 
(
◊◊ 
!
◊◊ 

ModelState
◊◊ 
.
◊◊ 
IsValid
◊◊ #
)
◊◊# $
return
ÿÿ 
View
ÿÿ 
(
ÿÿ  
addFlowerViewModel
ÿÿ .
)
ÿÿ. /
;
ÿÿ/ 0
var
⁄⁄ 
flower
⁄⁄ 
=
⁄⁄ 
new
⁄⁄ 
Flower
⁄⁄ #
(
⁄⁄# $
)
⁄⁄$ %
{
€€ 
Name
‹‹ 
=
‹‹  
addFlowerViewModel
‹‹ )
.
‹‹) *
Name
‹‹* .
,
‹‹. /
ShortDescription
››  
=
››! " 
addFlowerViewModel
››# 5
.
››5 6
ShortDescription
››6 F
,
››F G
LongDescription
ﬁﬁ 
=
ﬁﬁ  ! 
addFlowerViewModel
ﬁﬁ" 4
.
ﬁﬁ4 5
LongDescription
ﬁﬁ5 D
,
ﬁﬁD E
Price
ﬂﬂ 
=
ﬂﬂ  
addFlowerViewModel
ﬂﬂ *
.
ﬂﬂ* +
Price
ﬂﬂ+ 0
,
ﬂﬂ0 1
ImageUrl
‡‡ 
=
‡‡  
addFlowerViewModel
‡‡ -
.
‡‡- .
ImageUrl
‡‡. 6
,
‡‡6 7
ImageThumbnailUrl
·· !
=
··" # 
addFlowerViewModel
··$ 6
.
··6 7
ImageThumbnailUrl
··7 H
,
··H I"
IsFlowerPresentation
‚‚ $
=
‚‚% & 
addFlowerViewModel
‚‚' 9
.
‚‚9 :"
IsFlowerPresentation
‚‚: N
,
‚‚N O
InStock
„„ 
=
„„  
addFlowerViewModel
„„ ,
.
„„, -
InStock
„„- 4
,
„„4 5

CategoryId
‰‰ 
=
‰‰  
addFlowerViewModel
‰‰ /
.
‰‰/ 0

CategoryId
‰‰0 :
,
‰‰: ;
}
ÊÊ 
;
ÊÊ 
_flowerRepository
ËË 
.
ËË 
	AddFlower
ËË '
(
ËË' (
flower
ËË( .
)
ËË. /
;
ËË/ 0
return
ÍÍ 
RedirectToAction
ÍÍ #
(
ÍÍ# $
$str
ÍÍ$ 6
,
ÍÍ6 7
_flowerRepository
ÍÍ8 I
.
ÍÍI J
Flowers
ÍÍJ Q
)
ÍÍQ R
;
ÍÍR S
}
ÎÎ 	
[
ÌÌ 	
HttpPost
ÌÌ	 
]
ÌÌ 
public
ÓÓ 
IActionResult
ÓÓ 
DeleteFlower
ÓÓ )
(
ÓÓ) *
int
ÓÓ* -
id
ÓÓ. 0
)
ÓÓ0 1
{
ÔÔ 	
Flower
 
flower
 
=
 
_flowerRepository
 -
.
- .
GetFlowerById
. ;
(
; <
id
< >
)
> ?
;
? @
if
ÒÒ 
(
ÒÒ 
flower
ÒÒ 
!=
ÒÒ 
null
ÒÒ 
)
ÒÒ 
{
ÚÚ 
_flowerRepository
ÛÛ !
.
ÛÛ! "
DeleteFlower
ÛÛ" .
(
ÛÛ. /
flower
ÛÛ/ 5
)
ÛÛ5 6
;
ÛÛ6 7
return
ıı 
View
ıı 
(
ıı 
$str
ıı .
,
ıı. /
_flowerRepository
ıı0 A
.
ııA B 
FlowersAsViewModel
ııB T
)
ııT U
;
ııU V
}
ˆˆ 
else
˜˜ 
{
¯¯ 

ModelState
˘˘ 
.
˘˘ 
AddModelError
˘˘ (
(
˘˘( )
$str
˘˘) +
,
˘˘+ ,
$str
˘˘- J
)
˘˘J K
;
˘˘K L
}
˙˙ 
return
¸¸ 
View
¸¸ 
(
¸¸ 
$str
¸¸ *
,
¸¸* +
_flowerRepository
¸¸, =
.
¸¸= > 
FlowersAsViewModel
¸¸> P
)
¸¸P Q
;
¸¸Q R
}
˝˝ 	
public
ˇˇ 
IActionResult
ˇˇ 

EditFlower
ˇˇ '
(
ˇˇ' (
int
ˇˇ( +
id
ˇˇ, .
)
ˇˇ. /
{
ÄÄ 	
ViewData
ÅÅ 
[
ÅÅ 
$str
ÅÅ !
]
ÅÅ! "
=
ÅÅ# $!
_categoryRepository
ÅÅ% 8
.
ÅÅ8 9

Categories
ÅÅ9 C
.
ÅÅC D
ToList
ÅÅD J
(
ÅÅJ K
)
ÅÅK L
;
ÅÅL M
var
ÉÉ 
flower
ÉÉ 
=
ÉÉ 
_flowerRepository
ÉÉ *
.
ÉÉ* +
GetFlowerById
ÉÉ+ 8
(
ÉÉ8 9
id
ÉÉ9 ;
)
ÉÉ; <
;
ÉÉ< =
if
ÖÖ 
(
ÖÖ 
flower
ÖÖ 
==
ÖÖ 
null
ÖÖ 
)
ÖÖ 
return
ÜÜ 
View
ÜÜ 
(
ÜÜ 
$str
ÜÜ .
,
ÜÜ. /
_flowerRepository
ÜÜ0 A
.
ÜÜA B 
FlowersAsViewModel
ÜÜB T
)
ÜÜT U
;
ÜÜU V
var
àà !
editFlowerViewModel
àà #
=
àà$ %
new
àà& )!
EditFlowerViewModel
àà* =
{
ââ 
Name
ää 
=
ää 
flower
ää 
.
ää 
Name
ää "
,
ää" #
ShortDescription
ãã  
=
ãã! "
flower
ãã# )
.
ãã) *
ShortDescription
ãã* :
,
ãã: ;
LongDescription
åå 
=
åå  !
flower
åå" (
.
åå( )
LongDescription
åå) 8
,
åå8 9
Price
çç 
=
çç 
flower
çç 
.
çç 
Price
çç $
,
çç$ %
ImageUrl
éé 
=
éé 
flower
éé !
.
éé! "
ImageUrl
éé" *
,
éé* +
ImageThumbnailUrl
èè !
=
èè" #
flower
èè$ *
.
èè* +
ImageThumbnailUrl
èè+ <
,
èè< ="
IsFlowerPresentation
êê $
=
êê% &
flower
êê' -
.
êê- ."
IsFlowerPresentation
êê. B
,
êêB C
InStock
ëë 
=
ëë 
flower
ëë  
.
ëë  !
InStock
ëë! (
,
ëë( )

CategoryId
íí 
=
íí 
flower
íí #
.
íí# $

CategoryId
íí$ .
}
ìì 
;
ìì 
return
ïï 
View
ïï 
(
ïï !
editFlowerViewModel
ïï +
)
ïï+ ,
;
ïï, -
}
ññ 	
[
òò 	
HttpPost
òò	 
]
òò 
public
ôô 
IActionResult
ôô 

EditFlower
ôô '
(
ôô' (!
EditFlowerViewModel
ôô( ;!
editFlowerViewModel
ôô< O
)
ôôO P
{
öö 	
ViewData
õõ 
[
õõ 
$str
õõ !
]
õõ! "
=
õõ# $!
_categoryRepository
õõ% 8
.
õõ8 9

Categories
õõ9 C
.
õõC D
ToList
õõD J
(
õõJ K
)
õõK L
;
õõL M
var
ùù 
flower
ùù 
=
ùù 
_flowerRepository
ùù *
.
ùù* +
GetFlowerById
ùù+ 8
(
ùù8 9!
editFlowerViewModel
ùù9 L
.
ùùL M
Id
ùùM O
)
ùùO P
;
ùùP Q
if
üü 
(
üü 
flower
üü 
!=
üü 
null
üü 
)
üü 
{
†† 
flower
°° 
.
°° 
Name
°° 
=
°° !
editFlowerViewModel
°° 1
.
°°1 2
Name
°°2 6
;
°°6 7
flower
¢¢ 
.
¢¢ 
ShortDescription
¢¢ '
=
¢¢( )!
editFlowerViewModel
¢¢* =
.
¢¢= >
ShortDescription
¢¢> N
;
¢¢N O
flower
££ 
.
££ 
LongDescription
££ &
=
££' (!
editFlowerViewModel
££) <
.
££< =
LongDescription
££= L
;
££L M
flower
§§ 
.
§§ 
Price
§§ 
=
§§ !
editFlowerViewModel
§§ 2
.
§§2 3
Price
§§3 8
;
§§8 9
flower
•• 
.
•• 
ImageUrl
•• 
=
••  !!
editFlowerViewModel
••" 5
.
••5 6
ImageUrl
••6 >
;
••> ?
flower
¶¶ 
.
¶¶ 
ImageThumbnailUrl
¶¶ (
=
¶¶) *!
editFlowerViewModel
¶¶+ >
.
¶¶> ?
ImageThumbnailUrl
¶¶? P
;
¶¶P Q
flower
ßß 
.
ßß "
IsFlowerPresentation
ßß +
=
ßß, -!
editFlowerViewModel
ßß. A
.
ßßA B"
IsFlowerPresentation
ßßB V
;
ßßV W
flower
®® 
.
®® 
InStock
®® 
=
®®  !
editFlowerViewModel
®®! 4
.
®®4 5
InStock
®®5 <
;
®®< =
flower
©© 
.
©© 

CategoryId
©© !
=
©©" #!
editFlowerViewModel
©©$ 7
.
©©7 8

CategoryId
©©8 B
;
©©B C
_flowerRepository
´´ !
.
´´! "
UpdateFlower
´´" .
(
´´. /
flower
´´/ 5
)
´´5 6
;
´´6 7
return
≠≠ 
RedirectToAction
≠≠ '
(
≠≠' (
$str
≠≠( :
,
≠≠: ;
_flowerRepository
≠≠< M
.
≠≠M N 
FlowersAsViewModel
≠≠N `
)
≠≠` a
;
≠≠a b
}
ÆÆ 
return
∞∞ 
RedirectToAction
∞∞ #
(
∞∞# $
$str
∞∞$ 6
,
∞∞6 7
_flowerRepository
∞∞8 I
.
∞∞I J 
FlowersAsViewModel
∞∞J \
)
∞∞\ ]
;
∞∞] ^
}
±± 	
private
≥≥ 
FlowerViewModel
≥≥ *
MapDbFlowerToFlowerViewModel
≥≥  <
(
≥≥< =
Flower
≥≥= C
dbFlower
≥≥D L
)
≥≥L M
{
¥¥ 	
return
µµ 
new
µµ 
FlowerViewModel
µµ &
(
µµ& '
)
µµ' (
{
∂∂ 
FlowerId
∑∑ 
=
∑∑ 
dbFlower
∑∑ #
.
∑∑# $
FlowerId
∑∑$ ,
,
∑∑, -
Name
∏∏ 
=
∏∏ 
dbFlower
∏∏ 
.
∏∏  
Name
∏∏  $
,
∏∏$ %
Price
ππ 
=
ππ 
dbFlower
ππ  
.
ππ  !
Price
ππ! &
,
ππ& '
ShortDescription
∫∫  
=
∫∫! "
dbFlower
∫∫# +
.
∫∫+ ,
ShortDescription
∫∫, <
,
∫∫< =
ImageThumbnailUrl
ªª !
=
ªª" #
dbFlower
ªª$ ,
.
ªª, -
ImageThumbnailUrl
ªª- >
}
ºº 
;
ºº 
}
ΩΩ 	
}
ææ 
}øø ü
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ContactController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
ContactController "
:# $

Controller% /
{ 
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" $
,$ %
Location& .
=/ 0!
ResponseCacheLocation1 F
.F G
ClientG M
)M N
]N O
public

 
IActionResult

 
Index

 "
(

" #
)

# $
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ù
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FavoriteFlowerController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class $
FavoriteFlowerController )
:* +

Controller, 6
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public $
FavoriteFlowerController '
(' (
IFlowerRepository( 9
flowerRepository: J
,J K
ShoppingCartL X
shoppingCartY e
)e f
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
} 
} ˙ç
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
public 

class 
FlowerController !
:" #

Controller$ .
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
FlowerController 
(  
IFlowerRepository  1
flowerRepository2 B
,B C
ICategoryRepositoryD W
categoryRepositoryX j
)j k
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public 

ViewResult 
List 
( 
string %
category& .
,. /
decimal0 7
lowPrice8 @
=A B
$numC D
,D E
decimalF M
	highPriceN W
=X Y
$numZ [
,[ \
string] c
sortingd k
=l m
$strn p
,p q
FlowerStockr }
availability	~ ä
=
ã å
$num
ç é
)
é è
{ 	
IEnumerable 
< 
Flower 
> 
flowers  '
;' (
string 
currentCategory "
=# $
string% +
.+ ,
Empty, 1
;1 2
if 
( 
string 
. 
IsNullOrEmpty $
($ %
category% -
)- .
). /
{ 
flowers 
= 
_flowerRepository +
.+ ,
Flowers, 3
.3 4
OrderBy4 ;
(; <
p< =
=>> @
pA B
.B C
FlowerIdC K
)K L
;L M
flowers 
= 
PriceFilter %
(% &
lowPrice& .
,. /
	highPrice0 9
,9 :
flowers; B
)B C
;C D
currentCategory!! 
=!!  !
$str!!" /
;!!/ 0
}"" 
else## 
{$$ 
flowers%% 
=%% 
_flowerRepository%% +
.%%+ ,
Flowers%%, 3
.%%3 4
Where%%4 9
(%%9 :
p%%: ;
=>%%< >
p%%? @
.%%@ A
Category%%A I
.%%I J
CategoryName%%J V
==%%W Y
category%%Z b
)%%b c
.&& 
OrderBy&& 
(&& 
p&& 
=>&&  
p&&! "
.&&" #
FlowerId&&# +
)&&+ ,
;&&, -
flowers(( 
=(( 
PriceFilter(( %
(((% &
lowPrice((& .
,((. /
	highPrice((0 9
,((9 :
flowers((; B
)((B C
;((C D
currentCategory** 
=**  !
_categoryRepository**" 5
.**5 6

Categories**6 @
.**@ A
FirstOrDefault**A O
(**O P
c**P Q
=>**R T
c**U V
.**V W
CategoryName**W c
==**d f
category**g o
)**o p
.**p q
CategoryName**q }
;**} ~
}++ 
if-- 
(-- 
!-- 
string-- 
.-- 
IsNullOrEmpty-- %
(--% &
sorting--& -
)--- .
)--. /
{.. 
if// 
(// 
sorting// 
.// 
Equals// "
(//" #
$str//# .
,//. /
StringComparison//0 @
.//@ A
OrdinalIgnoreCase//A R
)//R S
)//S T
flowers00 
=00 
flowers00 %
.00% &
OrderBy00& -
(00- .
p00. /
=>000 2
p003 4
.004 5
Price005 :
)00: ;
;00; <
else11 
if11 
(11 
sorting11  
.11  !
Equals11! '
(11' (
$str11( 4
,114 5
StringComparison116 F
.11F G
OrdinalIgnoreCase11G X
)11X Y
)11Y Z
flowers22 
=22 
flowers22 %
.22% &
OrderByDescending22& 7
(227 8
p228 9
=>22: <
p22= >
.22> ?
Price22? D
)22D E
;22E F
}33 
switch55 
(55 
availability55  
)55  !
{66 
case77 
FlowerStock77  
.77  !
InStock77! (
:77( )
flowers88 
=88 
flowers88 %
.88% &
Where88& +
(88+ ,
x88, -
=>88. 0
x881 2
.882 3
InStock883 :
==88; =
true88> B
)88B C
;88C D
break99 
;99 
case;; 
FlowerStock;;  
.;;  !

NotInStock;;! +
:;;+ ,
flowers<< 
=<< 
flowers<< %
.<<% &
Where<<& +
(<<+ ,
x<<, -
=><<. 0
x<<1 2
.<<2 3
InStock<<3 :
==<<; =
false<<> C
)<<C D
;<<D E
break== 
;== 
case?? 
FlowerStock??  
.??  !
All??! $
:??$ %
break@@ 
;@@ 
}AA 
returnCC 
ViewCC 
(CC 
newCC 
FlowerListViewModelCC /
{DD 
FlowersEE 
=EE 
flowersEE !
,EE! "
CurrentCategoryFF 
=FF  !
currentCategoryFF" 1
}GG 
)GG 
;GG 
}HH 	
publicJJ 

ViewResultJJ 
FavoriteJJ "
(JJ" #
)JJ# $
{KK 	
IEnumerableLL 
<LL 
FlowerLL 
>LL 
flowersLL  '
=LL( )
_flowerRepositoryLL* ;
.LL; <
FlowersLL< C
.MM 
WhereMM 
(MM 
xMM 
=>MM 
xMM 
.MM 

IsFavoriteMM (
)MM( )
.NN 
OrderByNN 
(NN 
pNN 
=>NN 
pNN 
.NN  
FlowerIdNN  (
)NN( )
.OO 
ToListOO 
(OO 
)OO 
;OO 
returnQQ 
ViewQQ 
(QQ 
newQQ 
FlowerListViewModelQQ /
{RR 
FlowersSS 
=SS 
flowersSS !
,SS! "
CurrentCategoryTT 
=TT  !
nullTT" &
}UU 
)UU 
;UU 
}VV 	
publicXX 
ActionResultXX 
AddToFavoriteXX )
(XX) *
intXX* -
flowerIdXX. 6
)XX6 7
{YY 	
varZZ 
flowerZZ 
=ZZ 
_flowerRepositoryZZ *
.ZZ* +
FlowersZZ+ 2
.ZZ2 3
WhereZZ3 8
(ZZ8 9
xZZ9 :
=>ZZ; =
xZZ> ?
.ZZ? @
FlowerIdZZ@ H
==ZZI K
flowerIdZZL T
)ZZT U
.ZZU V
FirstOrDefaultZZV d
(ZZd e
)ZZe f
;ZZf g
if\\ 
(\\ 
flower\\ 
!=\\ 
null\\ 
)\\ 
{]] 
flower^^ 
.^^ 

IsFavorite^^ !
=^^" #
true^^$ (
;^^( )
_flowerRepository__ !
.__! "
UpdateFlower__" .
(__. /
flower__/ 5
)__5 6
;__6 7
}`` 
returnbb 
RedirectToActionbb #
(bb# $
$strbb$ .
,bb. /
$strbb0 8
)bb8 9
;bb9 :
}cc 	
publicee 
ActionResultee 
RemoveFromFavoriteee .
(ee. /
intee/ 2
flowerIdee3 ;
)ee; <
{ff 	
vargg 
flowergg 
=gg 
_flowerRepositorygg *
.gg* +
Flowersgg+ 2
.gg2 3
Wheregg3 8
(gg8 9
xgg9 :
=>gg; =
xgg> ?
.gg? @
FlowerIdgg@ H
==ggI K
flowerIdggL T
)ggT U
.ggU V
FirstOrDefaultggV d
(ggd e
)gge f
;ggf g
ifii 
(ii 
flowerii 
!=ii 
nullii 
)ii 
{jj 
flowerkk 
.kk 

IsFavoritekk !
=kk" #
falsekk$ )
;kk) *
_flowerRepositoryll !
.ll! "
UpdateFlowerll" .
(ll. /
flowerll/ 5
)ll5 6
;ll6 7
}mm 
returnoo 
RedirectToActionoo #
(oo# $
$stroo$ *
,oo* +
$stroo, 4
)oo4 5
;oo5 6
}pp 	
privaterr 
staticrr 
IEnumerablerr "
<rr" #
Flowerrr# )
>rr) *
PriceFilterrr+ 6
(rr6 7
decimalrr7 >
lowPricerr? G
,rrG H
decimalrrI P
	highPricerrQ Z
,rrZ [
IEnumerablerr\ g
<rrg h
Flowerrrh n
>rrn o
flowersrrp w
)rrw x
{ss 	
iftt 
(tt 
lowPricett 
!=tt 
$numtt 
)tt 
{uu 
ifvv 
(vv 
	highPricevv 
!=vv  
$numvv! "
)vv" #
returnww 
flowersww "
.ww" #
Whereww# (
(ww( )
xww) *
=>ww+ -
xww. /
.ww/ 0
Priceww0 5
>=ww6 8
lowPriceww9 A
&&wwB D
xwwE F
.wwF G
PricewwG L
<=wwM O
	highPricewwP Y
)wwY Z
.wwZ [
OrderByww[ b
(wwb c
pwwc d
=>wwe g
pwwh i
.wwi j
FlowerIdwwj r
)wwr s
;wws t
elsexx 
returnyy 
flowersyy "
.yy" #
Whereyy# (
(yy( )
xyy) *
=>yy+ -
xyy. /
.yy/ 0
Priceyy0 5
>=yy6 8
lowPriceyy9 A
)yyA B
.yyB C
OrderByyyC J
(yyJ K
pyyK L
=>yyM O
pyyP Q
.yyQ R
FlowerIdyyR Z
)yyZ [
;yy[ \
}zz 
else{{ 
if{{ 
({{ 
	highPrice{{ 
!={{ !
$num{{" #
){{# $
return|| 
flowers|| 
.|| 
Where|| $
(||$ %
x||% &
=>||' )
x||* +
.||+ ,
Price||, 1
<=||2 4
	highPrice||5 >
)||> ?
.||? @
OrderBy||@ G
(||G H
p||H I
=>||J L
p||M N
.||N O
FlowerId||O W
)||W X
;||X Y
else}} 
return~~ 
flowers~~ 
;~~ 
} 	
public
ÅÅ 
enum
ÅÅ 
FlowerStock
ÅÅ 
{
ÇÇ 	
All
ÉÉ 
=
ÉÉ 
$num
ÉÉ 
,
ÉÉ 
InStock
ÑÑ 
=
ÑÑ 
$num
ÑÑ 
,
ÑÑ 

NotInStock
ÖÖ 
=
ÖÖ 
$num
ÖÖ 
}
ÜÜ 	
[
àà 	
HttpGet
àà	 
]
àà 
public
ââ 

ViewResult
ââ 
Search
ââ  
(
ââ  !
string
ââ! '

flowerName
ââ( 2
,
ââ2 3
decimal
ââ4 ;
lowPrice
ââ< D
=
ââE F
$num
ââG H
,
ââH I
decimal
ââJ Q
	highPrice
ââR [
=
ââ\ ]
$num
ââ^ _
,
ââ_ `
string
ââa g
sorting
ââh o
=
ââp q
$str
ââr t
)
âât u
{
ää 	
IEnumerable
ãã 
<
ãã 
Flower
ãã 
>
ãã 
flowers
ãã  '
;
ãã' (
string
åå 
currentCategory
åå "
=
åå# $
string
åå% +
.
åå+ ,
Empty
åå, 1
;
åå1 2
ViewBag
çç 
.
çç 

FlowerName
çç 
=
çç  

flowerName
çç! +
;
çç+ ,
flowers
êê 
=
êê 
_flowerRepository
êê '
.
êê' (
Flowers
êê( /
.
êê/ 0
Where
êê0 5
(
êê5 6
p
êê6 7
=>
êê8 :
p
êê; <
.
êê< =
Name
êê= A
.
êêA B
Contains
êêB J
(
êêJ K

flowerName
êêK U
)
êêU V
||
êêW Y
p
ëë 
.
ëë 
LongDescription
ëë !
.
ëë! "
Contains
ëë" *
(
ëë* +

flowerName
ëë+ 5
)
ëë5 6
||
ëë7 9
p
íí 
.
íí 
ShortDescription
íí "
.
íí" #
Contains
íí# +
(
íí+ ,

flowerName
íí, 6
)
íí6 7
)
íí7 8
.
íí8 9
OrderBy
íí9 @
(
íí@ A
p
ííA B
=>
ííC E
p
ííF G
.
ííG H
FlowerId
ííH P
)
ííP Q
;
ííQ R
flowers
îî 
=
îî 
PriceFilter
îî !
(
îî! "
lowPrice
îî" *
,
îî* +
	highPrice
îî, 5
,
îî5 6
flowers
îî7 >
)
îî> ?
;
îî? @
if
ññ 
(
ññ 
!
ññ 
string
ññ 
.
ññ 
IsNullOrEmpty
ññ %
(
ññ% &
sorting
ññ& -
)
ññ- .
)
ññ. /
{
óó 
if
òò 
(
òò 
sorting
òò 
.
òò 
Equals
òò "
(
òò" #
$str
òò# .
,
òò. /
StringComparison
òò0 @
.
òò@ A
OrdinalIgnoreCase
òòA R
)
òòR S
)
òòS T
flowers
ôô 
=
ôô 
flowers
ôô %
.
ôô% &
OrderBy
ôô& -
(
ôô- .
p
ôô. /
=>
ôô0 2
p
ôô3 4
.
ôô4 5
Price
ôô5 :
)
ôô: ;
;
ôô; <
else
öö 
if
öö 
(
öö 
sorting
öö  
.
öö  !
Equals
öö! '
(
öö' (
$str
öö( 4
,
öö4 5
StringComparison
öö6 F
.
ööF G
OrdinalIgnoreCase
ööG X
)
ööX Y
)
ööY Z
flowers
õõ 
=
õõ 
flowers
õõ %
.
õõ% &
OrderByDescending
õõ& 7
(
õõ7 8
p
õõ8 9
=>
õõ: <
p
õõ= >
.
õõ> ?
Price
õõ? D
)
õõD E
;
õõE F
}
úú 
return
üü 
View
üü 
(
üü 
new
üü !
FlowerListViewModel
üü /
{
†† 
Flowers
°° 
=
°° 
flowers
°° !
,
°°! "
CurrentCategory
¢¢ 
=
¢¢  !
currentCategory
¢¢" 1
}
££ 
)
££ 
;
££ 
}
§§ 	
[
¶¶ 	
HttpGet
¶¶	 
]
¶¶ 
public
ßß 
async
ßß 
Task
ßß 
<
ßß 
ActionResult
ßß &
>
ßß& ' 
AutocompleteSearch
ßß( :
(
ßß: ;
)
ßß; <
{
®® 	
try
©© 
{
™™ 
string
´´ 
term
´´ 
=
´´ 
HttpContext
´´ )
.
´´) *
Request
´´* 1
.
´´1 2
Query
´´2 7
[
´´7 8
$str
´´8 >
]
´´> ?
.
´´? @
ToString
´´@ H
(
´´H I
)
´´I J
;
´´J K
var
¨¨ 
names
¨¨ 
=
¨¨ 
_flowerRepository
¨¨ -
.
¨¨- .
Flowers
¨¨. 5
.
¨¨5 6
Where
¨¨6 ;
(
¨¨; <
p
¨¨< =
=>
¨¨> @
p
¨¨A B
.
¨¨B C
Name
¨¨C G
.
¨¨G H
Contains
¨¨H P
(
¨¨P Q
term
¨¨Q U
)
¨¨U V
)
¨¨V W
.
¨¨W X
Select
¨¨X ^
(
¨¨^ _
p
¨¨_ `
=>
¨¨a c
p
¨¨d e
.
¨¨e f
Name
¨¨f j
)
¨¨j k
.
¨¨k l
ToList
¨¨l r
(
¨¨r s
)
¨¨s t
;
¨¨t u
return
ÆÆ 
Ok
ÆÆ 
(
ÆÆ 
names
ÆÆ 
)
ÆÆ  
;
ÆÆ  !
}
ØØ 
catch
∞∞ 
{
±± 
return
≤≤ 

BadRequest
≤≤ !
(
≤≤! "
)
≤≤" #
;
≤≤# $
}
≥≥ 
}
¥¥ 	
[
∂∂ 	
HttpGet
∂∂	 
]
∂∂ 
public
∑∑ 
IEnumerable
∑∑ 
<
∑∑ 
string
∑∑ !
>
∑∑! "
FlowersNames
∑∑# /
(
∑∑/ 0
)
∑∑0 1
{
∏∏ 	
return
ππ 
_flowerRepository
ππ $
.
ππ$ %
FlowersNames
ππ% 1
;
ππ1 2
}
∫∫ 	
public
ºº 
IActionResult
ºº 
Details
ºº $
(
ºº$ %
int
ºº% (
id
ºº) +
)
ºº+ ,
{
ΩΩ 	
var
ææ 
flower
ææ 
=
ææ 
_flowerRepository
ææ *
.
ææ* +
GetFlowerById
ææ+ 8
(
ææ8 9
id
ææ9 ;
)
ææ; <
;
ææ< =
if
¿¿ 
(
¿¿ 
flower
¿¿ 
==
¿¿ 
null
¿¿ 
)
¿¿ 
return
¡¡ 
NotFound
¡¡ 
(
¡¡  
)
¡¡  !
;
¡¡! "
return
√√ 
View
√√ 
(
√√ 
new
√√ #
FlowerDetailViewModel
√√ 1
{
ƒƒ 
Flower
≈≈ 
=
≈≈ 
flower
≈≈ 
}
∆∆ 
)
∆∆ 
;
∆∆ 
}
«« 	
}
»» 
}…… •
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerDataController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class  
FlowerDataController %
:& '

Controller( 2
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public  
FlowerDataController #
(# $
IFlowerRepository$ 5
flowerRepository6 F
)F G
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
FlowerViewModel *
>* +
LoadMoreFlowers, ;
(; <
)< =
{ 	
IEnumerable 
< 
Flower 
> 
	dbFlowers  )
=* +
null, 0
;0 1
	dbFlowers 
= 
_flowerRepository )
.) *
Flowers* 1
.1 2
OrderBy2 9
(9 :
p: ;
=>< >
p? @
.@ A
FlowerIdA I
)I J
.J K
TakeK O
(O P
$numP R
)R S
;S T
List 
< 
FlowerViewModel  
>  !
flowers" )
=* +
new, /
List0 4
<4 5
FlowerViewModel5 D
>D E
(E F
)F G
;G H
foreach   
(   
var   
dbFlower   !
in  " $
	dbFlowers  % .
)  . /
{!! 
flowers"" 
."" 
Add"" 
("" (
MapDbFlowerToFlowerViewModel"" 8
(""8 9
dbFlower""9 A
)""A B
)""B C
;""C D
}## 
return$$ 
flowers$$ 
;$$ 
}%% 	
private'' 
FlowerViewModel'' (
MapDbFlowerToFlowerViewModel''  <
(''< =
Flower''= C
dbFlower''D L
)''L M
{(( 	
return)) 
new)) 
FlowerViewModel)) &
())& '
)))' (
{** 
FlowerId++ 
=++ 
dbFlower++ #
.++# $
FlowerId++$ ,
,++, -
Name,, 
=,, 
dbFlower,, 
.,,  
Name,,  $
,,,$ %
Price-- 
=-- 
dbFlower--  
.--  !
Price--! &
,--& '
ShortDescription..  
=..! "
dbFlower..# +
...+ ,
ShortDescription.., <
,..< =
ImageThumbnailUrl// !
=//" #
dbFlower//$ ,
.//, -
ImageThumbnailUrl//- >
}00 
;00 
}11 	
}22 
}33 µ

HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\HomeController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public 
HomeController 
( 
IFlowerRepository /
flowerRepository0 @
)@ A
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
homeViewModel 
= 
new  #
HomeViewModel$ 1
{ 
FlowerPresentation "
=# $
_flowerRepository% 6
.6 7
FlowerPresentation7 I
,I J
FlowersName 
= 
_flowerRepository /
./ 0
FlowersNames0 <
} 
; 
return 
View 
( 
homeViewModel %
)% &
;& '
} 	
} 
} À
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
OrderController  
:! "

Controller# -
{		 
private

 
readonly

 
IOrderRepository

 )
_orderRepository

* :
;

: ;
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderController 
( 
IOrderRepository /
orderRepository0 ?
,? @
ShoppingCartA M
shoppingCartN Z
)Z [
{ 	
_orderRepository 
= 
orderRepository .
;. /
_shoppingCart 
= 
shoppingCart (
;( )
} 	
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
)& '
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
Order& +
order, 1
)1 2
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
if   
(   
_shoppingCart   
.   
ShoppingCartItems   /
.  / 0
Count  0 5
==  6 8
$num  9 :
)  : ;
{!! 

ModelState"" 
."" 
AddModelError"" (
(""( )
$str"") +
,""+ ,
$str""- Y
)""Y Z
;""Z [
}## 
if%% 
(%% 

ModelState%% 
.%% 
IsValid%% "
)%%" #
{&& 
order'' 
.'' 
Email'' 
='' 
User'' "
.''" #
Identity''# +
.''+ ,
Name'', 0
;''0 1
_orderRepository((  
.((  !
CreateOrder((! ,
(((, -
order((- 2
)((2 3
;((3 4
_shoppingCart)) 
.)) 
	ClearCart)) '
())' (
)))( )
;))) *
return** 
RedirectToAction** '
(**' (
$str**( :
)**: ;
;**; <
}++ 
return,, 
View,, 
(,, 
order,, 
),, 
;,, 
}-- 	
public// 
IActionResult// 
CheckoutComplete// -
(//- .
)//. /
{00 	
ViewBag11 
.11 #
CheckoutCompleteMessage11 +
=11, -
$str11. n
;11n o
return33 
View33 
(33 
)33 
;33 
}44 	
}55 
}66 «
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderHistoryController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
public

 

class

 "
OrderHistoryController

 '
:

( )

Controller

* 4
{ 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public "
OrderHistoryController %
(% &
IOrderRepository& 6
orderRepository7 F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
)t u
{ 	
_orderRepository 
= 
orderRepository .
;. /
_signInManager 
= 
signInManager *
;* +
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
IEnumerable 
< (
OrderHistoryDetailsViewModel 4
>4 5
orders6 <
== >
null? C
;C D
if 
( 
_signInManager 
. 

IsSignedIn )
() *
User* .
). /
&&0 2
User3 7
.7 8
IsInRole8 @
(@ A
$strA Q
)Q R
)R S
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
)? @
;@ A
} 
else 
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
User? C
.C D
IdentityD L
.L M
NameM Q
)Q R
;R S
} 
return!! 
View!! 
(!! 
new!! !
OrderHistoryViewModel!! 1
{"" 
Orders## 
=## 
orders## 
}$$ 
)$$ 
;$$ 
}%% 	
}&& 
}(( ¸'
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ShoppingCartController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public		 

class		 "
ShoppingCartController		 '
:		( )

Controller		* 4
{

 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public "
ShoppingCartController %
(% &
IFlowerRepository& 7
flowerRepository8 H
,H I
ShoppingCartJ V
shoppingCartW c
)c d
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var !
shoppingCartViewModel %
=& '
new( +!
ShoppingCartViewModel, A
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return 
View 
( !
shoppingCartViewModel -
)- .
;. /
}   	
public"" "
RedirectToActionResult"" %
AddToShoppingCart""& 7
(""7 8
int""8 ;
flowerId""< D
)""D E
{## 	
var$$ 
selectedFlower$$ 
=$$  
_flowerRepository$$! 2
.$$2 3
Flowers$$3 :
.$$: ;
FirstOrDefault$$; I
($$I J
p$$J K
=>$$L N
p$$O P
.$$P Q
FlowerId$$Q Y
==$$Z \
flowerId$$] e
)$$e f
;$$f g
if&& 
(&& 
selectedFlower&& 
!=&& !
null&&" &
)&&& '
{'' 
_shoppingCart(( 
.(( 
	AddToCart(( '
(((' (
selectedFlower((( 6
,((6 7
$num((8 9
)((9 :
;((: ;
})) 
return** 
RedirectToAction** #
(**# $
$str**$ +
)**+ ,
;**, -
}++ 	
public-- "
RedirectToActionResult-- %
UpdateShoppingCart--& 8
(--8 9
int--9 <
flowerId--= E
,--E F
bool--G K
isAdding--L T
)--T U
{.. 	
var// 
selectedFlower// 
=//  
_flowerRepository//! 2
.//2 3
Flowers//3 :
.//: ;
FirstOrDefault//; I
(//I J
p//J K
=>//L N
p//O P
.//P Q
FlowerId//Q Y
==//Z \
flowerId//] e
)//e f
;//f g
if11 
(11 
selectedFlower11 
!=11 !
null11" &
)11& '
{22 
if33 
(33 
isAdding33 
)33 
{44 
_shoppingCart55 !
.55! "
	AddToCart55" +
(55+ ,
selectedFlower55, :
,55: ;
$num55< =
)55= >
;55> ?
}66 
else77 
{88 
_shoppingCart99 !
.99! "
	AddToCart99" +
(99+ ,
selectedFlower99, :
,99: ;
-99< =
$num99= >
)99> ?
;99? @
}:: 
};; 
return<< 
RedirectToAction<< #
(<<# $
$str<<$ +
)<<+ ,
;<<, -
}== 	
public?? "
RedirectToActionResult?? %"
RemoveFromShoppingCart??& <
(??< =
int??= @
flowerId??A I
)??I J
{@@ 	
varAA 
selectedFlowerAA 
=AA  
_flowerRepositoryAA! 2
.AA2 3
FlowersAA3 :
.AA: ;
FirstOrDefaultAA; I
(AAI J
pAAJ K
=>AAL N
pAAO P
.AAP Q
FlowerIdAAQ Y
==AAZ \
flowerIdAA] e
)AAe f
;AAf g
ifCC 
(CC 
selectedFlowerCC 
!=CC !
nullCC" &
)CC& '
{DD 
_shoppingCartEE 
.EE 
RemoveFromCartEE ,
(EE, -
selectedFlowerEE- ;
)EE; <
;EE< =
}FF 
returnGG 
RedirectToActionGG #
(GG# $
$strGG$ +
)GG+ ,
;GG, -
}HH 	
}II 
}JJ Äœ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191208173628_Init.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Init 
: 
	Migration  )
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
	maxLength: C
:C D
$numE H
,H I
nullableJ R
:R S
trueT X
)X Y
,Y Z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
nullable< D
:D E
trueF J
)J K
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
UserName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
	maxLength4 =
:= >
$num? B
,B C
nullableD L
:L M
trueN R
)R S
,S T
NormalizedUserName &
=' (
table) .
.. /
Column/ 5
<5 6
string6 <
>< =
(= >
	maxLength> G
:G H
$numI L
,L M
nullableN V
:V W
trueX \
)\ ]
,] ^
Email   
=   
table   !
.  ! "
Column  " (
<  ( )
string  ) /
>  / 0
(  0 1
	maxLength  1 :
:  : ;
$num  < ?
,  ? @
nullable  A I
:  I J
true  K O
)  O P
,  P Q
NormalizedEmail!! #
=!!$ %
table!!& +
.!!+ ,
Column!!, 2
<!!2 3
string!!3 9
>!!9 :
(!!: ;
	maxLength!!; D
:!!D E
$num!!F I
,!!I J
nullable!!K S
:!!S T
true!!U Y
)!!Y Z
,!!Z [
EmailConfirmed"" "
=""# $
table""% *
.""* +
Column""+ 1
<""1 2
bool""2 6
>""6 7
(""7 8
nullable""8 @
:""@ A
false""B G
)""G H
,""H I
PasswordHash##  
=##! "
table### (
.##( )
Column##) /
<##/ 0
string##0 6
>##6 7
(##7 8
nullable##8 @
:##@ A
true##B F
)##F G
,##G H
SecurityStamp$$ !
=$$" #
table$$$ )
.$$) *
Column$$* 0
<$$0 1
string$$1 7
>$$7 8
($$8 9
nullable$$9 A
:$$A B
true$$C G
)$$G H
,$$H I
ConcurrencyStamp%% $
=%%% &
table%%' ,
.%%, -
Column%%- 3
<%%3 4
string%%4 :
>%%: ;
(%%; <
nullable%%< D
:%%D E
true%%F J
)%%J K
,%%K L
PhoneNumber&& 
=&&  !
table&&" '
.&&' (
Column&&( .
<&&. /
string&&/ 5
>&&5 6
(&&6 7
nullable&&7 ?
:&&? @
true&&A E
)&&E F
,&&F G 
PhoneNumberConfirmed'' (
='') *
table''+ 0
.''0 1
Column''1 7
<''7 8
bool''8 <
>''< =
(''= >
nullable''> F
:''F G
false''H M
)''M N
,''N O
TwoFactorEnabled(( $
=((% &
table((' ,
.((, -
Column((- 3
<((3 4
bool((4 8
>((8 9
(((9 :
nullable((: B
:((B C
false((D I
)((I J
,((J K

LockoutEnd)) 
=))  
table))! &
.))& '
Column))' -
<))- .
DateTimeOffset)). <
>))< =
())= >
nullable))> F
:))F G
true))H L
)))L M
,))M N
LockoutEnabled** "
=**# $
table**% *
.*** +
Column**+ 1
<**1 2
bool**2 6
>**6 7
(**7 8
nullable**8 @
:**@ A
false**B G
)**G H
,**H I
AccessFailedCount++ %
=++& '
table++( -
.++- .
Column++. 4
<++4 5
int++5 8
>++8 9
(++9 :
nullable++: B
:++B C
false++D I
)++I J
,++J K
	Birthdate,, 
=,, 
table,,  %
.,,% &
Column,,& ,
<,,, -
DateTime,,- 5
>,,5 6
(,,6 7
nullable,,7 ?
:,,? @
false,,A F
),,F G
,,,G H
City-- 
=-- 
table--  
.--  !
Column--! '
<--' (
string--( .
>--. /
(--/ 0
nullable--0 8
:--8 9
true--: >
)--> ?
,--? @
Country.. 
=.. 
table.. #
...# $
Column..$ *
<..* +
string..+ 1
>..1 2
(..2 3
nullable..3 ;
:..; <
true..= A
)..A B
}// 
,// 
constraints00 
:00 
table00 "
=>00# %
{11 
table22 
.22 

PrimaryKey22 $
(22$ %
$str22% 5
,225 6
x227 8
=>229 ;
x22< =
.22= >
Id22> @
)22@ A
;22A B
}33 
)33 
;33 
migrationBuilder55 
.55 
CreateTable55 (
(55( )
name66 
:66 
$str66 "
,66" #
columns77 
:77 
table77 
=>77 !
new77" %
{88 

CategoryId99 
=99  
table99! &
.99& '
Column99' -
<99- .
int99. 1
>991 2
(992 3
nullable993 ;
:99; <
false99= B
)99B C
.:: 

Annotation:: #
(::# $
$str::$ G
,::G H,
 SqlServerValueGenerationStrategy::I i
.::i j
IdentityColumn::j x
)::x y
,::y z
CategoryName;;  
=;;! "
table;;# (
.;;( )
Column;;) /
<;;/ 0
string;;0 6
>;;6 7
(;;7 8
nullable;;8 @
:;;@ A
true;;B F
);;F G
,;;G H
Description<< 
=<<  !
table<<" '
.<<' (
Column<<( .
<<<. /
string<</ 5
><<5 6
(<<6 7
nullable<<7 ?
:<<? @
true<<A E
)<<E F
}== 
,== 
constraints>> 
:>> 
table>> "
=>>># %
{?? 
table@@ 
.@@ 

PrimaryKey@@ $
(@@$ %
$str@@% 4
,@@4 5
x@@6 7
=>@@8 :
x@@; <
.@@< =

CategoryId@@= G
)@@G H
;@@H I
}AA 
)AA 
;AA 
migrationBuilderCC 
.CC 
CreateTableCC (
(CC( )
nameDD 
:DD 
$strDD 
,DD 
columnsEE 
:EE 
tableEE 
=>EE !
newEE" %
{FF 
OrderIdGG 
=GG 
tableGG #
.GG# $
ColumnGG$ *
<GG* +
intGG+ .
>GG. /
(GG/ 0
nullableGG0 8
:GG8 9
falseGG: ?
)GG? @
.HH 

AnnotationHH #
(HH# $
$strHH$ G
,HHG H,
 SqlServerValueGenerationStrategyHHI i
.HHi j
IdentityColumnHHj x
)HHx y
,HHy z
	FirstNameII 
=II 
tableII  %
.II% &
ColumnII& ,
<II, -
stringII- 3
>II3 4
(II4 5
	maxLengthII5 >
:II> ?
$numII@ B
,IIB C
nullableIID L
:IIL M
falseIIN S
)IIS T
,IIT U
LastNameJJ 
=JJ 
tableJJ $
.JJ$ %
ColumnJJ% +
<JJ+ ,
stringJJ, 2
>JJ2 3
(JJ3 4
	maxLengthJJ4 =
:JJ= >
$numJJ? A
,JJA B
nullableJJC K
:JJK L
falseJJM R
)JJR S
,JJS T
AddressLine1KK  
=KK! "
tableKK# (
.KK( )
ColumnKK) /
<KK/ 0
stringKK0 6
>KK6 7
(KK7 8
	maxLengthKK8 A
:KKA B
$numKKC F
,KKF G
nullableKKH P
:KKP Q
falseKKR W
)KKW X
,KKX Y
AddressLine2LL  
=LL! "
tableLL# (
.LL( )
ColumnLL) /
<LL/ 0
stringLL0 6
>LL6 7
(LL7 8
nullableLL8 @
:LL@ A
trueLLB F
)LLF G
,LLG H
ZipCodeMM 
=MM 
tableMM #
.MM# $
ColumnMM$ *
<MM* +
stringMM+ 1
>MM1 2
(MM2 3
	maxLengthMM3 <
:MM< =
$numMM> @
,MM@ A
nullableMMB J
:MMJ K
falseMML Q
)MMQ R
,MMR S
CityNN 
=NN 
tableNN  
.NN  !
ColumnNN! '
<NN' (
stringNN( .
>NN. /
(NN/ 0
	maxLengthNN0 9
:NN9 :
$numNN; =
,NN= >
nullableNN? G
:NNG H
falseNNI N
)NNN O
,NNO P
StateOO 
=OO 
tableOO !
.OO! "
ColumnOO" (
<OO( )
stringOO) /
>OO/ 0
(OO0 1
	maxLengthOO1 :
:OO: ;
$numOO< >
,OO> ?
nullableOO@ H
:OOH I
trueOOJ N
)OON O
,OOO P
CountryPP 
=PP 
tablePP #
.PP# $
ColumnPP$ *
<PP* +
stringPP+ 1
>PP1 2
(PP2 3
	maxLengthPP3 <
:PP< =
$numPP> @
,PP@ A
nullablePPB J
:PPJ K
falsePPL Q
)PPQ R
,PPR S
PhoneNumberQQ 
=QQ  !
tableQQ" '
.QQ' (
ColumnQQ( .
<QQ. /
stringQQ/ 5
>QQ5 6
(QQ6 7
	maxLengthQQ7 @
:QQ@ A
$numQQB D
,QQD E
nullableQQF N
:QQN O
falseQQP U
)QQU V
,QQV W
EmailRR 
=RR 
tableRR !
.RR! "
ColumnRR" (
<RR( )
stringRR) /
>RR/ 0
(RR0 1
	maxLengthRR1 :
:RR: ;
$numRR< >
,RR> ?
nullableRR@ H
:RRH I
falseRRJ O
)RRO P
,RRP Q

OrderTotalSS 
=SS  
tableSS! &
.SS& '
ColumnSS' -
<SS- .
decimalSS. 5
>SS5 6
(SS6 7
nullableSS7 ?
:SS? @
falseSSA F
)SSF G
,SSG H
OrderPlacedTT 
=TT  !
tableTT" '
.TT' (
ColumnTT( .
<TT. /
DateTimeTT/ 7
>TT7 8
(TT8 9
nullableTT9 A
:TTA B
falseTTC H
)TTH I
}UU 
,UU 
constraintsVV 
:VV 
tableVV "
=>VV# %
{WW 
tableXX 
.XX 

PrimaryKeyXX $
(XX$ %
$strXX% 0
,XX0 1
xXX2 3
=>XX4 6
xXX7 8
.XX8 9
OrderIdXX9 @
)XX@ A
;XXA B
}YY 
)YY 
;YY 
migrationBuilder[[ 
.[[ 
CreateTable[[ (
([[( )
name\\ 
:\\ 
$str\\ (
,\\( )
columns]] 
:]] 
table]] 
=>]] !
new]]" %
{^^ 
Id__ 
=__ 
table__ 
.__ 
Column__ %
<__% &
int__& )
>__) *
(__* +
nullable__+ 3
:__3 4
false__5 :
)__: ;
.`` 

Annotation`` #
(``# $
$str``$ G
,``G H,
 SqlServerValueGenerationStrategy``I i
.``i j
IdentityColumn``j x
)``x y
,``y z
RoleIdaa 
=aa 
tableaa "
.aa" #
Columnaa# )
<aa) *
stringaa* 0
>aa0 1
(aa1 2
nullableaa2 :
:aa: ;
falseaa< A
)aaA B
,aaB C
	ClaimTypebb 
=bb 
tablebb  %
.bb% &
Columnbb& ,
<bb, -
stringbb- 3
>bb3 4
(bb4 5
nullablebb5 =
:bb= >
truebb? C
)bbC D
,bbD E

ClaimValuecc 
=cc  
tablecc! &
.cc& '
Columncc' -
<cc- .
stringcc. 4
>cc4 5
(cc5 6
nullablecc6 >
:cc> ?
truecc@ D
)ccD E
}dd 
,dd 
constraintsee 
:ee 
tableee "
=>ee# %
{ff 
tablegg 
.gg 

PrimaryKeygg $
(gg$ %
$strgg% :
,gg: ;
xgg< =
=>gg> @
xggA B
.ggB C
IdggC E
)ggE F
;ggF G
tablehh 
.hh 

ForeignKeyhh $
(hh$ %
nameii 
:ii 
$strii F
,iiF G
columnjj 
:jj 
xjj  !
=>jj" $
xjj% &
.jj& '
RoleIdjj' -
,jj- .
principalTablekk &
:kk& '
$strkk( 5
,kk5 6
principalColumnll '
:ll' (
$strll) -
,ll- .
onDeletemm  
:mm  !
ReferentialActionmm" 3
.mm3 4
Cascademm4 ;
)mm; <
;mm< =
}nn 
)nn 
;nn 
migrationBuilderpp 
.pp 
CreateTablepp (
(pp( )
nameqq 
:qq 
$strqq (
,qq( )
columnsrr 
:rr 
tablerr 
=>rr !
newrr" %
{ss 
Idtt 
=tt 
tablett 
.tt 
Columntt %
<tt% &
inttt& )
>tt) *
(tt* +
nullablett+ 3
:tt3 4
falsett5 :
)tt: ;
.uu 

Annotationuu #
(uu# $
$struu$ G
,uuG H,
 SqlServerValueGenerationStrategyuuI i
.uui j
IdentityColumnuuj x
)uux y
,uuy z
UserIdvv 
=vv 
tablevv "
.vv" #
Columnvv# )
<vv) *
stringvv* 0
>vv0 1
(vv1 2
nullablevv2 :
:vv: ;
falsevv< A
)vvA B
,vvB C
	ClaimTypeww 
=ww 
tableww  %
.ww% &
Columnww& ,
<ww, -
stringww- 3
>ww3 4
(ww4 5
nullableww5 =
:ww= >
trueww? C
)wwC D
,wwD E

ClaimValuexx 
=xx  
tablexx! &
.xx& '
Columnxx' -
<xx- .
stringxx. 4
>xx4 5
(xx5 6
nullablexx6 >
:xx> ?
truexx@ D
)xxD E
}yy 
,yy 
constraintszz 
:zz 
tablezz "
=>zz# %
{{{ 
table|| 
.|| 

PrimaryKey|| $
(||$ %
$str||% :
,||: ;
x||< =
=>||> @
x||A B
.||B C
Id||C E
)||E F
;||F G
table}} 
.}} 

ForeignKey}} $
(}}$ %
name~~ 
:~~ 
$str~~ F
,~~F G
column 
: 
x  !
=>" $
x% &
.& '
UserId' -
,- .
principalTable
ÄÄ &
:
ÄÄ& '
$str
ÄÄ( 5
,
ÄÄ5 6
principalColumn
ÅÅ '
:
ÅÅ' (
$str
ÅÅ) -
,
ÅÅ- .
onDelete
ÇÇ  
:
ÇÇ  !
ReferentialAction
ÇÇ" 3
.
ÇÇ3 4
Cascade
ÇÇ4 ;
)
ÇÇ; <
;
ÇÇ< =
}
ÉÉ 
)
ÉÉ 
;
ÉÉ 
migrationBuilder
ÖÖ 
.
ÖÖ 
CreateTable
ÖÖ (
(
ÖÖ( )
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ (
,
ÜÜ( )
columns
áá 
:
áá 
table
áá 
=>
áá !
new
áá" %
{
àà 
LoginProvider
ââ !
=
ââ" #
table
ââ$ )
.
ââ) *
Column
ââ* 0
<
ââ0 1
string
ââ1 7
>
ââ7 8
(
ââ8 9
nullable
ââ9 A
:
ââA B
false
ââC H
)
ââH I
,
ââI J
ProviderKey
ää 
=
ää  !
table
ää" '
.
ää' (
Column
ää( .
<
ää. /
string
ää/ 5
>
ää5 6
(
ää6 7
nullable
ää7 ?
:
ää? @
false
ääA F
)
ääF G
,
ääG H!
ProviderDisplayName
ãã '
=
ãã( )
table
ãã* /
.
ãã/ 0
Column
ãã0 6
<
ãã6 7
string
ãã7 =
>
ãã= >
(
ãã> ?
nullable
ãã? G
:
ããG H
true
ããI M
)
ããM N
,
ããN O
UserId
åå 
=
åå 
table
åå "
.
åå" #
Column
åå# )
<
åå) *
string
åå* 0
>
åå0 1
(
åå1 2
nullable
åå2 :
:
åå: ;
false
åå< A
)
ååA B
}
çç 
,
çç 
constraints
éé 
:
éé 
table
éé "
=>
éé# %
{
èè 
table
êê 
.
êê 

PrimaryKey
êê $
(
êê$ %
$str
êê% :
,
êê: ;
x
êê< =
=>
êê> @
new
êêA D
{
êêE F
x
êêG H
.
êêH I
LoginProvider
êêI V
,
êêV W
x
êêX Y
.
êêY Z
ProviderKey
êêZ e
}
êêf g
)
êêg h
;
êêh i
table
ëë 
.
ëë 

ForeignKey
ëë $
(
ëë$ %
name
íí 
:
íí 
$str
íí F
,
ííF G
column
ìì 
:
ìì 
x
ìì  !
=>
ìì" $
x
ìì% &
.
ìì& '
UserId
ìì' -
,
ìì- .
principalTable
îî &
:
îî& '
$str
îî( 5
,
îî5 6
principalColumn
ïï '
:
ïï' (
$str
ïï) -
,
ïï- .
onDelete
ññ  
:
ññ  !
ReferentialAction
ññ" 3
.
ññ3 4
Cascade
ññ4 ;
)
ññ; <
;
ññ< =
}
óó 
)
óó 
;
óó 
migrationBuilder
ôô 
.
ôô 
CreateTable
ôô (
(
ôô( )
name
öö 
:
öö 
$str
öö '
,
öö' (
columns
õõ 
:
õõ 
table
õõ 
=>
õõ !
new
õõ" %
{
úú 
UserId
ùù 
=
ùù 
table
ùù "
.
ùù" #
Column
ùù# )
<
ùù) *
string
ùù* 0
>
ùù0 1
(
ùù1 2
nullable
ùù2 :
:
ùù: ;
false
ùù< A
)
ùùA B
,
ùùB C
RoleId
ûû 
=
ûû 
table
ûû "
.
ûû" #
Column
ûû# )
<
ûû) *
string
ûû* 0
>
ûû0 1
(
ûû1 2
nullable
ûû2 :
:
ûû: ;
false
ûû< A
)
ûûA B
}
üü 
,
üü 
constraints
†† 
:
†† 
table
†† "
=>
††# %
{
°° 
table
¢¢ 
.
¢¢ 

PrimaryKey
¢¢ $
(
¢¢$ %
$str
¢¢% 9
,
¢¢9 :
x
¢¢; <
=>
¢¢= ?
new
¢¢@ C
{
¢¢D E
x
¢¢F G
.
¢¢G H
UserId
¢¢H N
,
¢¢N O
x
¢¢P Q
.
¢¢Q R
RoleId
¢¢R X
}
¢¢Y Z
)
¢¢Z [
;
¢¢[ \
table
££ 
.
££ 

ForeignKey
££ $
(
££$ %
name
§§ 
:
§§ 
$str
§§ E
,
§§E F
column
•• 
:
•• 
x
••  !
=>
••" $
x
••% &
.
••& '
RoleId
••' -
,
••- .
principalTable
¶¶ &
:
¶¶& '
$str
¶¶( 5
,
¶¶5 6
principalColumn
ßß '
:
ßß' (
$str
ßß) -
,
ßß- .
onDelete
®®  
:
®®  !
ReferentialAction
®®" 3
.
®®3 4
Cascade
®®4 ;
)
®®; <
;
®®< =
table
©© 
.
©© 

ForeignKey
©© $
(
©©$ %
name
™™ 
:
™™ 
$str
™™ E
,
™™E F
column
´´ 
:
´´ 
x
´´  !
=>
´´" $
x
´´% &
.
´´& '
UserId
´´' -
,
´´- .
principalTable
¨¨ &
:
¨¨& '
$str
¨¨( 5
,
¨¨5 6
principalColumn
≠≠ '
:
≠≠' (
$str
≠≠) -
,
≠≠- .
onDelete
ÆÆ  
:
ÆÆ  !
ReferentialAction
ÆÆ" 3
.
ÆÆ3 4
Cascade
ÆÆ4 ;
)
ÆÆ; <
;
ÆÆ< =
}
ØØ 
)
ØØ 
;
ØØ 
migrationBuilder
±± 
.
±± 
CreateTable
±± (
(
±±( )
name
≤≤ 
:
≤≤ 
$str
≤≤ (
,
≤≤( )
columns
≥≥ 
:
≥≥ 
table
≥≥ 
=>
≥≥ !
new
≥≥" %
{
¥¥ 
UserId
µµ 
=
µµ 
table
µµ "
.
µµ" #
Column
µµ# )
<
µµ) *
string
µµ* 0
>
µµ0 1
(
µµ1 2
nullable
µµ2 :
:
µµ: ;
false
µµ< A
)
µµA B
,
µµB C
LoginProvider
∂∂ !
=
∂∂" #
table
∂∂$ )
.
∂∂) *
Column
∂∂* 0
<
∂∂0 1
string
∂∂1 7
>
∂∂7 8
(
∂∂8 9
nullable
∂∂9 A
:
∂∂A B
false
∂∂C H
)
∂∂H I
,
∂∂I J
Name
∑∑ 
=
∑∑ 
table
∑∑  
.
∑∑  !
Column
∑∑! '
<
∑∑' (
string
∑∑( .
>
∑∑. /
(
∑∑/ 0
nullable
∑∑0 8
:
∑∑8 9
false
∑∑: ?
)
∑∑? @
,
∑∑@ A
Value
∏∏ 
=
∏∏ 
table
∏∏ !
.
∏∏! "
Column
∏∏" (
<
∏∏( )
string
∏∏) /
>
∏∏/ 0
(
∏∏0 1
nullable
∏∏1 9
:
∏∏9 :
true
∏∏; ?
)
∏∏? @
}
ππ 
,
ππ 
constraints
∫∫ 
:
∫∫ 
table
∫∫ "
=>
∫∫# %
{
ªª 
table
ºº 
.
ºº 

PrimaryKey
ºº $
(
ºº$ %
$str
ºº% :
,
ºº: ;
x
ºº< =
=>
ºº> @
new
ººA D
{
ººE F
x
ººG H
.
ººH I
UserId
ººI O
,
ººO P
x
ººQ R
.
ººR S
LoginProvider
ººS `
,
ºº` a
x
ººb c
.
ººc d
Name
ººd h
}
ººi j
)
ººj k
;
ººk l
table
ΩΩ 
.
ΩΩ 

ForeignKey
ΩΩ $
(
ΩΩ$ %
name
ææ 
:
ææ 
$str
ææ F
,
ææF G
column
øø 
:
øø 
x
øø  !
=>
øø" $
x
øø% &
.
øø& '
UserId
øø' -
,
øø- .
principalTable
¿¿ &
:
¿¿& '
$str
¿¿( 5
,
¿¿5 6
principalColumn
¡¡ '
:
¡¡' (
$str
¡¡) -
,
¡¡- .
onDelete
¬¬  
:
¬¬  !
ReferentialAction
¬¬" 3
.
¬¬3 4
Cascade
¬¬4 ;
)
¬¬; <
;
¬¬< =
}
√√ 
)
√√ 
;
√√ 
migrationBuilder
≈≈ 
.
≈≈ 
CreateTable
≈≈ (
(
≈≈( )
name
∆∆ 
:
∆∆ 
$str
∆∆ 
,
∆∆  
columns
«« 
:
«« 
table
«« 
=>
«« !
new
««" %
{
»» 
FlowerId
…… 
=
…… 
table
…… $
.
……$ %
Column
……% +
<
……+ ,
int
……, /
>
……/ 0
(
……0 1
nullable
……1 9
:
……9 :
false
……; @
)
……@ A
.
   

Annotation
   #
(
  # $
$str
  $ G
,
  G H.
 SqlServerValueGenerationStrategy
  I i
.
  i j
IdentityColumn
  j x
)
  x y
,
  y z
Name
ÀÀ 
=
ÀÀ 
table
ÀÀ  
.
ÀÀ  !
Column
ÀÀ! '
<
ÀÀ' (
string
ÀÀ( .
>
ÀÀ. /
(
ÀÀ/ 0
nullable
ÀÀ0 8
:
ÀÀ8 9
true
ÀÀ: >
)
ÀÀ> ?
,
ÀÀ? @
ShortDescription
ÃÃ $
=
ÃÃ% &
table
ÃÃ' ,
.
ÃÃ, -
Column
ÃÃ- 3
<
ÃÃ3 4
string
ÃÃ4 :
>
ÃÃ: ;
(
ÃÃ; <
nullable
ÃÃ< D
:
ÃÃD E
true
ÃÃF J
)
ÃÃJ K
,
ÃÃK L
LongDescription
ÕÕ #
=
ÕÕ$ %
table
ÕÕ& +
.
ÕÕ+ ,
Column
ÕÕ, 2
<
ÕÕ2 3
string
ÕÕ3 9
>
ÕÕ9 :
(
ÕÕ: ;
nullable
ÕÕ; C
:
ÕÕC D
true
ÕÕE I
)
ÕÕI J
,
ÕÕJ K
Price
ŒŒ 
=
ŒŒ 
table
ŒŒ !
.
ŒŒ! "
Column
ŒŒ" (
<
ŒŒ( )
decimal
ŒŒ) 0
>
ŒŒ0 1
(
ŒŒ1 2
nullable
ŒŒ2 :
:
ŒŒ: ;
false
ŒŒ< A
)
ŒŒA B
,
ŒŒB C
ImageUrl
œœ 
=
œœ 
table
œœ $
.
œœ$ %
Column
œœ% +
<
œœ+ ,
string
œœ, 2
>
œœ2 3
(
œœ3 4
nullable
œœ4 <
:
œœ< =
true
œœ> B
)
œœB C
,
œœC D
ImageThumbnailUrl
–– %
=
––& '
table
––( -
.
––- .
Column
––. 4
<
––4 5
string
––5 ;
>
––; <
(
––< =
nullable
––= E
:
––E F
true
––G K
)
––K L
,
––L M
InStock
—— 
=
—— 
table
—— #
.
——# $
Column
——$ *
<
——* +
bool
——+ /
>
——/ 0
(
——0 1
nullable
——1 9
:
——9 :
false
——; @
)
——@ A
,
——A B

CategoryId
““ 
=
““  
table
““! &
.
““& '
Column
““' -
<
““- .
int
““. 1
>
““1 2
(
““2 3
nullable
““3 ;
:
““; <
false
““= B
)
““B C
,
““C D"
IsFlowerPresentation
”” (
=
””) *
table
””+ 0
.
””0 1
Column
””1 7
<
””7 8
bool
””8 <
>
””< =
(
””= >
nullable
””> F
:
””F G
false
””H M
)
””M N
}
‘‘ 
,
‘‘ 
constraints
’’ 
:
’’ 
table
’’ "
=>
’’# %
{
÷÷ 
table
◊◊ 
.
◊◊ 

PrimaryKey
◊◊ $
(
◊◊$ %
$str
◊◊% 1
,
◊◊1 2
x
◊◊3 4
=>
◊◊5 7
x
◊◊8 9
.
◊◊9 :
FlowerId
◊◊: B
)
◊◊B C
;
◊◊C D
table
ÿÿ 
.
ÿÿ 

ForeignKey
ÿÿ $
(
ÿÿ$ %
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ @
,
ŸŸ@ A
column
⁄⁄ 
:
⁄⁄ 
x
⁄⁄  !
=>
⁄⁄" $
x
⁄⁄% &
.
⁄⁄& '

CategoryId
⁄⁄' 1
,
⁄⁄1 2
principalTable
€€ &
:
€€& '
$str
€€( 4
,
€€4 5
principalColumn
‹‹ '
:
‹‹' (
$str
‹‹) 5
,
‹‹5 6
onDelete
››  
:
››  !
ReferentialAction
››" 3
.
››3 4
Cascade
››4 ;
)
››; <
;
››< =
}
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
migrationBuilder
‡‡ 
.
‡‡ 
CreateTable
‡‡ (
(
‡‡( )
name
·· 
:
·· 
$str
·· $
,
··$ %
columns
‚‚ 
:
‚‚ 
table
‚‚ 
=>
‚‚ !
new
‚‚" %
{
„„ 
OrderDetailId
‰‰ !
=
‰‰" #
table
‰‰$ )
.
‰‰) *
Column
‰‰* 0
<
‰‰0 1
int
‰‰1 4
>
‰‰4 5
(
‰‰5 6
nullable
‰‰6 >
:
‰‰> ?
false
‰‰@ E
)
‰‰E F
.
ÂÂ 

Annotation
ÂÂ #
(
ÂÂ# $
$str
ÂÂ$ G
,
ÂÂG H.
 SqlServerValueGenerationStrategy
ÂÂI i
.
ÂÂi j
IdentityColumn
ÂÂj x
)
ÂÂx y
,
ÂÂy z
OrderId
ÊÊ 
=
ÊÊ 
table
ÊÊ #
.
ÊÊ# $
Column
ÊÊ$ *
<
ÊÊ* +
int
ÊÊ+ .
>
ÊÊ. /
(
ÊÊ/ 0
nullable
ÊÊ0 8
:
ÊÊ8 9
false
ÊÊ: ?
)
ÊÊ? @
,
ÊÊ@ A
FlowerId
ÁÁ 
=
ÁÁ 
table
ÁÁ $
.
ÁÁ$ %
Column
ÁÁ% +
<
ÁÁ+ ,
int
ÁÁ, /
>
ÁÁ/ 0
(
ÁÁ0 1
nullable
ÁÁ1 9
:
ÁÁ9 :
false
ÁÁ; @
)
ÁÁ@ A
,
ÁÁA B
Amount
ËË 
=
ËË 
table
ËË "
.
ËË" #
Column
ËË# )
<
ËË) *
int
ËË* -
>
ËË- .
(
ËË. /
nullable
ËË/ 7
:
ËË7 8
false
ËË9 >
)
ËË> ?
,
ËË? @
Price
ÈÈ 
=
ÈÈ 
table
ÈÈ !
.
ÈÈ! "
Column
ÈÈ" (
<
ÈÈ( )
decimal
ÈÈ) 0
>
ÈÈ0 1
(
ÈÈ1 2
nullable
ÈÈ2 :
:
ÈÈ: ;
false
ÈÈ< A
)
ÈÈA B
}
ÍÍ 
,
ÍÍ 
constraints
ÎÎ 
:
ÎÎ 
table
ÎÎ "
=>
ÎÎ# %
{
ÏÏ 
table
ÌÌ 
.
ÌÌ 

PrimaryKey
ÌÌ $
(
ÌÌ$ %
$str
ÌÌ% 6
,
ÌÌ6 7
x
ÌÌ8 9
=>
ÌÌ: <
x
ÌÌ= >
.
ÌÌ> ?
OrderDetailId
ÌÌ? L
)
ÌÌL M
;
ÌÌM N
table
ÓÓ 
.
ÓÓ 

ForeignKey
ÓÓ $
(
ÓÓ$ %
name
ÔÔ 
:
ÔÔ 
$str
ÔÔ @
,
ÔÔ@ A
column
 
:
 
x
  !
=>
" $
x
% &
.
& '
FlowerId
' /
,
/ 0
principalTable
ÒÒ &
:
ÒÒ& '
$str
ÒÒ( 1
,
ÒÒ1 2
principalColumn
ÚÚ '
:
ÚÚ' (
$str
ÚÚ) 3
,
ÚÚ3 4
onDelete
ÛÛ  
:
ÛÛ  !
ReferentialAction
ÛÛ" 3
.
ÛÛ3 4
Cascade
ÛÛ4 ;
)
ÛÛ; <
;
ÛÛ< =
table
ÙÙ 
.
ÙÙ 

ForeignKey
ÙÙ $
(
ÙÙ$ %
name
ıı 
:
ıı 
$str
ıı >
,
ıı> ?
column
ˆˆ 
:
ˆˆ 
x
ˆˆ  !
=>
ˆˆ" $
x
ˆˆ% &
.
ˆˆ& '
OrderId
ˆˆ' .
,
ˆˆ. /
principalTable
˜˜ &
:
˜˜& '
$str
˜˜( 0
,
˜˜0 1
principalColumn
¯¯ '
:
¯¯' (
$str
¯¯) 2
,
¯¯2 3
onDelete
˘˘  
:
˘˘  !
ReferentialAction
˘˘" 3
.
˘˘3 4
Cascade
˘˘4 ;
)
˘˘; <
;
˘˘< =
}
˙˙ 
)
˙˙ 
;
˙˙ 
migrationBuilder
¸¸ 
.
¸¸ 
CreateTable
¸¸ (
(
¸¸( )
name
˝˝ 
:
˝˝ 
$str
˝˝ )
,
˝˝) *
columns
˛˛ 
:
˛˛ 
table
˛˛ 
=>
˛˛ !
new
˛˛" %
{
ˇˇ  
ShoppingCartItemId
ÄÄ &
=
ÄÄ' (
table
ÄÄ) .
.
ÄÄ. /
Column
ÄÄ/ 5
<
ÄÄ5 6
int
ÄÄ6 9
>
ÄÄ9 :
(
ÄÄ: ;
nullable
ÄÄ; C
:
ÄÄC D
false
ÄÄE J
)
ÄÄJ K
.
ÅÅ 

Annotation
ÅÅ #
(
ÅÅ# $
$str
ÅÅ$ G
,
ÅÅG H.
 SqlServerValueGenerationStrategy
ÅÅI i
.
ÅÅi j
IdentityColumn
ÅÅj x
)
ÅÅx y
,
ÅÅy z
FlowerId
ÇÇ 
=
ÇÇ 
table
ÇÇ $
.
ÇÇ$ %
Column
ÇÇ% +
<
ÇÇ+ ,
int
ÇÇ, /
>
ÇÇ/ 0
(
ÇÇ0 1
nullable
ÇÇ1 9
:
ÇÇ9 :
true
ÇÇ; ?
)
ÇÇ? @
,
ÇÇ@ A
Amount
ÉÉ 
=
ÉÉ 
table
ÉÉ "
.
ÉÉ" #
Column
ÉÉ# )
<
ÉÉ) *
int
ÉÉ* -
>
ÉÉ- .
(
ÉÉ. /
nullable
ÉÉ/ 7
:
ÉÉ7 8
false
ÉÉ9 >
)
ÉÉ> ?
,
ÉÉ? @
ShoppingCartId
ÑÑ "
=
ÑÑ# $
table
ÑÑ% *
.
ÑÑ* +
Column
ÑÑ+ 1
<
ÑÑ1 2
string
ÑÑ2 8
>
ÑÑ8 9
(
ÑÑ9 :
nullable
ÑÑ: B
:
ÑÑB C
true
ÑÑD H
)
ÑÑH I
}
ÖÖ 
,
ÖÖ 
constraints
ÜÜ 
:
ÜÜ 
table
ÜÜ "
=>
ÜÜ# %
{
áá 
table
àà 
.
àà 

PrimaryKey
àà $
(
àà$ %
$str
àà% ;
,
àà; <
x
àà= >
=>
àà? A
x
ààB C
.
ààC D 
ShoppingCartItemId
ààD V
)
ààV W
;
ààW X
table
ââ 
.
ââ 

ForeignKey
ââ $
(
ââ$ %
name
ää 
:
ää 
$str
ää E
,
ääE F
column
ãã 
:
ãã 
x
ãã  !
=>
ãã" $
x
ãã% &
.
ãã& '
FlowerId
ãã' /
,
ãã/ 0
principalTable
åå &
:
åå& '
$str
åå( 1
,
åå1 2
principalColumn
çç '
:
çç' (
$str
çç) 3
,
çç3 4
onDelete
éé  
:
éé  !
ReferentialAction
éé" 3
.
éé3 4
Restrict
éé4 <
)
éé< =
;
éé= >
}
èè 
)
èè 
;
èè 
migrationBuilder
ëë 
.
ëë 
CreateIndex
ëë (
(
ëë( )
name
íí 
:
íí 
$str
íí 2
,
íí2 3
table
ìì 
:
ìì 
$str
ìì )
,
ìì) *
column
îî 
:
îî 
$str
îî  
)
îî  !
;
îî! "
migrationBuilder
ññ 
.
ññ 
CreateIndex
ññ (
(
ññ( )
name
óó 
:
óó 
$str
óó %
,
óó% &
table
òò 
:
òò 
$str
òò $
,
òò$ %
column
ôô 
:
ôô 
$str
ôô (
,
ôô( )
unique
öö 
:
öö 
true
öö 
,
öö 
filter
õõ 
:
õõ 
$str
õõ 6
)
õõ6 7
;
õõ7 8
migrationBuilder
ùù 
.
ùù 
CreateIndex
ùù (
(
ùù( )
name
ûû 
:
ûû 
$str
ûû 2
,
ûû2 3
table
üü 
:
üü 
$str
üü )
,
üü) *
column
†† 
:
†† 
$str
††  
)
††  !
;
††! "
migrationBuilder
¢¢ 
.
¢¢ 
CreateIndex
¢¢ (
(
¢¢( )
name
££ 
:
££ 
$str
££ 2
,
££2 3
table
§§ 
:
§§ 
$str
§§ )
,
§§) *
column
•• 
:
•• 
$str
••  
)
••  !
;
••! "
migrationBuilder
ßß 
.
ßß 
CreateIndex
ßß (
(
ßß( )
name
®® 
:
®® 
$str
®® 1
,
®®1 2
table
©© 
:
©© 
$str
©© (
,
©©( )
column
™™ 
:
™™ 
$str
™™  
)
™™  !
;
™™! "
migrationBuilder
¨¨ 
.
¨¨ 
CreateIndex
¨¨ (
(
¨¨( )
name
≠≠ 
:
≠≠ 
$str
≠≠ "
,
≠≠" #
table
ÆÆ 
:
ÆÆ 
$str
ÆÆ $
,
ÆÆ$ %
column
ØØ 
:
ØØ 
$str
ØØ )
)
ØØ) *
;
ØØ* +
migrationBuilder
±± 
.
±± 
CreateIndex
±± (
(
±±( )
name
≤≤ 
:
≤≤ 
$str
≤≤ %
,
≤≤% &
table
≥≥ 
:
≥≥ 
$str
≥≥ $
,
≥≥$ %
column
¥¥ 
:
¥¥ 
$str
¥¥ ,
,
¥¥, -
unique
µµ 
:
µµ 
true
µµ 
,
µµ 
filter
∂∂ 
:
∂∂ 
$str
∂∂ :
)
∂∂: ;
;
∂∂; <
migrationBuilder
∏∏ 
.
∏∏ 
CreateIndex
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ -
,
ππ- .
table
∫∫ 
:
∫∫ 
$str
∫∫  
,
∫∫  !
column
ªª 
:
ªª 
$str
ªª $
)
ªª$ %
;
ªª% &
migrationBuilder
ΩΩ 
.
ΩΩ 
CreateIndex
ΩΩ (
(
ΩΩ( )
name
ææ 
:
ææ 
$str
ææ 0
,
ææ0 1
table
øø 
:
øø 
$str
øø %
,
øø% &
column
¿¿ 
:
¿¿ 
$str
¿¿ "
)
¿¿" #
;
¿¿# $
migrationBuilder
¬¬ 
.
¬¬ 
CreateIndex
¬¬ (
(
¬¬( )
name
√√ 
:
√√ 
$str
√√ /
,
√√/ 0
table
ƒƒ 
:
ƒƒ 
$str
ƒƒ %
,
ƒƒ% &
column
≈≈ 
:
≈≈ 
$str
≈≈ !
)
≈≈! "
;
≈≈" #
migrationBuilder
«« 
.
«« 
CreateIndex
«« (
(
««( )
name
»» 
:
»» 
$str
»» 5
,
»»5 6
table
…… 
:
…… 
$str
…… *
,
……* +
column
   
:
   
$str
   "
)
  " #
;
  # $
}
ÀÀ 	
	protected
ÕÕ 
override
ÕÕ 
void
ÕÕ 
Down
ÕÕ  $
(
ÕÕ$ %
MigrationBuilder
ÕÕ% 5
migrationBuilder
ÕÕ6 F
)
ÕÕF G
{
ŒŒ 	
migrationBuilder
œœ 
.
œœ 
	DropTable
œœ &
(
œœ& '
name
–– 
:
–– 
$str
–– (
)
––( )
;
––) *
migrationBuilder
““ 
.
““ 
	DropTable
““ &
(
““& '
name
”” 
:
”” 
$str
”” (
)
””( )
;
””) *
migrationBuilder
’’ 
.
’’ 
	DropTable
’’ &
(
’’& '
name
÷÷ 
:
÷÷ 
$str
÷÷ (
)
÷÷( )
;
÷÷) *
migrationBuilder
ÿÿ 
.
ÿÿ 
	DropTable
ÿÿ &
(
ÿÿ& '
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ '
)
ŸŸ' (
;
ŸŸ( )
migrationBuilder
€€ 
.
€€ 
	DropTable
€€ &
(
€€& '
name
‹‹ 
:
‹‹ 
$str
‹‹ (
)
‹‹( )
;
‹‹) *
migrationBuilder
ﬁﬁ 
.
ﬁﬁ 
	DropTable
ﬁﬁ &
(
ﬁﬁ& '
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ $
)
ﬂﬂ$ %
;
ﬂﬂ% &
migrationBuilder
·· 
.
·· 
	DropTable
·· &
(
··& '
name
‚‚ 
:
‚‚ 
$str
‚‚ )
)
‚‚) *
;
‚‚* +
migrationBuilder
‰‰ 
.
‰‰ 
	DropTable
‰‰ &
(
‰‰& '
name
ÂÂ 
:
ÂÂ 
$str
ÂÂ #
)
ÂÂ# $
;
ÂÂ$ %
migrationBuilder
ÁÁ 
.
ÁÁ 
	DropTable
ÁÁ &
(
ÁÁ& '
name
ËË 
:
ËË 
$str
ËË #
)
ËË# $
;
ËË$ %
migrationBuilder
ÍÍ 
.
ÍÍ 
	DropTable
ÍÍ &
(
ÍÍ& '
name
ÎÎ 
:
ÎÎ 
$str
ÎÎ 
)
ÎÎ 
;
ÎÎ  
migrationBuilder
ÌÌ 
.
ÌÌ 
	DropTable
ÌÌ &
(
ÌÌ& '
name
ÓÓ 
:
ÓÓ 
$str
ÓÓ 
)
ÓÓ  
;
ÓÓ  !
migrationBuilder
 
.
 
	DropTable
 &
(
& '
name
ÒÒ 
:
ÒÒ 
$str
ÒÒ "
)
ÒÒ" #
;
ÒÒ# $
}
ÚÚ 	
}
ÛÛ 
}ÙÙ ¸

SE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191209173625_AddFavorite.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
AddFavorite $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
bool		' +
>		+ ,
(		, -
name

 
:

 
$str

 "
,

" #
table 
: 
$str  
,  !
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str  
)  !
;! "
} 	
} 
} «
aE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182401_ShippingAndPaymentMethods.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class %
ShippingAndPaymentMethods 2
:3 4
	Migration5 >
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 "
,

" #
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str !
,! "
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str &
,& '
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder   
.   

DropColumn   '
(  ' (
name!! 
:!! 
$str!! "
,!!" #
table"" 
:"" 
$str"" 
)""  
;""  !
migrationBuilder$$ 
.$$ 

DropColumn$$ '
($$' (
name%% 
:%% 
$str%% !
,%%! "
table&& 
:&& 
$str&& 
)&&  
;&&  !
migrationBuilder(( 
.(( 

DropColumn(( '
(((' (
name)) 
:)) 
$str)) &
,))& '
table** 
:** 
$str** 
)**  
;**  !
}++ 	
},, 
}-- ˚$
bE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182629_ShippingAndPaymentMethods1.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class &
ShippingAndPaymentMethods1 3
:4 5
	Migration6 ?
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
AlterColumn		 (
<		( )
string		) /
>		/ 0
(		0 1
name

 
:

 
$str

 
,

  
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
,  
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str $
,$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num !
)! "
;" #
}   	
	protected"" 
override"" 
void"" 
Down""  $
(""$ %
MigrationBuilder""% 5
migrationBuilder""6 F
)""F G
{## 	
migrationBuilder$$ 
.$$ 
AlterColumn$$ (
<$$( )
string$$) /
>$$/ 0
($$0 1
name%% 
:%% 
$str%% 
,%%  
table&& 
:&& 
$str&& 
,&&  
	maxLength'' 
:'' 
$num'' 
,'' 
nullable(( 
:(( 
false(( 
,((  

oldClrType)) 
:)) 
typeof)) "
())" #
string))# )
)))) *
,))* +
oldMaxLength** 
:** 
$num**  
,**  !
oldNullable++ 
:++ 
true++ !
)++! "
;++" #
migrationBuilder-- 
.-- 
AlterColumn-- (
<--( )
string--) /
>--/ 0
(--0 1
name.. 
:.. 
$str.. 
,..  
table// 
:// 
$str// 
,//  
	maxLength00 
:00 
$num00 
,00 
nullable11 
:11 
false11 
,11  

oldClrType22 
:22 
typeof22 "
(22" #
string22# )
)22) *
,22* +
oldMaxLength33 
:33 
$num33  
,33  !
oldNullable44 
:44 
true44 !
)44! "
;44" #
migrationBuilder66 
.66 
AlterColumn66 (
<66( )
string66) /
>66/ 0
(660 1
name77 
:77 
$str77 $
,77$ %
table88 
:88 
$str88 
,88  
	maxLength99 
:99 
$num99 
,99 
nullable:: 
::: 
false:: 
,::  

oldClrType;; 
:;; 
typeof;; "
(;;" #
string;;# )
);;) *
,;;* +
oldMaxLength<< 
:<< 
$num<< !
,<<! "
oldNullable== 
:== 
true== !
)==! "
;==" #
}>> 	
}?? 
}@@ Ô

NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191212095803_Order2.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Order2 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 $
,

$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
)  
;  !
} 	
} 
} ∫
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\AppDbContext.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
AppDbContext 
: 
IdentityDbContext  1
<1 2
ApplicationUser2 A
>A B
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
DbSet 
< 
Category 
> 

Categories )
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
Flower 
> 
Flowers $
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
ShoppingCartItem %
>% &
ShoppingCartItems' 8
{ 	
get 
; 
set 
; 
} 	
public   
DbSet   
<   
Order   
>   
Orders   "
{!! 	
get"" 
;"" 
set## 
;## 
}$$ 	
public&& 
DbSet&& 
<&& 
OrderDetail&&  
>&&  !
OrderDetails&&" .
{'' 	
get(( 
;(( 
set)) 
;)) 
}** 	
}++ 
},, ®
=E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Category.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Category 
{ 
public 
int 

CategoryId 
{ 	
get		 
;		 
set

 
;

 
} 	
public 
string 
CategoryName "
{ 	
get 
; 
set 
; 
} 	
public 
string 
Description !
{ 	
get 
; 
set 
; 
} 	
public 
List 
< 
Flower 
> 
Flowers #
{ 	
get 
; 
set 
; 
} 	
} 
} ÷e
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\DbInitializer.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

static 
class 
DbInitializer %
{		 
public

 
static

 
void

 
Seed

 
(

  
IApplicationBuilder

  3
applicationBuilder

4 F
)

F G
{ 	
using 
( 
var 
serviceScope #
=$ %
applicationBuilder& 8
.8 9
ApplicationServices9 L
.L M
CreateScopeM X
(X Y
)Y Z
)Z [
{ 
AppDbContext 
context $
=% &
serviceScope' 3
.3 4
ServiceProvider4 C
.C D

GetServiceD N
<N O
AppDbContextO [
>[ \
(\ ]
)] ^
;^ _
if 
( 
! 
context 
. 

Categories '
.' (
Any( +
(+ ,
), -
)- .
{ 
context 
. 

Categories &
.& '
AddRange' /
(/ 0

Categories0 :
.: ;
Select; A
(A B
cB C
=>D F
cG H
.H I
ValueI N
)N O
)O P
;P Q
} 
if 
( 
! 
context 
. 
Flowers $
.$ %
Any% (
(( )
)) *
)* +
{ 
context 
. 
AddRange $
( 
new 
Flower "
{ 
Name  
=! "
$str# )
,) *
Price !
=" #
$num$ *
,* +
ShortDescription ,
=- .
$str/ =
,= >
LongDescription +
=, -
$str". R
,""R S
Category## $
=##% &

Categories##' 1
[##1 2
$str##2 A
]##A B
,##B C
ImageUrl$$ $
=$$% &
$str	$$' É
,
$$É Ñ
InStock%% #
=%%$ %
true%%& *
,%%* +
ImageThumbnailUrl&& -
=&&. /
$str	&&0 å
,
&&å ç 
IsFlowerPresentation'' 0
=''1 2
true''3 7
}(( 
,(( 
new)) 
Flower)) "
{** 
Name++  
=++! "
$str++# )
,++) *
Price,, !
=,," #
$num,,$ *
,,,* +
ShortDescription-- ,
=--- .
$str--/ D
,--D E
LongDescription.. +
=.., -
$str./. p
,//p q
Category00 $
=00% &

Categories00' 1
[001 2
$str002 A
]00A B
,00B C
ImageUrl11 $
=11% &
$str11' v
,11v w
InStock22 #
=22$ %
true22& *
,22* +
ImageThumbnailUrl33 -
=33. /
$str330 
,	33 Ä 
IsFlowerPresentation44 0
=441 2
false443 8
}55 
,55 
new66 
Flower66 "
{77 
Name88  
=88! "
$str88# *
,88* +
Price99 !
=99" #
$num99$ *
,99* +
ShortDescription:: ,
=::- .
$str::/ C
,::C D
LongDescription;; +
=;;, -
$str	;<. Ç
,
<<Ç É
Category== $
===% &

Categories==' 1
[==1 2
$str==2 A
]==A B
,==B C
ImageUrl>> $
=>>% &
$str>>' u
,>>u v
InStock?? #
=??$ %
true??& *
,??* +
ImageThumbnailUrl@@ -
=@@. /
$str@@0 ~
,@@~  
IsFlowerPresentationAA 0
=AA1 2
falseAA3 8
}BB 
,BB 
newCC 
FlowerCC "
{DD 
NameEE  
=EE! "
$strEE# 5
,EE5 6
PriceFF !
=FF" #
$numFF$ *
,FF* +
ShortDescriptionGG ,
=GG- .
$strGG/ :
,GG: ;
LongDescriptionHH +
=HH, -
$str	HP. Å
,
PPÅ Ç
CategoryQQ $
=QQ% &

CategoriesQQ' 1
[QQ1 2
$strQQ2 F
]QQF G
,QQG H
ImageUrlRR $
=RR% &
$strRR' j
,RRj k
InStockSS #
=SS$ %
trueSS& *
,SS* +
ImageThumbnailUrlTT -
=TT. /
$strTT0 s
,TTs t 
IsFlowerPresentationUU 0
=UU1 2
trueUU3 7
}VV 
,VV 
newXX 
FlowerXX "
{YY 
NameZZ  
=ZZ! "
$strZZ# -
,ZZ- .
Price[[ !
=[[" #
$num[[$ *
,[[* +
ShortDescription\\ ,
=\\- .
$str\\/ >
,\\> ?
LongDescription]] +
=]], -
$str]`. d
,``d e
Categoryaa $
=aa% &

Categoriesaa' 1
[aa1 2
$straa2 D
]aaD E
,aaE F
ImageUrlbb $
=bb% &
$strbb' c
,bbc d
InStockcc #
=cc$ %
truecc& *
,cc* +
ImageThumbnailUrldd -
=dd. /
$strdd0 l
,ddl m 
IsFlowerPresentationee 0
=ee1 2
falseee3 8
}ff 
,ff 
newhh 
Flowerhh "
{ii 
Namejj  
=jj! "
$strjj# *
,jj* +
Pricekk !
=kk" #
$numkk$ *
,kk* +
ShortDescriptionll ,
=ll- .
$strll/ >
,ll> ?
LongDescriptionmm +
=mm, -
$strmt. x
,ttx y
Categoryuu $
=uu% &

Categoriesuu' 1
[uu1 2
$struu2 D
]uuD E
,uuE F
ImageUrlvv $
=vv% &
$strvv' N
,vvN O
InStockww #
=ww$ %
trueww& *
,ww* +
ImageThumbnailUrlxx -
=xx. /
$strxx0 W
,xxW X 
IsFlowerPresentationyy 0
=yy1 2
falseyy3 8
}zz 
,zz 
new|| 
Flower|| "
{}} 
Name~~  
=~~! "
$str~~# =
,~~= >
Price !
=" #
$num$ *
,* +
ShortDescription
ÄÄ ,
=
ÄÄ- .
$str
ÄÄ/ >
,
ÄÄ> ?
LongDescription
ÅÅ +
=
ÅÅ, -
$strÅÉ. É
,ÉÉÉ Ñ
Category
ÑÑ $
=
ÑÑ% &

Categories
ÑÑ' 1
[
ÑÑ1 2
$str
ÑÑ2 F
]
ÑÑF G
,
ÑÑG H
ImageUrl
ÖÖ $
=
ÖÖ% &
$str
ÖÖ' g
,
ÖÖg h
InStock
ÜÜ #
=
ÜÜ$ %
true
ÜÜ& *
,
ÜÜ* +
ImageThumbnailUrl
áá -
=
áá. /
$str
áá0 p
,
ááp q"
IsFlowerPresentation
àà 0
=
àà1 2
true
àà3 7
}
ââ 
,
ââ 
new
ãã 
Flower
ãã "
{
åå 
Name
çç  
=
çç! "
$str
çç# *
,
çç* +
Price
éé !
=
éé" #
$num
éé$ *
,
éé* +
ShortDescription
èè ,
=
èè- .
$str
èè/ E
,
èèE F
LongDescription
êê +
=
êê, -
$str
êî. a
,
îîa b
Category
ïï $
=
ïï% &

Categories
ïï' 1
[
ïï1 2
$str
ïï2 D
]
ïïD E
,
ïïE F
ImageUrl
ññ $
=
ññ% &
$strññ' ì
,ññì î
InStock
óó #
=
óó$ %
true
óó& *
,
óó* +
ImageThumbnailUrl
òò -
=
òò. /
$stròò0 ú
,òòú ù"
IsFlowerPresentation
ôô 0
=
ôô1 2
true
ôô3 7
}
öö 
,
öö 
new
úú 
Flower
úú "
{
ùù 
Name
ûû  
=
ûû! "
$str
ûû# 2
,
ûû2 3
Price
üü !
=
üü" #
$num
üü$ *
,
üü* +
ShortDescription
†† ,
=
††- .
$str
††/ J
,
††J K
LongDescription
°° +
=
°°, -
$str°§. ü
,§§ü †
Category
•• $
=
••% &

Categories
••' 1
[
••1 2
$str
••2 F
]
••F G
,
••G H
ImageUrl
¶¶ $
=
¶¶% &
$str¶¶' ì
,¶¶ì î
InStock
ßß #
=
ßß$ %
true
ßß& *
,
ßß* +
ImageThumbnailUrl
®® -
=
®®. /
$str®®0 ú
,®®ú ù"
IsFlowerPresentation
©© 0
=
©©1 2
false
©©3 8
}
™™ 
,
™™ 
new
´´ 
Flower
´´ "
{
¨¨ 
Name
≠≠  
=
≠≠! "
$str
≠≠# 6
,
≠≠6 7
Price
ÆÆ !
=
ÆÆ" #
$num
ÆÆ$ *
,
ÆÆ* +
ShortDescription
ØØ ,
=
ØØ- .
$str
ØØ/ >
,
ØØ> ?
LongDescription
∞∞ +
=
∞∞, -
$str
∞¥. k
,
¥¥k l
Category
µµ $
=
µµ% &

Categories
µµ' 1
[
µµ1 2
$str
µµ2 F
]
µµF G
,
µµG H
ImageUrl
∂∂ $
=
∂∂% &
$str∂∂' ß
,∂∂ß ®
InStock
∑∑ #
=
∑∑$ %
true
∑∑& *
,
∑∑* +
ImageThumbnailUrl
∏∏ -
=
∏∏. /
$str∏∏0 ∞
,∏∏∞ ±"
IsFlowerPresentation
ππ 0
=
ππ1 2
false
ππ3 8
}
∫∫ 
,
∫∫ 
new
ºº 
Flower
ºº "
{
ΩΩ 
Name
ææ  
=
ææ! "
$str
ææ# 2
,
ææ2 3
Price
øø !
=
øø" #
$num
øø$ *
,
øø* +
ShortDescription
¿¿ ,
=
¿¿- .
$str
¿¿/ G
,
¿¿G H
LongDescription
¡¡ +
=
¡¡, -
$str
¡ . `
,
  ` a
Category
ÀÀ $
=
ÀÀ% &

Categories
ÀÀ' 1
[
ÀÀ1 2
$str
ÀÀ2 A
]
ÀÀA B
,
ÀÀB C
ImageUrl
ÃÃ $
=
ÃÃ% &
$str
ÃÃ' w
,
ÃÃw x
InStock
ÕÕ #
=
ÕÕ$ %
true
ÕÕ& *
,
ÕÕ* +
ImageThumbnailUrl
ŒŒ -
=
ŒŒ. /
$strŒŒ0 Ä
,ŒŒÄ Å"
IsFlowerPresentation
œœ 0
=
œœ1 2
false
œœ3 8
}
–– 
)
—— 
;
—— 
}
““ 
context
‘‘ 
.
‘‘ 
SaveChanges
‘‘ #
(
‘‘# $
)
‘‘$ %
;
‘‘% &
}
’’ 
}
÷÷ 	
private
ÿÿ 
static
ÿÿ 

Dictionary
ÿÿ !
<
ÿÿ! "
string
ÿÿ" (
,
ÿÿ( )
Category
ÿÿ* 2
>
ÿÿ2 3

categories
ÿÿ4 >
;
ÿÿ> ?
public
ŸŸ 
static
ŸŸ 

Dictionary
ŸŸ  
<
ŸŸ  !
string
ŸŸ! '
,
ŸŸ' (
Category
ŸŸ) 1
>
ŸŸ1 2

Categories
ŸŸ3 =
{
⁄⁄ 	
get
€€ 
{
‹‹ 
if
›› 
(
›› 

categories
›› 
==
›› !
null
››" &
)
››& '
{
ﬁﬁ 
var
ﬂﬂ 

genresList
ﬂﬂ "
=
ﬂﬂ# $
new
ﬂﬂ% (
Category
ﬂﬂ) 1
[
ﬂﬂ1 2
]
ﬂﬂ2 3
{
‡‡ 
new
·· 
Category
·· $
{
··% &
CategoryName
··' 3
=
··4 5
$str
··6 E
}
··F G
,
··G H
new
‚‚ 
Category
‚‚ $
{
‚‚% &
CategoryName
‚‚' 3
=
‚‚4 5
$str
‚‚6 J
}
‚‚K L
,
‚‚L M
new
„„ 
Category
„„ $
{
„„% &
CategoryName
„„' 3
=
„„4 5
$str
„„6 H
}
„„I J
}
‰‰ 
;
‰‰ 

categories
ÊÊ 
=
ÊÊ  
new
ÊÊ! $

Dictionary
ÊÊ% /
<
ÊÊ/ 0
string
ÊÊ0 6
,
ÊÊ6 7
Category
ÊÊ8 @
>
ÊÊ@ A
(
ÊÊA B
)
ÊÊB C
;
ÊÊC D
foreach
ËË 
(
ËË 
Category
ËË %
genre
ËË& +
in
ËË, .

genresList
ËË/ 9
)
ËË9 :
{
ÈÈ 

categories
ÍÍ "
.
ÍÍ" #
Add
ÍÍ# &
(
ÍÍ& '
genre
ÍÍ' ,
.
ÍÍ, -
CategoryName
ÍÍ- 9
,
ÍÍ9 :
genre
ÍÍ; @
)
ÍÍ@ A
;
ÍÍA B
}
ÎÎ 
}
ÏÏ 
return
ÓÓ 

categories
ÓÓ !
;
ÓÓ! "
}
ÔÔ 
}
 	
}
ÒÒ 
}ÚÚ ˚
;E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Flower.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Flower 
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
virtual 
Category 
Category  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 

IsFavorite 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} à6
:E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Order.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Order 
{		 
[

 	
	BindNever

	 
]

 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
OrderDetail 
>  

OrderLines! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ?
)? @
]@ A
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
ShippingMethod $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
Display	 
( 
Name 
= 
$str (
)( )
]) *
public   
string   
AddressLine1   "
{  # $
get  % (
;  ( )
set  * -
;  - .
}  / 0
["" 	
Display""	 
("" 
Name"" 
="" 
$str"" (
)""( )
]"") *
public## 
string## 
AddressLine2## "
{### $
get##% (
;##( )
set##* -
;##- .
}##/ 0
[&& 	
Display&&	 
(&& 
Name&& 
=&& 
$str&& "
)&&" #
]&&# $
['' 	
StringLength''	 
('' 
$num'' 
,'' 
MinimumLength'' '
=''( )
$num''* +
)''+ ,
]'', -
public(( 
string(( 
ZipCode(( 
{(( 
get((  #
;((# $
set((% (
;((( )
}((* +
[** 	
Required**	 
(** 
ErrorMessage** 
=**  
$str**! 9
)**9 :
]**: ;
[++ 	
StringLength++	 
(++ 
$num++ 
)++ 
]++ 
public,, 
string,, 
City,, 
{,, 
get,,  
;,,  !
set,," %
;,,% &
},,' (
[.. 	
StringLength..	 
(.. 
$num.. 
).. 
].. 
public// 
string// 
State// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
[22 	
StringLength22	 
(22 
$num22 
)22 
]22 
public33 
string33 
Country33 
{33 
get33  #
;33# $
set33% (
;33( )
}33* +
[55 	
Required55	 
(55 
ErrorMessage55 
=55  
$str55! A
)55A B
]55B C
[66 	
StringLength66	 
(66 
$num66 
)66 
]66 
[77 	
DataType77	 
(77 
DataType77 
.77 
PhoneNumber77 &
)77& '
]77' (
[88 	
Display88	 
(88 
Name88 
=88 
$str88 &
)88& '
]88' (
public99 
string99 
PhoneNumber99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
[;; 	
Required;;	 
];; 
[<< 	
StringLength<<	 
(<< 
$num<< 
)<< 
]<< 
[== 	
DataType==	 
(== 
DataType== 
.== 
EmailAddress== '
)==' (
]==( )
[>> 	
RegularExpression>>	 
(>> 
$str	>>  
,
>>  À
ErrorMessage?? 
=?? 
$str?? Q
)??Q R
]??R S
public@@ 
string@@ 
Email@@ 
{@@ 
get@@ !
;@@! "
set@@# &
;@@& '
}@@( )
[BB 	
	BindNeverBB	 
]BB 
[CC 	
ScaffoldColumnCC	 
(CC 
falseCC 
)CC 
]CC 
publicDD 
decimalDD 

OrderTotalDD !
{DD" #
getDD$ '
;DD' (
setDD) ,
;DD, -
}DD. /
[FF 	
	BindNeverFF	 
]FF 
[GG 	
ScaffoldColumnGG	 
(GG 
falseGG 
)GG 
]GG 
publicHH 
DateTimeHH 
OrderPlacedHH #
{HH$ %
getHH& )
;HH) *
setHH+ .
;HH. /
}HH0 1
[JJ 	
RequiredJJ	 
]JJ 
[KK 	
StringLengthKK	 
(KK 
$numKK 
)KK 
]KK 
publicLL 
stringLL 
	PayMethodLL 
{LL  !
getLL" %
;LL% &
setLL' *
;LL* +
}LL, -
[NN 	
StringLengthNN	 
(NN 
$numNN 
)NN 
]NN 
publicOO 
stringOO 

CardNumberOO  
{OO! "
getOO# &
;OO& '
setOO( +
;OO+ ,
}OO- .
[QQ 	
StringLengthQQ	 
(QQ 
$numQQ 
)QQ 
]QQ 
publicRR 
stringRR 
SecurityCodeRR "
{RR# $
getRR% (
;RR( )
setRR* -
;RR- .
}RR/ 0
}SS 
}TT Â

@E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\OrderDetail.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
OrderDetail 
{ 
public 
int 
OrderDetailId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public		 
int		 
FlowerId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public 
int 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Flower 
Flower $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
virtual 
Order 
Order "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ˘E
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCart.cs
	namespace 	
	FlowerApp
 
. 
Models 
{		 
public

 

class

 
ShoppingCart

 
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
ShoppingCart 
( 
AppDbContext )
appDbContext* 6
)6 7
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
ShoppingCartItem $
>$ %
ShoppingCartItems& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
static 
ShoppingCart "
GetCart# *
(* +
IServiceProvider+ ;
services< D
)D E
{ 	
ISession 
session 
= 
services '
.' (
GetRequiredService( :
<: ; 
IHttpContextAccessor; O
>O P
(P Q
)Q R
?R S
. 
HttpContext 
. 
Session $
;$ %
var 
context 
= 
services "
." #

GetService# -
<- .
AppDbContext. :
>: ;
(; <
)< =
;= >
string 
cartId 
= 
session #
.# $
	GetString$ -
(- .
$str. 6
)6 7
??8 :
Guid; ?
.? @
NewGuid@ G
(G H
)H I
.I J
ToStringJ R
(R S
)S T
;T U
session 
. 
	SetString 
( 
$str &
,& '
cartId( .
). /
;/ 0
return   
new   
ShoppingCart   #
(  # $
context  $ +
)  + ,
{  - .
ShoppingCartId  / =
=  > ?
cartId  @ F
}  G H
;  H I
}!! 	
public## 
void## 
	AddToCart## 
(## 
Flower## $
flower##% +
,##+ ,
int##- 0
amount##1 7
)##7 8
{$$ 	
var%% 
shoppingCartItem%%  
=%%! "
_appDbContext&& !
.&&! "
ShoppingCartItems&&" 3
.&&3 4
SingleOrDefault&&4 C
(&&C D
s'' 
=>'' 
s'' 
.'' 
Flower'' %
.''% &
FlowerId''& .
==''/ 1
flower''2 8
.''8 9
FlowerId''9 A
&&''B D
s''E F
.''F G
ShoppingCartId''G U
==''V X
ShoppingCartId''Y g
)''g h
;''h i
if)) 
()) 
shoppingCartItem))  
==))! #
null))$ (
)))( )
{** 
shoppingCartItem++  
=++! "
new++# &
ShoppingCartItem++' 7
{,, 
ShoppingCartId-- "
=--# $
ShoppingCartId--% 3
,--3 4
Flower.. 
=.. 
flower.. #
,..# $
Amount// 
=// 
$num// 
}00 
;00 
_appDbContext22 
.22 
ShoppingCartItems22 /
.22/ 0
Add220 3
(223 4
shoppingCartItem224 D
)22D E
;22E F
}33 
else44 
{55 
if<< 
(<< 
shoppingCartItem<< $
.<<$ %
Amount<<% +
<<<, -
$num<<. /
)<</ 0
{== 
shoppingCartItem>> $
.>>$ %
Amount>>% +
=>>, -
amount>>. 4
+>>5 6
$num>>7 8
;>>8 9
}?? 
else@@ 
if@@ 
(@@ 
shoppingCartItem@@ )
.@@) *
Amount@@* 0
>@@1 2
$num@@3 4
)@@4 5
{AA 
shoppingCartItemBB $
.BB$ %
AmountBB% +
=BB, -
amountBB. 4
;BB4 5
}CC 
elseDD 
shoppingCartItemEE $
.EE$ %
AmountEE% +
+=EE, .
amountEE/ 5
;EE5 6
}FF 
_appDbContextGG 
.GG 
SaveChangesGG %
(GG% &
)GG& '
;GG' (
}HH 	
publicJJ 
intJJ 
RemoveFromCartJJ !
(JJ! "
FlowerJJ" (
flowerJJ) /
)JJ/ 0
{KK 	
varLL 
shoppingCartItemLL  
=LL! "
_appDbContextMM !
.MM! "
ShoppingCartItemsMM" 3
.MM3 4
SingleOrDefaultMM4 C
(MMC D
sNN 
=>NN 
sNN 
.NN 
FlowerNN %
.NN% &
FlowerIdNN& .
==NN/ 1
flowerNN2 8
.NN8 9
FlowerIdNN9 A
&&NNB D
sNNE F
.NNF G
ShoppingCartIdNNG U
==NNV X
ShoppingCartIdNNY g
)NNg h
;NNh i
varPP 
localAmountPP 
=PP 
$numPP 
;PP  
ifRR 
(RR 
shoppingCartItemRR  
!=RR! #
nullRR$ (
)RR( )
{SS 
ifTT 
(TT 
shoppingCartItemTT $
.TT$ %
AmountTT% +
>TT, -
$numTT. /
)TT/ 0
{UU 
shoppingCartItemVV $
.VV$ %
AmountVV% +
--VV+ -
;VV- .
localAmountWW 
=WW  !
shoppingCartItemWW" 2
.WW2 3
AmountWW3 9
;WW9 :
}XX 
elseYY 
{ZZ 
_appDbContext[[ !
.[[! "
ShoppingCartItems[[" 3
.[[3 4
Remove[[4 :
([[: ;
shoppingCartItem[[; K
)[[K L
;[[L M
}\\ 
}]] 
_appDbContext__ 
.__ 
SaveChanges__ %
(__% &
)__& '
;__' (
returnaa 
localAmountaa 
;aa 
}bb 	
publicdd 
Listdd 
<dd 
ShoppingCartItemdd $
>dd$ % 
GetShoppingCartItemsdd& :
(dd: ;
)dd; <
{ee 	
returnff 
ShoppingCartItemsff $
??ff% '
(gg 
ShoppingCartItemsgg %
=gg& '
_appDbContexthh $
.hh$ %
ShoppingCartItemshh% 6
.hh6 7
Wherehh7 <
(hh< =
chh= >
=>hh? A
chhB C
.hhC D
ShoppingCartIdhhD R
==hhS U
ShoppingCartIdhhV d
)hhd e
.ii 
Includeii #
(ii# $
sii$ %
=>ii& (
sii) *
.ii* +
Flowerii+ 1
)ii1 2
.jj 
ToListjj "
(jj" #
)jj# $
)jj$ %
;jj% &
}kk 	
publicmm 
voidmm 
	ClearCartmm 
(mm 
)mm 
{nn 	
varoo 
	cartItemsoo 
=oo 
_appDbContextoo )
.pp 
ShoppingCartItemspp "
.qq 
Whereqq 
(qq 
cartqq 
=>qq 
cartqq #
.qq# $
ShoppingCartIdqq$ 2
==qq3 5
ShoppingCartIdqq6 D
)qqD E
;qqE F
_appDbContextss 
.ss 
ShoppingCartItemsss +
.ss+ ,
RemoveRangess, 7
(ss7 8
	cartItemsss8 A
)ssA B
;ssB C
_appDbContextuu 
.uu 
SaveChangesuu %
(uu% &
)uu& '
;uu' (
}vv 	
publiczz 
decimalzz  
GetShoppingCartTotalzz +
(zz+ ,
)zz, -
{{{ 	
var|| 
total|| 
=|| 
_appDbContext|| %
.||% &
ShoppingCartItems||& 7
.||7 8
Where||8 =
(||= >
c||> ?
=>||@ B
c||C D
.||D E
ShoppingCartId||E S
==||T V
ShoppingCartId||W e
)||e f
.}} 
Select}} 
(}} 
c}} 
=>}} 
c}} 
.}} 
Flower}} %
.}}% &
Price}}& +
*}}, -
c}}. /
.}}/ 0
Amount}}0 6
)}}6 7
.}}7 8
Sum}}8 ;
(}}; <
)}}< =
;}}= >
return~~ 
total~~ 
;~~ 
} 	
}
ÄÄ 
}ÅÅ â
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCartItem.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
ShoppingCartItem !
{ 
public 
int 
ShoppingCartItemId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
Amount		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ¡
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Program.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} è
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\CategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class 
CategoryRepository #
:$ %
ICategoryRepository& 9
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public

 
CategoryRepository

 !
(

! "
AppDbContext

" .
appDbContext

/ ;
)

; <
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Category #
># $

Categories% /
=>0 2
_appDbContext3 @
.@ A

CategoriesA K
;K L
} 
} π3
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\FlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
FlowerRepository		 !
:		" #
IFlowerRepository		$ 5
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public 
FlowerRepository 
(  
AppDbContext  ,
appDbContext- 9
)9 :
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Include- 4
(4 5
c5 6
=>7 9
c: ;
.; <
Category< D
)D E
;E F
} 
} 	
public 
IEnumerable 
< 
string !
>! "
FlowersNames# /
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Select- 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Name; ?
)? @
.@ A
ToListA G
(G H
)H I
;I J
} 
}   	
public"" 
IEnumerable"" 
<"" 
Flower"" !
>""! "
FlowerPresentation""# 5
{## 	
get$$ 
{%% 
return&& 
_appDbContext&& $
.&&$ %
Flowers&&% ,
.&&, -
Include&&- 4
(&&4 5
c&&5 6
=>&&7 9
c&&: ;
.&&; <
Category&&< D
)&&D E
.&&E F
Where&&F K
(&&K L
p&&L M
=>&&N P
p&&Q R
.&&R S 
IsFlowerPresentation&&S g
)&&g h
;&&h i
}'' 
}(( 	
public** 
Flower** 
GetFlowerById** #
(**# $
int**$ '
flowerId**( 0
)**0 1
{++ 	
return,, 
_appDbContext,,  
.,,  !
Flowers,,! (
.,,( )
FirstOrDefault,,) 7
(,,7 8
f,,8 9
=>,,: <
f,,= >
.,,> ?
FlowerId,,? G
==,,H J
flowerId,,K S
),,S T
;,,T U
}-- 	
public// 
IEnumerable// 
<// 
FlowerViewModel// *
>//* +
FlowersAsViewModel//, >
{00 	
get11 
{22 
List33 
<33 
FlowerViewModel33 $
>33$ %
flowers33& -
=33. /
new330 3
List334 8
<338 9
FlowerViewModel339 H
>33H I
(33I J
)33J K
;33K L
foreach55 
(55 
var55 
dbFlower55 %
in55& (
Flowers55) 0
)550 1
{66 
flowers77 
.77 
Add77 
(77  (
MapDbFlowerToFlowerViewModel77  <
(77< =
dbFlower77= E
)77E F
)77F G
;77G H
}88 
return:: 
flowers:: 
;:: 
};; 
}<< 	
public>> 
bool>> 
	AddFlower>> 
(>> 
Flower>> $
flower>>% +
)>>+ ,
{?? 	
var@@ 
result@@ 
=@@ 
_appDbContext@@ &
.@@& '
Add@@' *
(@@* +
flower@@+ 1
)@@1 2
;@@2 3
_appDbContextBB 
.BB 
SaveChangesBB %
(BB% &
)BB& '
;BB' (
returnDD 
resultDD 
.DD 
StateDD 
==DD  "
EntityStateDD# .
.DD. /
AddedDD/ 4
||DD5 7
resultDD8 >
.DD> ?
StateDD? D
==DDE G
EntityStateDDH S
.DDS T
	UnchangedDDT ]
?DD^ _
trueDD` d
:DDe f
falseDDg l
;DDl m
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
varII 
resultII 
=II 
_appDbContextII &
.II& '
RemoveII' -
(II- .
flowerII. 4
)II4 5
;II5 6
_appDbContextKK 
.KK 
SaveChangesKK %
(KK% &
)KK& '
;KK' (
returnMM 
resultMM 
.MM 
StateMM 
==MM  "
EntityStateMM# .
.MM. /
DeletedMM/ 6
||MM7 9
resultMM: @
.MM@ A
StateMMA F
==MMG I
EntityStateMMJ U
.MMU V
	UnchangedMMV _
?MM` a
trueMMb f
:MMg h
falseMMi n
;MMn o
}NN 	
privatePP 
FlowerViewModelPP (
MapDbFlowerToFlowerViewModelPP  <
(PP< =
FlowerPP= C
dbFlowerPPD L
)PPL M
{QQ 	
returnRR 
newRR 
FlowerViewModelRR &
(RR& '
)RR' (
{SS 
FlowerIdTT 
=TT 
dbFlowerTT #
.TT# $
FlowerIdTT$ ,
,TT, -
NameUU 
=UU 
dbFlowerUU 
.UU  
NameUU  $
,UU$ %
PriceVV 
=VV 
dbFlowerVV  
.VV  !
PriceVV! &
,VV& '
ShortDescriptionWW  
=WW! "
dbFlowerWW# +
.WW+ ,
ShortDescriptionWW, <
,WW< =
ImageThumbnailUrlXX !
=XX" #
dbFlowerXX$ ,
.XX, -
ImageThumbnailUrlXX- >
}YY 
;YY 
}ZZ 	
public\\ 
bool\\ 
UpdateFlower\\  
(\\  !
Flower\\! '
flower\\( .
)\\. /
{]] 	
_appDbContext^^ 
.^^ 
Update^^  
(^^  !
flower^^! '
)^^' (
;^^( )
_appDbContext`` 
.`` 
SaveChanges`` %
(``% &
)``& '
;``' (
returnbb 
truebb 
;bb 
}cc 	
}dd 
}ee »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ICategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
ICategoryRepository (
{ 
IEnumerable 
< 
Category 
> 

Categories (
{) *
get+ .
;. /
}0 1
}		 
}

 ¿
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IFlowerRepository &
{ 
IEnumerable		 
<		 
Flower		 
>		 
Flowers		 #
{		$ %
get		& )
;		) *
}		+ ,
IEnumerable 
< 
Flower 
> 
FlowerPresentation .
{/ 0
get1 4
;4 5
}6 7
IEnumerable 
< 
FlowerViewModel #
># $
FlowersAsViewModel% 7
{ 	
get 
; 
} 	
IEnumerable 
< 
string 
> 
FlowersNames (
{ 	
get 
; 
} 	
Flower 
GetFlowerById 
( 
int  
flowerId! )
)) *
;* +
bool 
	AddFlower 
( 
Flower 
flower $
)$ %
;% &
bool 
DeleteFlower 
( 
Flower  
flower! '
)' (
;( )
bool 
UpdateFlower 
( 
Flower  
flower! '
)' (
;( )
} 
} ò
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IOrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IOrderRepository %
{ 
void		 
CreateOrder		 
(		 
Order		 
order		 $
)		$ %
;		% &
IEnumerable 
< (
OrderHistoryDetailsViewModel 0
>0 1 
GetOrdersAsViewModel2 F
(F G
stringG M
userNameN V
=W X
$strY [
)[ \
;\ ]
} 
} à
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelCategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class #
ModelCategoryRepository (
:) *
ICategoryRepository+ >
{ 
public 
IEnumerable 
< 
Category #
># $

Categories% /
{		 	
get

 
{ 
return 
new 
List 
<  
Category  (
>( )
{ 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 5
,5 6
Description #
=$ %
$str% 9
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& :
,: ;
Description #
=$ %
$str% 3
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 8
,8 9
Description #
=$ %
$str% M
} 
} 
; 
}   
}!! 	
}"" 
}## ï2
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 !
ModelFlowerRepository		 &
:		' (
IFlowerRepository		) :
{

 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
=A B
newC F#
ModelCategoryRepositoryG ^
(^ _
)_ `
;` a
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
new 
List 
<  
Flower  &
>& '
{ 
new 
Flower 
{  
FlowerId  (
=) *
$num+ ,
,, -
Name. 2
=2 3
$str3 ;
,; <
Price= B
=B C
$numC I
,I J
ShortDescriptionK [
=[ \
$str\ j
,j k
LongDescriptionl {
={ |
$str	| É
,
É Ñ
Category
Ö ç
=
é è!
_categoryRepository
ê £
.
£ §

Categories
§ Æ
.
Æ Ø
ToList
Ø µ
(
µ ∂
)
∂ ∑
[
∑ ∏
$num
∏ π
]
π ∫
,
∫ ª
ImageUrl  
=! "
$str" g
,g h
InStocki p
=p q
trueq u
,u v
ImageThumbnailUrl )
=* +
$str+ p
}p q
,q r
new 
Flower 
{  
FlowerId  (
=) *
$num+ ,
,, -
Name. 2
=2 3
$str3 <
,< =
Price> C
=C D
$numD J
,J K
ShortDescriptionL \
=\ ]
$str] k
,k l
LongDescriptionm |
=| }
$str	} Ü
,
Ü á
Category
à ê
=
ë í!
_categoryRepository
ì ¶
.
¶ ß

Categories
ß ±
.
± ≤
ToList
≤ ∏
(
∏ π
)
π ∫
[
∫ ª
$num
ª º
]
º Ω
,
Ω æ
ImageUrl  
=! "
$str	" Ä
,
Ä Å
InStock
Ç â
=
â ä
true
ä é
,
é è
ImageThumbnailUrl )
=* +
$str	+ â
}
â ä
,
ä ã
new 
Flower 
{  
FlowerId  (
=) *
$num+ ,
,, -
Name. 2
=2 3
$str3 :
,: ;
Price< A
=A B
$numB H
,H I
ShortDescriptionJ Z
=Z [
$str[ f
,f g
LongDescriptionh w
=w x
$str	x É
,
É Ñ
Category
Ö ç
=
é è!
_categoryRepository
ê £
.
£ §

Categories
§ Æ
.
Æ Ø
ToList
Ø µ
(
µ ∂
)
∂ ∑
[
∑ ∏
$num
∏ π
]
π ∫
,
∫ ª
ImageUrl  
=! "
$str" s
,s t
InStocku |
=| }
true	} Å
,
Å Ç
ImageThumbnailUrl )
=* +
$str+ |
}| }
,} ~
new   
Flower   
{    
FlowerId    (
=  ) *
$num  + ,
,  , -
Name  . 2
=  2 3
$str  3 ;
,  ; <
Price  = B
=  B C
$num  C I
,  I J
ShortDescription  K [
=  [ \
$str  \ k
,  k l
LongDescription  m |
=  | }
$str	  } Ö
,
  Ö Ü
Category
  á è
=
  ê ë!
_categoryRepository
  í •
.
  • ¶

Categories
  ¶ ∞
.
  ∞ ±
ToList
  ± ∑
(
  ∑ ∏
)
  ∏ π
[
  π ∫
$num
  ∫ ª
]
  ª º
,
  º Ω
ImageUrl!!  
=!!! "
$str!!" p
,!!p q
InStock!!r y
=!!y z
true!!z ~
,!!~ 
ImageThumbnailUrl"" )
=""* +
$str""+ y
}""y z
}## 
;## 
}$$ 
}%% 	
public'' 
IEnumerable'' 
<'' 
Flower'' !
>''! "
FlowerPresentation''# 5
{''6 7
get''8 ;
;''; <
}''= >
public)) 
IEnumerable)) 
<)) 
FlowerViewModel)) *
>))* +
FlowersAsViewModel)), >
=>))? A
throw))B G
new))H K#
NotImplementedException))L c
())c d
)))d e
;))e f
public++ 
IEnumerable++ 
<++ 
string++ !
>++! "
FlowersNames++# /
=>++0 2
throw++3 8
new++9 <#
NotImplementedException++= T
(++T U
)++U V
;++V W
public-- 
bool-- 
	AddFlower-- 
(-- 
Flower-- $
flower--% +
)--+ ,
{.. 	
throw// 
new// #
NotImplementedException// -
(//- .
)//. /
;/// 0
}00 	
public22 
bool22 
DeleteFlower22  
(22  !
Flower22! '
flower22( .
)22. /
{33 	
throw44 
new44 #
NotImplementedException44 -
(44- .
)44. /
;44/ 0
}55 	
public77 
Flower77 
GetFlowerById77 #
(77# $
int77$ '
flowerId77( 0
)770 1
{88 	
throw99 
new99 
System99 
.99 #
NotImplementedException99 4
(994 5
)995 6
;996 7
}:: 	
public<< 
bool<< 
UpdateFlower<<  
(<<  !
Flower<<! '
flower<<( .
)<<. /
{== 	
throw>> 
new>> #
NotImplementedException>> -
(>>- .
)>>. /
;>>/ 0
}?? 	
}@@ 
}AA ˝-
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\OrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
OrderRepository		  
:		! "
IOrderRepository		# 3
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderRepository 
( 
AppDbContext +
appDbContext, 8
,8 9
ShoppingCart: F
shoppingCartG S
)S T
{ 	
_appDbContext 
= 
appDbContext (
;( )
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8 
GetOrdersAsViewModel9 M
(M N
stringN T
userNameU ]
=^ _
$str` b
)b c
{ 	
List 
< 
Order 
> 
orders 
=  
null! %
;% &
if 
( 
string 
. 
IsNullOrEmpty $
($ %
userName% -
)- .
). /
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
ToList. 4
(4 5
)5 6
;6 7
} 
else 
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
Where. 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Email; @
==A C
userNameD L
)L M
.M N
ToListN T
(T U
)U V
;V W
} 
var   #
orderHistoryDetailsList   '
=  ( )
new  * -
List  . 2
<  2 3(
OrderHistoryDetailsViewModel  3 O
>  O P
(  P Q
)  Q R
;  R S
foreach!! 
(!! 
var!! 
order!! 
in!! !
orders!!" (
)!!( )
{"" #
orderHistoryDetailsList## '
.##' (
Add##( +
(##+ ,&
MapDbOrderToOrderViewModel##, F
(##F G
order##G L
)##L M
)##M N
;##N O
}$$ 
return&& #
orderHistoryDetailsList&& *
;&&* +
}'' 	
public)) 
void)) 
CreateOrder)) 
())  
Order))  %
order))& +
)))+ ,
{** 	
order++ 
.++ 
OrderPlaced++ 
=++ 
DateTime++  (
.++( )
Now++) ,
;++, -
_appDbContext-- 
.-- 
Orders--  
.--  !
Add--! $
(--$ %
order--% *
)--* +
;--+ ,
var// 
shoppingCartItems// !
=//" #
_shoppingCart//$ 1
.//1 2
ShoppingCartItems//2 C
;//C D
foreach11 
(11 
var11 
shoppingCartItem11 )
in11* ,
shoppingCartItems11- >
)11> ?
{22 
var33 
orderDetail33 
=33  !
new33" %
OrderDetail33& 1
(331 2
)332 3
{44 
Amount55 
=55 
shoppingCartItem55 -
.55- .
Amount55. 4
,554 5
FlowerId66 
=66 
shoppingCartItem66 /
.66/ 0
Flower660 6
.666 7
FlowerId667 ?
,66? @
OrderId77 
=77 
order77 #
.77# $
OrderId77$ +
,77+ ,
Price88 
=88 
shoppingCartItem88 ,
.88, -
Flower88- 3
.883 4
Price884 9
}99 
;99 
_appDbContext;; 
.;; 
OrderDetails;; *
.;;* +
Add;;+ .
(;;. /
orderDetail;;/ :
);;: ;
;;;; <
}<< 
_appDbContext>> 
.>> 
SaveChanges>> %
(>>% &
)>>& '
;>>' (
}?? 	
privateAA (
OrderHistoryDetailsViewModelAA ,&
MapDbOrderToOrderViewModelAA- G
(AAG H
OrderAAH M
dbOrderAAN U
)AAU V
{BB 	
returnCC 
newCC (
OrderHistoryDetailsViewModelCC 3
(CC3 4
)CC4 5
{DD 
OrderIdEE 
=EE 
dbOrderEE !
.EE! "
OrderIdEE" )
,EE) *
AddressFF 
=FF 
dbOrderFF !
.FF! "
AddressLine1FF" .
+FF/ 0
$strFF1 4
+FF5 6
dbOrderFF7 >
.FF> ?
AddressLine2FF? K
,FFK L
CityGG 
=GG 
dbOrderGG 
.GG 
CityGG #
,GG# $
	FirstNameHH 
=HH 
dbOrderHH #
.HH# $
	FirstNameHH$ -
,HH- .
LastNameII 
=II 
dbOrderII "
.II" #
LastNameII# +
,II+ ,
	PayMethodJJ 
=JJ 
dbOrderJJ #
.JJ# $
	PayMethodJJ$ -
,JJ- .
PhoneNumberKK 
=KK 
dbOrderKK %
.KK% &
PhoneNumberKK& 1
,KK1 2
ShippingMethodLL 
=LL  
dbOrderLL! (
.LL( )
ShippingMethodLL) 7
}MM 
;MM 
}NN 	
}OO 
}PP ’.
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Startup.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Startup 
{ 
private 
IConfigurationRoot "
_configurationRoot# 5
;5 6
public 
Startup 
( 
IHostingEnvironment *
hostingEnvironment+ =
)= >
{ 	
_configurationRoot 
=  
new! $ 
ConfigurationBuilder% 9
(9 :
): ;
. 
SetBasePath '
(' (
hostingEnvironment( :
.: ;
ContentRootPath; J
)J K
. 
AddJsonFile '
(' (
$str( :
): ;
. 
Build !
(! "
)" #
;# $
} 	
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddDbContext !
<! "
AppDbContext" .
>. /
(/ 0
options0 7
=>8 :
options, 3
.3 4
UseSqlServer4 @
(@ A
_configurationRootA S
.S T
GetConnectionStringT g
(g h
$strh {
){ |
)| }
)} ~
;~ 
services!! 
.!! 
AddIdentity!!  
<!!  !
ApplicationUser!!! 0
,!!0 1
IdentityRole!!2 >
>!!> ?
(!!? @
options!!@ G
=>!!H J
{"" 
options## 
.## 
Password##  
.##  !
RequireDigit##! -
=##. /
true##0 4
;##4 5
options$$ 
.$$ 
Password$$  
.$$  !
RequireLowercase$$! 1
=$$2 3
true$$4 8
;$$8 9
options%% 
.%% 
Password%%  
.%%  !
RequireUppercase%%! 1
=%%2 3
true%%4 8
;%%8 9
options&& 
.&& 
Password&&  
.&&  !"
RequireNonAlphanumeric&&! 7
=&&8 9
false&&: ?
;&&? @
options'' 
.'' 
User'' 
.'' 
RequireUniqueEmail'' /
=''0 1
false''2 7
;''7 8
}(( 
)(( 
.)) $
AddEntityFrameworkStores)) )
<))) *
AppDbContext))* 6
>))6 7
())7 8
)))8 9
;))9 :
services++ 
.++ 
AddTransient++ !
<++! "
ICategoryRepository++" 5
,++5 6
CategoryRepository++7 I
>++I J
(++J K
)++K L
;++L M
services,, 
.,, 
AddTransient,, !
<,,! "
IFlowerRepository,," 3
,,,3 4
FlowerRepository,,5 E
>,,E F
(,,F G
),,G H
;,,H I
services-- 
.-- 
AddSingleton-- !
<--! " 
IHttpContextAccessor--" 6
,--6 7
HttpContextAccessor--8 K
>--K L
(--L M
)--M N
;--N O
services.. 
... 
	AddScoped.. 
<.. 
ShoppingCart.. +
>..+ ,
(.., -
sp..- /
=>..0 2
ShoppingCart..3 ?
...? @
GetCart..@ G
(..G H
sp..H J
)..J K
)..K L
;..L M
services// 
.// 
AddTransient// !
<//! "
IOrderRepository//" 2
,//2 3
OrderRepository//4 C
>//C D
(//D E
)//E F
;//F G
services11 
.11 
AddMvc11 
(11 
)11 
;11 
services33 
.33 
AddMemoryCache33 #
(33# $
)33$ %
;33% &
services44 
.44 

AddSession44 
(44  
)44  !
;44! "
}55 	
public88 
void88 
	Configure88 
(88 
IApplicationBuilder88 1
app882 5
,885 6
IHostingEnvironment887 J
env88K N
,88N O
ILoggerFactory88P ^
loggerFactory88_ l
)88l m
{99 	
app:: 
.:: %
UseDeveloperExceptionPage:: )
(::) *
)::* +
;::+ ,
app;; 
.;; 
UseStatusCodePages;; "
(;;" #
);;# $
;;;$ %
app<< 
.<< 
UseStaticFiles<< 
(<< 
)<<  
;<<  !
app== 
.== 

UseSession== 
(== 
)== 
;== 
app>> 
.>> 
UseIdentity>> 
(>> 
)>> 
;>> 
appAA 
.AA 
UseMvcAA 
(AA 
routesAA 
=>AA  
{BB 
routesCC 
.CC 
MapRouteCC 
(CC  
nameDD 
:DD 
$strDD *
,DD* +
templateEE 
:EE 
$strEE ;
,EE; <
defaultsFF 
:FF 
newFF !
{FF" #

ControllerFF$ .
=FF/ 0
$strFF1 9
,FF9 :
actionFF; A
=FFB C
$strFFD J
}FFK L
)FFL M
;FFM N
routesHH 
.HH 
MapRouteHH 
(HH  
nameII 
:II 
$strII #
,II# $
templateJJ 
:JJ 
$strJJ F
)JJF G
;JJG H
}KK 
)KK 
;KK 
DbInitializerMM 
.MM 
SeedMM 
(MM 
appMM "
)MM" #
;MM# $
}NN 	
}OO 
}PP ‰

GE:\Projects\FlowerShop\FlowerApp\FlowerApp\TagHelpers\EmailTagHelper.cs
	namespace 	
	FlowerApp
 
. 

TagHelpers 
{ 
public 

class 
EmailTagHelper 
:  !
	TagHelper" +
{ 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
Content		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public 
override 
void 
Process $
($ %
TagHelperContext% 5
context6 =
,= >
TagHelperOutput? N
outputO U
)U V
{ 	
output 
. 
TagName 
= 
$str  
;  !
output 
. 

Attributes 
. 
SetAttribute *
(* +
$str+ 1
,1 2
$str3 <
+= >
Address? F
)F G
;G H
output 
. 
Content 
. 

SetContent %
(% &
Content& -
)- .
;. /
} 	
} 
} ≥
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddFlowerViewModel #
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
ShortDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
string		 
LongDescription		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ô
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddRoleViewModel !
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
RoleName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} π
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddUserViewModel !
{ 
[ 	
Required	 
] 
[		 	
Display			 
(		 
Name		 
=		 
$str		 #
)		# $
]		$ %
public

 
string

 
UserName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
[ 	
RegularExpression	 
( 
$str	  
,
  À
ErrorMessage 
= 
$str Q
)Q R
]R S
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
	Birthdate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
}   ’
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\CategoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
CategoryViewModel "
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CategoryName 
{  !
get" %
;% &
set' *
;* +
}, -
} 
}		 ≥
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ClaimsManagementViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class %
ClaimsManagementViewModel *
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ClaimId 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
List		 
<		 
string		 
>		 
AllClaimsList		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditFlowerViewModel $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditRoleViewModel "
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! =
)

= >
]

> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
RoleName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< 
string 
> 
Users !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditUserViewModel "
{ 
public		 
string		 
Id		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
[ 	
Required	 
( 
ErrorMessage 
=  
$str! =
)= >
]> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
	Birthdate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ø
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerDetailViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
FlowerDetailViewModel &
{ 
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ñ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerListViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerListViewModel $
{ 
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public

 
string

 
CurrentCategory

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
} 
} ≠
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerViewModel  
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} »
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\HomeViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
HomeViewModel 
{ 
public 
IEnumerable 
< 
Flower !
>! "
FlowerPresentation# 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public

 
IEnumerable

 
<

 
string

 !
>

! "
FlowersName

# .
{

/ 0
get

1 4
;

4 5
set

6 9
;

9 :
}

; <
} 
} Â
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\LoginViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
LoginViewModel 
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
UserName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ï
UE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryDetailsViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class (
OrderHistoryDetailsViewModel -
{ 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
City		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public

 
string

 
ShippingMethod

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	PayMethod 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} å
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
OrderHistoryViewModel &
{ 
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8
Orders9 ?
{@ A
getB E
;E F
setG J
;J K
}L M
} 
}		 Ò
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ShoppingCartViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
ShoppingCartViewModel &
{ 
public 
ShoppingCart 
ShoppingCart (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public		 
decimal		 
ShoppingCartTotal		 (
{		) *
get		+ .
;		. /
set		0 3
;		3 4
}		5 6
}

 
} π
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\UserRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
UserRoleViewModel "
{ 
public 
UserRoleViewModel  
(  !
)! "
{		 	
Users

 
=

 
new

 
List

 
<

 
IdentityUser

 )
>

) *
(

* +
)

+ ,
;

, -
} 	
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RoleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
IdentityUser  
>  !
Users" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} 