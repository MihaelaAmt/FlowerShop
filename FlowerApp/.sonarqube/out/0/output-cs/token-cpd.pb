à
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\ApplicationUser.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser# /
{ 
public		 
DateTime		 
	Birthdate		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} „
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\Auth\FlowerShopClaimTypes.cs
	namespace 	
	FlowerApp
 
. 
Auth 
{ 
public 

class  
FlowerShopClaimTypes %
{ 
public		 
static		 
List		 
<		 
string		 !
>		! "

ClaimsList		# -
{		. /
get		0 3
;		3 4
set		5 8
;		8 9
}		: ;
=		< =
new		> A
List		B F
<		F G
string		G M
>		M N
{		O P
$str		Q `
,		` a
$str		b n
,		n o
$str			p Ç
}
		É Ñ
;
		Ñ Ö
}

 
} °
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\AdminMenuItem.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
	AdminMenu 
: 
ViewComponent *
{ 
public		  
IViewComponentResult		 #
Invoke		$ *
(		* +
)		+ ,
{

 	
var 
	menuItems 
= 
new 
List  $
<$ %
AdminMenuItem% 2
>2 3
{4 5
new6 9
AdminMenuItem: G
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem "
{ 
DisplayValue  
=! "
$str# 4
,4 5
ActionValue 
=  !
$str" 2
} 
, 
new 
AdminMenuItem #
{ 
DisplayValue  
=! "
$str# 6
,6 7
ActionValue 
=  !
$str" 4
}   
,   
}!! 
;!! 
return$$ 
View$$ 
($$ 
	menuItems$$ !
)$$! "
;$$" #
}%% 	
}&& 
public)) 

class)) 
AdminMenuItem)) 
{** 
public,, 
string,, 
DisplayValue,, "
{,,# $
get,,% (
;,,( )
set,,* -
;,,- .
},,/ 0
public// 
string// 
ActionValue// !
{//" #
get//$ '
;//' (
set//) ,
;//, -
}//. /
}00 
}11 ‹	
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\CategoryMenu.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
CategoryMenu 
: 
ViewComponent  -
{		 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
CategoryMenu 
( 
ICategoryRepository /
categoryRepository0 B
)B C
{ 	
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 

categories 
= 
_categoryRepository 0
.0 1

Categories1 ;
.; <
OrderBy< C
(C D
cD E
=>F H
cI J
.J K
CategoryNameK W
)W X
;X Y
return 
View 
( 

categories "
)" #
;# $
} 	
} 
} €
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Components\ShoppingCartSummary.cs
	namespace 	
	FlowerApp
 
. 

Components 
{ 
public 

class 
ShoppingCartSummary $
:% &
ViewComponent' 4
{		 
private

 
readonly

 
ShoppingCart

 %
_shoppingCart

& 3
;

3 4
public 
ShoppingCartSummary "
(" #
ShoppingCart# /
shoppingCart0 <
)< =
{ 	
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public  
IViewComponentResult #
Invoke$ *
(* +
)+ ,
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var 
shoppingViewModel !
=" #
new$ '!
ShoppingCartViewModel( =
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return   
View   
(   
shoppingViewModel   )
)  ) *
;  * +
}!! 	
}"" 
}## –1
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AccountController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
,I J
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[ 	
AllowAnonymous	 
] 
public 
IActionResult 
Login "
(" #
string# )
	returnUrl* 3
)3 4
{ 	
return   
View   
(   
new   
LoginViewModel   *
{!! 
	ReturnUrl"" 
="" 
	returnUrl"" %
}## 
)## 
;## 
}$$ 	
['' 	
HttpPost''	 
]'' 
[** 	
AllowAnonymous**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
Login++) .
(++. /
LoginViewModel++/ =
loginViewModel++> L
)++L M
{,, 	
if-- 
(-- 
!-- 

ModelState-- 
.-- 
IsValid-- #
)--# $
return.. 
View.. 
(.. 
loginViewModel.. *
)..* +
;..+ ,
var00 
user00 
=00 
await00 
_userManager00 )
.00) *
FindByNameAsync00* 9
(009 :
loginViewModel00: H
.00H I
UserName00I Q
)00Q R
;00R S
if22 
(22 
user22 
!=22 
null22 
)22 
{33 
var55 
result55 
=55 
await55 "
_signInManager55# 1
.551 2
PasswordSignInAsync552 E
(55E F
user55F J
,55J K
loginViewModel55L Z
.55Z [
Password55[ c
,55c d
false55e j
,55j k
false55l q
)55q r
;55r s
if88 
(88 
result88 
.88 
	Succeeded88 $
)88$ %
{99 
if;; 
(;; 
string;; 
.;; 
IsNullOrEmpty;; ,
(;;, -
loginViewModel;;- ;
.;;; <
	ReturnUrl;;< E
);;E F
);;F G
return<< 
RedirectToAction<< /
(<</ 0
$str<<0 7
,<<7 8
$str<<9 ?
)<<? @
;<<@ A
return>> 
Redirect>> #
(>># $
loginViewModel>>$ 2
.>>2 3
	ReturnUrl>>3 <
)>>< =
;>>= >
}?? 
}@@ 

ModelStateBB 
.BB 
AddModelErrorBB $
(BB$ %
$strBB% '
,BB' (
$strBB) F
)BBF G
;BBG H
returnDD 
ViewDD 
(DD 
loginViewModelDD &
)DD& '
;DD' (
}EE 	
[HH 	
AllowAnonymousHH	 
]HH 
publicII 
IActionResultII 
RegisterII %
(II% &
)II& '
{JJ 	
returnKK 
ViewKK 
(KK 
)KK 
;KK 
}LL 	
[OO 	
HttpPostOO	 
]OO 
[PP 	$
ValidateAntiForgeryTokenPP	 !
]PP! "
[QQ 	
AllowAnonymousQQ	 
]QQ 
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' (
RegisterRR) 1
(RR1 2
LoginViewModelRR2 @
loginViewModelRRA O
)RRO P
{SS 	
ifTT 
(TT 

ModelStateTT 
.TT 
IsValidTT "
)TT" #
{UU 
varWW 
userWW 
=WW 
newWW 
ApplicationUserWW .
{WW/ 0
UserNameWW1 9
=WW: ;
loginViewModelWW< J
.WWJ K
UserNameWWK S
}WWT U
;WWU V
varXX 
resultXX 
=XX 
awaitXX "
_userManagerXX# /
.XX/ 0
CreateAsyncXX0 ;
(XX; <
userXX< @
,XX@ A
loginViewModelXXB P
.XXP Q
PasswordXXQ Y
)XXY Z
;XXZ [
if[[ 
([[ 
result[[ 
.[[ 
	Succeeded[[ $
)[[$ %
{\\ 
return]] 
RedirectToAction]] +
(]]+ ,
$str]], 3
,]]3 4
$str]]5 ;
)]]; <
;]]< =
}^^ 
}__ 

ModelStatebb 
.bb 
AddModelErrorbb $
(bb$ %
$strbb% '
,bb' (
$strbb) G
)bbG H
;bbH I
returncc 
Viewcc 
(cc 
loginViewModelcc &
)cc& '
;cc' (
}dd 	
[hh 	
HttpPosthh	 
]hh 
publicjj 
asyncjj 
Taskjj 
<jj 
IActionResultjj '
>jj' (
Logoutjj) /
(jj/ 0
)jj0 1
{kk 	
awaitll 
_signInManagerll  
.ll  !
SignOutAsyncll! -
(ll- .
)ll. /
;ll/ 0
returnnn 
RedirectToActionnn #
(nn# $
$strnn$ +
,nn+ ,
$strnn- 3
)nn3 4
;nn4 5
}oo 	
}pp 
}qq òπ
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\AdminController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class 
AdminController  
:! "

Controller# -
{ 
private 
const 
string 
UManagement (
=) *
$str+ ;
;; <
private 
const 
string 
RManagement (
=) *
$str+ ;
;; <
private 
const 
string 
FManagement (
=) *
$str+ =
;= >
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
AdminController 
( 
UserManager *
<* +
ApplicationUser+ :
>: ;
userManager< G
,G H
RoleManager 
< 
IdentityRole $
>$ %
roleManager& 1
,1 2
IFlowerRepository 
flowerRepository .
,. /
ICategoryRepository 
categoryRepository  2
)2 3
{ 	
_userManager 
= 
userManager &
;& '
_roleManager 
= 
roleManager &
;& '
_flowerRepository   
=   
flowerRepository    0
;  0 1
_categoryRepository!! 
=!!  !
categoryRepository!!" 4
;!!4 5
}"" 	
public%% 
IActionResult%% 
Index%% "
(%%" #
)%%# $
{&& 	
return'' 
View'' 
('' 
)'' 
;'' 
}(( 	
public** 
IActionResult** 
UserManagement** +
(**+ ,
)**, -
{++ 	
var,, 
users,, 
=,, 
_userManager,, $
.,,$ %
Users,,% *
;,,* +
return.. 
View.. 
(.. 
users.. 
).. 
;.. 
}// 	
public11 
IActionResult11 
AddUser11 $
(11$ %
)11% &
{22 	
return33 
View33 
(33 
)33 
;33 
}44 	
[66 	
HttpPost66	 
]66 
public77 
async77 
Task77 
<77 
IActionResult77 '
>77' (
AddUser77) 0
(770 1
AddUserViewModel771 A
addUserViewModel77B R
)77R S
{88 	
if99 
(99 
!99 

ModelState99 
.99 
IsValid99 #
)99# $
return:: 
View:: 
(:: 
addUserViewModel:: ,
)::, -
;::- .
var<< 
user<< 
=<< 
new<< 
ApplicationUser<< *
{== 
UserName>> 
=>> 
addUserViewModel>> +
.>>+ ,
UserName>>, 4
,>>4 5
Email?? 
=?? 
addUserViewModel?? (
.??( )
Email??) .
,??. /
	Birthdate@@ 
=@@ 
addUserViewModel@@ ,
.@@, -
	Birthdate@@- 6
,@@6 7
CityAA 
=AA 
addUserViewModelAA '
.AA' (
CityAA( ,
,AA, -
CountryBB 
=BB 
addUserViewModelBB *
.BB* +
CountryBB+ 2
}CC 
;CC 
IdentityResultEE 
resultEE !
=EE" #
awaitEE$ )
_userManagerEE* 6
.EE6 7
CreateAsyncEE7 B
(EEB C
userEEC G
,EEG H
addUserViewModelEEI Y
.EEY Z
PasswordEEZ b
)EEb c
;EEc d
ifGG 
(GG 
resultGG 
.GG 
	SucceededGG  
)GG  !
{HH 
returnII 
RedirectToActionII '
(II' (
UManagementII( 3
,II3 4
_userManagerII5 A
.IIA B
UsersIIB G
)IIG H
;IIH I
}JJ 
foreachLL 
(LL 
IdentityErrorLL "
errorLL# (
inLL) +
resultLL, 2
.LL2 3
ErrorsLL3 9
)LL9 :
{MM 

ModelStateNN 
.NN 
AddModelErrorNN (
(NN( )
$strNN) +
,NN+ ,
errorNN- 2
.NN2 3
DescriptionNN3 >
)NN> ?
;NN? @
}OO 
returnPP 
ViewPP 
(PP 
addUserViewModelPP (
)PP( )
;PP) *
}QQ 	
publicSS 
asyncSS 
TaskSS 
<SS 
IActionResultSS '
>SS' (
EditUserSS) 1
(SS1 2
stringSS2 8
idSS9 ;
)SS; <
{TT 	
varUU 
userUU 
=UU 
awaitUU 
_userManagerUU )
.UU) *
FindByIdAsyncUU* 7
(UU7 8
idUU8 :
)UU: ;
;UU; <
ifWW 
(WW 
userWW 
==WW 
nullWW 
)WW 
returnXX 
RedirectToActionXX '
(XX' (
UManagementXX( 3
,XX3 4
_userManagerXX5 A
.XXA B
UsersXXB G
)XXG H
;XXH I
varYY 
claimsYY 
=YY 
awaitYY 
_userManagerYY +
.YY+ ,
GetClaimsAsyncYY, :
(YY: ;
userYY; ?
)YY? @
;YY@ A
varZZ 
vmZZ 
=ZZ 
newZZ 
EditUserViewModelZZ *
{[[ 
Id\\ 
=\\ 
user\\ 
.\\ 
Id\\ 
,\\ 
Email]] 
=]] 
user]] 
.]] 
Email]] "
,]]" #
UserName^^ 
=^^ 
user^^ 
.^^  
UserName^^  (
,^^( )

UserClaims__ 
=__ 
claims__ #
.__# $
Select__$ *
(__* +
c__+ ,
=>__- /
c__0 1
.__1 2
Value__2 7
)__7 8
.__8 9
ToList__9 ?
(__? @
)__@ A
}`` 
;`` 
returnbb 
Viewbb 
(bb 
vmbb 
)bb 
;bb 
}cc 	
[ee 	
HttpPostee	 
]ee 
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' (
EditUserff) 1
(ff1 2
EditUserViewModelff2 C
editUserViewModelffD U
)ffU V
{gg 	
varhh 
userhh 
=hh 
awaithh 
_userManagerhh )
.hh) *
FindByIdAsynchh* 7
(hh7 8
editUserViewModelhh8 I
.hhI J
IdhhJ L
)hhL M
;hhM N
ifjj 
(jj 
userjj 
!=jj 
nulljj 
)jj 
{kk 
userll 
.ll 
Emailll 
=ll 
editUserViewModelll .
.ll. /
Emailll/ 4
;ll4 5
usermm 
.mm 
UserNamemm 
=mm 
editUserViewModelmm  1
.mm1 2
UserNamemm2 :
;mm: ;
usernn 
.nn 
	Birthdatenn 
=nn  
editUserViewModelnn! 2
.nn2 3
	Birthdatenn3 <
;nn< =
useroo 
.oo 
Cityoo 
=oo 
editUserViewModeloo -
.oo- .
Cityoo. 2
;oo2 3
userpp 
.pp 
Countrypp 
=pp 
editUserViewModelpp 0
.pp0 1
Countrypp1 8
;pp8 9
varrr 
resultrr 
=rr 
awaitrr "
_userManagerrr# /
.rr/ 0
UpdateAsyncrr0 ;
(rr; <
userrr< @
)rr@ A
;rrA B
iftt 
(tt 
resulttt 
.tt 
	Succeededtt $
)tt$ %
returnuu 
RedirectToActionuu +
(uu+ ,
UManagementuu, 7
,uu7 8
_userManageruu9 E
.uuE F
UsersuuF K
)uuK L
;uuL M

ModelStateww 
.ww 
AddModelErrorww (
(ww( )
$strww) +
,ww+ ,
$strww- V
)wwV W
;wwW X
returnyy 
Viewyy 
(yy 
editUserViewModelyy -
)yy- .
;yy. /
}zz 
return|| 
RedirectToAction|| #
(||# $
UManagement||$ /
,||/ 0
_userManager||1 =
.||= >
Users||> C
)||C D
;||D E
}}} 	
[ 	
HttpPost	 
] 
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
IActionResult
ÄÄ '
>
ÄÄ' (

DeleteUser
ÄÄ) 3
(
ÄÄ3 4
string
ÄÄ4 :
userId
ÄÄ; A
)
ÄÄA B
{
ÅÅ 	
var
ÇÇ 
user
ÇÇ 
=
ÇÇ 
await
ÇÇ 
_userManager
ÇÇ )
.
ÇÇ) *
FindByIdAsync
ÇÇ* 7
(
ÇÇ7 8
userId
ÇÇ8 >
)
ÇÇ> ?
;
ÇÇ? @
if
ÑÑ 
(
ÑÑ 
user
ÑÑ 
!=
ÑÑ 
null
ÑÑ 
)
ÑÑ 
{
ÖÖ 
IdentityResult
ÜÜ 
result
ÜÜ %
=
ÜÜ& '
await
ÜÜ( -
_userManager
ÜÜ. :
.
ÜÜ: ;
DeleteAsync
ÜÜ; F
(
ÜÜF G
user
ÜÜG K
)
ÜÜK L
;
ÜÜL M
if
áá 
(
áá 
result
áá 
.
áá 
	Succeeded
áá $
)
áá$ %
return
àà 
RedirectToAction
àà +
(
àà+ ,
UManagement
àà, 7
)
àà7 8
;
àà8 9
else
ââ 

ModelState
ää 
.
ää 
AddModelError
ää ,
(
ää, -
$str
ää- /
,
ää/ 0
$str
ää1 a
)
ääa b
;
ääb c
}
ãã 
else
åå 
{
çç 

ModelState
éé 
.
éé 
AddModelError
éé (
(
éé( )
$str
éé) +
,
éé+ ,
$str
éé- G
)
ééG H
;
ééH I
}
èè 
return
êê 
View
êê 
(
êê 
UManagement
êê #
,
êê# $
_userManager
êê% 1
.
êê1 2
Users
êê2 7
)
êê7 8
;
êê8 9
}
ëë 	
public
îî 
IActionResult
îî 
RoleManagement
îî +
(
îî+ ,
)
îî, -
{
ïï 	
var
ññ 
roles
ññ 
=
ññ 
_roleManager
ññ $
.
ññ$ %
Roles
ññ% *
;
ññ* +
return
óó 
View
óó 
(
óó 
roles
óó 
)
óó 
;
óó 
}
òò 	
public
öö 
IActionResult
öö 

AddNewRole
öö '
(
öö' (
)
öö( )
=>
öö* ,
View
öö- 1
(
öö1 2
)
öö2 3
;
öö3 4
[
úú 	
HttpPost
úú	 
]
úú 
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IActionResult
ùù '
>
ùù' (

AddNewRole
ùù) 3
(
ùù3 4
AddRoleViewModel
ùù4 D
addRoleViewModel
ùùE U
)
ùùU V
{
ûû 	
if
†† 
(
†† 
!
†† 

ModelState
†† 
.
†† 
IsValid
†† #
)
††# $
return
°° 
View
°° 
(
°° 
addRoleViewModel
°° ,
)
°°, -
;
°°- .
var
££ 
role
££ 
=
££ 
new
££ 
IdentityRole
££ '
{
§§ 
Name
•• 
=
•• 
addRoleViewModel
•• '
.
••' (
RoleName
••( 0
}
¶¶ 
;
¶¶ 
IdentityResult
®® 
result
®® !
=
®®" #
await
®®$ )
_roleManager
®®* 6
.
®®6 7
CreateAsync
®®7 B
(
®®B C
role
®®C G
)
®®G H
;
®®H I
if
™™ 
(
™™ 
result
™™ 
.
™™ 
	Succeeded
™™  
)
™™  !
{
´´ 
return
¨¨ 
RedirectToAction
¨¨ '
(
¨¨' (
RManagement
¨¨( 3
,
¨¨3 4
_roleManager
¨¨5 A
.
¨¨A B
Roles
¨¨B G
)
¨¨G H
;
¨¨H I
}
≠≠ 
foreach
ØØ 
(
ØØ 
IdentityError
ØØ "
error
ØØ# (
in
ØØ) +
result
ØØ, 2
.
ØØ2 3
Errors
ØØ3 9
)
ØØ9 :
{
∞∞ 

ModelState
±± 
.
±± 
AddModelError
±± (
(
±±( )
$str
±±) +
,
±±+ ,
error
±±- 2
.
±±2 3
Description
±±3 >
)
±±> ?
;
±±? @
}
≤≤ 
return
≥≥ 
View
≥≥ 
(
≥≥ 
addRoleViewModel
≥≥ (
)
≥≥( )
;
≥≥) *
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
IActionResult
∂∂ '
>
∂∂' (
EditRole
∂∂) 1
(
∂∂1 2
string
∂∂2 8
id
∂∂9 ;
)
∂∂; <
{
∑∑ 	
var
∏∏ 
role
∏∏ 
=
∏∏ 
await
∏∏ 
_roleManager
∏∏ )
.
∏∏) *
FindByIdAsync
∏∏* 7
(
∏∏7 8
id
∏∏8 :
)
∏∏: ;
;
∏∏; <
if
∫∫ 
(
∫∫ 
role
∫∫ 
==
∫∫ 
null
∫∫ 
)
∫∫ 
return
ªª 
RedirectToAction
ªª '
(
ªª' (
RManagement
ªª( 3
,
ªª3 4
_roleManager
ªª5 A
.
ªªA B
Roles
ªªB G
)
ªªG H
;
ªªH I
var
ΩΩ 
editRoleViewModel
ΩΩ !
=
ΩΩ" #
new
ΩΩ$ '
EditRoleViewModel
ΩΩ( 9
{
ææ 
Id
øø 
=
øø 
role
øø 
.
øø 
Id
øø 
,
øø 
RoleName
¿¿ 
=
¿¿ 
role
¿¿ 
.
¿¿  
Name
¿¿  $
,
¿¿$ %
Users
¡¡ 
=
¡¡ 
new
¡¡ 
List
¡¡  
<
¡¡  !
string
¡¡! '
>
¡¡' (
(
¡¡( )
)
¡¡) *
}
¬¬ 
;
¬¬ 
foreach
≈≈ 
(
≈≈ 
var
≈≈ 
user
≈≈ 
in
≈≈  
_userManager
≈≈! -
.
≈≈- .
Users
≈≈. 3
)
≈≈3 4
{
∆∆ 
if
«« 
(
«« 
await
«« 
_userManager
«« &
.
««& '
IsInRoleAsync
««' 4
(
««4 5
user
««5 9
,
««9 :
role
««; ?
.
««? @
Name
««@ D
)
««D E
)
««E F
editRoleViewModel
»» %
.
»»% &
Users
»»& +
.
»»+ ,
Add
»», /
(
»»/ 0
user
»»0 4
.
»»4 5
UserName
»»5 =
)
»»= >
;
»»> ?
}
…… 
return
ÀÀ 
View
ÀÀ 
(
ÀÀ 
editRoleViewModel
ÀÀ )
)
ÀÀ) *
;
ÀÀ* +
}
ÃÃ 	
[
ŒŒ 	
HttpPost
ŒŒ	 
]
ŒŒ 
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
IActionResult
œœ '
>
œœ' (
EditRole
œœ) 1
(
œœ1 2
EditRoleViewModel
œœ2 C
editRoleViewModel
œœD U
)
œœU V
{
–– 	
var
—— 
role
—— 
=
—— 
await
—— 
_roleManager
—— )
.
——) *
FindByIdAsync
——* 7
(
——7 8
editRoleViewModel
——8 I
.
——I J
Id
——J L
)
——L M
;
——M N
if
”” 
(
”” 
role
”” 
!=
”” 
null
”” 
)
”” 
{
‘‘ 
role
’’ 
.
’’ 
Name
’’ 
=
’’ 
editRoleViewModel
’’ -
.
’’- .
RoleName
’’. 6
;
’’6 7
var
◊◊ 
result
◊◊ 
=
◊◊ 
await
◊◊ "
_roleManager
◊◊# /
.
◊◊/ 0
UpdateAsync
◊◊0 ;
(
◊◊; <
role
◊◊< @
)
◊◊@ A
;
◊◊A B
if
ŸŸ 
(
ŸŸ 
result
ŸŸ 
.
ŸŸ 
	Succeeded
ŸŸ $
)
ŸŸ$ %
return
⁄⁄ 
RedirectToAction
⁄⁄ +
(
⁄⁄+ ,
RManagement
⁄⁄, 7
,
⁄⁄7 8
_roleManager
⁄⁄9 E
.
⁄⁄E F
Roles
⁄⁄F K
)
⁄⁄K L
;
⁄⁄L M

ModelState
‹‹ 
.
‹‹ 
AddModelError
‹‹ (
(
‹‹( )
$str
‹‹) +
,
‹‹+ ,
$str
‹‹- V
)
‹‹V W
;
‹‹W X
return
ﬁﬁ 
View
ﬁﬁ 
(
ﬁﬁ 
editRoleViewModel
ﬁﬁ -
)
ﬁﬁ- .
;
ﬁﬁ. /
}
ﬂﬂ 
return
·· 
RedirectToAction
·· #
(
··# $
RManagement
··$ /
,
··/ 0
_roleManager
··1 =
.
··= >
Roles
··> C
)
··C D
;
··D E
}
‚‚ 	
[
‰‰ 	
HttpPost
‰‰	 
]
‰‰ 
public
ÂÂ 
async
ÂÂ 
Task
ÂÂ 
<
ÂÂ 
IActionResult
ÂÂ '
>
ÂÂ' (

DeleteRole
ÂÂ) 3
(
ÂÂ3 4
string
ÂÂ4 :
id
ÂÂ; =
)
ÂÂ= >
{
ÊÊ 	
IdentityRole
ÁÁ 
role
ÁÁ 
=
ÁÁ 
await
ÁÁ  %
_roleManager
ÁÁ& 2
.
ÁÁ2 3
FindByIdAsync
ÁÁ3 @
(
ÁÁ@ A
id
ÁÁA C
)
ÁÁC D
;
ÁÁD E
if
ËË 
(
ËË 
role
ËË 
!=
ËË 
null
ËË 
)
ËË 
{
ÈÈ 
var
ÍÍ 
result
ÍÍ 
=
ÍÍ 
await
ÍÍ "
_roleManager
ÍÍ# /
.
ÍÍ/ 0
DeleteAsync
ÍÍ0 ;
(
ÍÍ; <
role
ÍÍ< @
)
ÍÍ@ A
;
ÍÍA B
if
ÎÎ 
(
ÎÎ 
result
ÎÎ 
.
ÎÎ 
	Succeeded
ÎÎ $
)
ÎÎ$ %
return
ÏÏ 
RedirectToAction
ÏÏ +
(
ÏÏ+ ,
RManagement
ÏÏ, 7
,
ÏÏ7 8
_roleManager
ÏÏ9 E
.
ÏÏE F
Roles
ÏÏF K
)
ÏÏK L
;
ÏÏL M

ModelState
ÌÌ 
.
ÌÌ 
AddModelError
ÌÌ (
(
ÌÌ( )
$str
ÌÌ) +
,
ÌÌ+ ,
$str
ÌÌ- ]
)
ÌÌ] ^
;
ÌÌ^ _
}
ÓÓ 
else
ÔÔ 
{
 

ModelState
ÒÒ 
.
ÒÒ 
AddModelError
ÒÒ (
(
ÒÒ( )
$str
ÒÒ) +
,
ÒÒ+ ,
$str
ÒÒ- H
)
ÒÒH I
;
ÒÒI J
}
ÚÚ 
return
ÛÛ 
View
ÛÛ 
(
ÛÛ 
RManagement
ÛÛ #
,
ÛÛ# $
_roleManager
ÛÛ% 1
.
ÛÛ1 2
Roles
ÛÛ2 7
)
ÛÛ7 8
;
ÛÛ8 9
}
ÙÙ 	
public
¯¯ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 
IActionResult
¯¯ '
>
¯¯' (
AddUserToRole
¯¯) 6
(
¯¯6 7
string
¯¯7 =
roleId
¯¯> D
)
¯¯D E
{
˘˘ 	
var
˙˙ 
role
˙˙ 
=
˙˙ 
await
˙˙ 
_roleManager
˙˙ )
.
˙˙) *
FindByIdAsync
˙˙* 7
(
˙˙7 8
roleId
˙˙8 >
)
˙˙> ?
;
˙˙? @
if
¸¸ 
(
¸¸ 
role
¸¸ 
==
¸¸ 
null
¸¸ 
)
¸¸ 
return
˝˝ 
RedirectToAction
˝˝ '
(
˝˝' (
RManagement
˝˝( 3
,
˝˝3 4
_roleManager
˝˝5 A
.
˝˝A B
Roles
˝˝B G
)
˝˝G H
;
˝˝H I
var
ˇˇ $
addUserToRoleViewModel
ˇˇ &
=
ˇˇ' (
new
ˇˇ) ,
UserRoleViewModel
ˇˇ- >
{
ˇˇ? @
RoleId
ˇˇA G
=
ˇˇH I
role
ˇˇJ N
.
ˇˇN O
Id
ˇˇO Q
}
ˇˇR S
;
ˇˇS T
foreach
ÅÅ 
(
ÅÅ 
var
ÅÅ 
user
ÅÅ 
in
ÅÅ  
_userManager
ÅÅ! -
.
ÅÅ- .
Users
ÅÅ. 3
)
ÅÅ3 4
{
ÇÇ 
if
ÉÉ 
(
ÉÉ 
!
ÉÉ 
await
ÉÉ 
_userManager
ÉÉ '
.
ÉÉ' (
IsInRoleAsync
ÉÉ( 5
(
ÉÉ5 6
user
ÉÉ6 :
,
ÉÉ: ;
role
ÉÉ< @
.
ÉÉ@ A
Name
ÉÉA E
)
ÉÉE F
)
ÉÉF G
{
ÑÑ $
addUserToRoleViewModel
ÖÖ *
.
ÖÖ* +
Users
ÖÖ+ 0
.
ÖÖ0 1
Add
ÖÖ1 4
(
ÖÖ4 5
user
ÖÖ5 9
)
ÖÖ9 :
;
ÖÖ: ;
}
ÜÜ 
}
áá 
return
ââ 
View
ââ 
(
ââ $
addUserToRoleViewModel
ââ .
)
ââ. /
;
ââ/ 0
}
ää 	
[
åå 	
HttpPost
åå	 
]
åå 
public
çç 
async
çç 
Task
çç 
<
çç 
IActionResult
çç '
>
çç' (
AddUserToRole
çç) 6
(
çç6 7
UserRoleViewModel
çç7 H
userRoleViewModel
ççI Z
)
ççZ [
{
éé 	
var
èè 
user
èè 
=
èè 
await
èè 
_userManager
èè )
.
èè) *
FindByIdAsync
èè* 7
(
èè7 8
userRoleViewModel
èè8 I
.
èèI J
UserId
èèJ P
)
èèP Q
;
èèQ R
var
êê 
role
êê 
=
êê 
await
êê 
_roleManager
êê )
.
êê) *
FindByIdAsync
êê* 7
(
êê7 8
userRoleViewModel
êê8 I
.
êêI J
RoleId
êêJ P
)
êêP Q
;
êêQ R
var
íí 
result
íí 
=
íí 
await
íí 
_userManager
íí +
.
íí+ ,
AddToRoleAsync
íí, :
(
íí: ;
user
íí; ?
,
íí? @
role
ííA E
.
ííE F
Name
ííF J
)
ííJ K
;
ííK L
if
îî 
(
îî 
result
îî 
.
îî 
	Succeeded
îî  
)
îî  !
{
ïï 
return
ññ 
RedirectToAction
ññ '
(
ññ' (
RManagement
ññ( 3
,
ññ3 4
_roleManager
ññ5 A
.
ññA B
Roles
ññB G
)
ññG H
;
ññH I
}
óó 
foreach
ôô 
(
ôô 
IdentityError
ôô "
error
ôô# (
in
ôô) +
result
ôô, 2
.
ôô2 3
Errors
ôô3 9
)
ôô9 :
{
öö 

ModelState
õõ 
.
õõ 
AddModelError
õõ (
(
õõ( )
$str
õõ) +
,
õõ+ ,
error
õõ- 2
.
õõ2 3
Description
õõ3 >
)
õõ> ?
;
õõ? @
}
úú 
return
ûû 
View
ûû 
(
ûû 
userRoleViewModel
ûû )
)
ûû) *
;
ûû* +
}
üü 	
public
°° 
async
°° 
Task
°° 
<
°° 
IActionResult
°° '
>
°°' ( 
DeleteUserFromRole
°°) ;
(
°°; <
string
°°< B
roleId
°°C I
)
°°I J
{
¢¢ 	
var
££ 
role
££ 
=
££ 
await
££ 
_roleManager
££ )
.
££) *
FindByIdAsync
££* 7
(
££7 8
roleId
££8 >
)
££> ?
;
££? @
if
•• 
(
•• 
role
•• 
==
•• 
null
•• 
)
•• 
return
¶¶ 
RedirectToAction
¶¶ '
(
¶¶' (
RManagement
¶¶( 3
,
¶¶3 4
_roleManager
¶¶5 A
.
¶¶A B
Roles
¶¶B G
)
¶¶G H
;
¶¶H I
var
®® $
addUserToRoleViewModel
®® &
=
®®' (
new
®®) ,
UserRoleViewModel
®®- >
{
®®? @
RoleId
®®A G
=
®®H I
role
®®J N
.
®®N O
Id
®®O Q
}
®®R S
;
®®S T
foreach
™™ 
(
™™ 
var
™™ 
user
™™ 
in
™™  
_userManager
™™! -
.
™™- .
Users
™™. 3
)
™™3 4
{
´´ 
if
¨¨ 
(
¨¨ 
await
¨¨ 
_userManager
¨¨ &
.
¨¨& '
IsInRoleAsync
¨¨' 4
(
¨¨4 5
user
¨¨5 9
,
¨¨9 :
role
¨¨; ?
.
¨¨? @
Name
¨¨@ D
)
¨¨D E
)
¨¨E F
{
≠≠ $
addUserToRoleViewModel
ÆÆ *
.
ÆÆ* +
Users
ÆÆ+ 0
.
ÆÆ0 1
Add
ÆÆ1 4
(
ÆÆ4 5
user
ÆÆ5 9
)
ÆÆ9 :
;
ÆÆ: ;
}
ØØ 
}
∞∞ 
return
≤≤ 
View
≤≤ 
(
≤≤ $
addUserToRoleViewModel
≤≤ .
)
≤≤. /
;
≤≤/ 0
}
≥≥ 	
[
µµ 	
HttpPost
µµ	 
]
µµ 
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
IActionResult
∂∂ '
>
∂∂' ( 
DeleteUserFromRole
∂∂) ;
(
∂∂; <
UserRoleViewModel
∂∂< M
userRoleViewModel
∂∂N _
)
∂∂_ `
{
∑∑ 	
var
∏∏ 
user
∏∏ 
=
∏∏ 
await
∏∏ 
_userManager
∏∏ )
.
∏∏) *
FindByIdAsync
∏∏* 7
(
∏∏7 8
userRoleViewModel
∏∏8 I
.
∏∏I J
UserId
∏∏J P
)
∏∏P Q
;
∏∏Q R
var
ππ 
role
ππ 
=
ππ 
await
ππ 
_roleManager
ππ )
.
ππ) *
FindByIdAsync
ππ* 7
(
ππ7 8
userRoleViewModel
ππ8 I
.
ππI J
RoleId
ππJ P
)
ππP Q
;
ππQ R
var
ªª 
result
ªª 
=
ªª 
await
ªª 
_userManager
ªª +
.
ªª+ ,!
RemoveFromRoleAsync
ªª, ?
(
ªª? @
user
ªª@ D
,
ªªD E
role
ªªF J
.
ªªJ K
Name
ªªK O
)
ªªO P
;
ªªP Q
if
ΩΩ 
(
ΩΩ 
result
ΩΩ 
.
ΩΩ 
	Succeeded
ΩΩ  
)
ΩΩ  !
{
ææ 
return
øø 
RedirectToAction
øø '
(
øø' (
RManagement
øø( 3
,
øø3 4
_roleManager
øø5 A
.
øøA B
Roles
øøB G
)
øøG H
;
øøH I
}
¿¿ 
foreach
¬¬ 
(
¬¬ 
IdentityError
¬¬ "
error
¬¬# (
in
¬¬) +
result
¬¬, 2
.
¬¬2 3
Errors
¬¬3 9
)
¬¬9 :
{
√√ 

ModelState
ƒƒ 
.
ƒƒ 
AddModelError
ƒƒ (
(
ƒƒ( )
$str
ƒƒ) +
,
ƒƒ+ ,
error
ƒƒ- 2
.
ƒƒ2 3
Description
ƒƒ3 >
)
ƒƒ> ?
;
ƒƒ? @
}
≈≈ 
return
«« 
View
«« 
(
«« 
userRoleViewModel
«« )
)
««) *
;
««* +
}
»» 	
public
ÀÀ 
IActionResult
ÀÀ 
FlowerManagement
ÀÀ -
(
ÀÀ- .
)
ÀÀ. /
{
ÃÃ 	
var
ÕÕ 
	dbFlowers
ÕÕ 
=
ÕÕ 
_flowerRepository
ÕÕ -
.
ÕÕ- .
Flowers
ÕÕ. 5
;
ÕÕ5 6
List
œœ 
<
œœ 
FlowerViewModel
œœ  
>
œœ  !
flowers
œœ" )
=
œœ* +
new
œœ, /
List
œœ0 4
<
œœ4 5
FlowerViewModel
œœ5 D
>
œœD E
(
œœE F
)
œœF G
;
œœG H
foreach
—— 
(
—— 
var
—— 
dbFlower
—— !
in
——" $
	dbFlowers
——% .
)
——. /
{
““ 
flowers
”” 
.
”” 
Add
”” 
(
”” *
MapDbFlowerToFlowerViewModel
”” 8
(
””8 9
dbFlower
””9 A
)
””A B
)
””B C
;
””C D
}
‘‘ 
return
÷÷ 
View
÷÷ 
(
÷÷ 
flowers
÷÷ 
)
÷÷  
;
÷÷  !
}
◊◊ 	
public
ŸŸ 
IActionResult
ŸŸ 
	AddFlower
ŸŸ &
(
ŸŸ& '
)
ŸŸ' (
{
⁄⁄ 	
ViewData
€€ 
[
€€ 
$str
€€ !
]
€€! "
=
€€# $!
_categoryRepository
€€% 8
.
€€8 9

Categories
€€9 C
.
€€C D
ToList
€€D J
(
€€J K
)
€€K L
;
€€L M
return
›› 
View
›› 
(
›› 
)
›› 
;
›› 
}
ﬁﬁ 	
[
‡‡ 	
HttpPost
‡‡	 
]
‡‡ 
public
·· 
IActionResult
·· 
	AddFlower
·· &
(
··& ' 
AddFlowerViewModel
··' 9 
addFlowerViewModel
··: L
)
··L M
{
‚‚ 	
if
„„ 
(
„„ 
!
„„ 

ModelState
„„ 
.
„„ 
IsValid
„„ #
)
„„# $
return
‰‰ 
View
‰‰ 
(
‰‰  
addFlowerViewModel
‰‰ .
)
‰‰. /
;
‰‰/ 0
var
ÊÊ 
flower
ÊÊ 
=
ÊÊ 
new
ÊÊ 
Flower
ÊÊ #
{
ÁÁ 
Name
ËË 
=
ËË  
addFlowerViewModel
ËË )
.
ËË) *
Name
ËË* .
,
ËË. /
ShortDescription
ÈÈ  
=
ÈÈ! " 
addFlowerViewModel
ÈÈ# 5
.
ÈÈ5 6
ShortDescription
ÈÈ6 F
,
ÈÈF G
LongDescription
ÍÍ 
=
ÍÍ  ! 
addFlowerViewModel
ÍÍ" 4
.
ÍÍ4 5
LongDescription
ÍÍ5 D
,
ÍÍD E
Price
ÎÎ 
=
ÎÎ  
addFlowerViewModel
ÎÎ *
.
ÎÎ* +
Price
ÎÎ+ 0
,
ÎÎ0 1
ImageUrl
ÏÏ 
=
ÏÏ  
addFlowerViewModel
ÏÏ -
.
ÏÏ- .
ImageUrl
ÏÏ. 6
,
ÏÏ6 7
ImageThumbnailUrl
ÌÌ !
=
ÌÌ" # 
addFlowerViewModel
ÌÌ$ 6
.
ÌÌ6 7
ImageThumbnailUrl
ÌÌ7 H
,
ÌÌH I"
IsFlowerPresentation
ÓÓ $
=
ÓÓ% & 
addFlowerViewModel
ÓÓ' 9
.
ÓÓ9 :"
IsFlowerPresentation
ÓÓ: N
,
ÓÓN O
InStock
ÔÔ 
=
ÔÔ  
addFlowerViewModel
ÔÔ ,
.
ÔÔ, -
InStock
ÔÔ- 4
,
ÔÔ4 5

CategoryId
 
=
  
addFlowerViewModel
 /
.
/ 0

CategoryId
0 :
,
: ;
}
ÚÚ 
;
ÚÚ 
_flowerRepository
ÙÙ 
.
ÙÙ 
	AddFlower
ÙÙ '
(
ÙÙ' (
flower
ÙÙ( .
)
ÙÙ. /
;
ÙÙ/ 0
return
ˆˆ 
RedirectToAction
ˆˆ #
(
ˆˆ# $
FManagement
ˆˆ$ /
,
ˆˆ/ 0
_flowerRepository
ˆˆ1 B
.
ˆˆB C
Flowers
ˆˆC J
)
ˆˆJ K
;
ˆˆK L
}
˜˜ 	
[
˘˘ 	
HttpPost
˘˘	 
]
˘˘ 
public
˙˙ 
IActionResult
˙˙ 
DeleteFlower
˙˙ )
(
˙˙) *
int
˙˙* -
id
˙˙. 0
)
˙˙0 1
{
˚˚ 	
Flower
¸¸ 
flower
¸¸ 
=
¸¸ 
_flowerRepository
¸¸ -
.
¸¸- .
GetFlowerById
¸¸. ;
(
¸¸; <
id
¸¸< >
)
¸¸> ?
;
¸¸? @
if
˝˝ 
(
˝˝ 
flower
˝˝ 
!=
˝˝ 
null
˝˝ 
)
˝˝ 
{
˛˛ 
_flowerRepository
ˇˇ !
.
ˇˇ! "
DeleteFlower
ˇˇ" .
(
ˇˇ. /
flower
ˇˇ/ 5
)
ˇˇ5 6
;
ˇˇ6 7
return
ÅÅ 
View
ÅÅ 
(
ÅÅ 
FManagement
ÅÅ '
,
ÅÅ' (
_flowerRepository
ÅÅ) :
.
ÅÅ: ; 
FlowersAsViewModel
ÅÅ; M
)
ÅÅM N
;
ÅÅN O
}
ÇÇ 
else
ÉÉ 
{
ÑÑ 

ModelState
ÖÖ 
.
ÖÖ 
AddModelError
ÖÖ (
(
ÖÖ( )
$str
ÖÖ) +
,
ÖÖ+ ,
$str
ÖÖ- J
)
ÖÖJ K
;
ÖÖK L
}
ÜÜ 
return
àà 
View
àà 
(
àà 
FManagement
àà #
,
àà# $
_flowerRepository
àà% 6
.
àà6 7 
FlowersAsViewModel
àà7 I
)
ààI J
;
ààJ K
}
ââ 	
public
ãã 
IActionResult
ãã 

EditFlower
ãã '
(
ãã' (
int
ãã( +
id
ãã, .
)
ãã. /
{
åå 	
ViewData
çç 
[
çç 
$str
çç !
]
çç! "
=
çç# $!
_categoryRepository
çç% 8
.
çç8 9

Categories
çç9 C
.
ççC D
ToList
ççD J
(
ççJ K
)
ççK L
;
ççL M
var
èè 
flower
èè 
=
èè 
_flowerRepository
èè *
.
èè* +
GetFlowerById
èè+ 8
(
èè8 9
id
èè9 ;
)
èè; <
;
èè< =
if
ëë 
(
ëë 
flower
ëë 
==
ëë 
null
ëë 
)
ëë 
return
íí 
View
íí 
(
íí 
FManagement
íí '
,
íí' (
_flowerRepository
íí) :
.
íí: ; 
FlowersAsViewModel
íí; M
)
ííM N
;
ííN O
var
îî !
editFlowerViewModel
îî #
=
îî$ %
new
îî& )!
EditFlowerViewModel
îî* =
{
ïï 
Name
ññ 
=
ññ 
flower
ññ 
.
ññ 
Name
ññ "
,
ññ" #
ShortDescription
óó  
=
óó! "
flower
óó# )
.
óó) *
ShortDescription
óó* :
,
óó: ;
LongDescription
òò 
=
òò  !
flower
òò" (
.
òò( )
LongDescription
òò) 8
,
òò8 9
Price
ôô 
=
ôô 
flower
ôô 
.
ôô 
Price
ôô $
,
ôô$ %
ImageUrl
öö 
=
öö 
flower
öö !
.
öö! "
ImageUrl
öö" *
,
öö* +
ImageThumbnailUrl
õõ !
=
õõ" #
flower
õõ$ *
.
õõ* +
ImageThumbnailUrl
õõ+ <
,
õõ< ="
IsFlowerPresentation
úú $
=
úú% &
flower
úú' -
.
úú- ."
IsFlowerPresentation
úú. B
,
úúB C
InStock
ùù 
=
ùù 
flower
ùù  
.
ùù  !
InStock
ùù! (
,
ùù( )

CategoryId
ûû 
=
ûû 
flower
ûû #
.
ûû# $

CategoryId
ûû$ .
}
üü 
;
üü 
return
°° 
View
°° 
(
°° !
editFlowerViewModel
°° +
)
°°+ ,
;
°°, -
}
¢¢ 	
[
§§ 	
HttpPost
§§	 
]
§§ 
public
•• 
IActionResult
•• 

EditFlower
•• '
(
••' (!
EditFlowerViewModel
••( ;!
editFlowerViewModel
••< O
)
••O P
{
¶¶ 	
ViewData
ßß 
[
ßß 
$str
ßß !
]
ßß! "
=
ßß# $!
_categoryRepository
ßß% 8
.
ßß8 9

Categories
ßß9 C
.
ßßC D
ToList
ßßD J
(
ßßJ K
)
ßßK L
;
ßßL M
var
©© 
flower
©© 
=
©© 
_flowerRepository
©© *
.
©©* +
GetFlowerById
©©+ 8
(
©©8 9!
editFlowerViewModel
©©9 L
.
©©L M
Id
©©M O
)
©©O P
;
©©P Q
if
´´ 
(
´´ 
flower
´´ 
!=
´´ 
null
´´ 
)
´´ 
{
¨¨ 
flower
≠≠ 
.
≠≠ 
Name
≠≠ 
=
≠≠ !
editFlowerViewModel
≠≠ 1
.
≠≠1 2
Name
≠≠2 6
;
≠≠6 7
flower
ÆÆ 
.
ÆÆ 
ShortDescription
ÆÆ '
=
ÆÆ( )!
editFlowerViewModel
ÆÆ* =
.
ÆÆ= >
ShortDescription
ÆÆ> N
;
ÆÆN O
flower
ØØ 
.
ØØ 
LongDescription
ØØ &
=
ØØ' (!
editFlowerViewModel
ØØ) <
.
ØØ< =
LongDescription
ØØ= L
;
ØØL M
flower
∞∞ 
.
∞∞ 
Price
∞∞ 
=
∞∞ !
editFlowerViewModel
∞∞ 2
.
∞∞2 3
Price
∞∞3 8
;
∞∞8 9
flower
±± 
.
±± 
ImageUrl
±± 
=
±±  !!
editFlowerViewModel
±±" 5
.
±±5 6
ImageUrl
±±6 >
;
±±> ?
flower
≤≤ 
.
≤≤ 
ImageThumbnailUrl
≤≤ (
=
≤≤) *!
editFlowerViewModel
≤≤+ >
.
≤≤> ?
ImageThumbnailUrl
≤≤? P
;
≤≤P Q
flower
≥≥ 
.
≥≥ "
IsFlowerPresentation
≥≥ +
=
≥≥, -!
editFlowerViewModel
≥≥. A
.
≥≥A B"
IsFlowerPresentation
≥≥B V
;
≥≥V W
flower
¥¥ 
.
¥¥ 
InStock
¥¥ 
=
¥¥  !
editFlowerViewModel
¥¥! 4
.
¥¥4 5
InStock
¥¥5 <
;
¥¥< =
flower
µµ 
.
µµ 

CategoryId
µµ !
=
µµ" #!
editFlowerViewModel
µµ$ 7
.
µµ7 8

CategoryId
µµ8 B
;
µµB C
_flowerRepository
∑∑ !
.
∑∑! "
UpdateFlower
∑∑" .
(
∑∑. /
flower
∑∑/ 5
)
∑∑5 6
;
∑∑6 7
return
ππ 
RedirectToAction
ππ '
(
ππ' (
FManagement
ππ( 3
,
ππ3 4
_flowerRepository
ππ5 F
.
ππF G 
FlowersAsViewModel
ππG Y
)
ππY Z
;
ππZ [
}
∫∫ 
return
ºº 
RedirectToAction
ºº #
(
ºº# $
FManagement
ºº$ /
,
ºº/ 0
_flowerRepository
ºº1 B
.
ººB C 
FlowersAsViewModel
ººC U
)
ººU V
;
ººV W
}
ΩΩ 	
private
øø 
FlowerViewModel
øø *
MapDbFlowerToFlowerViewModel
øø  <
(
øø< =
Flower
øø= C
dbFlower
øøD L
)
øøL M
{
¿¿ 	
return
¡¡ 
new
¡¡ 
FlowerViewModel
¡¡ &
{
¬¬ 
FlowerId
√√ 
=
√√ 
dbFlower
√√ #
.
√√# $
FlowerId
√√$ ,
,
√√, -
Name
ƒƒ 
=
ƒƒ 
dbFlower
ƒƒ 
.
ƒƒ  
Name
ƒƒ  $
,
ƒƒ$ %
Price
≈≈ 
=
≈≈ 
dbFlower
≈≈  
.
≈≈  !
Price
≈≈! &
,
≈≈& '
ShortDescription
∆∆  
=
∆∆! "
dbFlower
∆∆# +
.
∆∆+ ,
ShortDescription
∆∆, <
,
∆∆< =
ImageThumbnailUrl
«« !
=
««" #
dbFlower
««$ ,
.
««, -
ImageThumbnailUrl
««- >
}
»» 
;
»» 
}
…… 	
}
   
}ÀÀ ü
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ContactController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
ContactController "
:# $

Controller% /
{ 
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" $
,$ %
Location& .
=/ 0!
ResponseCacheLocation1 F
.F G
ClientG M
)M N
]N O
public

 
IActionResult

 
Index

 "
(

" #
)

# $
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ù
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FavoriteFlowerController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class $
FavoriteFlowerController )
:* +

Controller, 6
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public $
FavoriteFlowerController '
(' (
IFlowerRepository( 9
flowerRepository: J
,J K
ShoppingCartL X
shoppingCartY e
)e f
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
} 
} ´é
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
public 

class 
FlowerController !
:" #

Controller$ .
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
;@ A
public 
FlowerController 
(  
IFlowerRepository  1
flowerRepository2 B
,B C
ICategoryRepositoryD W
categoryRepositoryX j
)j k
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_categoryRepository 
=  !
categoryRepository" 4
;4 5
} 	
public 

ViewResult 
List 
( 
string %
category& .
,. /
decimal 
lowPrice 
= 
$num  
,  !
decimal 
	highPrice 
= 
$num  !
,! "
string 
sorting 
= 
$str 
,  
FlowerStock 
availability $
=% &
$num' (
)( )
{ 	
IEnumerable 
< 
Flower 
> 
flowers  '
;' (
string 
currentCategory "
=# $
string% +
.+ ,
Empty, 1
;1 2
if   
(   
string   
.   
IsNullOrEmpty   $
(  $ %
category  % -
)  - .
)  . /
{!! 
flowers"" 
="" 
_flowerRepository"" +
.""+ ,
Flowers"", 3
.""3 4
OrderBy""4 ;
(""; <
p""< =
=>""> @
p""A B
.""B C
FlowerId""C K
)""K L
;""L M
flowers## 
=## 
PriceFilter## %
(##% &
lowPrice##& .
,##. /
	highPrice##0 9
,##9 :
flowers##; B
)##B C
;##C D
currentCategory%% 
=%%  !
$str%%" /
;%%/ 0
}&& 
else'' 
{(( 
flowers)) 
=)) 
_flowerRepository)) +
.))+ ,
Flowers)), 3
.))3 4
Where))4 9
())9 :
p)): ;
=>))< >
p))? @
.))@ A
Category))A I
.))I J
CategoryName))J V
==))W Y
category))Z b
)))b c
.** 
OrderBy** 
(** 
p** 
=>**  
p**! "
.**" #
FlowerId**# +
)**+ ,
;**, -
flowers,, 
=,, 
PriceFilter,, %
(,,% &
lowPrice,,& .
,,,. /
	highPrice,,0 9
,,,9 :
flowers,,; B
),,B C
;,,C D
currentCategory.. 
=..  !
_categoryRepository.." 5
...5 6

Categories..6 @
...@ A
FirstOrDefault..A O
(..O P
c..P Q
=>..R T
c..U V
...V W
CategoryName..W c
==..d f
category..g o
)..o p
...p q
CategoryName..q }
;..} ~
}// 
if11 
(11 
!11 
string11 
.11 
IsNullOrEmpty11 %
(11% &
sorting11& -
)11- .
)11. /
{22 
if33 
(33 
sorting33 
.33 
Equals33 "
(33" #
$str33# .
,33. /
StringComparison330 @
.33@ A
OrdinalIgnoreCase33A R
)33R S
)33S T
flowers44 
=44 
flowers44 %
.44% &
OrderBy44& -
(44- .
p44. /
=>440 2
p443 4
.444 5
Price445 :
)44: ;
;44; <
else55 
if55 
(55 
sorting55  
.55  !
Equals55! '
(55' (
$str55( 4
,554 5
StringComparison556 F
.55F G
OrdinalIgnoreCase55G X
)55X Y
)55Y Z
flowers66 
=66 
flowers66 %
.66% &
OrderByDescending66& 7
(667 8
p668 9
=>66: <
p66= >
.66> ?
Price66? D
)66D E
;66E F
}77 
switch99 
(99 
availability99  
)99  !
{:: 
case;; 
FlowerStock;;  
.;;  !
InStock;;! (
:;;( )
flowers<< 
=<< 
flowers<< %
.<<% &
Where<<& +
(<<+ ,
x<<, -
=><<. 0
x<<1 2
.<<2 3
InStock<<3 :
==<<; =
true<<> B
)<<B C
;<<C D
break== 
;== 
case?? 
FlowerStock??  
.??  !

NotInStock??! +
:??+ ,
flowers@@ 
=@@ 
flowers@@ %
.@@% &
Where@@& +
(@@+ ,
x@@, -
=>@@. 0
x@@1 2
.@@2 3
InStock@@3 :
==@@; =
false@@> C
)@@C D
;@@D E
breakAA 
;AA 
caseCC 
FlowerStockCC  
.CC  !
AllCC! $
:CC$ %
breakDD 
;DD 
}EE 
returnGG 
ViewGG 
(GG 
newGG 
FlowerListViewModelGG /
{HH 
FlowersII 
=II 
flowersII !
,II! "
CurrentCategoryJJ 
=JJ  !
currentCategoryJJ" 1
}KK 
)KK 
;KK 
}LL 	
publicNN 

ViewResultNN 
FavoriteNN "
(NN" #
)NN# $
{OO 	
IEnumerablePP 
<PP 
FlowerPP 
>PP 
flowersPP  '
=PP( )
_flowerRepositoryPP* ;
.PP; <
FlowersPP< C
.QQ 
WhereQQ 
(QQ 
xQQ 
=>QQ 
xQQ 
.QQ 

IsFavoriteQQ (
)QQ( )
.RR 
OrderByRR 
(RR 
pRR 
=>RR 
pRR 
.RR  
FlowerIdRR  (
)RR( )
.SS 
ToListSS 
(SS 
)SS 
;SS 
returnUU 
ViewUU 
(UU 
newUU 
FlowerListViewModelUU /
{VV 
FlowersWW 
=WW 
flowersWW !
,WW! "
CurrentCategoryXX 
=XX  !
nullXX" &
}YY 
)YY 
;YY 
}ZZ 	
public\\ 
ActionResult\\ 
AddToFavorite\\ )
(\\) *
int\\* -
flowerId\\. 6
)\\6 7
{]] 	
var^^ 
flower^^ 
=^^ 
_flowerRepository^^ *
.^^* +
Flowers^^+ 2
.^^2 3
Where^^3 8
(^^8 9
x^^9 :
=>^^; =
x^^> ?
.^^? @
FlowerId^^@ H
==^^I K
flowerId^^L T
)^^T U
.^^U V
FirstOrDefault^^V d
(^^d e
)^^e f
;^^f g
if`` 
(`` 
flower`` 
!=`` 
null`` 
)`` 
{aa 
flowerbb 
.bb 

IsFavoritebb !
=bb" #
truebb$ (
;bb( )
_flowerRepositorycc !
.cc! "
UpdateFlowercc" .
(cc. /
flowercc/ 5
)cc5 6
;cc6 7
}dd 
returnff 
RedirectToActionff #
(ff# $
$strff$ .
,ff. /
$strff0 8
)ff8 9
;ff9 :
}gg 	
publicii 
ActionResultii 
RemoveFromFavoriteii .
(ii. /
intii/ 2
flowerIdii3 ;
)ii; <
{jj 	
varkk 
flowerkk 
=kk 
_flowerRepositorykk *
.kk* +
Flowerskk+ 2
.kk2 3
Wherekk3 8
(kk8 9
xkk9 :
=>kk; =
xkk> ?
.kk? @
FlowerIdkk@ H
==kkI K
flowerIdkkL T
)kkT U
.kkU V
FirstOrDefaultkkV d
(kkd e
)kke f
;kkf g
ifmm 
(mm 
flowermm 
!=mm 
nullmm 
)mm 
{nn 
floweroo 
.oo 

IsFavoriteoo !
=oo" #
falseoo$ )
;oo) *
_flowerRepositorypp !
.pp! "
UpdateFlowerpp" .
(pp. /
flowerpp/ 5
)pp5 6
;pp6 7
}qq 
returnss 
RedirectToActionss #
(ss# $
$strss$ *
,ss* +
$strss, 4
)ss4 5
;ss5 6
}tt 	
privatevv 
staticvv 
IEnumerablevv "
<vv" #
Flowervv# )
>vv) *
PriceFiltervv+ 6
(vv6 7
decimalvv7 >
lowPricevv? G
,vvG H
decimalvvI P
	highPricevvQ Z
,vvZ [
IEnumerablevv\ g
<vvg h
Flowervvh n
>vvn o
flowersvvp w
)vvw x
{ww 	
ifxx 
(xx 
lowPricexx 
!=xx 
$numxx 
)xx 
{yy 
ifzz 
(zz 
	highPricezz 
!=zz  
$numzz! "
)zz" #
return{{ 
flowers{{ "
.{{" #
Where{{# (
({{( )
x{{) *
=>{{+ -
x{{. /
.{{/ 0
Price{{0 5
>={{6 8
lowPrice{{9 A
&&{{B D
x{{E F
.{{F G
Price{{G L
<={{M O
	highPrice{{P Y
){{Y Z
.{{Z [
OrderBy{{[ b
({{b c
p{{c d
=>{{e g
p{{h i
.{{i j
FlowerId{{j r
){{r s
;{{s t
else|| 
return}} 
flowers}} "
.}}" #
Where}}# (
(}}( )
x}}) *
=>}}+ -
x}}. /
.}}/ 0
Price}}0 5
>=}}6 8
lowPrice}}9 A
)}}A B
.}}B C
OrderBy}}C J
(}}J K
p}}K L
=>}}M O
p}}P Q
.}}Q R
FlowerId}}R Z
)}}Z [
;}}[ \
}~~ 
else 
if 
( 
	highPrice 
!= !
$num" #
)# $
return
ÄÄ 
flowers
ÄÄ 
.
ÄÄ 
Where
ÄÄ $
(
ÄÄ$ %
x
ÄÄ% &
=>
ÄÄ' )
x
ÄÄ* +
.
ÄÄ+ ,
Price
ÄÄ, 1
<=
ÄÄ2 4
	highPrice
ÄÄ5 >
)
ÄÄ> ?
.
ÄÄ? @
OrderBy
ÄÄ@ G
(
ÄÄG H
p
ÄÄH I
=>
ÄÄJ L
p
ÄÄM N
.
ÄÄN O
FlowerId
ÄÄO W
)
ÄÄW X
;
ÄÄX Y
else
ÅÅ 
return
ÇÇ 
flowers
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
enum
ÖÖ 
FlowerStock
ÖÖ 
{
ÜÜ 	
All
áá 
=
áá 
$num
áá 
,
áá 
InStock
àà 
=
àà 
$num
àà 
,
àà 

NotInStock
ââ 
=
ââ 
$num
ââ 
}
ää 	
[
åå 	
HttpGet
åå	 
]
åå 
public
çç 

ViewResult
çç 
Search
çç  
(
çç  !
string
çç! '

flowerName
çç( 2
,
çç2 3
decimal
çç4 ;
lowPrice
çç< D
=
ççE F
$num
ççG H
,
ççH I
decimal
ççJ Q
	highPrice
ççR [
=
çç\ ]
$num
çç^ _
,
çç_ `
string
çça g
sorting
ççh o
=
ççp q
$str
ççr t
)
ççt u
{
éé 	
IEnumerable
èè 
<
èè 
Flower
èè 
>
èè 
flowers
èè  '
;
èè' (
string
êê 
currentCategory
êê "
=
êê# $
string
êê% +
.
êê+ ,
Empty
êê, 1
;
êê1 2
ViewBag
ëë 
.
ëë 

FlowerName
ëë 
=
ëë  

flowerName
ëë! +
;
ëë+ ,
flowers
îî 
=
îî 
_flowerRepository
îî '
.
îî' (
Flowers
îî( /
.
îî/ 0
Where
îî0 5
(
îî5 6
p
îî6 7
=>
îî8 :
p
îî; <
.
îî< =
Name
îî= A
.
îîA B
Contains
îîB J
(
îîJ K

flowerName
îîK U
)
îîU V
||
îîW Y
p
ïï 
.
ïï 
LongDescription
ïï !
.
ïï! "
Contains
ïï" *
(
ïï* +

flowerName
ïï+ 5
)
ïï5 6
||
ïï7 9
p
ññ 
.
ññ 
ShortDescription
ññ "
.
ññ" #
Contains
ññ# +
(
ññ+ ,

flowerName
ññ, 6
)
ññ6 7
)
ññ7 8
.
ññ8 9
OrderBy
ññ9 @
(
ññ@ A
p
ññA B
=>
ññC E
p
ññF G
.
ññG H
FlowerId
ññH P
)
ññP Q
;
ññQ R
flowers
òò 
=
òò 
PriceFilter
òò !
(
òò! "
lowPrice
òò" *
,
òò* +
	highPrice
òò, 5
,
òò5 6
flowers
òò7 >
)
òò> ?
;
òò? @
if
öö 
(
öö 
!
öö 
string
öö 
.
öö 
IsNullOrEmpty
öö %
(
öö% &
sorting
öö& -
)
öö- .
)
öö. /
{
õõ 
if
úú 
(
úú 
sorting
úú 
.
úú 
Equals
úú "
(
úú" #
$str
úú# .
,
úú. /
StringComparison
úú0 @
.
úú@ A
OrdinalIgnoreCase
úúA R
)
úúR S
)
úúS T
flowers
ùù 
=
ùù 
flowers
ùù %
.
ùù% &
OrderBy
ùù& -
(
ùù- .
p
ùù. /
=>
ùù0 2
p
ùù3 4
.
ùù4 5
Price
ùù5 :
)
ùù: ;
;
ùù; <
else
ûû 
if
ûû 
(
ûû 
sorting
ûû  
.
ûû  !
Equals
ûû! '
(
ûû' (
$str
ûû( 4
,
ûû4 5
StringComparison
ûû6 F
.
ûûF G
OrdinalIgnoreCase
ûûG X
)
ûûX Y
)
ûûY Z
flowers
üü 
=
üü 
flowers
üü %
.
üü% &
OrderByDescending
üü& 7
(
üü7 8
p
üü8 9
=>
üü: <
p
üü= >
.
üü> ?
Price
üü? D
)
üüD E
;
üüE F
}
†† 
return
££ 
View
££ 
(
££ 
new
££ !
FlowerListViewModel
££ /
{
§§ 
Flowers
•• 
=
•• 
flowers
•• !
,
••! "
CurrentCategory
¶¶ 
=
¶¶  !
currentCategory
¶¶" 1
}
ßß 
)
ßß 
;
ßß 
}
®® 	
[
™™ 	
HttpGet
™™	 
]
™™ 
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
ActionResult
´´ &
>
´´& ' 
AutocompleteSearch
´´( :
(
´´: ;
)
´´; <
{
¨¨ 	
try
≠≠ 
{
ÆÆ 
string
ØØ 
term
ØØ 
=
ØØ 
HttpContext
ØØ )
.
ØØ) *
Request
ØØ* 1
.
ØØ1 2
Query
ØØ2 7
[
ØØ7 8
$str
ØØ8 >
]
ØØ> ?
.
ØØ? @
ToString
ØØ@ H
(
ØØH I
)
ØØI J
;
ØØJ K
var
∞∞ 
names
∞∞ 
=
∞∞ 
_flowerRepository
∞∞ -
.
∞∞- .
Flowers
∞∞. 5
.
∞∞5 6
Where
∞∞6 ;
(
∞∞; <
p
∞∞< =
=>
∞∞> @
p
∞∞A B
.
∞∞B C
Name
∞∞C G
.
∞∞G H
Contains
∞∞H P
(
∞∞P Q
term
∞∞Q U
)
∞∞U V
)
∞∞V W
.
∞∞W X
Select
∞∞X ^
(
∞∞^ _
p
∞∞_ `
=>
∞∞a c
p
∞∞d e
.
∞∞e f
Name
∞∞f j
)
∞∞j k
.
∞∞k l
ToList
∞∞l r
(
∞∞r s
)
∞∞s t
;
∞∞t u
return
≤≤ 
Ok
≤≤ 
(
≤≤ 
names
≤≤ 
)
≤≤  
;
≤≤  !
}
≥≥ 
catch
¥¥ 
{
µµ 
return
∂∂ 

BadRequest
∂∂ !
(
∂∂! "
)
∂∂" #
;
∂∂# $
}
∑∑ 
}
∏∏ 	
[
∫∫ 	
HttpGet
∫∫	 
]
∫∫ 
public
ªª 
IEnumerable
ªª 
<
ªª 
string
ªª !
>
ªª! "
FlowersNames
ªª# /
(
ªª/ 0
)
ªª0 1
{
ºº 	
return
ΩΩ 
_flowerRepository
ΩΩ $
.
ΩΩ$ %
FlowersNames
ΩΩ% 1
;
ΩΩ1 2
}
ææ 	
public
¿¿ 
IActionResult
¿¿ 
Details
¿¿ $
(
¿¿$ %
int
¿¿% (
id
¿¿) +
)
¿¿+ ,
{
¡¡ 	
var
¬¬ 
flower
¬¬ 
=
¬¬ 
_flowerRepository
¬¬ *
.
¬¬* +
GetFlowerById
¬¬+ 8
(
¬¬8 9
id
¬¬9 ;
)
¬¬; <
;
¬¬< =
if
ƒƒ 
(
ƒƒ 
flower
ƒƒ 
==
ƒƒ 
null
ƒƒ 
)
ƒƒ 
return
≈≈ 
NotFound
≈≈ 
(
≈≈  
)
≈≈  !
;
≈≈! "
return
«« 
View
«« 
(
«« 
new
«« #
FlowerDetailViewModel
«« 1
{
»» 
Flower
…… 
=
…… 
flower
…… 
}
   
)
   
;
   
}
ÀÀ 	
}
ÃÃ 
}ÕÕ á
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\FlowerDataController.cs
	namespace

 	
	FlowerApp


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class  
FlowerDataController %
:& '

Controller( 2
{ 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
public  
FlowerDataController #
(# $
IFlowerRepository$ 5
flowerRepository6 F
)F G
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
FlowerViewModel *
>* +
LoadMoreFlowers, ;
(; <
)< =
{ 	
IEnumerable 
< 
Flower 
> 
	dbFlowers  )
=* +
null, 0
;0 1
	dbFlowers 
= 
_flowerRepository )
.) *
Flowers* 1
.1 2
OrderBy2 9
(9 :
p: ;
=>< >
p? @
.@ A
FlowerIdA I
)I J
.J K
TakeK O
(O P
$numP R
)R S
;S T
List 
< 
FlowerViewModel  
>  !
flowers" )
=* +
new, /
List0 4
<4 5
FlowerViewModel5 D
>D E
(E F
)F G
;G H
foreach   
(   
var   
dbFlower   !
in  " $
	dbFlowers  % .
)  . /
{!! 
flowers"" 
."" 
Add"" 
("" (
MapDbFlowerToFlowerViewModel"" 8
(""8 9
dbFlower""9 A
)""A B
)""B C
;""C D
}## 
return$$ 
flowers$$ 
;$$ 
}%% 	
private'' 
FlowerViewModel'' (
MapDbFlowerToFlowerViewModel''  <
(''< =
Flower''= C
dbFlower''D L
)''L M
{(( 	
return)) 
new)) 
FlowerViewModel)) &
{** 
FlowerId++ 
=++ 
dbFlower++ #
.++# $
FlowerId++$ ,
,++, -
Name,, 
=,, 
dbFlower,, 
.,,  
Name,,  $
,,,$ %
Price-- 
=-- 
dbFlower--  
.--  !
Price--! &
,--& '
ShortDescription..  
=..! "
dbFlower..# +
...+ ,
ShortDescription.., <
,..< =
ImageThumbnailUrl// !
=//" #
dbFlower//$ ,
.//, -
ImageThumbnailUrl//- >
}00 
;00 
}11 	
}22 
}33 µ

HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\HomeController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private		 
readonly		 
IFlowerRepository		 *
_flowerRepository		+ <
;		< =
public 
HomeController 
( 
IFlowerRepository /
flowerRepository0 @
)@ A
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
homeViewModel 
= 
new  #
HomeViewModel$ 1
{ 
FlowerPresentation "
=# $
_flowerRepository% 6
.6 7
FlowerPresentation7 I
,I J
FlowersName 
= 
_flowerRepository /
./ 0
FlowersNames0 <
} 
; 
return 
View 
( 
homeViewModel %
)% &
;& '
} 	
} 
} À
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public 

class 
OrderController  
:! "

Controller# -
{		 
private

 
readonly

 
IOrderRepository

 )
_orderRepository

* :
;

: ;
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderController 
( 
IOrderRepository /
orderRepository0 ?
,? @
ShoppingCartA M
shoppingCartN Z
)Z [
{ 	
_orderRepository 
= 
orderRepository .
;. /
_shoppingCart 
= 
shoppingCart (
;( )
} 	
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
)& '
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	
	Authorize	 
] 
public 
IActionResult 
Checkout %
(% &
Order& +
order, 1
)1 2
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
if   
(   
_shoppingCart   
.   
ShoppingCartItems   /
.  / 0
Count  0 5
==  6 8
$num  9 :
)  : ;
{!! 

ModelState"" 
."" 
AddModelError"" (
(""( )
$str"") +
,""+ ,
$str""- Y
)""Y Z
;""Z [
}## 
if%% 
(%% 

ModelState%% 
.%% 
IsValid%% "
)%%" #
{&& 
order'' 
.'' 
Email'' 
='' 
User'' "
.''" #
Identity''# +
.''+ ,
Name'', 0
;''0 1
_orderRepository((  
.((  !
CreateOrder((! ,
(((, -
order((- 2
)((2 3
;((3 4
_shoppingCart)) 
.)) 
	ClearCart)) '
())' (
)))( )
;))) *
return** 
RedirectToAction** '
(**' (
$str**( :
)**: ;
;**; <
}++ 
return,, 
View,, 
(,, 
order,, 
),, 
;,, 
}-- 	
public// 
IActionResult// 
CheckoutComplete// -
(//- .
)//. /
{00 	
ViewBag11 
.11 #
CheckoutCompleteMessage11 +
=11, -
$str11. n
;11n o
return33 
View33 
(33 
)33 
;33 
}44 	
}55 
}66 «
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\OrderHistoryController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{		 
public

 

class

 "
OrderHistoryController

 '
:

( )

Controller

* 4
{ 
private 
readonly 
IOrderRepository )
_orderRepository* :
;: ;
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public "
OrderHistoryController %
(% &
IOrderRepository& 6
orderRepository7 F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
)t u
{ 	
_orderRepository 
= 
orderRepository .
;. /
_signInManager 
= 
signInManager *
;* +
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
IEnumerable 
< (
OrderHistoryDetailsViewModel 4
>4 5
orders6 <
== >
null? C
;C D
if 
( 
_signInManager 
. 

IsSignedIn )
() *
User* .
). /
&&0 2
User3 7
.7 8
IsInRole8 @
(@ A
$strA Q
)Q R
)R S
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
)? @
;@ A
} 
else 
{ 
orders 
= 
_orderRepository )
.) * 
GetOrdersAsViewModel* >
(> ?
User? C
.C D
IdentityD L
.L M
NameM Q
)Q R
;R S
} 
return!! 
View!! 
(!! 
new!! !
OrderHistoryViewModel!! 1
{"" 
Orders## 
=## 
orders## 
}$$ 
)$$ 
;$$ 
}%% 	
}&& 
}(( ¸'
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Controllers\ShoppingCartController.cs
	namespace 	
	FlowerApp
 
. 
Controllers 
{ 
public		 

class		 "
ShoppingCartController		 '
:		( )

Controller		* 4
{

 
private 
readonly 
IFlowerRepository *
_flowerRepository+ <
;< =
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public "
ShoppingCartController %
(% &
IFlowerRepository& 7
flowerRepository8 H
,H I
ShoppingCartJ V
shoppingCartW c
)c d
{ 	
_flowerRepository 
= 
flowerRepository  0
;0 1
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 

ViewResult 
Index 
(  
)  !
{ 	
var 
items 
= 
_shoppingCart %
.% & 
GetShoppingCartItems& :
(: ;
); <
;< =
_shoppingCart 
. 
ShoppingCartItems +
=, -
items. 3
;3 4
var !
shoppingCartViewModel %
=& '
new( +!
ShoppingCartViewModel, A
{ 
ShoppingCart 
= 
_shoppingCart ,
,, -
ShoppingCartTotal !
=" #
_shoppingCart$ 1
.1 2 
GetShoppingCartTotal2 F
(F G
)G H
} 
; 
return 
View 
( !
shoppingCartViewModel -
)- .
;. /
}   	
public"" "
RedirectToActionResult"" %
AddToShoppingCart""& 7
(""7 8
int""8 ;
flowerId""< D
)""D E
{## 	
var$$ 
selectedFlower$$ 
=$$  
_flowerRepository$$! 2
.$$2 3
Flowers$$3 :
.$$: ;
FirstOrDefault$$; I
($$I J
p$$J K
=>$$L N
p$$O P
.$$P Q
FlowerId$$Q Y
==$$Z \
flowerId$$] e
)$$e f
;$$f g
if&& 
(&& 
selectedFlower&& 
!=&& !
null&&" &
)&&& '
{'' 
_shoppingCart(( 
.(( 
	AddToCart(( '
(((' (
selectedFlower((( 6
,((6 7
$num((8 9
)((9 :
;((: ;
})) 
return** 
RedirectToAction** #
(**# $
$str**$ +
)**+ ,
;**, -
}++ 	
public-- "
RedirectToActionResult-- %
UpdateShoppingCart--& 8
(--8 9
int--9 <
flowerId--= E
,--E F
bool--G K
isAdding--L T
)--T U
{.. 	
var// 
selectedFlower// 
=//  
_flowerRepository//! 2
.//2 3
Flowers//3 :
.//: ;
FirstOrDefault//; I
(//I J
p//J K
=>//L N
p//O P
.//P Q
FlowerId//Q Y
==//Z \
flowerId//] e
)//e f
;//f g
if11 
(11 
selectedFlower11 
!=11 !
null11" &
)11& '
{22 
if33 
(33 
isAdding33 
)33 
{44 
_shoppingCart55 !
.55! "
	AddToCart55" +
(55+ ,
selectedFlower55, :
,55: ;
$num55< =
)55= >
;55> ?
}66 
else77 
{88 
_shoppingCart99 !
.99! "
	AddToCart99" +
(99+ ,
selectedFlower99, :
,99: ;
-99< =
$num99= >
)99> ?
;99? @
}:: 
};; 
return<< 
RedirectToAction<< #
(<<# $
$str<<$ +
)<<+ ,
;<<, -
}== 	
public?? "
RedirectToActionResult?? %"
RemoveFromShoppingCart??& <
(??< =
int??= @
flowerId??A I
)??I J
{@@ 	
varAA 
selectedFlowerAA 
=AA  
_flowerRepositoryAA! 2
.AA2 3
FlowersAA3 :
.AA: ;
FirstOrDefaultAA; I
(AAI J
pAAJ K
=>AAL N
pAAO P
.AAP Q
FlowerIdAAQ Y
==AAZ \
flowerIdAA] e
)AAe f
;AAf g
ifCC 
(CC 
selectedFlowerCC 
!=CC !
nullCC" &
)CC& '
{DD 
_shoppingCartEE 
.EE 
RemoveFromCartEE ,
(EE, -
selectedFlowerEE- ;
)EE; <
;EE< =
}FF 
returnGG 
RedirectToActionGG #
(GG# $
$strGG$ +
)GG+ ,
;GG, -
}HH 	
}II 
}JJ ãÿ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191208173628_Init.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Init 
: 
	Migration  )
{ 
private		 
const		 
string		 
AspNetRoles		 (
=		) *
$str		+ 8
;		8 9
private

 
const

 
string

 
AspNetUsers

 (
=

) *
$str

+ 8
;

8 9
private 
const 
string #
ValueGenerationStrategy 4
=5 6
$str7 Z
;Z [
private 
const 
string 
Flowers $
=% &
$str' 0
;0 1
private 
const 
string 
OrderDetails )
=* +
$str, :
;: ;
private 
const 
string 
	Flower_Id &
=' (
$str) 3
;3 4
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
AspNetRoles !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
nullable. 6
:6 7
false8 =
)= >
,> ?
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
	maxLength: C
:C D
$numE H
,H I
nullableJ R
:R S
trueT X
)X Y
,Y Z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
nullable< D
:D E
trueF J
)J K
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder   
.   
CreateTable   (
(  ( )
name!! 
:!! 
AspNetRoles!! !
,!!! "
columns"" 
:"" 
table"" 
=>"" !
new""" %
{## 
Id$$ 
=$$ 
table$$ 
.$$ 
Column$$ %
<$$% &
string$$& ,
>$$, -
($$- .
nullable$$. 6
:$$6 7
false$$8 =
)$$= >
,$$> ?
UserName%% 
=%% 
table%% $
.%%$ %
Column%%% +
<%%+ ,
string%%, 2
>%%2 3
(%%3 4
	maxLength%%4 =
:%%= >
$num%%? B
,%%B C
nullable%%D L
:%%L M
true%%N R
)%%R S
,%%S T
NormalizedUserName&& &
=&&' (
table&&) .
.&&. /
Column&&/ 5
<&&5 6
string&&6 <
>&&< =
(&&= >
	maxLength&&> G
:&&G H
$num&&I L
,&&L M
nullable&&N V
:&&V W
true&&X \
)&&\ ]
,&&] ^
Email'' 
='' 
table'' !
.''! "
Column''" (
<''( )
string'') /
>''/ 0
(''0 1
	maxLength''1 :
:'': ;
$num''< ?
,''? @
nullable''A I
:''I J
true''K O
)''O P
,''P Q
NormalizedEmail(( #
=(($ %
table((& +
.((+ ,
Column((, 2
<((2 3
string((3 9
>((9 :
(((: ;
	maxLength((; D
:((D E
$num((F I
,((I J
nullable((K S
:((S T
true((U Y
)((Y Z
,((Z [
EmailConfirmed)) "
=))# $
table))% *
.))* +
Column))+ 1
<))1 2
bool))2 6
>))6 7
())7 8
nullable))8 @
:))@ A
false))B G
)))G H
,))H I
PasswordHash**  
=**! "
table**# (
.**( )
Column**) /
<**/ 0
string**0 6
>**6 7
(**7 8
nullable**8 @
:**@ A
true**B F
)**F G
,**G H
SecurityStamp++ !
=++" #
table++$ )
.++) *
Column++* 0
<++0 1
string++1 7
>++7 8
(++8 9
nullable++9 A
:++A B
true++C G
)++G H
,++H I
ConcurrencyStamp,, $
=,,% &
table,,' ,
.,,, -
Column,,- 3
<,,3 4
string,,4 :
>,,: ;
(,,; <
nullable,,< D
:,,D E
true,,F J
),,J K
,,,K L
PhoneNumber-- 
=--  !
table--" '
.--' (
Column--( .
<--. /
string--/ 5
>--5 6
(--6 7
nullable--7 ?
:--? @
true--A E
)--E F
,--F G 
PhoneNumberConfirmed.. (
=..) *
table..+ 0
...0 1
Column..1 7
<..7 8
bool..8 <
>..< =
(..= >
nullable..> F
:..F G
false..H M
)..M N
,..N O
TwoFactorEnabled// $
=//% &
table//' ,
.//, -
Column//- 3
<//3 4
bool//4 8
>//8 9
(//9 :
nullable//: B
://B C
false//D I
)//I J
,//J K

LockoutEnd00 
=00  
table00! &
.00& '
Column00' -
<00- .
DateTimeOffset00. <
>00< =
(00= >
nullable00> F
:00F G
true00H L
)00L M
,00M N
LockoutEnabled11 "
=11# $
table11% *
.11* +
Column11+ 1
<111 2
bool112 6
>116 7
(117 8
nullable118 @
:11@ A
false11B G
)11G H
,11H I
AccessFailedCount22 %
=22& '
table22( -
.22- .
Column22. 4
<224 5
int225 8
>228 9
(229 :
nullable22: B
:22B C
false22D I
)22I J
,22J K
	Birthdate33 
=33 
table33  %
.33% &
Column33& ,
<33, -
DateTime33- 5
>335 6
(336 7
nullable337 ?
:33? @
false33A F
)33F G
,33G H
City44 
=44 
table44  
.44  !
Column44! '
<44' (
string44( .
>44. /
(44/ 0
nullable440 8
:448 9
true44: >
)44> ?
,44? @
Country55 
=55 
table55 #
.55# $
Column55$ *
<55* +
string55+ 1
>551 2
(552 3
nullable553 ;
:55; <
true55= A
)55A B
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% 5
,995 6
x997 8
=>999 ;
x99< =
.99= >
Id99> @
)99@ A
;99A B
}:: 
):: 
;:: 
migrationBuilder<< 
.<< 
CreateTable<< (
(<<( )
name== 
:== 
$str== "
,==" #
columns>> 
:>> 
table>> 
=>>> !
new>>" %
{?? 

CategoryId@@ 
=@@  
table@@! &
.@@& '
Column@@' -
<@@- .
int@@. 1
>@@1 2
(@@2 3
nullable@@3 ;
:@@; <
false@@= B
)@@B C
.AA 

AnnotationAA #
(AA# $#
ValueGenerationStrategyAA$ ;
,AA; <,
 SqlServerValueGenerationStrategyAA= ]
.AA] ^
IdentityColumnAA^ l
)AAl m
,AAm n
CategoryNameBB  
=BB! "
tableBB# (
.BB( )
ColumnBB) /
<BB/ 0
stringBB0 6
>BB6 7
(BB7 8
nullableBB8 @
:BB@ A
trueBBB F
)BBF G
,BBG H
DescriptionCC 
=CC  !
tableCC" '
.CC' (
ColumnCC( .
<CC. /
stringCC/ 5
>CC5 6
(CC6 7
nullableCC7 ?
:CC? @
trueCCA E
)CCE F
}DD 
,DD 
constraintsEE 
:EE 
tableEE "
=>EE# %
{FF 
tableGG 
.GG 

PrimaryKeyGG $
(GG$ %
$strGG% 4
,GG4 5
xGG6 7
=>GG8 :
xGG; <
.GG< =

CategoryIdGG= G
)GGG H
;GGH I
}HH 
)HH 
;HH 
migrationBuilderJJ 
.JJ 
CreateTableJJ (
(JJ( )
nameKK 
:KK 
$strKK 
,KK 
columnsLL 
:LL 
tableLL 
=>LL !
newLL" %
{MM 
OrderIdNN 
=NN 
tableNN #
.NN# $
ColumnNN$ *
<NN* +
intNN+ .
>NN. /
(NN/ 0
nullableNN0 8
:NN8 9
falseNN: ?
)NN? @
.OO 

AnnotationOO #
(OO# $#
ValueGenerationStrategyOO$ ;
,OO; <,
 SqlServerValueGenerationStrategyOO= ]
.OO] ^
IdentityColumnOO^ l
)OOl m
,OOm n
	FirstNamePP 
=PP 
tablePP  %
.PP% &
ColumnPP& ,
<PP, -
stringPP- 3
>PP3 4
(PP4 5
	maxLengthPP5 >
:PP> ?
$numPP@ B
,PPB C
nullablePPD L
:PPL M
falsePPN S
)PPS T
,PPT U
LastNameQQ 
=QQ 
tableQQ $
.QQ$ %
ColumnQQ% +
<QQ+ ,
stringQQ, 2
>QQ2 3
(QQ3 4
	maxLengthQQ4 =
:QQ= >
$numQQ? A
,QQA B
nullableQQC K
:QQK L
falseQQM R
)QQR S
,QQS T
AddressLine1RR  
=RR! "
tableRR# (
.RR( )
ColumnRR) /
<RR/ 0
stringRR0 6
>RR6 7
(RR7 8
	maxLengthRR8 A
:RRA B
$numRRC F
,RRF G
nullableRRH P
:RRP Q
falseRRR W
)RRW X
,RRX Y
AddressLine2SS  
=SS! "
tableSS# (
.SS( )
ColumnSS) /
<SS/ 0
stringSS0 6
>SS6 7
(SS7 8
nullableSS8 @
:SS@ A
trueSSB F
)SSF G
,SSG H
ZipCodeTT 
=TT 
tableTT #
.TT# $
ColumnTT$ *
<TT* +
stringTT+ 1
>TT1 2
(TT2 3
	maxLengthTT3 <
:TT< =
$numTT> @
,TT@ A
nullableTTB J
:TTJ K
falseTTL Q
)TTQ R
,TTR S
CityUU 
=UU 
tableUU  
.UU  !
ColumnUU! '
<UU' (
stringUU( .
>UU. /
(UU/ 0
	maxLengthUU0 9
:UU9 :
$numUU; =
,UU= >
nullableUU? G
:UUG H
falseUUI N
)UUN O
,UUO P
StateVV 
=VV 
tableVV !
.VV! "
ColumnVV" (
<VV( )
stringVV) /
>VV/ 0
(VV0 1
	maxLengthVV1 :
:VV: ;
$numVV< >
,VV> ?
nullableVV@ H
:VVH I
trueVVJ N
)VVN O
,VVO P
CountryWW 
=WW 
tableWW #
.WW# $
ColumnWW$ *
<WW* +
stringWW+ 1
>WW1 2
(WW2 3
	maxLengthWW3 <
:WW< =
$numWW> @
,WW@ A
nullableWWB J
:WWJ K
falseWWL Q
)WWQ R
,WWR S
PhoneNumberXX 
=XX  !
tableXX" '
.XX' (
ColumnXX( .
<XX. /
stringXX/ 5
>XX5 6
(XX6 7
	maxLengthXX7 @
:XX@ A
$numXXB D
,XXD E
nullableXXF N
:XXN O
falseXXP U
)XXU V
,XXV W
EmailYY 
=YY 
tableYY !
.YY! "
ColumnYY" (
<YY( )
stringYY) /
>YY/ 0
(YY0 1
	maxLengthYY1 :
:YY: ;
$numYY< >
,YY> ?
nullableYY@ H
:YYH I
falseYYJ O
)YYO P
,YYP Q

OrderTotalZZ 
=ZZ  
tableZZ! &
.ZZ& '
ColumnZZ' -
<ZZ- .
decimalZZ. 5
>ZZ5 6
(ZZ6 7
nullableZZ7 ?
:ZZ? @
falseZZA F
)ZZF G
,ZZG H
OrderPlaced[[ 
=[[  !
table[[" '
.[[' (
Column[[( .
<[[. /
DateTime[[/ 7
>[[7 8
([[8 9
nullable[[9 A
:[[A B
false[[C H
)[[H I
}\\ 
,\\ 
constraints]] 
:]] 
table]] "
=>]]# %
{^^ 
table__ 
.__ 

PrimaryKey__ $
(__$ %
$str__% 0
,__0 1
x__2 3
=>__4 6
x__7 8
.__8 9
OrderId__9 @
)__@ A
;__A B
}`` 
)`` 
;`` 
migrationBuilderbb 
.bb 
CreateTablebb (
(bb( )
namecc 
:cc 
$strcc (
,cc( )
columnsdd 
:dd 
tabledd 
=>dd !
newdd" %
{ee 
Idff 
=ff 
tableff 
.ff 
Columnff %
<ff% &
intff& )
>ff) *
(ff* +
nullableff+ 3
:ff3 4
falseff5 :
)ff: ;
.gg 

Annotationgg #
(gg# $#
ValueGenerationStrategygg$ ;
,gg; <,
 SqlServerValueGenerationStrategygg= ]
.gg] ^
IdentityColumngg^ l
)ggl m
,ggm n
RoleIdhh 
=hh 
tablehh "
.hh" #
Columnhh# )
<hh) *
stringhh* 0
>hh0 1
(hh1 2
nullablehh2 :
:hh: ;
falsehh< A
)hhA B
,hhB C
	ClaimTypeii 
=ii 
tableii  %
.ii% &
Columnii& ,
<ii, -
stringii- 3
>ii3 4
(ii4 5
nullableii5 =
:ii= >
trueii? C
)iiC D
,iiD E

ClaimValuejj 
=jj  
tablejj! &
.jj& '
Columnjj' -
<jj- .
stringjj. 4
>jj4 5
(jj5 6
nullablejj6 >
:jj> ?
truejj@ D
)jjD E
}kk 
,kk 
constraintsll 
:ll 
tablell "
=>ll# %
{mm 
tablenn 
.nn 

PrimaryKeynn $
(nn$ %
$strnn% :
,nn: ;
xnn< =
=>nn> @
xnnA B
.nnB C
IdnnC E
)nnE F
;nnF G
tableoo 
.oo 

ForeignKeyoo $
(oo$ %
namepp 
:pp 
$strpp F
,ppF G
columnqq 
:qq 
xqq  !
=>qq" $
xqq% &
.qq& '
RoleIdqq' -
,qq- .
principalTablerr &
:rr& '
AspNetRolesrr( 3
,rr3 4
principalColumnss '
:ss' (
$strss) -
,ss- .
onDeletett  
:tt  !
ReferentialActiontt" 3
.tt3 4
Cascadett4 ;
)tt; <
;tt< =
}uu 
)uu 
;uu 
migrationBuilderww 
.ww 
CreateTableww (
(ww( )
namexx 
:xx 
$strxx (
,xx( )
columnsyy 
:yy 
tableyy 
=>yy !
newyy" %
{zz 
Id{{ 
={{ 
table{{ 
.{{ 
Column{{ %
<{{% &
int{{& )
>{{) *
({{* +
nullable{{+ 3
:{{3 4
false{{5 :
){{: ;
.|| 

Annotation|| #
(||# $#
ValueGenerationStrategy||$ ;
,||; <,
 SqlServerValueGenerationStrategy||= ]
.||] ^
IdentityColumn||^ l
)||l m
,||m n
UserId}} 
=}} 
table}} "
.}}" #
Column}}# )
<}}) *
string}}* 0
>}}0 1
(}}1 2
nullable}}2 :
:}}: ;
false}}< A
)}}A B
,}}B C
	ClaimType~~ 
=~~ 
table~~  %
.~~% &
Column~~& ,
<~~, -
string~~- 3
>~~3 4
(~~4 5
nullable~~5 =
:~~= >
true~~? C
)~~C D
,~~D E

ClaimValue 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
nullable6 >
:> ?
true@ D
)D E
}
ÄÄ 
,
ÄÄ 
constraints
ÅÅ 
:
ÅÅ 
table
ÅÅ "
=>
ÅÅ# %
{
ÇÇ 
table
ÉÉ 
.
ÉÉ 

PrimaryKey
ÉÉ $
(
ÉÉ$ %
$str
ÉÉ% :
,
ÉÉ: ;
x
ÉÉ< =
=>
ÉÉ> @
x
ÉÉA B
.
ÉÉB C
Id
ÉÉC E
)
ÉÉE F
;
ÉÉF G
table
ÑÑ 
.
ÑÑ 

ForeignKey
ÑÑ $
(
ÑÑ$ %
name
ÖÖ 
:
ÖÖ 
$str
ÖÖ F
,
ÖÖF G
column
ÜÜ 
:
ÜÜ 
x
ÜÜ  !
=>
ÜÜ" $
x
ÜÜ% &
.
ÜÜ& '
UserId
ÜÜ' -
,
ÜÜ- .
principalTable
áá &
:
áá& '
AspNetUsers
áá( 3
,
áá3 4
principalColumn
àà '
:
àà' (
$str
àà) -
,
àà- .
onDelete
ââ  
:
ââ  !
ReferentialAction
ââ" 3
.
ââ3 4
Cascade
ââ4 ;
)
ââ; <
;
ââ< =
}
ää 
)
ää 
;
ää 
migrationBuilder
åå 
.
åå 
CreateTable
åå (
(
åå( )
name
çç 
:
çç 
$str
çç (
,
çç( )
columns
éé 
:
éé 
table
éé 
=>
éé !
new
éé" %
{
èè 
LoginProvider
êê !
=
êê" #
table
êê$ )
.
êê) *
Column
êê* 0
<
êê0 1
string
êê1 7
>
êê7 8
(
êê8 9
nullable
êê9 A
:
êêA B
false
êêC H
)
êêH I
,
êêI J
ProviderKey
ëë 
=
ëë  !
table
ëë" '
.
ëë' (
Column
ëë( .
<
ëë. /
string
ëë/ 5
>
ëë5 6
(
ëë6 7
nullable
ëë7 ?
:
ëë? @
false
ëëA F
)
ëëF G
,
ëëG H!
ProviderDisplayName
íí '
=
íí( )
table
íí* /
.
íí/ 0
Column
íí0 6
<
íí6 7
string
íí7 =
>
íí= >
(
íí> ?
nullable
íí? G
:
ííG H
true
ííI M
)
ííM N
,
ííN O
UserId
ìì 
=
ìì 
table
ìì "
.
ìì" #
Column
ìì# )
<
ìì) *
string
ìì* 0
>
ìì0 1
(
ìì1 2
nullable
ìì2 :
:
ìì: ;
false
ìì< A
)
ììA B
}
îî 
,
îî 
constraints
ïï 
:
ïï 
table
ïï "
=>
ïï# %
{
ññ 
table
óó 
.
óó 

PrimaryKey
óó $
(
óó$ %
$str
óó% :
,
óó: ;
x
óó< =
=>
óó> @
new
óóA D
{
óóE F
x
óóG H
.
óóH I
LoginProvider
óóI V
,
óóV W
x
óóX Y
.
óóY Z
ProviderKey
óóZ e
}
óóf g
)
óóg h
;
óóh i
table
òò 
.
òò 

ForeignKey
òò $
(
òò$ %
name
ôô 
:
ôô 
$str
ôô F
,
ôôF G
column
öö 
:
öö 
x
öö  !
=>
öö" $
x
öö% &
.
öö& '
UserId
öö' -
,
öö- .
principalTable
õõ &
:
õõ& '
AspNetUsers
õõ( 3
,
õõ3 4
principalColumn
úú '
:
úú' (
$str
úú) -
,
úú- .
onDelete
ùù  
:
ùù  !
ReferentialAction
ùù" 3
.
ùù3 4
Cascade
ùù4 ;
)
ùù; <
;
ùù< =
}
ûû 
)
ûû 
;
ûû 
migrationBuilder
†† 
.
†† 
CreateTable
†† (
(
††( )
name
°° 
:
°° 
$str
°° '
,
°°' (
columns
¢¢ 
:
¢¢ 
table
¢¢ 
=>
¢¢ !
new
¢¢" %
{
££ 
UserId
§§ 
=
§§ 
table
§§ "
.
§§" #
Column
§§# )
<
§§) *
string
§§* 0
>
§§0 1
(
§§1 2
nullable
§§2 :
:
§§: ;
false
§§< A
)
§§A B
,
§§B C
RoleId
•• 
=
•• 
table
•• "
.
••" #
Column
••# )
<
••) *
string
••* 0
>
••0 1
(
••1 2
nullable
••2 :
:
••: ;
false
••< A
)
••A B
}
¶¶ 
,
¶¶ 
constraints
ßß 
:
ßß 
table
ßß "
=>
ßß# %
{
®® 
table
©© 
.
©© 

PrimaryKey
©© $
(
©©$ %
$str
©©% 9
,
©©9 :
x
©©; <
=>
©©= ?
new
©©@ C
{
©©D E
x
©©F G
.
©©G H
UserId
©©H N
,
©©N O
x
©©P Q
.
©©Q R
RoleId
©©R X
}
©©Y Z
)
©©Z [
;
©©[ \
table
™™ 
.
™™ 

ForeignKey
™™ $
(
™™$ %
name
´´ 
:
´´ 
$str
´´ E
,
´´E F
column
¨¨ 
:
¨¨ 
x
¨¨  !
=>
¨¨" $
x
¨¨% &
.
¨¨& '
RoleId
¨¨' -
,
¨¨- .
principalTable
≠≠ &
:
≠≠& '
AspNetRoles
≠≠( 3
,
≠≠3 4
principalColumn
ÆÆ '
:
ÆÆ' (
$str
ÆÆ) -
,
ÆÆ- .
onDelete
ØØ  
:
ØØ  !
ReferentialAction
ØØ" 3
.
ØØ3 4
Cascade
ØØ4 ;
)
ØØ; <
;
ØØ< =
table
∞∞ 
.
∞∞ 

ForeignKey
∞∞ $
(
∞∞$ %
name
±± 
:
±± 
$str
±± E
,
±±E F
column
≤≤ 
:
≤≤ 
x
≤≤  !
=>
≤≤" $
x
≤≤% &
.
≤≤& '
UserId
≤≤' -
,
≤≤- .
principalTable
≥≥ &
:
≥≥& '
AspNetUsers
≥≥( 3
,
≥≥3 4
principalColumn
¥¥ '
:
¥¥' (
$str
¥¥) -
,
¥¥- .
onDelete
µµ  
:
µµ  !
ReferentialAction
µµ" 3
.
µµ3 4
Cascade
µµ4 ;
)
µµ; <
;
µµ< =
}
∂∂ 
)
∂∂ 
;
∂∂ 
migrationBuilder
∏∏ 
.
∏∏ 
CreateTable
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ (
,
ππ( )
columns
∫∫ 
:
∫∫ 
table
∫∫ 
=>
∫∫ !
new
∫∫" %
{
ªª 
UserId
ºº 
=
ºº 
table
ºº "
.
ºº" #
Column
ºº# )
<
ºº) *
string
ºº* 0
>
ºº0 1
(
ºº1 2
nullable
ºº2 :
:
ºº: ;
false
ºº< A
)
ººA B
,
ººB C
LoginProvider
ΩΩ !
=
ΩΩ" #
table
ΩΩ$ )
.
ΩΩ) *
Column
ΩΩ* 0
<
ΩΩ0 1
string
ΩΩ1 7
>
ΩΩ7 8
(
ΩΩ8 9
nullable
ΩΩ9 A
:
ΩΩA B
false
ΩΩC H
)
ΩΩH I
,
ΩΩI J
Name
ææ 
=
ææ 
table
ææ  
.
ææ  !
Column
ææ! '
<
ææ' (
string
ææ( .
>
ææ. /
(
ææ/ 0
nullable
ææ0 8
:
ææ8 9
false
ææ: ?
)
ææ? @
,
ææ@ A
Value
øø 
=
øø 
table
øø !
.
øø! "
Column
øø" (
<
øø( )
string
øø) /
>
øø/ 0
(
øø0 1
nullable
øø1 9
:
øø9 :
true
øø; ?
)
øø? @
}
¿¿ 
,
¿¿ 
constraints
¡¡ 
:
¡¡ 
table
¡¡ "
=>
¡¡# %
{
¬¬ 
table
√√ 
.
√√ 

PrimaryKey
√√ $
(
√√$ %
$str
√√% :
,
√√: ;
x
√√< =
=>
√√> @
new
√√A D
{
√√E F
x
√√G H
.
√√H I
UserId
√√I O
,
√√O P
x
√√Q R
.
√√R S
LoginProvider
√√S `
,
√√` a
x
√√b c
.
√√c d
Name
√√d h
}
√√i j
)
√√j k
;
√√k l
table
ƒƒ 
.
ƒƒ 

ForeignKey
ƒƒ $
(
ƒƒ$ %
name
≈≈ 
:
≈≈ 
$str
≈≈ F
,
≈≈F G
column
∆∆ 
:
∆∆ 
x
∆∆  !
=>
∆∆" $
x
∆∆% &
.
∆∆& '
UserId
∆∆' -
,
∆∆- .
principalTable
«« &
:
««& '
AspNetUsers
««( 3
,
««3 4
principalColumn
»» '
:
»»' (
$str
»») -
,
»»- .
onDelete
……  
:
……  !
ReferentialAction
……" 3
.
……3 4
Cascade
……4 ;
)
……; <
;
……< =
}
   
)
   
;
   
migrationBuilder
ÃÃ 
.
ÃÃ 
CreateTable
ÃÃ (
(
ÃÃ( )
name
ÕÕ 
:
ÕÕ 
Flowers
ÕÕ 
,
ÕÕ 
columns
ŒŒ 
:
ŒŒ 
table
ŒŒ 
=>
ŒŒ !
new
ŒŒ" %
{
œœ 
FlowerId
–– 
=
–– 
table
–– $
.
––$ %
Column
––% +
<
––+ ,
int
––, /
>
––/ 0
(
––0 1
nullable
––1 9
:
––9 :
false
––; @
)
––@ A
.
—— 

Annotation
—— #
(
——# $%
ValueGenerationStrategy
——$ ;
,
——; <.
 SqlServerValueGenerationStrategy
——= ]
.
——] ^
IdentityColumn
——^ l
)
——l m
,
——m n
Name
““ 
=
““ 
table
““  
.
““  !
Column
““! '
<
““' (
string
““( .
>
““. /
(
““/ 0
nullable
““0 8
:
““8 9
true
““: >
)
““> ?
,
““? @
ShortDescription
”” $
=
””% &
table
””' ,
.
””, -
Column
””- 3
<
””3 4
string
””4 :
>
””: ;
(
””; <
nullable
””< D
:
””D E
true
””F J
)
””J K
,
””K L
LongDescription
‘‘ #
=
‘‘$ %
table
‘‘& +
.
‘‘+ ,
Column
‘‘, 2
<
‘‘2 3
string
‘‘3 9
>
‘‘9 :
(
‘‘: ;
nullable
‘‘; C
:
‘‘C D
true
‘‘E I
)
‘‘I J
,
‘‘J K
Price
’’ 
=
’’ 
table
’’ !
.
’’! "
Column
’’" (
<
’’( )
decimal
’’) 0
>
’’0 1
(
’’1 2
nullable
’’2 :
:
’’: ;
false
’’< A
)
’’A B
,
’’B C
ImageUrl
÷÷ 
=
÷÷ 
table
÷÷ $
.
÷÷$ %
Column
÷÷% +
<
÷÷+ ,
string
÷÷, 2
>
÷÷2 3
(
÷÷3 4
nullable
÷÷4 <
:
÷÷< =
true
÷÷> B
)
÷÷B C
,
÷÷C D
ImageThumbnailUrl
◊◊ %
=
◊◊& '
table
◊◊( -
.
◊◊- .
Column
◊◊. 4
<
◊◊4 5
string
◊◊5 ;
>
◊◊; <
(
◊◊< =
nullable
◊◊= E
:
◊◊E F
true
◊◊G K
)
◊◊K L
,
◊◊L M
InStock
ÿÿ 
=
ÿÿ 
table
ÿÿ #
.
ÿÿ# $
Column
ÿÿ$ *
<
ÿÿ* +
bool
ÿÿ+ /
>
ÿÿ/ 0
(
ÿÿ0 1
nullable
ÿÿ1 9
:
ÿÿ9 :
false
ÿÿ; @
)
ÿÿ@ A
,
ÿÿA B

CategoryId
ŸŸ 
=
ŸŸ  
table
ŸŸ! &
.
ŸŸ& '
Column
ŸŸ' -
<
ŸŸ- .
int
ŸŸ. 1
>
ŸŸ1 2
(
ŸŸ2 3
nullable
ŸŸ3 ;
:
ŸŸ; <
false
ŸŸ= B
)
ŸŸB C
,
ŸŸC D"
IsFlowerPresentation
⁄⁄ (
=
⁄⁄) *
table
⁄⁄+ 0
.
⁄⁄0 1
Column
⁄⁄1 7
<
⁄⁄7 8
bool
⁄⁄8 <
>
⁄⁄< =
(
⁄⁄= >
nullable
⁄⁄> F
:
⁄⁄F G
false
⁄⁄H M
)
⁄⁄M N
}
€€ 
,
€€ 
constraints
‹‹ 
:
‹‹ 
table
‹‹ "
=>
‹‹# %
{
›› 
table
ﬁﬁ 
.
ﬁﬁ 

PrimaryKey
ﬁﬁ $
(
ﬁﬁ$ %
$str
ﬁﬁ% 1
,
ﬁﬁ1 2
x
ﬁﬁ3 4
=>
ﬁﬁ5 7
x
ﬁﬁ8 9
.
ﬁﬁ9 :
FlowerId
ﬁﬁ: B
)
ﬁﬁB C
;
ﬁﬁC D
table
ﬂﬂ 
.
ﬂﬂ 

ForeignKey
ﬂﬂ $
(
ﬂﬂ$ %
name
‡‡ 
:
‡‡ 
$str
‡‡ @
,
‡‡@ A
column
·· 
:
·· 
x
··  !
=>
··" $
x
··% &
.
··& '

CategoryId
··' 1
,
··1 2
principalTable
‚‚ &
:
‚‚& '
$str
‚‚( 4
,
‚‚4 5
principalColumn
„„ '
:
„„' (
$str
„„) 5
,
„„5 6
onDelete
‰‰  
:
‰‰  !
ReferentialAction
‰‰" 3
.
‰‰3 4
Cascade
‰‰4 ;
)
‰‰; <
;
‰‰< =
}
ÂÂ 
)
ÂÂ 
;
ÂÂ 
migrationBuilder
ÁÁ 
.
ÁÁ 
CreateTable
ÁÁ (
(
ÁÁ( )
name
ËË 
:
ËË 
OrderDetails
ËË "
,
ËË" #
columns
ÈÈ 
:
ÈÈ 
table
ÈÈ 
=>
ÈÈ !
new
ÈÈ" %
{
ÍÍ 
OrderDetailId
ÎÎ !
=
ÎÎ" #
table
ÎÎ$ )
.
ÎÎ) *
Column
ÎÎ* 0
<
ÎÎ0 1
int
ÎÎ1 4
>
ÎÎ4 5
(
ÎÎ5 6
nullable
ÎÎ6 >
:
ÎÎ> ?
false
ÎÎ@ E
)
ÎÎE F
.
ÏÏ 

Annotation
ÏÏ #
(
ÏÏ# $%
ValueGenerationStrategy
ÏÏ$ ;
,
ÏÏ; <.
 SqlServerValueGenerationStrategy
ÏÏ= ]
.
ÏÏ] ^
IdentityColumn
ÏÏ^ l
)
ÏÏl m
,
ÏÏm n
OrderId
ÌÌ 
=
ÌÌ 
table
ÌÌ #
.
ÌÌ# $
Column
ÌÌ$ *
<
ÌÌ* +
int
ÌÌ+ .
>
ÌÌ. /
(
ÌÌ/ 0
nullable
ÌÌ0 8
:
ÌÌ8 9
false
ÌÌ: ?
)
ÌÌ? @
,
ÌÌ@ A
FlowerId
ÓÓ 
=
ÓÓ 
table
ÓÓ $
.
ÓÓ$ %
Column
ÓÓ% +
<
ÓÓ+ ,
int
ÓÓ, /
>
ÓÓ/ 0
(
ÓÓ0 1
nullable
ÓÓ1 9
:
ÓÓ9 :
false
ÓÓ; @
)
ÓÓ@ A
,
ÓÓA B
Amount
ÔÔ 
=
ÔÔ 
table
ÔÔ "
.
ÔÔ" #
Column
ÔÔ# )
<
ÔÔ) *
int
ÔÔ* -
>
ÔÔ- .
(
ÔÔ. /
nullable
ÔÔ/ 7
:
ÔÔ7 8
false
ÔÔ9 >
)
ÔÔ> ?
,
ÔÔ? @
Price
 
=
 
table
 !
.
! "
Column
" (
<
( )
decimal
) 0
>
0 1
(
1 2
nullable
2 :
:
: ;
false
< A
)
A B
}
ÒÒ 
,
ÒÒ 
constraints
ÚÚ 
:
ÚÚ 
table
ÚÚ "
=>
ÚÚ# %
{
ÛÛ 
table
ÙÙ 
.
ÙÙ 

PrimaryKey
ÙÙ $
(
ÙÙ$ %
$str
ÙÙ% 6
,
ÙÙ6 7
x
ÙÙ8 9
=>
ÙÙ: <
x
ÙÙ= >
.
ÙÙ> ?
OrderDetailId
ÙÙ? L
)
ÙÙL M
;
ÙÙM N
table
ıı 
.
ıı 

ForeignKey
ıı $
(
ıı$ %
name
ˆˆ 
:
ˆˆ 
$str
ˆˆ @
,
ˆˆ@ A
column
˜˜ 
:
˜˜ 
x
˜˜  !
=>
˜˜" $
x
˜˜% &
.
˜˜& '
FlowerId
˜˜' /
,
˜˜/ 0
principalTable
¯¯ &
:
¯¯& '
Flowers
¯¯( /
,
¯¯/ 0
principalColumn
˘˘ '
:
˘˘' (
$str
˘˘) 3
,
˘˘3 4
onDelete
˙˙  
:
˙˙  !
ReferentialAction
˙˙" 3
.
˙˙3 4
Cascade
˙˙4 ;
)
˙˙; <
;
˙˙< =
table
˚˚ 
.
˚˚ 

ForeignKey
˚˚ $
(
˚˚$ %
name
¸¸ 
:
¸¸ 
$str
¸¸ >
,
¸¸> ?
column
˝˝ 
:
˝˝ 
x
˝˝  !
=>
˝˝" $
x
˝˝% &
.
˝˝& '
OrderId
˝˝' .
,
˝˝. /
principalTable
˛˛ &
:
˛˛& '
$str
˛˛( 0
,
˛˛0 1
principalColumn
ˇˇ '
:
ˇˇ' (
$str
ˇˇ) 2
,
ˇˇ2 3
onDelete
ÄÄ  
:
ÄÄ  !
ReferentialAction
ÄÄ" 3
.
ÄÄ3 4
Cascade
ÄÄ4 ;
)
ÄÄ; <
;
ÄÄ< =
}
ÅÅ 
)
ÅÅ 
;
ÅÅ 
migrationBuilder
ÉÉ 
.
ÉÉ 
CreateTable
ÉÉ (
(
ÉÉ( )
name
ÑÑ 
:
ÑÑ 
$str
ÑÑ )
,
ÑÑ) *
columns
ÖÖ 
:
ÖÖ 
table
ÖÖ 
=>
ÖÖ !
new
ÖÖ" %
{
ÜÜ  
ShoppingCartItemId
áá &
=
áá' (
table
áá) .
.
áá. /
Column
áá/ 5
<
áá5 6
int
áá6 9
>
áá9 :
(
áá: ;
nullable
áá; C
:
ááC D
false
ááE J
)
ááJ K
.
àà 

Annotation
àà #
(
àà# $%
ValueGenerationStrategy
àà$ ;
,
àà; <.
 SqlServerValueGenerationStrategy
àà= ]
.
àà] ^
IdentityColumn
àà^ l
)
ààl m
,
ààm n
FlowerId
ââ 
=
ââ 
table
ââ $
.
ââ$ %
Column
ââ% +
<
ââ+ ,
int
ââ, /
>
ââ/ 0
(
ââ0 1
nullable
ââ1 9
:
ââ9 :
true
ââ; ?
)
ââ? @
,
ââ@ A
Amount
ää 
=
ää 
table
ää "
.
ää" #
Column
ää# )
<
ää) *
int
ää* -
>
ää- .
(
ää. /
nullable
ää/ 7
:
ää7 8
false
ää9 >
)
ää> ?
,
ää? @
ShoppingCartId
ãã "
=
ãã# $
table
ãã% *
.
ãã* +
Column
ãã+ 1
<
ãã1 2
string
ãã2 8
>
ãã8 9
(
ãã9 :
nullable
ãã: B
:
ããB C
true
ããD H
)
ããH I
}
åå 
,
åå 
constraints
çç 
:
çç 
table
çç "
=>
çç# %
{
éé 
table
èè 
.
èè 

PrimaryKey
èè $
(
èè$ %
$str
èè% ;
,
èè; <
x
èè= >
=>
èè? A
x
èèB C
.
èèC D 
ShoppingCartItemId
èèD V
)
èèV W
;
èèW X
table
êê 
.
êê 

ForeignKey
êê $
(
êê$ %
name
ëë 
:
ëë 
$str
ëë E
,
ëëE F
column
íí 
:
íí 
x
íí  !
=>
íí" $
x
íí% &
.
íí& '
FlowerId
íí' /
,
íí/ 0
principalTable
ìì &
:
ìì& '
Flowers
ìì( /
,
ìì/ 0
principalColumn
îî '
:
îî' (
	Flower_Id
îî) 2
,
îî2 3
onDelete
ïï  
:
ïï  !
ReferentialAction
ïï" 3
.
ïï3 4
Restrict
ïï4 <
)
ïï< =
;
ïï= >
}
ññ 
)
ññ 
;
ññ 
migrationBuilder
òò 
.
òò 
CreateIndex
òò (
(
òò( )
name
ôô 
:
ôô 
$str
ôô 2
,
ôô2 3
table
öö 
:
öö 
$str
öö )
,
öö) *
column
õõ 
:
õõ 
$str
õõ  
)
õõ  !
;
õõ! "
migrationBuilder
ùù 
.
ùù 
CreateIndex
ùù (
(
ùù( )
name
ûû 
:
ûû 
$str
ûû %
,
ûû% &
table
üü 
:
üü 
AspNetRoles
üü "
,
üü" #
column
†† 
:
†† 
$str
†† (
,
††( )
unique
°° 
:
°° 
true
°° 
,
°° 
filter
¢¢ 
:
¢¢ 
$str
¢¢ 6
)
¢¢6 7
;
¢¢7 8
migrationBuilder
§§ 
.
§§ 
CreateIndex
§§ (
(
§§( )
name
•• 
:
•• 
$str
•• 2
,
••2 3
table
¶¶ 
:
¶¶ 
$str
¶¶ )
,
¶¶) *
column
ßß 
:
ßß 
$str
ßß  
)
ßß  !
;
ßß! "
migrationBuilder
©© 
.
©© 
CreateIndex
©© (
(
©©( )
name
™™ 
:
™™ 
$str
™™ 2
,
™™2 3
table
´´ 
:
´´ 
$str
´´ )
,
´´) *
column
¨¨ 
:
¨¨ 
$str
¨¨  
)
¨¨  !
;
¨¨! "
migrationBuilder
ÆÆ 
.
ÆÆ 
CreateIndex
ÆÆ (
(
ÆÆ( )
name
ØØ 
:
ØØ 
$str
ØØ 1
,
ØØ1 2
table
∞∞ 
:
∞∞ 
$str
∞∞ (
,
∞∞( )
column
±± 
:
±± 
$str
±±  
)
±±  !
;
±±! "
migrationBuilder
≥≥ 
.
≥≥ 
CreateIndex
≥≥ (
(
≥≥( )
name
¥¥ 
:
¥¥ 
$str
¥¥ "
,
¥¥" #
table
µµ 
:
µµ 
AspNetUsers
µµ "
,
µµ" #
column
∂∂ 
:
∂∂ 
$str
∂∂ )
)
∂∂) *
;
∂∂* +
migrationBuilder
∏∏ 
.
∏∏ 
CreateIndex
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ %
,
ππ% &
table
∫∫ 
:
∫∫ 
AspNetUsers
∫∫ "
,
∫∫" #
column
ªª 
:
ªª 
$str
ªª ,
,
ªª, -
unique
ºº 
:
ºº 
true
ºº 
,
ºº 
filter
ΩΩ 
:
ΩΩ 
$str
ΩΩ :
)
ΩΩ: ;
;
ΩΩ; <
migrationBuilder
øø 
.
øø 
CreateIndex
øø (
(
øø( )
name
¿¿ 
:
¿¿ 
$str
¿¿ -
,
¿¿- .
table
¡¡ 
:
¡¡ 
Flowers
¡¡ 
,
¡¡ 
column
¬¬ 
:
¬¬ 
$str
¬¬ $
)
¬¬$ %
;
¬¬% &
migrationBuilder
ƒƒ 
.
ƒƒ 
CreateIndex
ƒƒ (
(
ƒƒ( )
name
≈≈ 
:
≈≈ 
$str
≈≈ 0
,
≈≈0 1
table
∆∆ 
:
∆∆ 
OrderDetails
∆∆ #
,
∆∆# $
column
«« 
:
«« 
	Flower_Id
«« !
)
««! "
;
««" #
migrationBuilder
…… 
.
…… 
CreateIndex
…… (
(
……( )
name
   
:
   
$str
   /
,
  / 0
table
ÀÀ 
:
ÀÀ 
OrderDetails
ÀÀ #
,
ÀÀ# $
column
ÃÃ 
:
ÃÃ 
$str
ÃÃ !
)
ÃÃ! "
;
ÃÃ" #
migrationBuilder
ŒŒ 
.
ŒŒ 
CreateIndex
ŒŒ (
(
ŒŒ( )
name
œœ 
:
œœ 
$str
œœ 5
,
œœ5 6
table
–– 
:
–– 
$str
–– *
,
––* +
column
—— 
:
—— 
	Flower_Id
—— !
)
——! "
;
——" #
}
““ 	
	protected
‘‘ 
override
‘‘ 
void
‘‘ 
Down
‘‘  $
(
‘‘$ %
MigrationBuilder
‘‘% 5
migrationBuilder
‘‘6 F
)
‘‘F G
{
’’ 	
migrationBuilder
÷÷ 
.
÷÷ 
	DropTable
÷÷ &
(
÷÷& '
name
◊◊ 
:
◊◊ 
$str
◊◊ (
)
◊◊( )
;
◊◊) *
migrationBuilder
ŸŸ 
.
ŸŸ 
	DropTable
ŸŸ &
(
ŸŸ& '
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ (
)
⁄⁄( )
;
⁄⁄) *
migrationBuilder
‹‹ 
.
‹‹ 
	DropTable
‹‹ &
(
‹‹& '
name
›› 
:
›› 
$str
›› (
)
››( )
;
››) *
migrationBuilder
ﬂﬂ 
.
ﬂﬂ 
	DropTable
ﬂﬂ &
(
ﬂﬂ& '
name
‡‡ 
:
‡‡ 
$str
‡‡ '
)
‡‡' (
;
‡‡( )
migrationBuilder
‚‚ 
.
‚‚ 
	DropTable
‚‚ &
(
‚‚& '
name
„„ 
:
„„ 
$str
„„ (
)
„„( )
;
„„) *
migrationBuilder
ÂÂ 
.
ÂÂ 
	DropTable
ÂÂ &
(
ÂÂ& '
name
ÊÊ 
:
ÊÊ 
OrderDetails
ÊÊ "
)
ÊÊ" #
;
ÊÊ# $
migrationBuilder
ËË 
.
ËË 
	DropTable
ËË &
(
ËË& '
name
ÈÈ 
:
ÈÈ 
$str
ÈÈ )
)
ÈÈ) *
;
ÈÈ* +
migrationBuilder
ÎÎ 
.
ÎÎ 
	DropTable
ÎÎ &
(
ÎÎ& '
name
ÏÏ 
:
ÏÏ 
AspNetRoles
ÏÏ !
)
ÏÏ! "
;
ÏÏ" #
migrationBuilder
ÓÓ 
.
ÓÓ 
	DropTable
ÓÓ &
(
ÓÓ& '
name
ÔÔ 
:
ÔÔ 
AspNetUsers
ÔÔ !
)
ÔÔ! "
;
ÔÔ" #
migrationBuilder
ÒÒ 
.
ÒÒ 
	DropTable
ÒÒ &
(
ÒÒ& '
name
ÚÚ 
:
ÚÚ 
$str
ÚÚ 
)
ÚÚ 
;
ÚÚ  
migrationBuilder
ÙÙ 
.
ÙÙ 
	DropTable
ÙÙ &
(
ÙÙ& '
name
ıı 
:
ıı 
Flowers
ıı 
)
ıı 
;
ıı 
migrationBuilder
˜˜ 
.
˜˜ 
	DropTable
˜˜ &
(
˜˜& '
name
¯¯ 
:
¯¯ 
$str
¯¯ "
)
¯¯" #
;
¯¯# $
}
˘˘ 	
}
˙˙ 
}˚˚ ¸

SE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191209173625_AddFavorite.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
AddFavorite $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
bool		' +
>		+ ,
(		, -
name

 
:

 
$str

 "
,

" #
table 
: 
$str  
,  !
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str  
)  !
;! "
} 	
} 
} ”
aE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182401_ShippingAndPaymentMethods.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class %
ShippingAndPaymentMethods 2
:3 4
	Migration5 >
{ 
private 
const 
string 
Orders #
=$ %
$str& .
;. /
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
	AddColumn

 &
<

& '
string

' -
>

- .
(

. /
name 
: 
$str "
," #
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str !
,! "
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str &
,& '
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{   	
migrationBuilder!! 
.!! 

DropColumn!! '
(!!' (
name"" 
:"" 
$str"" "
,""" #
table## 
:## 
Orders## 
)## 
;## 
migrationBuilder%% 
.%% 

DropColumn%% '
(%%' (
name&& 
:&& 
$str&& !
,&&! "
table'' 
:'' 
Orders'' 
)'' 
;'' 
migrationBuilder)) 
.)) 

DropColumn)) '
())' (
name** 
:** 
$str** &
,**& '
table++ 
:++ 
Orders++ 
)++ 
;++ 
},, 	
}-- 
}.. á&
bE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191211182629_ShippingAndPaymentMethods1.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class &
ShippingAndPaymentMethods1 3
:4 5
	Migration6 ?
{ 
private 
const 
string 
Orders #
=$ %
$str& .
;. /
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
AlterColumn

 (
<

( )
string

) /
>

/ 0
(

0 1
name 
: 
$str 
,  
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
,  
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str $
,$ %
table 
: 
Orders 
, 
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldMaxLength   
:   
$num   !
)  ! "
;  " #
}!! 	
	protected## 
override## 
void## 
Down##  $
(##$ %
MigrationBuilder##% 5
migrationBuilder##6 F
)##F G
{$$ 	
migrationBuilder%% 
.%% 
AlterColumn%% (
<%%( )
string%%) /
>%%/ 0
(%%0 1
name&& 
:&& 
$str&& 
,&&  
table'' 
:'' 
Orders'' 
,'' 
	maxLength(( 
:(( 
$num(( 
,(( 
nullable)) 
:)) 
false)) 
,))  

oldClrType** 
:** 
typeof** "
(**" #
string**# )
)**) *
,*** +
oldMaxLength++ 
:++ 
$num++  
,++  !
oldNullable,, 
:,, 
true,, !
),,! "
;,," #
migrationBuilder.. 
... 
AlterColumn.. (
<..( )
string..) /
>../ 0
(..0 1
name// 
:// 
$str// 
,//  
table00 
:00 
Orders00 
,00 
	maxLength11 
:11 
$num11 
,11 
nullable22 
:22 
false22 
,22  

oldClrType33 
:33 
typeof33 "
(33" #
string33# )
)33) *
,33* +
oldMaxLength44 
:44 
$num44  
,44  !
oldNullable55 
:55 
true55 !
)55! "
;55" #
migrationBuilder77 
.77 
AlterColumn77 (
<77( )
string77) /
>77/ 0
(770 1
name88 
:88 
$str88 $
,88$ %
table99 
:99 
Orders99 
,99 
	maxLength:: 
::: 
$num:: 
,:: 
nullable;; 
:;; 
false;; 
,;;  

oldClrType<< 
:<< 
typeof<< "
(<<" #
string<<# )
)<<) *
,<<* +
oldMaxLength== 
:== 
$num== !
,==! "
oldNullable>> 
:>> 
true>> !
)>>! "
;>>" #
}?? 	
}@@ 
}AA Ô

NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Migrations\20191212095803_Order2.cs
	namespace 	
	FlowerApp
 
. 

Migrations 
{ 
public 

partial 
class 
Order2 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 $
,

$ %
table 
: 
$str 
,  
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
)  
;  !
} 	
} 
} ∫
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\AppDbContext.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
AppDbContext 
: 
IdentityDbContext  1
<1 2
ApplicationUser2 A
>A B
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
DbSet 
< 
Category 
> 

Categories )
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
Flower 
> 
Flowers $
{ 	
get 
; 
set 
; 
} 	
public 
DbSet 
< 
ShoppingCartItem %
>% &
ShoppingCartItems' 8
{ 	
get 
; 
set 
; 
} 	
public   
DbSet   
<   
Order   
>   
Orders   "
{!! 	
get"" 
;"" 
set## 
;## 
}$$ 	
public&& 
DbSet&& 
<&& 
OrderDetail&&  
>&&  !
OrderDetails&&" .
{'' 	
get(( 
;(( 
set)) 
;)) 
}** 	
}++ 
},, ®
=E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Category.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Category 
{ 
public 
int 

CategoryId 
{ 	
get		 
;		 
set

 
;

 
} 	
public 
string 
CategoryName "
{ 	
get 
; 
set 
; 
} 	
public 
string 
Description !
{ 	
get 
; 
set 
; 
} 	
public 
List 
< 
Flower 
> 
Flowers #
{ 	
get 
; 
set 
; 
} 	
} 
} òk
BE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\DbInitializer.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

static 
class 
DbInitializer %
{		 
private

 
const

 
string

 
SingleFlower

 )
=

* +
$str

, ;
;

; <
private 
const 
string 
BouquetOfFlowers -
=. /
$str0 D
;D E
private 
const 
string 
SeasonalFlowers ,
=- .
$str/ A
;A B
public 
static 
void 
Seed 
(  
IApplicationBuilder  3
applicationBuilder4 F
)F G
{ 	
using 
( 
var 
serviceScope #
=$ %
applicationBuilder& 8
.8 9
ApplicationServices9 L
.L M
CreateScopeM X
(X Y
)Y Z
)Z [
{ 
AppDbContext 
context $
=% &
serviceScope' 3
.3 4
ServiceProvider4 C
.C D

GetServiceD N
<N O
AppDbContextO [
>[ \
(\ ]
)] ^
;^ _
if 
( 
! 
context 
. 

Categories '
.' (
Any( +
(+ ,
), -
)- .
{ 
context 
. 

Categories &
.& '
AddRange' /
(/ 0

Categories0 :
.: ;
Select; A
(A B
cB C
=>D F
cG H
.H I
ValueI N
)N O
)O P
;P Q
} 
if 
( 
! 
context 
. 
Flowers $
.$ %
Any% (
(( )
)) *
)* +
{ 
context 
. 
AddRange $
( 
new 
Flower "
{ 
Name  
=! "
$str# )
,) *
Price !
=" #
$num$ *
,* +
ShortDescription   ,
=  - .
$str  / =
,  = >
LongDescription!! +
=!!, -
$str!%. R
,%%R S
Category&& $
=&&% &

Categories&&' 1
[&&1 2
SingleFlower&&2 >
]&&> ?
,&&? @
ImageUrl'' $
=''% &
$str	''' É
,
''É Ñ
InStock(( #
=(($ %
true((& *
,((* +
ImageThumbnailUrl)) -
=)). /
$str))0 2
+))3 4
$str** x
,**x y 
IsFlowerPresentation++ 0
=++1 2
true++3 7
},, 
,,, 
new-- 
Flower-- "
{.. 
Name//  
=//! "
$str//# )
,//) *
Price00 !
=00" #
$num00$ *
,00* +
ShortDescription11 ,
=11- .
$str11/ D
,11D E
LongDescription22 +
=22, -
$str24. p
,44p q
Category55 $
=55% &

Categories55' 1
[551 2
SingleFlower552 >
]55> ?
,55? @
ImageUrl66 $
=66% &
$str66' v
,66v w
InStock77 #
=77$ %
true77& *
,77* +
ImageThumbnailUrl88 -
=88. /
$str880 
,	88 Ä 
IsFlowerPresentation99 0
=991 2
false993 8
}:: 
,:: 
new;; 
Flower;; "
{<< 
Name==  
===! "
$str==# *
,==* +
Price>> !
=>>" #
$num>>$ *
,>>* +
ShortDescription?? ,
=??- .
$str??/ C
,??C D
LongDescription@@ +
=@@, -
$str	@A. Ç
,
AAÇ É
CategoryBB $
=BB% &

CategoriesBB' 1
[BB1 2
SingleFlowerBB2 >
]BB> ?
,BB? @
ImageUrlCC $
=CC% &
$strCC' u
,CCu v
InStockDD #
=DD$ %
trueDD& *
,DD* +
ImageThumbnailUrlEE -
=EE. /
$strEE0 ~
,EE~  
IsFlowerPresentationFF 0
=FF1 2
falseFF3 8
}GG 
,GG 
newHH 
FlowerHH "
{II 
NameJJ  
=JJ! "
$strJJ# 5
,JJ5 6
PriceKK !
=KK" #
$numKK$ *
,KK* +
ShortDescriptionLL ,
=LL- .
$strLL/ :
,LL: ;
LongDescriptionMM +
=MM, -
$str	MW. Å
,
WWÅ Ç
CategoryXX $
=XX% &

CategoriesXX' 1
[XX1 2
BouquetOfFlowersXX2 B
]XXB C
,XXC D
ImageUrlYY $
=YY% &
$strYY' j
,YYj k
InStockZZ #
=ZZ$ %
trueZZ& *
,ZZ* +
ImageThumbnailUrl[[ -
=[[. /
$str[[0 s
,[[s t 
IsFlowerPresentation\\ 0
=\\1 2
true\\3 7
}]] 
,]] 
new__ 
Flower__ "
{`` 
Nameaa  
=aa! "
$straa# -
,aa- .
Pricebb !
=bb" #
$numbb$ *
,bb* +
ShortDescriptioncc ,
=cc- .
$strcc/ >
,cc> ?
LongDescriptiondd +
=dd, -
$strdj. d
,jjd e
Categorykk $
=kk% &

Categorieskk' 1
[kk1 2
SeasonalFlowerskk2 A
]kkA B
,kkB C
ImageUrlll $
=ll% &
$strll' c
,llc d
InStockmm #
=mm$ %
truemm& *
,mm* +
ImageThumbnailUrlnn -
=nn. /
$strnn0 l
,nnl m 
IsFlowerPresentationoo 0
=oo1 2
falseoo3 8
}pp 
,pp 
newrr 
Flowerrr "
{ss 
Namett  
=tt! "
$strtt# *
,tt* +
Priceuu !
=uu" #
$numuu$ *
,uu* +
ShortDescriptionvv ,
=vv- .
$strvv/ >
,vv> ?
LongDescriptionww +
=ww, -
$strw. x
,x y
Category
ÄÄ $
=
ÄÄ% &

Categories
ÄÄ' 1
[
ÄÄ1 2
SeasonalFlowers
ÄÄ2 A
]
ÄÄA B
,
ÄÄB C
ImageUrl
ÅÅ $
=
ÅÅ% &
$str
ÅÅ' N
,
ÅÅN O
InStock
ÇÇ #
=
ÇÇ$ %
true
ÇÇ& *
,
ÇÇ* +
ImageThumbnailUrl
ÉÉ -
=
ÉÉ. /
$str
ÉÉ0 W
,
ÉÉW X"
IsFlowerPresentation
ÑÑ 0
=
ÑÑ1 2
false
ÑÑ3 8
}
ÖÖ 
,
ÖÖ 
new
áá 
Flower
áá "
{
àà 
Name
ââ  
=
ââ! "
$str
ââ# =
,
ââ= >
Price
ää !
=
ää" #
$num
ää$ *
,
ää* +
ShortDescription
ãã ,
=
ãã- .
$str
ãã/ >
,
ãã> ?
LongDescription
åå +
=
åå, -
$stråé. É
,ééÉ Ñ
Category
èè $
=
èè% &

Categories
èè' 1
[
èè1 2
$str
èè2 F
]
èèF G
,
èèG H
ImageUrl
êê $
=
êê% &
$str
êê' g
,
êêg h
InStock
ëë #
=
ëë$ %
true
ëë& *
,
ëë* +
ImageThumbnailUrl
íí -
=
íí. /
$str
íí0 p
,
ííp q"
IsFlowerPresentation
ìì 0
=
ìì1 2
true
ìì3 7
}
îî 
,
îî 
new
ññ 
Flower
ññ "
{
óó 
Name
òò  
=
òò! "
$str
òò# *
,
òò* +
Price
ôô !
=
ôô" #
$num
ôô$ *
,
ôô* +
ShortDescription
öö ,
=
öö- .
$str
öö/ E
,
ööE F
LongDescription
õõ +
=
õõ, -
$str
õü. a
,
üüa b
Category
†† $
=
††% &

Categories
††' 1
[
††1 2
SeasonalFlowers
††2 A
]
††A B
,
††B C
ImageUrl
°° $
=
°°% &
$str¢¢ à
,¢¢à â
InStock
££ #
=
££$ %
true
££& *
,
££* +
ImageThumbnailUrl
§§ -
=
§§. /
$str•• à
,••à â"
IsFlowerPresentation
¶¶ 0
=
¶¶1 2
true
¶¶3 7
}
ßß 
,
ßß 
new
©© 
Flower
©© "
{
™™ 
Name
´´  
=
´´! "
$str
´´# 2
,
´´2 3
Price
¨¨ !
=
¨¨" #
$num
¨¨$ *
,
¨¨* +
ShortDescription
≠≠ ,
=
≠≠- .
$str
≠≠/ J
,
≠≠J K
LongDescription
ÆÆ +
=
ÆÆ, -
$str
Æ≤. `
,
≤≤` a
Category
≥≥ $
=
≥≥% &

Categories
≥≥' 1
[
≥≥1 2
BouquetOfFlowers
≥≥2 B
]
≥≥B C
,
≥≥C D
ImageUrl
¥¥ $
=
¥¥% &
$strµµ à
,µµà â
InStock
∂∂ #
=
∂∂$ %
true
∂∂& *
,
∂∂* +
ImageThumbnailUrl
∑∑ -
=
∑∑. /
$str∏∏ à
,∏∏à â"
IsFlowerPresentation
ππ 0
=
ππ1 2
false
ππ3 8
}
∫∫ 
,
∫∫ 
new
ªª 
Flower
ªª "
{
ºº 
Name
ΩΩ  
=
ΩΩ! "
$str
ΩΩ# 6
,
ΩΩ6 7
Price
ææ !
=
ææ" #
$num
ææ$ *
,
ææ* +
ShortDescription
øø ,
=
øø- .
$str
øø/ >
,
øø> ?
LongDescription
¿¿ +
=
¿¿, -
$str
¿≈. k
,
≈≈k l
Category
∆∆ $
=
∆∆% &

Categories
∆∆' 1
[
∆∆1 2
BouquetOfFlowers
∆∆2 B
]
∆∆B C
,
∆∆C D
ImageUrl
«« $
=
««% &
$str
»» D
+
»»E F
$str
…… v
,
……v w
InStock
   #
=
  $ %
true
  & *
,
  * +
ImageThumbnailUrl
ÀÀ -
=
ÀÀ. /
$str
ÃÃ D
+
ÃÃE F
$str
ÕÕ v
,
ÕÕv w"
IsFlowerPresentation
ŒŒ 0
=
ŒŒ1 2
false
ŒŒ3 8
}
œœ 
,
œœ 
new
—— 
Flower
—— "
{
““ 
Name
””  
=
””! "
$str
””# 2
,
””2 3
Price
‘‘ !
=
‘‘" #
$num
‘‘$ *
,
‘‘* +
ShortDescription
’’ ,
=
’’- .
$str
’’/ G
,
’’G H
LongDescription
÷÷ +
=
÷÷, -
$str
÷‡. `
,
‡‡` a
Category
·· $
=
··% &

Categories
··' 1
[
··1 2
SingleFlower
··2 >
]
··> ?
,
··? @
ImageUrl
‚‚ $
=
‚‚% &
$str
‚‚' w
,
‚‚w x
InStock
„„ #
=
„„$ %
true
„„& *
,
„„* +
ImageThumbnailUrl
‰‰ -
=
‰‰. /
$str‰‰0 Ä
,‰‰Ä Å"
IsFlowerPresentation
ÂÂ 0
=
ÂÂ1 2
false
ÂÂ3 8
}
ÊÊ 
)
ÁÁ 
;
ÁÁ 
}
ËË 
context
ÍÍ 
.
ÍÍ 
SaveChanges
ÍÍ #
(
ÍÍ# $
)
ÍÍ$ %
;
ÍÍ% &
}
ÎÎ 
}
ÏÏ 	
private
ÓÓ 
static
ÓÓ 

Dictionary
ÓÓ !
<
ÓÓ! "
string
ÓÓ" (
,
ÓÓ( )
Category
ÓÓ* 2
>
ÓÓ2 3

categories
ÓÓ4 >
;
ÓÓ> ?
public
ÔÔ 
static
ÔÔ 

Dictionary
ÔÔ  
<
ÔÔ  !
string
ÔÔ! '
,
ÔÔ' (
Category
ÔÔ) 1
>
ÔÔ1 2

Categories
ÔÔ3 =
{
 	
get
ÒÒ 
{
ÚÚ 
if
ÛÛ 
(
ÛÛ 

categories
ÛÛ 
==
ÛÛ !
null
ÛÛ" &
)
ÛÛ& '
{
ÙÙ 
var
ıı 

genresList
ıı "
=
ıı# $
new
ıı% (
Category
ıı) 1
[
ıı1 2
]
ıı2 3
{
ˆˆ 
new
˜˜ 
Category
˜˜ $
{
˜˜% &
CategoryName
˜˜' 3
=
˜˜4 5
SingleFlower
˜˜6 B
}
˜˜C D
,
˜˜D E
new
¯¯ 
Category
¯¯ $
{
¯¯% &
CategoryName
¯¯' 3
=
¯¯4 5
BouquetOfFlowers
¯¯6 F
}
¯¯G H
,
¯¯H I
new
˘˘ 
Category
˘˘ $
{
˘˘% &
CategoryName
˘˘' 3
=
˘˘4 5
SeasonalFlowers
˘˘6 E
}
˘˘F G
}
˙˙ 
;
˙˙ 

categories
¸¸ 
=
¸¸  
new
¸¸! $

Dictionary
¸¸% /
<
¸¸/ 0
string
¸¸0 6
,
¸¸6 7
Category
¸¸8 @
>
¸¸@ A
(
¸¸A B
)
¸¸B C
;
¸¸C D
foreach
˛˛ 
(
˛˛ 
Category
˛˛ %
genre
˛˛& +
in
˛˛, .

genresList
˛˛/ 9
)
˛˛9 :
{
ˇˇ 

categories
ÄÄ "
.
ÄÄ" #
Add
ÄÄ# &
(
ÄÄ& '
genre
ÄÄ' ,
.
ÄÄ, -
CategoryName
ÄÄ- 9
,
ÄÄ9 :
genre
ÄÄ; @
)
ÄÄ@ A
;
ÄÄA B
}
ÅÅ 
}
ÇÇ 
return
ÑÑ 

categories
ÑÑ !
;
ÑÑ! "
}
ÖÖ 
}
ÜÜ 	
}
áá 
}àà ˚
;E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Flower.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Flower 
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
virtual 
Category 
Category  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 

IsFavorite 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ö6
:E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\Order.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
Order 
{		 
[

 	
	BindNever

	 
]

 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
OrderDetail 
>  

OrderLines! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ?
)? @
]@ A
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
ShippingMethod $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
Display	 
( 
Name 
= 
$str (
)( )
]) *
public   
string   
AddressLine1   "
{  # $
get  % (
;  ( )
set  * -
;  - .
}  / 0
["" 	
Display""	 
("" 
Name"" 
="" 
$str"" (
)""( )
]"") *
public## 
string## 
AddressLine2## "
{### $
get##% (
;##( )
set##* -
;##- .
}##/ 0
[&& 	
Display&&	 
(&& 
Name&& 
=&& 
$str&& "
)&&" #
]&&# $
['' 	
StringLength''	 
('' 
$num'' 
,'' 
MinimumLength'' '
=''( )
$num''* +
)''+ ,
]'', -
public(( 
string(( 
ZipCode(( 
{(( 
get((  #
;((# $
set((% (
;((( )
}((* +
[** 	
Required**	 
(** 
ErrorMessage** 
=**  
$str**! 9
)**9 :
]**: ;
[++ 	
StringLength++	 
(++ 
$num++ 
)++ 
]++ 
public,, 
string,, 
City,, 
{,, 
get,,  
;,,  !
set,," %
;,,% &
},,' (
[.. 	
StringLength..	 
(.. 
$num.. 
).. 
].. 
public// 
string// 
State// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
[22 	
StringLength22	 
(22 
$num22 
)22 
]22 
public33 
string33 
Country33 
{33 
get33  #
;33# $
set33% (
;33( )
}33* +
[55 	
Required55	 
(55 
ErrorMessage55 
=55  
$str55! A
)55A B
]55B C
[66 	
StringLength66	 
(66 
$num66 
)66 
]66 
[77 	
DataType77	 
(77 
DataType77 
.77 
PhoneNumber77 &
)77& '
]77' (
[88 	
Display88	 
(88 
Name88 
=88 
$str88 &
)88& '
]88' (
public99 
string99 
PhoneNumber99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
[;; 	
Required;;	 
];; 
[<< 	
StringLength<<	 
(<< 
$num<< 
)<< 
]<< 
[== 	
DataType==	 
(== 
DataType== 
.== 
EmailAddress== '
)==' (
]==( )
[>> 	
RegularExpression>>	 
(>> 
$str>C ?
,CC? @
ErrorMessageDD 
=DD 
$strDD Q
)DDQ R
]DDR S
publicEE 
stringEE 
EmailEE 
{EE 
getEE !
;EE! "
setEE# &
;EE& '
}EE( )
[GG 	
	BindNeverGG	 
]GG 
[HH 	
ScaffoldColumnHH	 
(HH 
falseHH 
)HH 
]HH 
publicII 
decimalII 

OrderTotalII !
{II" #
getII$ '
;II' (
setII) ,
;II, -
}II. /
[KK 	
	BindNeverKK	 
]KK 
[LL 	
ScaffoldColumnLL	 
(LL 
falseLL 
)LL 
]LL 
publicMM 
DateTimeMM 
OrderPlacedMM #
{MM$ %
getMM& )
;MM) *
setMM+ .
;MM. /
}MM0 1
[OO 	
RequiredOO	 
]OO 
[PP 	
StringLengthPP	 
(PP 
$numPP 
)PP 
]PP 
publicQQ 
stringQQ 
	PayMethodQQ 
{QQ  !
getQQ" %
;QQ% &
setQQ' *
;QQ* +
}QQ, -
[SS 	
StringLengthSS	 
(SS 
$numSS 
)SS 
]SS 
publicTT 
stringTT 

CardNumberTT  
{TT! "
getTT# &
;TT& '
setTT( +
;TT+ ,
}TT- .
[VV 	
StringLengthVV	 
(VV 
$numVV 
)VV 
]VV 
publicWW 
stringWW 
SecurityCodeWW "
{WW# $
getWW% (
;WW( )
setWW* -
;WW- .
}WW/ 0
}XX 
}YY Â

@E:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\OrderDetail.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
OrderDetail 
{ 
public 
int 
OrderDetailId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public		 
int		 
FlowerId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public 
int 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Flower 
Flower $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
virtual 
Order 
Order "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ˘E
AE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCart.cs
	namespace 	
	FlowerApp
 
. 
Models 
{		 
public

 

class

 
ShoppingCart

 
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
ShoppingCart 
( 
AppDbContext )
appDbContext* 6
)6 7
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 
ShoppingCartItem $
>$ %
ShoppingCartItems& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
static 
ShoppingCart "
GetCart# *
(* +
IServiceProvider+ ;
services< D
)D E
{ 	
ISession 
session 
= 
services '
.' (
GetRequiredService( :
<: ; 
IHttpContextAccessor; O
>O P
(P Q
)Q R
?R S
. 
HttpContext 
. 
Session $
;$ %
var 
context 
= 
services "
." #

GetService# -
<- .
AppDbContext. :
>: ;
(; <
)< =
;= >
string 
cartId 
= 
session #
.# $
	GetString$ -
(- .
$str. 6
)6 7
??8 :
Guid; ?
.? @
NewGuid@ G
(G H
)H I
.I J
ToStringJ R
(R S
)S T
;T U
session 
. 
	SetString 
( 
$str &
,& '
cartId( .
). /
;/ 0
return   
new   
ShoppingCart   #
(  # $
context  $ +
)  + ,
{  - .
ShoppingCartId  / =
=  > ?
cartId  @ F
}  G H
;  H I
}!! 	
public## 
void## 
	AddToCart## 
(## 
Flower## $
flower##% +
,##+ ,
int##- 0
amount##1 7
)##7 8
{$$ 	
var%% 
shoppingCartItem%%  
=%%! "
_appDbContext&& !
.&&! "
ShoppingCartItems&&" 3
.&&3 4
SingleOrDefault&&4 C
(&&C D
s'' 
=>'' 
s'' 
.'' 
Flower'' %
.''% &
FlowerId''& .
==''/ 1
flower''2 8
.''8 9
FlowerId''9 A
&&''B D
s''E F
.''F G
ShoppingCartId''G U
==''V X
ShoppingCartId''Y g
)''g h
;''h i
if)) 
()) 
shoppingCartItem))  
==))! #
null))$ (
)))( )
{** 
shoppingCartItem++  
=++! "
new++# &
ShoppingCartItem++' 7
{,, 
ShoppingCartId-- "
=--# $
ShoppingCartId--% 3
,--3 4
Flower.. 
=.. 
flower.. #
,..# $
Amount// 
=// 
$num// 
}00 
;00 
_appDbContext22 
.22 
ShoppingCartItems22 /
.22/ 0
Add220 3
(223 4
shoppingCartItem224 D
)22D E
;22E F
}33 
else44 
{55 
if<< 
(<< 
shoppingCartItem<< $
.<<$ %
Amount<<% +
<<<, -
$num<<. /
)<</ 0
{== 
shoppingCartItem>> $
.>>$ %
Amount>>% +
=>>, -
amount>>. 4
+>>5 6
$num>>7 8
;>>8 9
}?? 
else@@ 
if@@ 
(@@ 
shoppingCartItem@@ )
.@@) *
Amount@@* 0
>@@1 2
$num@@3 4
)@@4 5
{AA 
shoppingCartItemBB $
.BB$ %
AmountBB% +
=BB, -
amountBB. 4
;BB4 5
}CC 
elseDD 
shoppingCartItemEE $
.EE$ %
AmountEE% +
+=EE, .
amountEE/ 5
;EE5 6
}FF 
_appDbContextGG 
.GG 
SaveChangesGG %
(GG% &
)GG& '
;GG' (
}HH 	
publicJJ 
intJJ 
RemoveFromCartJJ !
(JJ! "
FlowerJJ" (
flowerJJ) /
)JJ/ 0
{KK 	
varLL 
shoppingCartItemLL  
=LL! "
_appDbContextMM !
.MM! "
ShoppingCartItemsMM" 3
.MM3 4
SingleOrDefaultMM4 C
(MMC D
sNN 
=>NN 
sNN 
.NN 
FlowerNN %
.NN% &
FlowerIdNN& .
==NN/ 1
flowerNN2 8
.NN8 9
FlowerIdNN9 A
&&NNB D
sNNE F
.NNF G
ShoppingCartIdNNG U
==NNV X
ShoppingCartIdNNY g
)NNg h
;NNh i
varPP 
localAmountPP 
=PP 
$numPP 
;PP  
ifRR 
(RR 
shoppingCartItemRR  
!=RR! #
nullRR$ (
)RR( )
{SS 
ifTT 
(TT 
shoppingCartItemTT $
.TT$ %
AmountTT% +
>TT, -
$numTT. /
)TT/ 0
{UU 
shoppingCartItemVV $
.VV$ %
AmountVV% +
--VV+ -
;VV- .
localAmountWW 
=WW  !
shoppingCartItemWW" 2
.WW2 3
AmountWW3 9
;WW9 :
}XX 
elseYY 
{ZZ 
_appDbContext[[ !
.[[! "
ShoppingCartItems[[" 3
.[[3 4
Remove[[4 :
([[: ;
shoppingCartItem[[; K
)[[K L
;[[L M
}\\ 
}]] 
_appDbContext__ 
.__ 
SaveChanges__ %
(__% &
)__& '
;__' (
returnaa 
localAmountaa 
;aa 
}bb 	
publicdd 
Listdd 
<dd 
ShoppingCartItemdd $
>dd$ % 
GetShoppingCartItemsdd& :
(dd: ;
)dd; <
{ee 	
returnff 
ShoppingCartItemsff $
??ff% '
(gg 
ShoppingCartItemsgg %
=gg& '
_appDbContexthh $
.hh$ %
ShoppingCartItemshh% 6
.hh6 7
Wherehh7 <
(hh< =
chh= >
=>hh? A
chhB C
.hhC D
ShoppingCartIdhhD R
==hhS U
ShoppingCartIdhhV d
)hhd e
.ii 
Includeii #
(ii# $
sii$ %
=>ii& (
sii) *
.ii* +
Flowerii+ 1
)ii1 2
.jj 
ToListjj "
(jj" #
)jj# $
)jj$ %
;jj% &
}kk 	
publicmm 
voidmm 
	ClearCartmm 
(mm 
)mm 
{nn 	
varoo 
	cartItemsoo 
=oo 
_appDbContextoo )
.pp 
ShoppingCartItemspp "
.qq 
Whereqq 
(qq 
cartqq 
=>qq 
cartqq #
.qq# $
ShoppingCartIdqq$ 2
==qq3 5
ShoppingCartIdqq6 D
)qqD E
;qqE F
_appDbContextss 
.ss 
ShoppingCartItemsss +
.ss+ ,
RemoveRangess, 7
(ss7 8
	cartItemsss8 A
)ssA B
;ssB C
_appDbContextuu 
.uu 
SaveChangesuu %
(uu% &
)uu& '
;uu' (
}vv 	
publiczz 
decimalzz  
GetShoppingCartTotalzz +
(zz+ ,
)zz, -
{{{ 	
var|| 
total|| 
=|| 
_appDbContext|| %
.||% &
ShoppingCartItems||& 7
.||7 8
Where||8 =
(||= >
c||> ?
=>||@ B
c||C D
.||D E
ShoppingCartId||E S
==||T V
ShoppingCartId||W e
)||e f
.}} 
Select}} 
(}} 
c}} 
=>}} 
c}} 
.}} 
Flower}} %
.}}% &
Price}}& +
*}}, -
c}}. /
.}}/ 0
Amount}}0 6
)}}6 7
.}}7 8
Sum}}8 ;
(}}; <
)}}< =
;}}= >
return~~ 
total~~ 
;~~ 
} 	
}
ÄÄ 
}ÅÅ â
EE:\Projects\FlowerShop\FlowerApp\FlowerApp\Models\ShoppingCartItem.cs
	namespace 	
	FlowerApp
 
. 
Models 
{ 
public 

class 
ShoppingCartItem !
{ 
public 
int 
ShoppingCartItemId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
Amount		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
public 
string 
ShoppingCartId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ¡
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Program.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} è
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\CategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class 
CategoryRepository #
:$ %
ICategoryRepository& 9
{ 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public

 
CategoryRepository

 !
(

! "
AppDbContext

" .
appDbContext

/ ;
)

; <
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Category #
># $

Categories% /
=>0 2
_appDbContext3 @
.@ A

CategoriesA K
;K L
} 
} õ3
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\FlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
FlowerRepository		 !
:		" #
IFlowerRepository		$ 5
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
public 
FlowerRepository 
(  
AppDbContext  ,
appDbContext- 9
)9 :
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Include- 4
(4 5
c5 6
=>7 9
c: ;
.; <
Category< D
)D E
;E F
} 
} 	
public 
IEnumerable 
< 
string !
>! "
FlowersNames# /
{ 	
get 
{ 
return 
_appDbContext $
.$ %
Flowers% ,
., -
Select- 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Name; ?
)? @
.@ A
ToListA G
(G H
)H I
;I J
} 
}   	
public"" 
IEnumerable"" 
<"" 
Flower"" !
>""! "
FlowerPresentation""# 5
{## 	
get$$ 
{%% 
return&& 
_appDbContext&& $
.&&$ %
Flowers&&% ,
.&&, -
Include&&- 4
(&&4 5
c&&5 6
=>&&7 9
c&&: ;
.&&; <
Category&&< D
)&&D E
.&&E F
Where&&F K
(&&K L
p&&L M
=>&&N P
p&&Q R
.&&R S 
IsFlowerPresentation&&S g
)&&g h
;&&h i
}'' 
}(( 	
public** 
Flower** 
GetFlowerById** #
(**# $
int**$ '
flowerId**( 0
)**0 1
{++ 	
return,, 
_appDbContext,,  
.,,  !
Flowers,,! (
.,,( )
FirstOrDefault,,) 7
(,,7 8
f,,8 9
=>,,: <
f,,= >
.,,> ?
FlowerId,,? G
==,,H J
flowerId,,K S
),,S T
;,,T U
}-- 	
public// 
IEnumerable// 
<// 
FlowerViewModel// *
>//* +
FlowersAsViewModel//, >
{00 	
get11 
{22 
List33 
<33 
FlowerViewModel33 $
>33$ %
flowers33& -
=33. /
new330 3
List334 8
<338 9
FlowerViewModel339 H
>33H I
(33I J
)33J K
;33K L
foreach55 
(55 
var55 
dbFlower55 %
in55& (
Flowers55) 0
)550 1
{66 
flowers77 
.77 
Add77 
(77  (
MapDbFlowerToFlowerViewModel77  <
(77< =
dbFlower77= E
)77E F
)77F G
;77G H
}88 
return:: 
flowers:: 
;:: 
};; 
}<< 	
public>> 
bool>> 
	AddFlower>> 
(>> 
Flower>> $
flower>>% +
)>>+ ,
{?? 	
var@@ 
result@@ 
=@@ 
_appDbContext@@ &
.@@& '
Add@@' *
(@@* +
flower@@+ 1
)@@1 2
;@@2 3
_appDbContextBB 
.BB 
SaveChangesBB %
(BB% &
)BB& '
;BB' (
returnDD 
resultDD 
.DD 
StateDD 
==DD  "
EntityStateDD# .
.DD. /
AddedDD/ 4
||DD5 7
resultDD8 >
.DD> ?
StateDD? D
==DDE G
EntityStateDDH S
.DDS T
	UnchangedDDT ]
?DD^ _
trueDD` d
:DDe f
falseDDg l
;DDl m
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
varII 
resultII 
=II 
_appDbContextII &
.II& '
RemoveII' -
(II- .
flowerII. 4
)II4 5
;II5 6
_appDbContextKK 
.KK 
SaveChangesKK %
(KK% &
)KK& '
;KK' (
returnMM 
resultMM 
.MM 
StateMM 
==MM  "
EntityStateMM# .
.MM. /
DeletedMM/ 6
||MM7 9
resultMM: @
.MM@ A
StateMMA F
==MMG I
EntityStateMMJ U
.MMU V
	UnchangedMMV _
?MM` a
trueMMb f
:MMg h
falseMMi n
;MMn o
}NN 	
privatePP 
FlowerViewModelPP (
MapDbFlowerToFlowerViewModelPP  <
(PP< =
FlowerPP= C
dbFlowerPPD L
)PPL M
{QQ 	
returnRR 
newRR 
FlowerViewModelRR &
{SS 
FlowerIdTT 
=TT 
dbFlowerTT #
.TT# $
FlowerIdTT$ ,
,TT, -
NameUU 
=UU 
dbFlowerUU 
.UU  
NameUU  $
,UU$ %
PriceVV 
=VV 
dbFlowerVV  
.VV  !
PriceVV! &
,VV& '
ShortDescriptionWW  
=WW! "
dbFlowerWW# +
.WW+ ,
ShortDescriptionWW, <
,WW< =
ImageThumbnailUrlXX !
=XX" #
dbFlowerXX$ ,
.XX, -
ImageThumbnailUrlXX- >
}YY 
;YY 
}ZZ 	
public\\ 
bool\\ 
UpdateFlower\\  
(\\  !
Flower\\! '
flower\\( .
)\\. /
{]] 	
_appDbContext^^ 
.^^ 
Update^^  
(^^  !
flower^^! '
)^^' (
;^^( )
_appDbContext`` 
.`` 
SaveChanges`` %
(``% &
)``& '
;``' (
returnbb 
truebb 
;bb 
}cc 	
}dd 
}ee »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ICategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
ICategoryRepository (
{ 
IEnumerable 
< 
Category 
> 

Categories (
{) *
get+ .
;. /
}0 1
}		 
}

 ¿
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IFlowerRepository &
{ 
IEnumerable		 
<		 
Flower		 
>		 
Flowers		 #
{		$ %
get		& )
;		) *
}		+ ,
IEnumerable 
< 
Flower 
> 
FlowerPresentation .
{/ 0
get1 4
;4 5
}6 7
IEnumerable 
< 
FlowerViewModel #
># $
FlowersAsViewModel% 7
{ 	
get 
; 
} 	
IEnumerable 
< 
string 
> 
FlowersNames (
{ 	
get 
; 
} 	
Flower 
GetFlowerById 
( 
int  
flowerId! )
)) *
;* +
bool 
	AddFlower 
( 
Flower 
flower $
)$ %
;% &
bool 
DeleteFlower 
( 
Flower  
flower! '
)' (
;( )
bool 
UpdateFlower 
( 
Flower  
flower! '
)' (
;( )
} 
} ò
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\IOrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

	interface 
IOrderRepository %
{ 
void		 
CreateOrder		 
(		 
Order		 
order		 $
)		$ %
;		% &
IEnumerable 
< (
OrderHistoryDetailsViewModel 0
>0 1 
GetOrdersAsViewModel2 F
(F G
stringG M
userNameN V
=W X
$strY [
)[ \
;\ ]
} 
} à
PE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelCategoryRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public 

class #
ModelCategoryRepository (
:) *
ICategoryRepository+ >
{ 
public 
IEnumerable 
< 
Category #
># $

Categories% /
{		 	
get

 
{ 
return 
new 
List 
<  
Category  (
>( )
{ 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 5
,5 6
Description #
=$ %
$str% 9
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& :
,: ;
Description #
=$ %
$str% 3
} 
, 
new 
Category  
{  !

CategoryId "
=# $
$num$ %
,% &
CategoryName $
=% &
$str& 8
,8 9
Description #
=$ %
$str% M
} 
} 
; 
}   
}!! 	
}"" 
}## ô1
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\ModelFlowerRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 !
ModelFlowerRepository		 &
:		' (
IFlowerRepository		) :
{

 
private 
readonly 
ICategoryRepository ,
_categoryRepository- @
=A B
newC F#
ModelCategoryRepositoryG ^
(^ _
)_ `
;` a
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{ 	
get 
{ 
return 
new 
List 
<  
Flower  &
>& '
{ 
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name 
= 
$str %
,% &
Price 
= 
$num $
,$ %
ShortDescription (
=( )
$str) 7
,7 8
LongDescription '
=' (
$str( /
,/ 0
Category  
=! "
_categoryRepository# 6
.6 7

Categories7 A
.A B
ToListB H
(H I
)I J
[J K
$numK L
]L M
,M N
ImageUrl  
=! "
$str" g
,g h
InStocki p
=p q
trueq u
,u v
ImageThumbnailUrl )
=* +
$str+ p
}p q
,q r
new 
Flower 
{  
FlowerId  
=! "
$num# $
,$ %
Name   
=   
$str   &
,  & '
Price!! 
=!! 
$num!! $
,!!$ %
ShortDescription"" (
=""( )
$str"") 7
,""7 8
LongDescription## '
=##' (
$str##( 1
,##1 2
Category$$  
=$$! "
_categoryRepository$$# 6
.$$6 7

Categories$$7 A
.$$A B
ToList$$B H
($$H I
)$$I J
[$$J K
$num$$K L
]$$L M
,$$M N
ImageUrl%%  
=%%! "
$str	%%" Ä
,
%%Ä Å
InStock&& 
=&&  
true&&  $
,&&$ %
ImageThumbnailUrl'' )
=''* +
$str	''+ â
}
''â ä
,
''ä ã
new)) 
Flower)) 
{))  
FlowerId))  (
=))) *
$num))+ ,
,)), -
Name** 
=** 
$str** $
,**$ %
Price**& +
=**+ ,
$num**, 2
,**2 3
ShortDescription++ (
=++( )
$str++) 4
,++4 5
LongDescription,, '
=,,' (
$str,,( 3
,,,3 4
Category--  
=--! "
_categoryRepository--# 6
.--6 7

Categories--7 A
.--A B
ToList--B H
(--H I
)--I J
[--J K
$num--K L
]--L M
,--M N
ImageUrl..  
=..! "
$str.." s
,..s t
InStock..u |
=..| }
true	..} Å
,
..Å Ç
ImageThumbnailUrl// )
=//* +
$str//+ |
}//| }
,//} ~
new11 
Flower11 
{11  
FlowerId11  (
=11) *
$num11+ ,
,11, -
Name22 
=22 
$str22 %
,22% &
Price22' ,
=22, -
$num22- 3
,223 4
ShortDescription33 (
=33( )
$str33) 8
,338 9
LongDescription44 '
=44' (
$str44( 0
,440 1
Category55  
=55! "
_categoryRepository55# 6
.556 7

Categories557 A
.55A B
ToList55B H
(55H I
)55I J
[55J K
$num55K L
]55L M
,55M N
ImageUrl66  
=66! "
$str66" p
,66p q
InStock66r y
=66y z
true66z ~
,66~ 
ImageThumbnailUrl77 )
=77* +
$str77+ y
}77y z
}88 
;88 
}99 
}:: 	
public<< 
IEnumerable<< 
<<< 
Flower<< !
><<! "
FlowerPresentation<<# 5
{<<6 7
get<<8 ;
;<<; <
}<<= >
public>> 
IEnumerable>> 
<>> 
FlowerViewModel>> *
>>>* +
FlowersAsViewModel>>, >
=>>>? A
throw>>B G
new>>H K#
NotImplementedException>>L c
(>>c d
)>>d e
;>>e f
public@@ 
IEnumerable@@ 
<@@ 
string@@ !
>@@! "
FlowersNames@@# /
=>@@0 2
throw@@3 8
new@@9 <#
NotImplementedException@@= T
(@@T U
)@@U V
;@@V W
publicBB 
boolBB 
	AddFlowerBB 
(BB 
FlowerBB $
flowerBB% +
)BB+ ,
{CC 	
throwDD 
newDD #
NotImplementedExceptionDD -
(DD- .
)DD. /
;DD/ 0
}EE 	
publicGG 
boolGG 
DeleteFlowerGG  
(GG  !
FlowerGG! '
flowerGG( .
)GG. /
{HH 	
throwII 
newII #
NotImplementedExceptionII -
(II- .
)II. /
;II/ 0
}JJ 	
publicLL 
FlowerLL 
GetFlowerByIdLL #
(LL# $
intLL$ '
flowerIdLL( 0
)LL0 1
{MM 	
throwNN 
newNN 
SystemNN 
.NN #
NotImplementedExceptionNN 4
(NN4 5
)NN5 6
;NN6 7
}OO 	
publicQQ 
boolQQ 
UpdateFlowerQQ  
(QQ  !
FlowerQQ! '
flowerQQ( .
)QQ. /
{RR 	
throwSS 
newSS #
NotImplementedExceptionSS -
(SS- .
)SS. /
;SS/ 0
}TT 	
}UU 
}VV ¡-
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\Repository\OrderRepository.cs
	namespace 	
	FlowerApp
 
. 

Repository 
{ 
public		 

class		 
OrderRepository		  
:		! "
IOrderRepository		# 3
{

 
private 
readonly 
AppDbContext %
_appDbContext& 3
;3 4
private 
readonly 
ShoppingCart %
_shoppingCart& 3
;3 4
public 
OrderRepository 
( 
AppDbContext +
appDbContext, 8
,8 9
ShoppingCart: F
shoppingCartG S
)S T
{ 	
_appDbContext 
= 
appDbContext (
;( )
_shoppingCart 
= 
shoppingCart (
;( )
} 	
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8 
GetOrdersAsViewModel9 M
(M N
stringN T
userNameU ]
=^ _
$str` b
)b c
{ 	
List 
< 
Order 
> 
orders 
=  
null! %
;% &
if 
( 
string 
. 
IsNullOrEmpty $
($ %
userName% -
)- .
). /
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
ToList. 4
(4 5
)5 6
;6 7
} 
else 
{ 
orders 
= 
_appDbContext &
.& '
Orders' -
.- .
Where. 3
(3 4
x4 5
=>6 8
x9 :
.: ;
Email; @
==A C
userNameD L
)L M
.M N
ToListN T
(T U
)U V
;V W
} 
var   #
orderHistoryDetailsList   '
=  ( )
new  * -
List  . 2
<  2 3(
OrderHistoryDetailsViewModel  3 O
>  O P
(  P Q
)  Q R
;  R S
foreach!! 
(!! 
var!! 
order!! 
in!! !
orders!!" (
)!!( )
{"" #
orderHistoryDetailsList## '
.##' (
Add##( +
(##+ ,&
MapDbOrderToOrderViewModel##, F
(##F G
order##G L
)##L M
)##M N
;##N O
}$$ 
return&& #
orderHistoryDetailsList&& *
;&&* +
}'' 	
public)) 
void)) 
CreateOrder)) 
())  
Order))  %
order))& +
)))+ ,
{** 	
order++ 
.++ 
OrderPlaced++ 
=++ 
DateTime++  (
.++( )
Now++) ,
;++, -
_appDbContext-- 
.-- 
Orders--  
.--  !
Add--! $
(--$ %
order--% *
)--* +
;--+ ,
var// 
shoppingCartItems// !
=//" #
_shoppingCart//$ 1
.//1 2
ShoppingCartItems//2 C
;//C D
foreach11 
(11 
var11 
shoppingCartItem11 )
in11* ,
shoppingCartItems11- >
)11> ?
{22 
var33 
orderDetail33 
=33  !
new33" %
OrderDetail33& 1
{44 
Amount55 
=55 
shoppingCartItem55 -
.55- .
Amount55. 4
,554 5
FlowerId66 
=66 
shoppingCartItem66 /
.66/ 0
Flower660 6
.666 7
FlowerId667 ?
,66? @
OrderId77 
=77 
order77 #
.77# $
OrderId77$ +
,77+ ,
Price88 
=88 
shoppingCartItem88 ,
.88, -
Flower88- 3
.883 4
Price884 9
}99 
;99 
_appDbContext;; 
.;; 
OrderDetails;; *
.;;* +
Add;;+ .
(;;. /
orderDetail;;/ :
);;: ;
;;;; <
}<< 
_appDbContext>> 
.>> 
SaveChanges>> %
(>>% &
)>>& '
;>>' (
}?? 	
privateAA (
OrderHistoryDetailsViewModelAA ,&
MapDbOrderToOrderViewModelAA- G
(AAG H
OrderAAH M
dbOrderAAN U
)AAU V
{BB 	
returnCC 
newCC (
OrderHistoryDetailsViewModelCC 3
{DD 
OrderIdEE 
=EE 
dbOrderEE !
.EE! "
OrderIdEE" )
,EE) *
AddressFF 
=FF 
dbOrderFF !
.FF! "
AddressLine1FF" .
+FF/ 0
$strFF1 4
+FF5 6
dbOrderFF7 >
.FF> ?
AddressLine2FF? K
,FFK L
CityGG 
=GG 
dbOrderGG 
.GG 
CityGG #
,GG# $
	FirstNameHH 
=HH 
dbOrderHH #
.HH# $
	FirstNameHH$ -
,HH- .
LastNameII 
=II 
dbOrderII "
.II" #
LastNameII# +
,II+ ,
	PayMethodJJ 
=JJ 
dbOrderJJ #
.JJ# $
	PayMethodJJ$ -
,JJ- .
PhoneNumberKK 
=KK 
dbOrderKK %
.KK% &
PhoneNumberKK& 1
,KK1 2
ShippingMethodLL 
=LL  
dbOrderLL! (
.LL( )
ShippingMethodLL) 7
}MM 
;MM 
}NN 	
}OO 
}PP ’.
5E:\Projects\FlowerShop\FlowerApp\FlowerApp\Startup.cs
	namespace 	
	FlowerApp
 
{ 
public 

class 
Startup 
{ 
private 
IConfigurationRoot "
_configurationRoot# 5
;5 6
public 
Startup 
( 
IHostingEnvironment *
hostingEnvironment+ =
)= >
{ 	
_configurationRoot 
=  
new! $ 
ConfigurationBuilder% 9
(9 :
): ;
. 
SetBasePath '
(' (
hostingEnvironment( :
.: ;
ContentRootPath; J
)J K
. 
AddJsonFile '
(' (
$str( :
): ;
. 
Build !
(! "
)" #
;# $
} 	
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddDbContext !
<! "
AppDbContext" .
>. /
(/ 0
options0 7
=>8 :
options, 3
.3 4
UseSqlServer4 @
(@ A
_configurationRootA S
.S T
GetConnectionStringT g
(g h
$strh {
){ |
)| }
)} ~
;~ 
services!! 
.!! 
AddIdentity!!  
<!!  !
ApplicationUser!!! 0
,!!0 1
IdentityRole!!2 >
>!!> ?
(!!? @
options!!@ G
=>!!H J
{"" 
options## 
.## 
Password##  
.##  !
RequireDigit##! -
=##. /
true##0 4
;##4 5
options$$ 
.$$ 
Password$$  
.$$  !
RequireLowercase$$! 1
=$$2 3
true$$4 8
;$$8 9
options%% 
.%% 
Password%%  
.%%  !
RequireUppercase%%! 1
=%%2 3
true%%4 8
;%%8 9
options&& 
.&& 
Password&&  
.&&  !"
RequireNonAlphanumeric&&! 7
=&&8 9
false&&: ?
;&&? @
options'' 
.'' 
User'' 
.'' 
RequireUniqueEmail'' /
=''0 1
false''2 7
;''7 8
}(( 
)(( 
.)) $
AddEntityFrameworkStores)) )
<))) *
AppDbContext))* 6
>))6 7
())7 8
)))8 9
;))9 :
services++ 
.++ 
AddTransient++ !
<++! "
ICategoryRepository++" 5
,++5 6
CategoryRepository++7 I
>++I J
(++J K
)++K L
;++L M
services,, 
.,, 
AddTransient,, !
<,,! "
IFlowerRepository,," 3
,,,3 4
FlowerRepository,,5 E
>,,E F
(,,F G
),,G H
;,,H I
services-- 
.-- 
AddSingleton-- !
<--! " 
IHttpContextAccessor--" 6
,--6 7
HttpContextAccessor--8 K
>--K L
(--L M
)--M N
;--N O
services.. 
... 
	AddScoped.. 
<.. 
ShoppingCart.. +
>..+ ,
(.., -
sp..- /
=>..0 2
ShoppingCart..3 ?
...? @
GetCart..@ G
(..G H
sp..H J
)..J K
)..K L
;..L M
services// 
.// 
AddTransient// !
<//! "
IOrderRepository//" 2
,//2 3
OrderRepository//4 C
>//C D
(//D E
)//E F
;//F G
services11 
.11 
AddMvc11 
(11 
)11 
;11 
services33 
.33 
AddMemoryCache33 #
(33# $
)33$ %
;33% &
services44 
.44 

AddSession44 
(44  
)44  !
;44! "
}55 	
public88 
void88 
	Configure88 
(88 
IApplicationBuilder88 1
app882 5
,885 6
IHostingEnvironment887 J
env88K N
,88N O
ILoggerFactory88P ^
loggerFactory88_ l
)88l m
{99 	
app:: 
.:: %
UseDeveloperExceptionPage:: )
(::) *
)::* +
;::+ ,
app;; 
.;; 
UseStatusCodePages;; "
(;;" #
);;# $
;;;$ %
app<< 
.<< 
UseStaticFiles<< 
(<< 
)<<  
;<<  !
app== 
.== 

UseSession== 
(== 
)== 
;== 
app>> 
.>> 
UseIdentity>> 
(>> 
)>> 
;>> 
appAA 
.AA 
UseMvcAA 
(AA 
routesAA 
=>AA  
{BB 
routesCC 
.CC 
MapRouteCC 
(CC  
nameDD 
:DD 
$strDD *
,DD* +
templateEE 
:EE 
$strEE ;
,EE; <
defaultsFF 
:FF 
newFF !
{FF" #

ControllerFF$ .
=FF/ 0
$strFF1 9
,FF9 :
actionFF; A
=FFB C
$strFFD J
}FFK L
)FFL M
;FFM N
routesHH 
.HH 
MapRouteHH 
(HH  
nameII 
:II 
$strII #
,II# $
templateJJ 
:JJ 
$strJJ F
)JJF G
;JJG H
}KK 
)KK 
;KK 
DbInitializerMM 
.MM 
SeedMM 
(MM 
appMM "
)MM" #
;MM# $
}NN 	
}OO 
}PP ‰

GE:\Projects\FlowerShop\FlowerApp\FlowerApp\TagHelpers\EmailTagHelper.cs
	namespace 	
	FlowerApp
 
. 

TagHelpers 
{ 
public 

class 
EmailTagHelper 
:  !
	TagHelper" +
{ 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
Content		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public 
override 
void 
Process $
($ %
TagHelperContext% 5
context6 =
,= >
TagHelperOutput? N
outputO U
)U V
{ 	
output 
. 
TagName 
= 
$str  
;  !
output 
. 

Attributes 
. 
SetAttribute *
(* +
$str+ 1
,1 2
$str3 <
+= >
Address? F
)F G
;G H
output 
. 
Content 
. 

SetContent %
(% &
Content& -
)- .
;. /
} 	
} 
} ≥
KE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddFlowerViewModel #
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
ShortDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
string		 
LongDescription		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ô
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddRoleViewModel !
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
RoleName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
}

 
} ∂
IE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\AddUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
AddUserViewModel !
{ 
[ 	
Required	 
] 
[		 	
Display			 
(		 
Name		 
=		 
$str		 #
)		# $
]		$ %
public

 
string

 
UserName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
EmailAddress '
)' (
]( )
[ 	
RegularExpression	 
( 
$str 6
,6 7
ErrorMessage 
= 
$str Q
)Q R
]R S
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public   
DateTime   
	Birthdate   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public"" 
string"" 
City"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
public$$ 
string$$ 
Country$$ 
{$$ 
get$$  #
;$$# $
set$$% (
;$$( )
}$$* +
}%% 
}&& ’
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\CategoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
CategoryViewModel "
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CategoryName 
{  !
get" %
;% &
set' *
;* +
}, -
} 
}		 ≥
RE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ClaimsManagementViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class %
ClaimsManagementViewModel *
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ClaimId 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
List		 
<		 
string		 
>		 
AllClaimsList		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
}

 
} »
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditFlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditFlowerViewModel $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
string 
LongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool  
IsFlowerPresentation (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
InStock 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditRoleViewModel "
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! =
)

= >
]

> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
RoleName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< 
string 
> 
Users !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ©
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\EditUserViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
EditUserViewModel "
{ 
public		 
string		 
Id		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
[ 	
Required	 
( 
ErrorMessage 
=  
$str! =
)= >
]> ?
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
( 
ErrorMessage 
=  
$str! >
)> ?
]? @
[ 	
Display	 
( 
Name 
= 
$str $
)$ %
]% &
[ 	
DataType	 
( 
DataType 
. 
Date 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
	Birthdate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
City 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Country 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ø
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerDetailViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
FlowerDetailViewModel &
{ 
public 
Flower 
Flower 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ñ
LE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerListViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerListViewModel $
{ 
public 
IEnumerable 
< 
Flower !
>! "
Flowers# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public

 
string

 
CurrentCategory

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
} 
} ≠
HE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\FlowerViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
FlowerViewModel  
{ 
public 
int 
FlowerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
ShortDescription		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageThumbnailUrl '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} »
FE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\HomeViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
HomeViewModel 
{ 
public 
IEnumerable 
< 
Flower !
>! "
FlowerPresentation# 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public

 
IEnumerable

 
<

 
string

 !
>

! "
FlowersName

# .
{

/ 0
get

1 4
;

4 5
set

6 9
;

9 :
}

; <
} 
} Â
GE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\LoginViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
LoginViewModel 
{ 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str #
)# $
]$ %
public		 
string		 
UserName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	ReturnUrl 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ï
UE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryDetailsViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class (
OrderHistoryDetailsViewModel -
{ 
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
City		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public

 
string

 
ShippingMethod

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	PayMethod 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} å
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\OrderHistoryViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
OrderHistoryViewModel &
{ 
public 
IEnumerable 
< (
OrderHistoryDetailsViewModel 7
>7 8
Orders9 ?
{@ A
getB E
;E F
setG J
;J K
}L M
} 
}		 Ò
NE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\ShoppingCartViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class !
ShoppingCartViewModel &
{ 
public 
ShoppingCart 
ShoppingCart (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public		 
decimal		 
ShoppingCartTotal		 (
{		) *
get		+ .
;		. /
set		0 3
;		3 4
}		5 6
}

 
} π
JE:\Projects\FlowerShop\FlowerApp\FlowerApp\ViewModels\UserRoleViewModel.cs
	namespace 	
	FlowerApp
 
. 

ViewModels 
{ 
public 

class 
UserRoleViewModel "
{ 
public 
UserRoleViewModel  
(  !
)! "
{		 	
Users

 
=

 
new

 
List

 
<

 
IdentityUser

 )
>

) *
(

* +
)

+ ,
;

, -
} 	
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
RoleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
IdentityUser  
>  !
Users" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} 